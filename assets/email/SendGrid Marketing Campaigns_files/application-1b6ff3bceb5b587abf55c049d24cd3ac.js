!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=re.type(t);return"function"===n||re.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(re.isFunction(e))return re.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return re.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(de.test(e))return re.filter(e,t,n);e=re.filter(e,t)}return re.grep(t,function(t){return re.inArray(t,e)>=0!==n})}function r(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function o(t){var e=we[t]={};return re.each(t.match(be)||[],function(t,n){e[n]=!0}),e}function a(){fe.addEventListener?(fe.removeEventListener("DOMContentLoaded",s,!1),t.removeEventListener("load",s,!1)):(fe.detachEvent("onreadystatechange",s),t.detachEvent("onload",s))}function s(){(fe.addEventListener||"load"===event.type||"complete"===fe.readyState)&&(a(),re.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace($e,"-$1").toLowerCase();if(n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Ce.test(n)?re.parseJSON(n):n}catch(r){}re.data(t,e,n)}else n=void 0}return n}function u(t){var e;for(e in t)if(("data"!==e||!re.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function c(t,e,n,i){if(re.acceptData(t)){var r,o,a=re.expando,s=t.nodeType,l=s?re.cache:t,u=s?t[a]:t[a]&&a;if(u&&l[u]&&(i||l[u].data)||void 0!==n||"string"!=typeof e)return u||(u=s?t[a]=G.pop()||re.guid++:a),l[u]||(l[u]=s?{}:{toJSON:re.noop}),("object"==typeof e||"function"==typeof e)&&(i?l[u]=re.extend(l[u],e):l[u].data=re.extend(l[u].data,e)),o=l[u],i||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[re.camelCase(e)]=n),"string"==typeof e?(r=o[e],null==r&&(r=o[re.camelCase(e)])):r=o,r}}function h(t,e,n){if(re.acceptData(t)){var i,r,o=t.nodeType,a=o?re.cache:t,s=o?t[re.expando]:re.expando;if(a[s]){if(e&&(i=n?a[s]:a[s].data)){re.isArray(e)?e=e.concat(re.map(e,re.camelCase)):e in i?e=[e]:(e=re.camelCase(e),e=e in i?[e]:e.split(" ")),r=e.length;for(;r--;)delete i[e[r]];if(n?!u(i):!re.isEmptyObject(i))return}(n||(delete a[s].data,u(a[s])))&&(o?re.cleanData([t],!0):ne.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function d(){return!0}function p(){return!1}function f(){try{return fe.activeElement}catch(t){}}function g(t){var e=Le.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function m(t,e){var n,i,r=0,o=typeof t.getElementsByTagName!==ke?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==ke?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],n=t.childNodes||t;null!=(i=n[r]);r++)!e||re.nodeName(i,e)?o.push(i):re.merge(o,m(i,e));return void 0===e||e&&re.nodeName(t,e)?re.merge([t],o):o}function v(t){De.test(t.type)&&(t.defaultChecked=t.checked)}function y(t,e){return re.nodeName(t,"table")&&re.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function b(t){return t.type=(null!==re.find.attr(t,"type"))+"/"+t.type,t}function w(t){var e=Ye.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function _(t,e){for(var n,i=0;null!=(n=t[i]);i++)re._data(n,"globalEval",!e||re._data(e[i],"globalEval"))}function x(t,e){if(1===e.nodeType&&re.hasData(t)){var n,i,r,o=re._data(t),a=re._data(e,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,r=s[n].length;r>i;i++)re.event.add(e,n,s[n][i])}a.data&&(a.data=re.extend({},a.data))}}function k(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ne.noCloneEvent&&e[re.expando]){r=re._data(e);for(i in r.events)re.removeEvent(e,i,r.handle);e.removeAttribute(re.expando)}"script"===n&&e.text!==t.text?(b(e).text=t.text,w(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ne.html5Clone&&t.innerHTML&&!re.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&De.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function C(e,n){var i,r=re(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(r[0]))?i.display:re.css(r[0],"display");return r.detach(),o}function $(t){var e=fe,n=Ze[t];return n||(n=C(t,e),"none"!==n&&n||(Ke=(Ke||re("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Ke[0].contentWindow||Ke[0].contentDocument).document,e.write(),e.close(),n=C(t,e),Ke.detach()),Ze[t]=n),n}function S(t,e){return{get:function(){var n=t();if(null!=n)return n?void delete this.get:(this.get=e).apply(this,arguments)}}}function M(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=pn.length;r--;)if(e=pn[r]+n,e in t)return e;return i}function T(t,e){for(var n,i,r,o=[],a=0,s=t.length;s>a;a++)i=t[a],i.style&&(o[a]=re._data(i,"olddisplay"),n=i.style.display,e?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Te(i)&&(o[a]=re._data(i,"olddisplay",$(i.nodeName)))):(r=Te(i),(n&&"none"!==n||!r)&&re._data(i,"olddisplay",r?n:re.css(i,"display"))));for(a=0;s>a;a++)i=t[a],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[a]||"":"none"));return t}function E(t,e,n){var i=un.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function D(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=re.css(t,n+Me[o],!0,r)),i?("content"===n&&(a-=re.css(t,"padding"+Me[o],!0,r)),"margin"!==n&&(a-=re.css(t,"border"+Me[o]+"Width",!0,r))):(a+=re.css(t,"padding"+Me[o],!0,r),"padding"!==n&&(a+=re.css(t,"border"+Me[o]+"Width",!0,r)));return a}function N(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=tn(t),a=ne.boxSizing&&"border-box"===re.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=en(t,e,o),(0>r||null==r)&&(r=t.style[e]),rn.test(r))return r;i=a&&(ne.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+D(t,e,n||(a?"border":"content"),i,o)+"px"}function F(t,e,n,i,r){return new F.prototype.init(t,e,n,i,r)}function A(){return setTimeout(function(){fn=void 0}),fn=re.now()}function H(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=Me[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function P(t,e,n){for(var i,r=(wn[e]||[]).concat(wn["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,e,t))return i}function L(t,e,n){var i,r,o,a,s,l,u,c,h=this,d={},p=t.style,f=t.nodeType&&Te(t),g=re._data(t,"fxshow");n.queue||(s=re._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,re.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=re.css(t,"display"),c="none"===u?re._data(t,"olddisplay")||$(t.nodeName):u,"inline"===c&&"none"===re.css(t,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==$(t.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",ne.shrinkWrapBlocks()||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in e)if(r=e[i],mn.exec(r)){if(delete e[i],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;f=!0}d[i]=g&&g[i]||re.style(t,i)}else u=void 0;if(re.isEmptyObject(d))"inline"===("none"===u?$(t.nodeName):u)&&(p.display=u);else{g?"hidden"in g&&(f=g.hidden):g=re._data(t,"fxshow",{}),o&&(g.hidden=!f),f?re(t).show():h.done(function(){re(t).hide()}),h.done(function(){var e;re._removeData(t,"fxshow");for(e in d)re.style(t,e,d[e])});for(i in d)a=P(f?g[i]:0,i,h),i in g||(g[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function O(t,e){var n,i,r,o,a;for(n in t)if(i=re.camelCase(n),r=e[i],o=t[n],re.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),a=re.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function I(t,e,n){var i,r,o=0,a=bn.length,s=re.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=fn||A(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,o=1-i,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(t,[u,o,n]),1>o&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:re.extend({},e),opts:re.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:fn||A(),duration:n.duration,tweens:[],createTween:function(e,n){var i=re.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),c=u.props;for(O(c,u.opts.specialEasing);a>o;o++)if(i=bn[o].call(u,t,c,u.opts))return i;return re.map(c,P,u),re.isFunction(u.opts.start)&&u.opts.start.call(t,u),re.fx.timer(re.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function j(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(be)||[];if(re.isFunction(n))for(;i=o[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function R(t,e,n,i){function r(s){var l;return o[s]=!0,re.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var o={},a=t===qn;return r(e.dataTypes[0])||!o["*"]&&r("*")}function z(t,e){var n,i,r=re.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&re.extend(!0,t,n),t}function B(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){o=a;break}i||(i=a)}o=o||i}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function U(t,e,n,i){var r,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(r in u)if(s=r.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[r]:u[r]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function q(t,e,n,i){var r;if(re.isArray(e))re.each(e,function(e,r){n||Gn.test(t)?i(t,r):q(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==re.type(e))i(t,e);else for(r in e)q(t+"["+r+"]",e[r],n,i)}function W(){try{return new t.XMLHttpRequest}catch(e){}}function V(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function Y(t){return re.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var G=[],Q=G.slice,X=G.concat,J=G.push,K=G.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ne={},ie="1.11.1",re=function(t,e){return new re.fn.init(t,e)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,se=/-([\da-z])/gi,le=function(t,e){return e.toUpperCase()};re.fn=re.prototype={jquery:ie,constructor:re,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:Q.call(this)},pushStack:function(t){var e=re.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return re.each(this,t,e)},map:function(t){return this.pushStack(re.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:G.sort,splice:G.splice},re.extend=re.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||re.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(r=arguments[s]))for(i in r)t=a[i],n=r[i],a!==n&&(u&&n&&(re.isPlainObject(n)||(e=re.isArray(n)))?(e?(e=!1,o=t&&re.isArray(t)?t:[]):o=t&&re.isPlainObject(t)?t:{},a[i]=re.extend(u,o,n)):void 0!==n&&(a[i]=n));return a},re.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===re.type(t)},isArray:Array.isArray||function(t){return"array"===re.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!re.isArray(t)&&t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==re.type(t)||t.nodeType||re.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&re.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ae,"ms-").replace(se,le)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,o=0,a=t.length,s=n(t);if(i){if(s)for(;a>o&&(r=e.apply(t[o],i),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],i),r===!1)break}else if(s)for(;a>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(oe,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?re.merge(i,"string"==typeof t?[t]:t):J.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(K)return K.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;n>i;)t[r++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[r++]=e[i++];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],o=0,a=t.length,s=!n;a>o;o++)i=!e(t[o],o),i!==s&&r.push(t[o]);return r},map:function(t,e,i){var r,o=0,a=t.length,s=n(t),l=[];if(s)for(;a>o;o++)r=e(t[o],o,i),null!=r&&l.push(r);else for(o in t)r=e(t[o],o,i),null!=r&&l.push(r);return X.apply([],l)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(r=t[e],e=t,t=r),re.isFunction(t)?(n=Q.call(arguments,2),i=function(){return t.apply(e||this,n.concat(Q.call(arguments)))},i.guid=t.guid=t.guid||re.guid++,i):void 0},now:function(){return+new Date},support:ne}),re.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var ue=function(t){function e(t,e,n,i){var r,o,a,s,l,u,h,p,f,g;if((e?e.ownerDocument||e:R)!==F&&N(e),e=e||F,n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=e.nodeType)&&9!==s)return[];if(H&&!i){if(r=ye.exec(t))if(a=r[1]){if(9===s){if(o=e.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&I(e,o)&&o.id===a)return n.push(o),n}else{if(r[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((a=r[3])&&_.getElementsByClassName&&e.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(a)),n}if(_.qsa&&(!P||!P.test(t))){if(p=h=j,f=e,g=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(u=$(t),(h=e.getAttribute("id"))?p=h.replace(we,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+d(u[l]);f=be.test(t)&&c(e.parentNode)||e,g=u.join(",")}if(g)try{return Z.apply(n,f.querySelectorAll(g)),n}catch(m){}finally{h||e.removeAttribute("id")}}}return M(t.replace(le,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[j]=!0,t}function r(t){var e=F.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=t.length;i--;)x.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function c(t){return t&&typeof t.getElementsByTagName!==Y&&t}function h(){}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function p(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=B++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,a){var s,l,u=[z,o];if(a){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if(l=e[j]||(e[j]={}),(s=l[i])&&s[0]===z&&s[1]===o)return u[2]=s[2];if(l[i]=u,u[2]=t(e,n,a))return!0}}}function f(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function g(t,n,i){for(var r=0,o=n.length;o>r;r++)e(t,n[r],i);return i}function m(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,u=null!=e;l>s;s++)(o=t[s])&&(!n||n(o,i,r))&&(a.push(o),u&&e.push(s));return a}function v(t,e,n,r,o,a){return r&&!r[j]&&(r=v(r)),o&&!o[j]&&(o=v(o,a)),i(function(i,a,s,l){var u,c,h,d=[],p=[],f=a.length,v=i||g(e||"*",s.nodeType?[s]:s,[]),y=!t||!i&&e?v:m(v,d,t,s,l),b=n?o||(i?t:f||r)?[]:a:y;if(n&&n(y,b,s,l),r)for(u=m(b,p),r(u,[],s,l),c=u.length;c--;)(h=u[c])&&(b[p[c]]=!(y[p[c]]=h));if(i){if(o||t){if(o){for(u=[],c=b.length;c--;)(h=b[c])&&u.push(y[c]=h);o(null,b=[],u,l)}for(c=b.length;c--;)(h=b[c])&&(u=o?ee.call(i,h):d[c])>-1&&(i[u]=!(a[u]=h))}}else b=m(b===a?b.splice(f,b.length):b),o?o(null,a,b,l):Z.apply(a,b)})}function y(t){for(var e,n,i,r=t.length,o=x.relative[t[0].type],a=o||x.relative[" "],s=o?1:0,l=p(function(t){return t===e},a,!0),u=p(function(t){return ee.call(e,t)>-1},a,!0),c=[function(t,n,i){return!o&&(i||n!==T)||((e=n).nodeType?l(t,n,i):u(t,n,i))}];r>s;s++)if(n=x.relative[t[s].type])c=[p(f(c),n)];else{if(n=x.filter[t[s].type].apply(null,t[s].matches),n[j]){for(i=++s;r>i&&!x.relative[t[i].type];i++);return v(s>1&&f(c),s>1&&d(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(le,"$1"),n,i>s&&y(t.slice(s,i)),r>i&&y(t=t.slice(i)),r>i&&d(t))}c.push(n)}return f(c)}function b(t,n){var r=n.length>0,o=t.length>0,a=function(i,a,s,l,u){var c,h,d,p=0,f="0",g=i&&[],v=[],y=T,b=i||o&&x.find.TAG("*",u),w=z+=null==y?1:Math.random()||.1,_=b.length;for(u&&(T=a!==F&&a);f!==_&&null!=(c=b[f]);f++){if(o&&c){for(h=0;d=t[h++];)if(d(c,a,s)){l.push(c);break}u&&(z=w)}r&&((c=!d&&c)&&p--,i&&g.push(c))}if(p+=f,r&&f!==p){for(h=0;d=n[h++];)d(g,v,a,s);if(i){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=J.call(l));v=m(v)}Z.apply(l,v),u&&!i&&v.length>0&&p+n.length>1&&e.uniqueSort(l)}return u&&(z=w,T=y),g};return r?i(a):a}var w,_,x,k,C,$,S,M,T,E,D,N,F,A,H,P,L,O,I,j="sizzle"+-new Date,R=t.document,z=0,B=0,U=n(),q=n(),W=n(),V=function(t,e){return t===e&&(D=!0),0},Y="undefined",G=1<<31,Q={}.hasOwnProperty,X=[],J=X.pop,K=X.push,Z=X.push,te=X.slice,ee=X.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),ae="\\["+ie+"*("+re+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ie+"*\\]",se=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),ue=new RegExp("^"+ie+"*,"+ie+"*"),ce=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),he=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=new RegExp(se),pe=new RegExp("^"+oe+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,we=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),xe=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(X=te.call(R.childNodes),R.childNodes),X[R.childNodes.length].nodeType}catch(ke){Z={apply:X.length?function(t,e){K.apply(t,te.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}_=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},N=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:R,i=n.defaultView;return n!==F&&9===n.nodeType&&n.documentElement?(F=n,A=n.documentElement,H=!C(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){N()},!1):i.attachEvent&&i.attachEvent("onunload",function(){N()})),_.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=r(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=ve.test(n.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),_.getById=r(function(t){return A.appendChild(t).id=j,!n.getElementsByName||!n.getElementsByName(j).length}),_.getById?(x.find.ID=function(t,e){if(typeof e.getElementById!==Y&&H){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(t){var e=t.replace(_e,xe);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(_e,xe);return function(t){var n=typeof t.getAttributeNode!==Y&&t.getAttributeNode("id");return n&&n.value===e}}),x.find.TAG=_.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==Y?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=_.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==Y&&H?e.getElementsByClassName(t):void 0},L=[],P=[],(_.qsa=ve.test(n.querySelectorAll))&&(r(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&P.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||P.push("\\["+ie+"*(?:value|"+ne+")"),t.querySelectorAll(":checked").length||P.push(":checked")}),r(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&P.push("name"+ie+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(_.matchesSelector=ve.test(O=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&r(function(t){_.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),L.push("!=",se)}),P=P.length&&new RegExp(P.join("|")),L=L.length&&new RegExp(L.join("|")),e=ve.test(A.compareDocumentPosition),I=e||ve.test(A.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return D=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!_.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===R&&I(R,t)?-1:e===n||e.ownerDocument===R&&I(R,e)?1:E?ee.call(E,t)-ee.call(E,e):0:4&i?-1:1)}:function(t,e){if(t===e)return D=!0,0;var i,r=0,o=t.parentNode,s=e.parentNode,l=[t],u=[e];if(!o||!s)return t===n?-1:e===n?1:o?-1:s?1:E?ee.call(E,t)-ee.call(E,e):0;if(o===s)return a(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)u.unshift(i);for(;l[r]===u[r];)r++;return r?a(l[r],u[r]):l[r]===R?-1:u[r]===R?1:0},n):F},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==F&&N(t),n=n.replace(he,"='$1']"),!(!_.matchesSelector||!H||L&&L.test(n)||P&&P.test(n)))try{var i=O.call(t,n);if(i||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,F,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==F&&N(t),I(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==F&&N(t);var n=x.attrHandle[e.toLowerCase()],i=n&&Q.call(x.attrHandle,e.toLowerCase())?n(t,e,!H):void 0;return void 0!==i?i:_.attributes||!H?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(D=!_.detectDuplicates,E=!_.sortStable&&t.slice(0),t.sort(V),D){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return E=null,t},k=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=k(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=k(e);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_e,xe),t[3]=(t[3]||t[4]||t[5]||"").replace(_e,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&de.test(n)&&(e=$(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_e,xe).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==Y&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,d,p,f,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s;if(m){if(o){for(;g;){for(h=e;h=h[g];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?m.firstChild:m.lastChild],a&&y){for(c=m[j]||(m[j]={}),u=c[t]||[],p=u[0]===z&&u[1],d=u[0]===z&&u[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===e){c[t]=[z,p,d];break}}else if(y&&(u=(e[j]||(e[j]={}))[t])&&u[0]===z)d=u[1];else for(;(h=++p&&h&&h[g]||(d=p=0)||f.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[j]||(h[j]={}))[t]=[z,d]),h!==e)););return d-=r,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,n){var r,o=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[j]?o(n):o.length>1?(r=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),a=r.length;a--;)i=ee.call(t,r[a]),t[i]=!(e[i]=r[a])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=S(t.replace(le,"$1"));return r[j]?i(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||k(e)).indexOf(t)>-1}}),lang:i(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_e,xe).toLowerCase(),function(e){var n;do if(n=H?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===A},focus:function(t){return t===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},x.pseudos.nth=x.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})x.pseudos[w]=l(w);return h.prototype=x.filters=x.pseudos,x.setFilters=new h,$=e.tokenize=function(t,n){var i,r,o,a,s,l,u,c=q[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=x.preFilter;s;){(!i||(r=ue.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=ce.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(le," ")}),s=s.slice(i.length));for(a in x.filter)!(r=fe[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):q(t,l).slice(0)},S=e.compile=function(t,e){var n,i=[],r=[],o=W[t+" "];if(!o){for(e||(e=$(t)),n=e.length;n--;)o=y(e[n]),o[j]?i.push(o):r.push(o);o=W(t,b(r,i)),o.selector=t}return o},M=e.select=function(t,e,n,i){var r,o,a,s,l,u="function"==typeof t&&t,h=!i&&$(t=u.selector||t);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&_.getById&&9===e.nodeType&&H&&x.relative[o[1].type]){if(e=(x.find.ID(a.matches[0].replace(_e,xe),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=fe.needsContext.test(t)?0:o.length;r--&&(a=o[r],!x.relative[s=a.type]);)if((l=x.find[s])&&(i=l(a.matches[0].replace(_e,xe),be.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(r,1),t=i.length&&d(o),!t)return Z.apply(n,i),n;
break}}return(u||S(t,h))(i,e,!H,n,be.test(t)&&c(e.parentNode)||e),n},_.sortStable=j.split("").sort(V).join("")===j,_.detectDuplicates=!!D,N(),_.sortDetached=r(function(t){return 1&t.compareDocumentPosition(F.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(ne,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);re.find=ue,re.expr=ue.selectors,re.expr[":"]=re.expr.pseudos,re.unique=ue.uniqueSort,re.text=ue.getText,re.isXMLDoc=ue.isXML,re.contains=ue.contains;var ce=re.expr.match.needsContext,he=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,de=/^.[^:#\[\.,]*$/;re.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?re.find.matchesSelector(i,t)?[i]:[]:re.find.matches(t,re.grep(e,function(t){return 1===t.nodeType}))},re.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(re(t).filter(function(){for(e=0;r>e;e++)if(re.contains(i[e],this))return!0}));for(e=0;r>e;e++)re.find(t,i[e],n);return n=this.pushStack(r>1?re.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&ce.test(t)?re(t):t||[],!1).length}});var pe,fe=t.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,me=re.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ge.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||pe).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof re?e[0]:e,re.merge(this,re.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:fe,!0)),he.test(n[1])&&re.isPlainObject(e))for(n in e)re.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(i=fe.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return pe.find(t);this.length=1,this[0]=i}return this.context=fe,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):re.isFunction(t)?"undefined"!=typeof pe.ready?pe.ready(t):t(re):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),re.makeArray(t,this))};me.prototype=re.fn,pe=re(fe);var ve=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};re.extend({dir:function(t,e,n){for(var i=[],r=t[e];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!re(r).is(n));)1===r.nodeType&&i.push(r),r=r[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),re.fn.extend({has:function(t){var e,n=re(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(re.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,o=[],a=ce.test(t)||"string"!=typeof t?re(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&re.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?re.unique(o):o)},index:function(t){return t?"string"==typeof t?re.inArray(this[0],re(t)):re.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(re.unique(re.merge(this.get(),re(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),re.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return re.dir(t,"parentNode")},parentsUntil:function(t,e,n){return re.dir(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return re.dir(t,"nextSibling")},prevAll:function(t){return re.dir(t,"previousSibling")},nextUntil:function(t,e,n){return re.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return re.dir(t,"previousSibling",n)},siblings:function(t){return re.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return re.sibling(t.firstChild)},contents:function(t){return re.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:re.merge([],t.childNodes)}},function(t,e){re.fn[t]=function(n,i){var r=re.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=re.filter(i,r)),this.length>1&&(ye[t]||(r=re.unique(r)),ve.test(t)&&(r=r.reverse())),this.pushStack(r)}});var be=/\S+/g,we={};re.Callbacks=function(t){t="string"==typeof t?we[t]||o(t):re.extend({},t);var e,n,i,r,a,s,l=[],u=!t.once&&[],c=function(o){for(n=t.memory&&o,i=!0,a=s||0,s=0,r=l.length,e=!0;l&&r>a;a++)if(l[a].apply(o[0],o[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,l&&(u?u.length&&c(u.shift()):n?l=[]:h.disable())},h={add:function(){if(l){var i=l.length;!function o(e){re.each(e,function(e,n){var i=re.type(n);"function"===i?t.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),e?r=l.length:n&&(s=i,c(n))}return this},remove:function(){return l&&re.each(arguments,function(t,n){for(var i;(i=re.inArray(n,l,i))>-1;)l.splice(i,1),e&&(r>=i&&r--,a>=i&&a--)}),this},has:function(t){return t?re.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||h.disable(),this},locked:function(){return!u},fireWith:function(t,n){return!l||i&&!u||(n=n||[],n=[t,n.slice?n.slice():n],e?u.push(n):c(n)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},re.extend({Deferred:function(t){var e=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return re.Deferred(function(n){re.each(e,function(e,o){var a=re.isFunction(t[e])&&t[e];r[o[1]](function(){var t=a&&a.apply(this,arguments);t&&re.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?re.extend(t,i):i}},r={};return i.pipe=i.then,re.each(e,function(t,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=Q.call(arguments),a=o.length,s=1!==a||t&&re.isFunction(t.promise)?a:0,l=1===s?t:re.Deferred(),u=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?Q.call(arguments):r,i===e?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&re.isFunction(o[r].promise)?o[r].promise().done(u(r,i,o)).fail(l.reject).progress(u(r,n,e)):--s;return s||l.resolveWith(i,o),l.promise()}});var _e;re.fn.ready=function(t){return re.ready.promise().done(t),this},re.extend({isReady:!1,readyWait:1,holdReady:function(t){t?re.readyWait++:re.ready(!0)},ready:function(t){if(t===!0?!--re.readyWait:!re.isReady){if(!fe.body)return setTimeout(re.ready);re.isReady=!0,t!==!0&&--re.readyWait>0||(_e.resolveWith(fe,[re]),re.fn.triggerHandler&&(re(fe).triggerHandler("ready"),re(fe).off("ready")))}}}),re.ready.promise=function(e){if(!_e)if(_e=re.Deferred(),"complete"===fe.readyState)setTimeout(re.ready);else if(fe.addEventListener)fe.addEventListener("DOMContentLoaded",s,!1),t.addEventListener("load",s,!1);else{fe.attachEvent("onreadystatechange",s),t.attachEvent("onload",s);var n=!1;try{n=null==t.frameElement&&fe.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!re.isReady){try{n.doScroll("left")}catch(t){return setTimeout(r,50)}a(),re.ready()}}()}return _e.promise(e)};var xe,ke="undefined";for(xe in re(ne))break;ne.ownLast="0"!==xe,ne.inlineBlockNeedsLayout=!1,re(function(){var t,e,n,i;n=fe.getElementsByTagName("body")[0],n&&n.style&&(e=fe.createElement("div"),i=fe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==ke&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=fe.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(e){ne.deleteExpando=!1}}t=null}(),re.acceptData=function(t){var e=re.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return 1!==n&&9!==n?!1:!e||e!==!0&&t.getAttribute("classid")===e};var Ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$e=/([A-Z])/g;re.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?re.cache[t[re.expando]]:t[re.expando],!!t&&!u(t)},data:function(t,e,n){return c(t,e,n)},removeData:function(t,e){return h(t,e)},_data:function(t,e,n){return c(t,e,n,!0)},_removeData:function(t,e){return h(t,e,!0)}}),re.fn.extend({data:function(t,e){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=re.data(o),1===o.nodeType&&!re._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=re.camelCase(i.slice(5)),l(o,i,r[i])));re._data(o,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){re.data(this,t)}):arguments.length>1?this.each(function(){re.data(this,t,e)}):o?l(o,t,re.data(o,t)):void 0},removeData:function(t){return this.each(function(){re.removeData(this,t)})}}),re.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=re._data(t,e),n&&(!i||re.isArray(n)?i=re._data(t,e,re.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=re.queue(t,e),i=n.length,r=n.shift(),o=re._queueHooks(t,e),a=function(){re.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return re._data(t,n)||re._data(t,n,{empty:re.Callbacks("once memory").add(function(){re._removeData(t,e+"queue"),re._removeData(t,n)})})}}),re.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?re.queue(this[0],t):void 0===e?this:this.each(function(){var n=re.queue(this,t,e);re._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&re.dequeue(this,t)})},dequeue:function(t){return this.each(function(){re.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=re.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=re._data(o[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var Se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Me=["Top","Right","Bottom","Left"],Te=function(t,e){return t=e||t,"none"===re.css(t,"display")||!re.contains(t.ownerDocument,t)},Ee=re.access=function(t,e,n,i,r,o,a){var s=0,l=t.length,u=null==n;if("object"===re.type(n)){r=!0;for(s in n)re.access(t,e,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,re.isFunction(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(re(t),n)})),e))for(;l>s;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:u?e.call(t):l?e(t[0],n):o},De=/^(?:checkbox|radio)$/i;!function(){var t=fe.createElement("input"),e=fe.createElement("div"),n=fe.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===e.firstChild.nodeType,ne.tbody=!e.getElementsByTagName("tbody").length,ne.htmlSerialize=!!e.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==fe.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),ne.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ne.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(i){ne.deleteExpando=!1}}}(),function(){var e,n,i=fe.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(ne[e+"Bubbles"]=n in t)||(i.setAttribute(n,"t"),ne[e+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Ne=/^(?:input|select|textarea)$/i,Fe=/^key/,Ae=/^(?:mouse|pointer|contextmenu)|click/,He=/^(?:focusinfocus|focusoutblur)$/,Pe=/^([^.]*)(?:\.(.+)|)$/;re.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,u,c,h,d,p,f,g,m=re._data(t);if(m){for(n.handler&&(l=n,n=l.handler,r=l.selector),n.guid||(n.guid=re.guid++),(a=m.events)||(a=m.events={}),(c=m.handle)||(c=m.handle=function(t){return typeof re===ke||t&&re.event.triggered===t.type?void 0:re.event.dispatch.apply(c.elem,arguments)},c.elem=t),e=(e||"").match(be)||[""],s=e.length;s--;)o=Pe.exec(e[s])||[],p=g=o[1],f=(o[2]||"").split(".").sort(),p&&(u=re.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=re.event.special[p]||{},h=re.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&re.expr.match.needsContext.test(r),namespace:f.join(".")},l),(d=a[p])||(d=a[p]=[],d.delegateCount=0,u.setup&&u.setup.call(t,i,f,c)!==!1||(t.addEventListener?t.addEventListener(p,c,!1):t.attachEvent&&t.attachEvent("on"+p,c))),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),re.event.global[p]=!0);t=null}},remove:function(t,e,n,i,r){var o,a,s,l,u,c,h,d,p,f,g,m=re.hasData(t)&&re._data(t);if(m&&(c=m.events)){for(e=(e||"").match(be)||[""],u=e.length;u--;)if(s=Pe.exec(e[u])||[],p=g=s[1],f=(s[2]||"").split(".").sort(),p){for(h=re.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=c[p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)a=d[o],!r&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(d.splice(o,1),a.selector&&d.delegateCount--,h.remove&&h.remove.call(t,a));l&&!d.length&&(h.teardown&&h.teardown.call(t,f,m.handle)!==!1||re.removeEvent(t,p,m.handle),delete c[p])}else for(p in c)re.event.remove(t,p+e[u],n,i,!0);re.isEmptyObject(c)&&(delete m.handle,re._removeData(t,"events"))}},trigger:function(e,n,i,r){var o,a,s,l,u,c,h,d=[i||fe],p=ee.call(e,"type")?e.type:e,f=ee.call(e,"namespace")?e.namespace.split("."):[];if(s=c=i=i||fe,3!==i.nodeType&&8!==i.nodeType&&!He.test(p+re.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),a=p.indexOf(":")<0&&"on"+p,e=e[re.expando]?e:new re.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:re.makeArray(n,[e]),u=re.event.special[p]||{},r||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!r&&!u.noBubble&&!re.isWindow(i)){for(l=u.delegateType||p,He.test(l+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),c=s;c===(i.ownerDocument||fe)&&d.push(c.defaultView||c.parentWindow||t)}for(h=0;(s=d[h++])&&!e.isPropagationStopped();)e.type=h>1?l:u.bindType||p,o=(re._data(s,"events")||{})[e.type]&&re._data(s,"handle"),o&&o.apply(s,n),o=a&&s[a],o&&o.apply&&re.acceptData(s)&&(e.result=o.apply(s,n),e.result===!1&&e.preventDefault());if(e.type=p,!r&&!e.isDefaultPrevented()&&(!u._default||u._default.apply(d.pop(),n)===!1)&&re.acceptData(i)&&a&&i[p]&&!re.isWindow(i)){c=i[a],c&&(i[a]=null),re.event.triggered=p;try{i[p]()}catch(g){}re.event.triggered=void 0,c&&(i[a]=c)}return e.result}},dispatch:function(t){t=re.event.fix(t);var e,n,i,r,o,a=[],s=Q.call(arguments),l=(re._data(this,"events")||{})[t.type]||[],u=re.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=re.event.handlers.call(this,t,l),e=0;(r=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,o=0;(i=r.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,n=((re.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(r=[],o=0;s>o;o++)i=e[o],n=i.selector+" ",void 0===r[n]&&(r[n]=i.needsContext?re(n,this).index(l)>=0:re.find(n,this,null,[l]).length),r[n]&&r.push(i);r.length&&a.push({elem:l,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},fix:function(t){if(t[re.expando])return t;var e,n,i,r=t.type,o=t,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Ae.test(r)?this.mouseHooks:Fe.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new re.Event(o),e=i.length;e--;)n=i[e],t[n]=o[n];return t.target||(t.target=o.srcElement||fe),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,o=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||fe,r=i.documentElement,n=i.body,t.pageX=e.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return re.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return re.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=re.extend(new re.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?re.event.trigger(r,null,e):re.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},re.removeEvent=fe.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===ke&&(t[i]=null),t.detachEvent(i,n))},re.Event=function(t,e){return this instanceof re.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:p):this.type=t,e&&re.extend(this,e),this.timeStamp=t&&t.timeStamp||re.now(),void(this[re.expando]=!0)):new re.Event(t,e)},re.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){re.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==i&&!re.contains(i,r))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),ne.submitBubbles||(re.event.special.submit={setup:function(){return re.nodeName(this,"form")?!1:void re.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=re.nodeName(e,"input")||re.nodeName(e,"button")?e.form:void 0;n&&!re._data(n,"submitBubbles")&&(re.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),re._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&re.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return re.nodeName(this,"form")?!1:void re.event.remove(this,"._submit")}}),ne.changeBubbles||(re.event.special.change={setup:function(){return Ne.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(re.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),re.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),re.event.simulate("change",this,t,!0)})),!1):void re.event.add(this,"beforeactivate._change",function(t){var e=t.target;Ne.test(e.nodeName)&&!re._data(e,"changeBubbles")&&(re.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||re.event.simulate("change",this.parentNode,t,!0)}),re._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return re.event.remove(this,"._change"),!Ne.test(this.nodeName)}}),ne.focusinBubbles||re.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){re.event.simulate(e,t.target,re.event.fix(t),!0)};re.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=re._data(i,e);r||i.addEventListener(t,n,!0),re._data(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=re._data(i,e)-1;r?re._data(i,e,r):(i.removeEventListener(t,n,!0),re._removeData(i,e))}}}),re.fn.extend({on:function(t,e,n,i,r){var o,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(o in t)this.on(o,e,n,t[o],r);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=p;else if(!i)return this;return 1===r&&(a=i,i=function(t){return re().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=re.guid++)),this.each(function(){re.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,re(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=p),this.each(function(){re.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){re.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?re.event.trigger(t,e,n,!0):void 0}});var Le="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Oe=/ jQuery\d+="(?:null|\d+)"/g,Ie=new RegExp("<(?:"+Le+")[\\s/>]","i"),je=/^\s+/,Re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ze=/<([\w:]+)/,Be=/<tbody/i,Ue=/<|&#?\w+;/,qe=/<(?:script|style|link)/i,We=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/^$|\/(?:java|ecma)script/i,Ye=/^true\/(.*)/,Ge=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Qe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Xe=g(fe),Je=Xe.appendChild(fe.createElement("div"));Qe.optgroup=Qe.option,Qe.tbody=Qe.tfoot=Qe.colgroup=Qe.caption=Qe.thead,Qe.th=Qe.td,re.extend({clone:function(t,e,n){var i,r,o,a,s,l=re.contains(t.ownerDocument,t);if(ne.html5Clone||re.isXMLDoc(t)||!Ie.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Je.innerHTML=t.outerHTML,Je.removeChild(o=Je.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||re.isXMLDoc(t)))for(i=m(o),s=m(t),a=0;null!=(r=s[a]);++a)i[a]&&k(r,i[a]);if(e)if(n)for(s=s||m(t),i=i||m(o),a=0;null!=(r=s[a]);a++)x(r,i[a]);else x(t,o);return i=m(o,"script"),i.length>0&&_(i,!l&&m(t,"script")),i=s=r=null,o},buildFragment:function(t,e,n,i){for(var r,o,a,s,l,u,c,h=t.length,d=g(e),p=[],f=0;h>f;f++)if(o=t[f],o||0===o)if("object"===re.type(o))re.merge(p,o.nodeType?[o]:o);else if(Ue.test(o)){for(s=s||d.appendChild(e.createElement("div")),l=(ze.exec(o)||["",""])[1].toLowerCase(),c=Qe[l]||Qe._default,s.innerHTML=c[1]+o.replace(Re,"<$1></$2>")+c[2],r=c[0];r--;)s=s.lastChild;if(!ne.leadingWhitespace&&je.test(o)&&p.push(e.createTextNode(je.exec(o)[0])),!ne.tbody)for(o="table"!==l||Be.test(o)?"<table>"!==c[1]||Be.test(o)?0:s:s.firstChild,r=o&&o.childNodes.length;r--;)re.nodeName(u=o.childNodes[r],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(re.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=d.lastChild}else p.push(e.createTextNode(o));for(s&&d.removeChild(s),ne.appendChecked||re.grep(m(p,"input"),v),f=0;o=p[f++];)if((!i||-1===re.inArray(o,i))&&(a=re.contains(o.ownerDocument,o),s=m(d.appendChild(o),"script"),a&&_(s),n))for(r=0;o=s[r++];)Ve.test(o.type||"")&&n.push(o);return s=null,d},cleanData:function(t,e){for(var n,i,r,o,a=0,s=re.expando,l=re.cache,u=ne.deleteExpando,c=re.event.special;null!=(n=t[a]);a++)if((e||re.acceptData(n))&&(r=n[s],o=r&&l[r])){if(o.events)for(i in o.events)c[i]?re.event.remove(n,i):re.removeEvent(n,i,o.handle);l[r]&&(delete l[r],u?delete n[s]:typeof n.removeAttribute!==ke?n.removeAttribute(s):n[s]=null,G.push(r))}}}),re.fn.extend({text:function(t){return Ee(this,function(t){return void 0===t?re.text(this):this.empty().append((this[0]&&this[0].ownerDocument||fe).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?re.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||re.cleanData(m(n)),n.parentNode&&(e&&re.contains(n.ownerDocument,n)&&_(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&re.cleanData(m(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&re.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return re.clone(this,t,e)})},html:function(t){return Ee(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Oe,""):void 0;if(!("string"!=typeof t||qe.test(t)||!ne.htmlSerialize&&Ie.test(t)||!ne.leadingWhitespace&&je.test(t)||Qe[(ze.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Re,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(re.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,re.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=X.apply([],t);var n,i,r,o,a,s,l=0,u=this.length,c=this,h=u-1,d=t[0],p=re.isFunction(d);if(p||u>1&&"string"==typeof d&&!ne.checkClone&&We.test(d))return this.each(function(n){var i=c.eq(n);p&&(t[0]=d.call(this,n,i.html())),i.domManip(t,e)});if(u&&(s=re.buildFragment(t,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=re.map(m(s,"script"),b),r=o.length;u>l;l++)i=s,l!==h&&(i=re.clone(i,!0,!0),r&&re.merge(o,m(i,"script"))),e.call(this[l],i,l);if(r)for(a=o[o.length-1].ownerDocument,re.map(o,w),l=0;r>l;l++)i=o[l],Ve.test(i.type||"")&&!re._data(i,"globalEval")&&re.contains(a,i)&&(i.src?re._evalUrl&&re._evalUrl(i.src):re.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Ge,"")));s=n=null}return this}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){re.fn[t]=function(t){for(var n,i=0,r=[],o=re(t),a=o.length-1;a>=i;i++)n=i===a?this:this.clone(!0),re(o[i])[e](n),J.apply(r,n.get());return this.pushStack(r)}});var Ke,Ze={};!function(){var t;ne.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,n,i;return n=fe.getElementsByTagName("body")[0],n&&n.style?(e=fe.createElement("div"),i=fe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==ke&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(fe.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(i),t):void 0}}();var tn,en,nn=/^margin/,rn=new RegExp("^("+Se+")(?!px)[a-z%]+$","i"),on=/^(top|right|bottom|left)$/;t.getComputedStyle?(tn=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},en=function(t,e,n){var i,r,o,a,s=t.style;return n=n||tn(t),a=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==a||re.contains(t.ownerDocument,t)||(a=re.style(t,e)),rn.test(a)&&nn.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0===a?a:a+""}):fe.documentElement.currentStyle&&(tn=function(t){return t.currentStyle},en=function(t,e,n){var i,r,o,a,s=t.style;return n=n||tn(t),a=n?n[e]:void 0,null==a&&s&&s[e]&&(a=s[e]),rn.test(a)&&!on.test(e)&&(i=s.left,r=t.runtimeStyle,o=r&&r.left,o&&(r.left=t.currentStyle.left),s.left="fontSize"===e?"1em":a,a=s.pixelLeft+"px",s.left=i,o&&(r.left=o)),void 0===a?a:a+""||"auto"}),function(){function e(){var e,n,i,r;n=fe.getElementsByTagName("body")[0],n&&n.style&&(e=fe.createElement("div"),i=fe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,l=!0,t.getComputedStyle&&(o="1%"!==(t.getComputedStyle(e,null)||{}).top,a="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,r=e.appendChild(fe.createElement("div")),r.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(r,null)||{}).marginRight)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=e.getElementsByTagName("td"),r[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===r[0].offsetHeight,s&&(r[0].style.display="",r[1].style.display="none",s=0===r[0].offsetHeight),n.removeChild(i))}var n,i,r,o,a,s,l;n=fe.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=n.getElementsByTagName("a")[0],i=r&&r.style,i&&(i.cssText="float:left;opacity:.5",ne.opacity="0.5"===i.opacity,ne.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,re.extend(ne,{reliableHiddenOffsets:function(){return null==s&&e(),s
},boxSizingReliable:function(){return null==a&&e(),a},pixelPosition:function(){return null==o&&e(),o},reliableMarginRight:function(){return null==l&&e(),l}}))}(),re.swap=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=a[o];return r};var an=/alpha\([^)]*\)/i,sn=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,un=new RegExp("^("+Se+")(.*)$","i"),cn=new RegExp("^([+-])=("+Se+")","i"),hn={position:"absolute",visibility:"hidden",display:"block"},dn={letterSpacing:"0",fontWeight:"400"},pn=["Webkit","O","Moz","ms"];re.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=en(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=re.camelCase(e),l=t.style;if(e=re.cssProps[s]||(re.cssProps[s]=M(l,s)),a=re.cssHooks[e]||re.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:l[e];if(o=typeof n,"string"===o&&(r=cn.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(re.css(t,e)),o="number"),null!=n&&n===n&&("number"!==o||re.cssNumber[s]||(n+="px"),ne.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(t,n,i)))))try{l[e]=n}catch(u){}}},css:function(t,e,n,i){var r,o,a,s=re.camelCase(e);return e=re.cssProps[s]||(re.cssProps[s]=M(t.style,s)),a=re.cssHooks[e]||re.cssHooks[s],a&&"get"in a&&(o=a.get(t,!0,n)),void 0===o&&(o=en(t,e,i)),"normal"===o&&e in dn&&(o=dn[e]),""===n||n?(r=parseFloat(o),n===!0||re.isNumeric(r)?r||0:o):o}}),re.each(["height","width"],function(t,e){re.cssHooks[e]={get:function(t,n,i){return n?ln.test(re.css(t,"display"))&&0===t.offsetWidth?re.swap(t,hn,function(){return N(t,e,i)}):N(t,e,i):void 0},set:function(t,n,i){var r=i&&tn(t);return E(t,n,i?D(t,e,i,ne.boxSizing&&"border-box"===re.css(t,"boxSizing",!1,r),r):0)}}}),ne.opacity||(re.cssHooks.opacity={get:function(t,e){return sn.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=re.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===re.trim(o.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=an.test(o)?o.replace(an,r):o+" "+r)}}),re.cssHooks.marginRight=S(ne.reliableMarginRight,function(t,e){return e?re.swap(t,{display:"inline-block"},en,[t,"marginRight"]):void 0}),re.each({margin:"",padding:"",border:"Width"},function(t,e){re.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+Me[i]+e]=o[i]||o[i-2]||o[0];return r}},nn.test(t)||(re.cssHooks[t+e].set=E)}),re.fn.extend({css:function(t,e){return Ee(this,function(t,e,n){var i,r,o={},a=0;if(re.isArray(e)){for(i=tn(t),r=e.length;r>a;a++)o[e[a]]=re.css(t,e[a],!1,i);return o}return void 0!==n?re.style(t,e,n):re.css(t,e)},t,e,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Te(this)?re(this).show():re(this).hide()})}}),re.Tween=F,F.prototype={constructor:F,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(re.cssNumber[n]?"":"px")},cur:function(){var t=F.propHooks[this.prop];return t&&t.get?t.get(this):F.propHooks._default.get(this)},run:function(t){var e,n=F.propHooks[this.prop];return this.pos=e=this.options.duration?re.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):F.propHooks._default.set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=re.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){re.fx.step[t.prop]?re.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[re.cssProps[t.prop]]||re.cssHooks[t.prop])?re.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},re.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},re.fx=F.prototype.init,re.fx.step={};var fn,gn,mn=/^(?:toggle|show|hide)$/,vn=new RegExp("^(?:([+-])=|)("+Se+")([a-z%]*)$","i"),yn=/queueHooks$/,bn=[L],wn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=vn.exec(e),o=r&&r[3]||(re.cssNumber[t]?"":"px"),a=(re.cssNumber[t]||"px"!==o&&+i)&&vn.exec(re.css(n.elem,t)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],r=r||[],a=+i||1;do s=s||".5",a/=s,re.style(n.elem,t,a+o);while(s!==(s=n.cur()/i)&&1!==s&&--l)}return r&&(a=n.start=+a||+i||0,n.unit=o,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};re.Animation=re.extend(I,{tweener:function(t,e){re.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],wn[n]=wn[n]||[],wn[n].unshift(e)},prefilter:function(t,e){e?bn.unshift(t):bn.push(t)}}),re.speed=function(t,e,n){var i=t&&"object"==typeof t?re.extend({},t):{complete:n||!n&&e||re.isFunction(t)&&t,duration:t,easing:n&&e||e&&!re.isFunction(e)&&e};return i.duration=re.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in re.fx.speeds?re.fx.speeds[i.duration]:re.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){re.isFunction(i.old)&&i.old.call(this),i.queue&&re.dequeue(this,i.queue)},i},re.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Te).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=re.isEmptyObject(t),o=re.speed(e,n,i),a=function(){var e=I(this,re.extend({},t),o);(r||re._data(this,"finish"))&&e.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=re.timers,a=re._data(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&yn.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));(e||!n)&&re.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=re._data(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=re.timers,a=i?i.length:0;for(n.finish=!0,re.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),re.each(["toggle","show","hide"],function(t,e){var n=re.fn[e];re.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(H(e,!0),t,i,r)}}),re.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){re.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),re.timers=[],re.fx.tick=function(){var t,e=re.timers,n=0;for(fn=re.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||re.fx.stop(),fn=void 0},re.fx.timer=function(t){re.timers.push(t),t()?re.fx.start():re.timers.pop()},re.fx.interval=13,re.fx.start=function(){gn||(gn=setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){clearInterval(gn),gn=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fn.delay=function(t,e){return t=re.fx?re.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t,e,n,i,r;e=fe.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=e.getElementsByTagName("a")[0],n=fe.createElement("select"),r=n.appendChild(fe.createElement("option")),t=e.getElementsByTagName("input")[0],i.style.cssText="top:1px",ne.getSetAttribute="t"!==e.className,ne.style=/top/.test(i.getAttribute("style")),ne.hrefNormalized="/a"===i.getAttribute("href"),ne.checkOn=!!t.value,ne.optSelected=r.selected,ne.enctype=!!fe.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!r.disabled,t=fe.createElement("input"),t.setAttribute("value",""),ne.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ne.radioValue="t"===t.value}();var _n=/\r/g;re.fn.extend({val:function(t){var e,n,i,r=this[0];{if(arguments.length)return i=re.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,re(this).val()):t,null==r?r="":"number"==typeof r?r+="":re.isArray(r)&&(r=re.map(r,function(t){return null==t?"":t+""})),e=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=re.valHooks[r.type]||re.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(_n,""):null==n?"":n)}}}),re.extend({valHooks:{option:{get:function(t){var e=re.find.attr(t,"value");return null!=e?e:re.trim(re.text(t))}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,a=o?null:[],s=o?r+1:i.length,l=0>r?s:o?r:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==r||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&re.nodeName(n.parentNode,"optgroup"))){if(e=re(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=re.makeArray(e),a=r.length;a--;)if(i=r[a],re.inArray(re.valHooks.option.get(i),o)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),r}}}}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(t,e){return re.isArray(e)?t.checked=re.inArray(re(t).val(),e)>=0:void 0}},ne.checkOn||(re.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xn,kn,Cn=re.expr.attrHandle,$n=/^(?:checked|selected)$/i,Sn=ne.getSetAttribute,Mn=ne.input;re.fn.extend({attr:function(t,e){return Ee(this,re.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){re.removeAttr(this,t)})}}),re.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===ke?re.prop(t,e,n):(1===o&&re.isXMLDoc(t)||(e=e.toLowerCase(),i=re.attrHooks[e]||(re.expr.match.bool.test(e)?kn:xn)),void 0===n?i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=re.find.attr(t,e),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):void re.removeAttr(t,e))},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(be);if(o&&1===t.nodeType)for(;n=o[r++];)i=re.propFix[n]||n,re.expr.match.bool.test(n)?Mn&&Sn||!$n.test(n)?t[i]=!1:t[re.camelCase("default-"+n)]=t[i]=!1:re.attr(t,n,""),t.removeAttribute(Sn?n:i)},attrHooks:{type:{set:function(t,e){if(!ne.radioValue&&"radio"===e&&re.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),kn={set:function(t,e,n){return e===!1?re.removeAttr(t,n):Mn&&Sn||!$n.test(n)?t.setAttribute(!Sn&&re.propFix[n]||n,n):t[re.camelCase("default-"+n)]=t[n]=!0,n}},re.each(re.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Cn[e]||re.find.attr;Cn[e]=Mn&&Sn||!$n.test(e)?function(t,e,i){var r,o;return i||(o=Cn[e],Cn[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,Cn[e]=o),r}:function(t,e,n){return n?void 0:t[re.camelCase("default-"+e)]?e.toLowerCase():null}}),Mn&&Sn||(re.attrHooks.value={set:function(t,e,n){return re.nodeName(t,"input")?void(t.defaultValue=e):xn&&xn.set(t,e,n)}}),Sn||(xn={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},Cn.id=Cn.name=Cn.coords=function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},re.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:xn.set},re.attrHooks.contenteditable={set:function(t,e,n){xn.set(t,""===e?!1:e,n)}},re.each(["width","height"],function(t,e){re.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),ne.style||(re.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Tn=/^(?:input|select|textarea|button|object)$/i,En=/^(?:a|area)$/i;re.fn.extend({prop:function(t,e){return Ee(this,re.prop,t,e,arguments.length>1)},removeProp:function(t){return t=re.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),re.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,r,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!re.isXMLDoc(t),o&&(e=re.propFix[e]||e,r=re.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=re.find.attr(t,"tabindex");return e?parseInt(e,10):Tn.test(t.nodeName)||En.test(t.nodeName)&&t.href?0:-1}}}}),ne.hrefNormalized||re.each(["href","src"],function(t,e){re.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ne.optSelected||(re.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this}),ne.enctype||(re.propFix.enctype="encoding");var Dn=/[\t\r\n\f]/g;re.fn.extend({addClass:function(t){var e,n,i,r,o,a,s=0,l=this.length,u="string"==typeof t&&t;if(re.isFunction(t))return this.each(function(e){re(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(be)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dn," "):" ")){for(o=0;r=e[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=re.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,i,r,o,a,s=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(re.isFunction(t))return this.each(function(e){re(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(be)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dn," "):"")){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");a=t?re.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(re.isFunction(t)?function(n){re(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,r=re(this),o=t.match(be)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(n===ke||"boolean"===n)&&(this.className&&re._data(this,"__className__",this.className),this.className=this.className||t===!1?"":re._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Dn," ").indexOf(e)>=0)return!0;return!1}}),re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){re.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),re.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Nn=re.now(),Fn=/\?/,An=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;re.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,r=re.trim(e+"");return r&&!re.trim(r.replace(An,function(t,e,r,o){return n&&e&&(i=0),0===i?t:(n=r||e,i+=!o-!r,"")}))?Function("return "+r)():re.error("Invalid JSON: "+e)},re.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new DOMParser,n=i.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(r){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||re.error("Invalid XML: "+e),n};var Hn,Pn,Ln=/#.*$/,On=/([?&])_=[^&]*/,In=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,jn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Rn=/^(?:GET|HEAD)$/,zn=/^\/\//,Bn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Un={},qn={},Wn="*/".concat("*");try{Pn=location.href}catch(Vn){Pn=fe.createElement("a"),Pn.href="",Pn=Pn.href}Hn=Bn.exec(Pn.toLowerCase())||[],re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pn,type:"GET",isLocal:jn.test(Hn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?z(z(t,re.ajaxSettings),e):z(re.ajaxSettings,t)},ajaxPrefilter:j(Un),ajaxTransport:j(qn),ajax:function(t,e){function n(t,e,n,i){var r,c,v,y,w,x=e;2!==b&&(b=2,s&&clearTimeout(s),u=void 0,a=i||"",_.readyState=t>0?4:0,r=t>=200&&300>t||304===t,n&&(y=B(h,_,n)),y=U(h,y,_,r),r?(h.ifModified&&(w=_.getResponseHeader("Last-Modified"),w&&(re.lastModified[o]=w),w=_.getResponseHeader("etag"),w&&(re.etag[o]=w)),204===t||"HEAD"===h.type?x="nocontent":304===t?x="notmodified":(x=y.state,c=y.data,v=y.error,r=!v)):(v=x,(t||!x)&&(x="error",0>t&&(t=0))),_.status=t,_.statusText=(e||x)+"",r?f.resolveWith(d,[c,x,_]):f.rejectWith(d,[_,x,v]),_.statusCode(m),m=void 0,l&&p.trigger(r?"ajaxSuccess":"ajaxError",[_,h,r?c:v]),g.fireWith(d,[_,x]),l&&(p.trigger("ajaxComplete",[_,h]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,a,s,l,u,c,h=re.ajaxSetup({},e),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?re(d):re.event,f=re.Deferred(),g=re.Callbacks("once memory"),m=h.statusCode||{},v={},y={},b=0,w="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!c)for(c={};e=In.exec(a);)c[e[1].toLowerCase()]=e[2];e=c[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)m[e]=[m[e],t[e]];else _.always(t[_.status]);return this},abort:function(t){var e=t||w;return u&&u.abort(e),n(0,e),this}};if(f.promise(_).complete=g.add,_.success=_.done,_.error=_.fail,h.url=((t||h.url||Pn)+"").replace(Ln,"").replace(zn,Hn[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=re.trim(h.dataType||"*").toLowerCase().match(be)||[""],null==h.crossDomain&&(i=Bn.exec(h.url.toLowerCase()),h.crossDomain=!(!i||i[1]===Hn[1]&&i[2]===Hn[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Hn[3]||("http:"===Hn[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=re.param(h.data,h.traditional)),R(Un,h,e,_),2===b)return _;l=h.global,l&&0===re.active++&&re.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Rn.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(Fn.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=On.test(o)?o.replace(On,"$1_="+Nn++):o+(Fn.test(o)?"&":"?")+"_="+Nn++)),h.ifModified&&(re.lastModified[o]&&_.setRequestHeader("If-Modified-Since",re.lastModified[o]),re.etag[o]&&_.setRequestHeader("If-None-Match",re.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&_.setRequestHeader("Content-Type",h.contentType),_.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Wn+"; q=0.01":""):h.accepts["*"]);for(r in h.headers)_.setRequestHeader(r,h.headers[r]);if(h.beforeSend&&(h.beforeSend.call(d,_,h)===!1||2===b))return _.abort();w="abort";for(r in{success:1,error:1,complete:1})_[r](h[r]);if(u=R(qn,h,e,_)){_.readyState=1,l&&p.trigger("ajaxSend",[_,h]),h.async&&h.timeout>0&&(s=setTimeout(function(){_.abort("timeout")},h.timeout));try{b=1,u.send(v,n)}catch(x){if(!(2>b))throw x;n(-1,x)}}else n(-1,"No Transport");return _},getJSON:function(t,e,n){return re.get(t,e,n,"json")},getScript:function(t,e){return re.get(t,void 0,e,"script")}}),re.each(["get","post"],function(t,e){re[e]=function(t,n,i,r){return re.isFunction(n)&&(r=r||i,i=n,n=void 0),re.ajax({url:t,type:e,dataType:r,data:n,success:i})}}),re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){re.fn[e]=function(t){return this.on(e,t)}}),re._evalUrl=function(t){return re.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},re.fn.extend({wrapAll:function(t){if(re.isFunction(t))return this.each(function(e){re(this).wrapAll(t.call(this,e))});if(this[0]){var e=re(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(re.isFunction(t)?function(e){re(this).wrapInner(t.call(this,e))}:function(){var e=re(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=re.isFunction(t);return this.each(function(n){re(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}}),re.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||re.css(t,"display"))},re.expr.filters.visible=function(t){return!re.expr.filters.hidden(t)};var Yn=/%20/g,Gn=/\[\]$/,Qn=/\r?\n/g,Xn=/^(?:submit|button|image|reset|file)$/i,Jn=/^(?:input|select|textarea|keygen)/i;re.param=function(t,e){var n,i=[],r=function(t,e){e=re.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(t)||t.jquery&&!re.isPlainObject(t))re.each(t,function(){r(this.name,this.value)});else for(n in t)q(n,t[n],e,r);return i.join("&").replace(Yn,"+")},re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=re.prop(this,"elements");return t?re.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!re(this).is(":disabled")&&Jn.test(this.nodeName)&&!Xn.test(t)&&(this.checked||!De.test(t))}).map(function(t,e){var n=re(this).val();return null==n?null:re.isArray(n)?re.map(n,function(t){return{name:e.name,value:t.replace(Qn,"\r\n")}}):{name:e.name,value:n.replace(Qn,"\r\n")}}).get()}}),re.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&W()||V()}:W;var Kn=0,Zn={},ti=re.ajaxSettings.xhr();t.ActiveXObject&&re(t).on("unload",function(){for(var t in Zn)Zn[t](void 0,!0)}),ne.cors=!!ti&&"withCredentials"in ti,ti=ne.ajax=!!ti,ti&&re.ajaxTransport(function(t){if(!t.crossDomain||ne.cors){var e;return{send:function(n,i){var r,o=t.xhr(),a=++Kn;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)o[r]=t.xhrFields[r];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)void 0!==n[r]&&o.setRequestHeader(r,n[r]+"");o.send(t.hasContent&&t.data||null),e=function(n,r){var s,l,u;if(e&&(r||4===o.readyState))if(delete Zn[a],e=void 0,o.onreadystatechange=re.noop,r)4!==o.readyState&&o.abort();else{u={},s=o.status,"string"==typeof o.responseText&&(u.text=o.responseText);try{l=o.statusText}catch(c){l=""}s||!t.isLocal||t.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&i(s,l,u,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=Zn[a]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return re.globalEval(t),t}}}),re.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),re.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=fe.head||re("head")[0]||fe.documentElement;return{send:function(i,r){e=fe.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||r(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ei=[],ni=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ei.pop()||re.expando+"_"+Nn++;return this[t]=!0,t}}),re.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,a,s=e.jsonp!==!1&&(ni.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=re.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ni,"$1"+r):e.jsonp!==!1&&(e.url+=(Fn.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||re.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){a=arguments},i.always(function(){t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,ei.push(r)),a&&re.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),re.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||fe;var i=he.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=re.buildFragment([t],e,r),r&&r.length&&re(r).remove(),re.merge([],i.childNodes))};var ii=re.fn.load;re.fn.load=function(t,e,n){if("string"!=typeof t&&ii)return ii.apply(this,arguments);var i,r,o,a=this,s=t.indexOf(" ");return s>=0&&(i=re.trim(t.slice(s,t.length)),t=t.slice(0,s)),re.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),a.length>0&&re.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,a.html(i?re("<div>").append(re.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){a.each(n,r||[t.responseText,e,t])}),this},re.expr.filters.animated=function(t){return re.grep(re.timers,function(e){return t===e.elem}).length};var ri=t.document.documentElement;re.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,u,c=re.css(t,"position"),h=re(t),d={};"static"===c&&(t.style.position="relative"),s=h.offset(),o=re.css(t,"top"),l=re.css(t,"left"),u=("absolute"===c||"fixed"===c)&&re.inArray("auto",[o,l])>-1,u?(i=h.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),re.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):h.css(d)}},re.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){re.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return e=o.documentElement,re.contains(e,r)?(typeof r.getBoundingClientRect!==ke&&(i=r.getBoundingClientRect()),n=Y(o),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===re.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),re.nodeName(t[0],"html")||(n=t.offset()),n.top+=re.css(t[0],"borderTopWidth",!0),n.left+=re.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-re.css(i,"marginTop",!0),left:e.left-n.left-re.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||ri;t&&!re.nodeName(t,"html")&&"static"===re.css(t,"position");)t=t.offsetParent;return t||ri})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);re.fn[t]=function(i){return Ee(this,function(t,i,r){var o=Y(t);return void 0===r?o?e in o?o[e]:o.document.documentElement[i]:t[i]:void(o?o.scrollTo(n?re(o).scrollLeft():r,n?r:re(o).scrollTop()):t[i]=r)},t,i,arguments.length,null)}}),re.each(["top","left"],function(t,e){re.cssHooks[e]=S(ne.pixelPosition,function(t,n){return n?(n=en(t,e),rn.test(n)?re(t).position()[e]+"px":n):void 0})}),re.each({Height:"height",Width:"width"},function(t,e){re.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){re.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return Ee(this,function(e,n,i){var r;return re.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?re.css(e,n,a):re.style(e,n,i,a)},e,o?i:void 0,o,null)}})}),re.fn.size=function(){return this.length},re.fn.andSelf=re.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return re});var oi=t.jQuery,ai=t.$;return re.noConflict=function(e){return t.$===re&&(t.$=ai),e&&t.jQuery===re&&(t.jQuery=oi),re},typeof e===ke&&(t.jQuery=t.$=re),re}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)},fire:function(e,n,i){var r=t.Event(n);return e.trigger(r,i),r.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},handleRemote:function(i){var r,o,a,s,l,u;if(n.fire(i,"ajax:before")){if(s=i.data("with-credentials")||null,l=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),o=i.attr("action"),a=i.serializeArray();var c=i.data("ujs:submit-button");c&&(a.push(c),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):(r=i.data("method"),o=n.href(i),a=i.data("params")||null);
return u={type:r||"GET",data:a,dataType:l,beforeSend:function(t,r){return r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[t,r])?void i.trigger("ajax:send",t):!1},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:n.isCrossDomain(o)},s&&(u.xhrFields={withCredentials:s}),o&&(u.url=o),n.ajax(u)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(i){var r=n.href(i),o=i.data("method"),a=i.attr("target"),s=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+r+'"></form>'),c='<input name="_method" value="'+o+'" type="hidden" />';l===e||s===e||n.isCrossDomain(r)||(c+='<input name="'+l+'" value="'+s+'" type="hidden" />'),a&&u.attr("target",a),u.hide().append(c).appendTo("body"),u.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var n,i;n=t.is("button")?"html":"val",i=t.data("disable-with"),t.data("ujs:enable-with",t[n]()),i!==e&&t[n](i),t.prop("disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,i=t.data("confirm"),r=!1;return i?(n.fire(t,"confirm")&&(r=n.confirm(i),e=n.fire(t,"confirm:complete",[r])),r&&e):!0},blankInputs:function(e,n,i){var r,o,a=t(),s=n||"input,textarea",l=e.find(s);return l.each(function(){if(r=t(this),o=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!o==!i){if(r.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;a=a.add(r)}}),a.length?a:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var i=t.data("disable-with");t.data("ujs:enable-with",t.html()),i!==e&&t.html(i),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var r=t(this),o=r.data("method"),a=r.data("params"),s=i.metaKey||i.ctrlKey;if(!n.allowAction(r))return n.stopEverything(i);if(!s&&r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==e){if(s&&(!o||"GET"===o)&&!a)return!0;var l=n.handleRemote(r);return l===!1?n.enableElement(r):l.error(function(){n.enableElement(r)}),!1}return r.data("method")?(n.handleMethod(r),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var r=n.handleRemote(i);return r===!1?n.enableFormElement(i):r.error(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r,o,a=t(this),s=a.data("remote")!==e;if(!n.allowAction(a))return n.stopEverything(i);if(a.attr("novalidate")==e&&(r=n.blankInputs(a,n.requiredInputSelector),r&&n.fire(a,"ajax:aborted:required",[r])))return n.stopEverything(i);if(s){if(o=n.nonBlankInputs(a,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(a)},13);var l=n.fire(a,"ajax:aborted:file",[o]);return l||setTimeout(function(){n.enableFormElements(a)},13),l}return n.handleRemote(a),!1}setTimeout(function(){n.disableFormElements(a)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",o)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]}}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one(t.support.transition.end,function(){n=!0});var r=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e()})}(jQuery),+function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},e.prototype.show=function(e){var n=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show(),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});i?n.$element.find(".modal-dialog").one(t.support.transition.end,function(){n.$element.focus().trigger(r)}).emulateTransitionEnd(300):n.$element.focus().trigger(r)}))},e.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one(t.support.transition.end,t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()};var n=t.fn.modal;t.fn.modal=function(n,i){return this.each(function(){var r=t(this),o=r.data("bs.modal"),a=t.extend({},e.DEFAULTS,r.data(),"object"==typeof n&&n);o||r.data("bs.modal",o=new e(this,a)),"string"==typeof n?o[n](i):a.show&&o.show(i)})},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),r=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),n.data());e.preventDefault(),r.modal(o,this).one("hide",function(){n.is(":visible")&&n.focus()})}),t(document).on("show.bs.modal",".modal",function(){t(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){t(document.body).removeClass("modal-open")})}(jQuery),+function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i);for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focus",l="hover"==a?"mouseleave":"blur";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,o=r.test(i);o&&(i=i.replace(r,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(i),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var a=this.getPosition(),s=n[0].offsetWidth,l=n[0].offsetHeight;if(o){var u=this.$element.parent(),c=i,h=document.documentElement.scrollTop||document.body.scrollTop,d="body"==this.options.container?window.innerWidth:u.outerWidth(),p="body"==this.options.container?window.innerHeight:u.outerHeight(),f="body"==this.options.container?0:u.offset().left;i="bottom"==i&&a.top+a.height+l-h>p?"top":"top"==i&&a.top-h-l<0?"bottom":"right"==i&&a.right+s>d?"left":"left"==i&&a.left-s<f?"right":i,n.removeClass(c).addClass(i)}var g=this.getCalculatedOffset(i,a,s,l);this.applyPlacement(g,i),this.$element.trigger("shown.bs."+this.type)}},e.prototype.applyPlacement=function(t,e){var n,i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top=t.top+a,t.left=t.left+s,i.offset(t).addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;if("top"==e&&u!=o&&(n=!0,t.top=t.top+o-u),/bottom|top/.test(e)){var c=0;t.left<0&&(c=-2*t.left,t.left=0,i.offset(t),l=i[0].offsetWidth,u=i[0].offsetHeight),this.replaceArrow(c-r+l,l,"left")}else this.replaceArrow(u-o,u,"top");n&&i.offset(t)},e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=n.hoverState&&i.detach()}var n=this,i=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?i.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.bs."+this.type),this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var n=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},e.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),o="object"==typeof n&&n;r||i.data("bs.tooltip",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),r=i.data("bs.popover"),o="object"==typeof n&&n;r||i.data("bs.popover",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){o.trigger("closed.bs.alert").remove()}var i=t(this),r=i.attr("data-target");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=t(r);e&&e.preventDefault(),o.length||(o=i.hasClass("alert")?i:i.parent()),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one(t.support.transition.end,n).emulateTransitionEnd(150):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(jQuery),+function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=n.find(".active:last a")[0],o=t.Event("show.bs.tab",{relatedTarget:r});if(e.trigger(o),!o.isDefaultPrevented()){var a=t(i);this.activate(e.parent("li"),n),this.activate(a,a.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},e.prototype.activate=function(e,n,i){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var o=n.find("> .active"),a=i&&t.support.transition&&o.hasClass("fade");a?o.one(t.support.transition.end,r).emulateTransitionEnd(150):r(),o.removeClass("in")};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new e(this)),"string"==typeof n&&r[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(jQuery),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,o=Function.prototype,a=i.push,s=i.slice,l=i.concat,u=r.toString,c=r.hasOwnProperty,h=i.forEach,d=i.map,p=i.reduce,f=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,_=Object.keys,x=o.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.6.0";var C=k.each=k.forEach=function(t,e,i){if(null==t)return t;if(h&&t.forEach===h)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var a=k.keys(t),r=0,o=a.length;o>r;r++)if(e.call(i,t[a[r]],a[r],t)===n)return;return t};k.map=k.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(C(t,function(t,r,o){i.push(e.call(n,t,r,o))}),i)};var $="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return i&&(e=k.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(C(t,function(t,o,a){r?n=e.call(i,n,t,o,a):(n=t,r=!0)}),!r)throw new TypeError($);return n},k.reduceRight=k.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return i&&(e=k.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var a=k.keys(t);o=a.length}if(C(t,function(s,l,u){l=a?a[--o]:--o,r?n=e.call(i,n,t[l],l,u):(n=t[l],r=!0)}),!r)throw new TypeError($);return n},k.find=k.detect=function(t,e,n){var i;return S(t,function(t,r,o){return e.call(n,t,r,o)?(i=t,!0):void 0}),i},k.filter=k.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(C(t,function(t,r,o){e.call(n,t,r,o)&&i.push(t)}),i)},k.reject=function(t,e,n){return k.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},k.every=k.all=function(t,e,i){e||(e=k.identity);var r=!0;return null==t?r:m&&t.every===m?t.every(e,i):(C(t,function(t,o,a){return(r=r&&e.call(i,t,o,a))?void 0:n}),!!r)};var S=k.some=k.any=function(t,e,i){e||(e=k.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(C(t,function(t,o,a){return r||(r=e.call(i,t,o,a))?n:void 0}),!!r)};k.contains=k.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):S(t,function(t){return t===e})},k.invoke=function(t,e){var n=s.call(arguments,2),i=k.isFunction(e);return k.map(t,function(t){return(i?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matches(e))},k.findWhere=function(t,e){return k.find(t,k.matches(e))},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-1/0,r=-1/0;return C(t,function(t,o,a){var s=e?e.call(n,t,o,a):t;s>r&&(i=t,r=s)}),i},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,r=1/0;return C(t,function(t,o,a){var s=e?e.call(n,t,o,a):t;r>s&&(i=t,r=s)}),i},k.shuffle=function(t){var e,n=0,i=[];return C(t,function(t){e=k.random(n++),i[n-1]=i[e],i[e]=t}),i},k.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))};var M=function(t){return null==t?k.identity:k.isFunction(t)?t:k.property(t)};k.sortBy=function(t,e,n){return e=M(e),k.pluck(k.map(t,function(t,i,r){return{value:t,index:i,criteria:e.call(n,t,i,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,n,i){var r={};return n=M(n),C(e,function(o,a){var s=n.call(i,o,a,e);t(r,s,o)}),r}};k.groupBy=T(function(t,e,n){k.has(t,e)?t[e].push(n):t[e]=[n]}),k.indexBy=T(function(t,e,n){t[e]=n}),k.countBy=T(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,n,i){n=M(n);for(var r=n.call(i,e),o=0,a=t.length;a>o;){var s=o+a>>>1;n.call(i,t[s])<r?o=s+1:a=s}return o},k.toArray=function(t){return t?k.isArray(t)?s.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:s.call(t,0,e)},k.initial=function(t,e,n){return s.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:s.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var E=function(t,e,n){return e&&k.every(t,k.isArray)?l.apply(n,t):(C(t,function(t){k.isArray(t)||k.isArguments(t)?e?a.apply(n,t):E(t,e,n):n.push(t)}),n)};k.flatten=function(t,e){return E(t,e,[])},k.without=function(t){return k.difference(t,s.call(arguments,1))},k.partition=function(t,e){var n=[],i=[];return C(t,function(t){(e(t)?n:i).push(t)}),[n,i]},k.uniq=k.unique=function(t,e,n,i){k.isFunction(e)&&(i=n,n=e,e=!1);var r=n?k.map(t,n,i):t,o=[],a=[];return C(r,function(n,i){(e?i&&a[a.length-1]===n:k.contains(a,n))||(a.push(n),o.push(t[i]))}),o},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=s.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.contains(e,t)})})},k.difference=function(t){var e=l.apply(i,s.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=k.pluck(arguments,""+n);return e},k.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=new Array(i);i>r;)o[r++]=t,t+=n;return o};var D=function(){};k.bind=function(t,e){var n,i;if(x&&t.bind===x)return x.apply(t,s.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=s.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(s.call(arguments)));D.prototype=t.prototype;var r=new D;D.prototype=null;var o=t.apply(r,n.concat(s.call(arguments)));return Object(o)===o?o:r}},k.partial=function(t){var e=s.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,o=i.length;o>r;r++)i[r]===k&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},k.bindAll=function(t){var e=s.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var i=e.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},k.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(s.call(arguments,1)))},k.throttle=function(t,e,n){var i,r,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:k.now(),a=null,o=t.apply(i,r),i=r=null};return function(){var u=k.now();s||n.leading!==!1||(s=u);var c=e-(u-s);return i=this,r=arguments,0>=c?(clearTimeout(a),a=null,s=u,o=t.apply(i,r),i=r=null):a||n.trailing===!1||(a=setTimeout(l,c)),o}},k.debounce=function(t,e,n){var i,r,o,a,s,l=function(){var u=k.now()-a;e>u?i=setTimeout(l,e-u):(i=null,n||(s=t.apply(o,r),o=r=null))};return function(){o=this,r=arguments,a=k.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(s=t.apply(o,r),o=r=null),s}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return k.partial(e,t)},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=function(t){if(!k.isObject(t))return[];if(_)return _(t);var e=[];for(var n in t)k.has(t,n)&&e.push(n);return e},k.values=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},k.pairs=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},k.invert=function(t){for(var e={},n=k.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return C(s.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=l.apply(i,s.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=l.apply(i,s.call(arguments,1));for(var r in t)k.contains(n,r)||(e[r]=t[r]);return e},k.defaults=function(t){return C(s.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var N=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var r=u.call(t);if(r!=u.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return i[o]==e;var a=t.constructor,s=e.constructor;if(a!==s&&!(k.isFunction(a)&&a instanceof a&&k.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var l=0,c=!0;if("[object Array]"==r){if(l=t.length,c=l==e.length)for(;l--&&(c=N(t[l],e[l],n,i)););}else{for(var h in t)if(k.has(t,h)&&(l++,!(c=k.has(e,h)&&N(t[h],e[h],n,i))))break;if(c){for(h in e)if(k.has(e,h)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};k.isEqual=function(t,e){return N(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=w||function(t){return"[object Array]"==u.call(t)},k.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return c.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.property=function(t){return function(e){return e[t]}},k.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},k.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};F.unescape=k.invert(F.escape);var A={escape:new RegExp("["+k.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(F.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(A[t],function(e){return F[t][e]})}}),k.result=function(t,e){if(null==t)return void 0;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){C(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),I.call(this,n.apply(k,t))}})};var H=0;k.uniqueId=function(t){var e=++H+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var i;n=k.defaults({},n,k.templateSettings);var r=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(r,function(e,n,i,r,s){return a+=t.slice(o,s).replace(O,function(t){return"\\"+L[t]
}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),o=s+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(e)return i(e,k);var l=function(t){return i.call(this,t,k)};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l},k.chain=function(t){return k(t).chain()};var I=function(t){return this._chain?k(t).chain():t};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],I.call(this,n)}}),C(["concat","join","slice"],function(t){var e=i[t];k.prototype[t]=function(){return I.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}.call(this),function(){var t;t=function(){var t,e,n,i,r,o,a,s,l,u,c,h,d,p,f;return s=function(t){return null==t&&(t="img.svg"),$(t).each(function(){var t,e,n;return t=$(this),n=t.attr("src"),e=t[0].attributes,$.get(n,function(n){var i,r,o,a;for(i=$(n).find("svg"),i=i.removeAttr("xmlns:a"),o=0,a=e.length;a>o;o++)r=e[o],"src"!==r.nodeName&&i.attr(r.nodeName,r.nodeValue);return t.replaceWith(i)})})},o=function(t){var e,n,i;return null==t&&(t="nav.sidebar, nav.subnav"),e=$(t),e.length?(i=e.offset().top,n=$(window),n.scroll(function(){return function(){return n.scrollTop()>i?e.addClass("sticky"):e.removeClass("sticky")}}(this))):void 0},t=function(t){return null==t&&(t="nav.sidebar"),function(){var e,n,i,r,o,a,s,l,u,c,h;for(i=20,n=$(window),s=n.height(),o="fixed"===$(t).css("position"),c=$(""+t+" > ul > li > .subnav"),h=[],l=0,u=c.length;u>l;l++)r=c[l],e=$(r),e.css({visibility:"hidden",display:"block"}),e.removeClass("showup"),a=o?e.parent().position().top:e.offset().top-n.scrollTop(),e.height()+a+i>s&&e.addClass("showup"),h.push(e.css({visibility:"",display:""}));return h}},e=function(){return l(".account",".avatar"),l(".messages",".icon"),$("li.subuser").click(function(){return $("ul.account-actions").hide(),$("ul.subuser-actions").show()}),$("ul.subuser-actions li.previous").click(function(){return $("ul.account-actions").show(),$("ul.subuser-actions").hide()}),$("ul.notification-list li.notification").click(function(){return $("ul.notification-list").hide(),$("ul.individual-notification-list").show()}),$("ul.individual-notification-list li.previous").click(function(){return $("ul.notification-list").show(),$("ul.individual-notification-list").hide()})},l=function(t,e){var n,i;return n=$(t),i=null,$(""+t+" "+e).click(function(){return n.addClass("active")}),$(""+t+" .nav-dropdown").mouseleave(function(){var t;return t=function(){return i&&clearTimeout(i),n.removeClass("active")},i=setTimeout(t,3e3)}),$(""+t+" .nav-dropdown").mouseenter(function(){return i?clearTimeout(i):void 0})},f=function(){return $(this).find(".wrap").toggleClass("show-second").toggleClass("show-first")},i=function(t,e){return null==t&&(t="nav.sidebar .add"),null==e&&(e=".quick-add"),$(t).click(function(){var t,n,i,r,o;for(t=$(e),n=t.attr("class").split(/\s+/),r=0,o=n.length;o>r;r++)if(i=n[r],"visible"===i)return void t.removeClass("visible");return t.addClass("visible")})},r=function(t,e){return null==t&&(t='[data-action="sidemodal"]'),null==e&&(e="#side_modal"),$(t).click(function(){return $(e).modal("show")})},a=function(t){return null==t&&(t=".swapper, .btn-animation"),$(t).click(f)},d=function(t){var e,n,i,r,o;for(n=0,i=r=0,o=t.length;o>=0?o>r:r>o;i=o>=0?++r:--r)e=t.charCodeAt(i),n=(n<<5)-n+e,n&=n;return n},p=function(t){var e;return e=Math.abs(d(t)),(9301*e+49297)%233280/233280},u=function(t){var e;return e=["A33875","996C86","7B6C99","5940AA","6F82AE","2553B9","5099BD","19909B","58B588","199B45","ADC53C","C5A513","D3986D","D16E13"],"#"+e[Math.floor(p(t)*e.length)]},c=function(){var t,e,n,i,r;return e=$(this),t=e.parent(),!t.hasClass("fallback")&&(t.addClass("fallback"),i=t.data("email"))?(r=i.toString()[0].toUpperCase(),n=u(i),t.append("<div class='fallbackInitial' style='background-color: "+n+"'>"+r+"</div>")):void 0},h=function(){var t,e;return e=$(this),t=e.parent(),t.removeClass("fallback"),t.find(".fallbackInitial").remove()},n=function(t){return null==t&&(t=$(document)),t.find(".avatar img").each(function(){return this.onload=h,this.onerror=c,this.src=this.src})},{init:function(){var l;return l=t(),l(),e(),n(),i(),r(),o(),a(),s(),$(window).scroll(_.debounce(l,200)),$(window).resize(_.debounce(l,200))},balanceSubnavGenerator:t,bindAccountButtons:e,bindGravatars:n,bindQuickAdd:i,bindSideModal:r,bindStickySidebar:o,bindSwapper:a,convertSvgsToInline:s,dropdownify:l,gravatarFallback:c,swapperClickEvent:f}}(),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=t:"object"==typeof window&&"object"==typeof window.document&&(window.SendGridPalette=t)}.call(this),$(document).click(function(t){var e=$(t.target),n=$("[data-dropdown-toggle]");n.hasClass("is-active")?0==e.closest("[data-dropdown-no-close]").length&&n.removeClass("is-active"):e.closest("[data-dropdown-toggle]").addClass("is-active")}),$(function(){$("pre code").each(function(t,e){hljs.highlightBlock(e)})}),window.StyleGuide=window.StyleGuide||{},function(){function t(t){this.$modal=t,this.bindEvents()}var e="modal-open",n="show";t.prototype={bindEvents:function(){var t=this,e=this.$modal,n=e.find("[data-modal-cancel]"),i=e.find("[data-modal-confirm]"),r=e.find("[data-modal-content]");n.on("click",function(){t.hide(),$(t).trigger("modal:cancel")}),i.on("click",function(){t.hide(),$(t).trigger("modal:confirm")}),r.on("click",function(t){t.stopPropagation()}),e.on("click",function(){t.hide(),$(t).trigger("modal:cancel")})},show:function(){var t=this.$modal.hasClass(n),i=this;t||($("body").addClass(e),this.$modal.show(),this.$modal[0].offsetWidth,this.$modal.addClass(n),this.$modal.on("transitionend",function(){i.afterShow()}))},afterShow:function(){$(this).trigger("modal:shown"),this.$modal.off("transitionend")},hide:function(){var t=this;this.$modal.on("transitionend",function(){t.afterHide()}),$("body").removeClass(e),this.$modal.removeClass(n)},afterHide:function(){this.$modal.hide(),this.$modal.off("transitionend"),$(this).trigger("modal:hidden")}},StyleGuide.Modal=t}(),$(function(){$(document).on("click","[data-group-toggle] [data-group-toggleable]",function(t){var e=$(t.currentTarget);e.hasClass("is-active")||(e.parent("[data-group-toggle]").find("[data-group-toggleable]").removeClass("is-active"),e.addClass("is-active"))})}),function(){}.call(this),function(){function t(t){function e(e,n,i,r,o,a){for(;o>=0&&a>o;o+=t){var s=r?r[o]:o;i=n(i,e[s],s,e)}return i}return function(n,i,r,o){i=y(i,o,4);var a=!k(n)&&v.keys(n),s=(a||n).length,l=t>0?0:s-1;return arguments.length<3&&(r=n[a?a[l]:l],l+=t),e(n,i,r,a,l,s)}}function e(t){return function(e,n,i){n=b(n,i);for(var r=null!=e&&e.length,o=t>0?0:r-1;o>=0&&r>o;o+=t)if(n(e[o],o,e))return o;return-1}}function n(t,e){var n=T.length,i=t.constructor,r=v.isFunction(i)&&i.prototype||a,o="constructor";for(v.has(t,o)&&!v.contains(e,o)&&e.push(o);n--;)o=T[n],o in t&&t[o]!==r[o]&&!v.contains(e,o)&&e.push(o)}var i=this,r=i._,o=Array.prototype,a=Object.prototype,s=Function.prototype,l=o.push,u=o.slice,c=a.toString,h=a.hasOwnProperty,d=Array.isArray,p=Object.keys,f=s.bind,g=Object.create,m=function(){},v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):i._=v,v.VERSION="1.8.2";var y=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return null==t?v.identity:v.isFunction(t)?y(t,e,n):v.isObject(t)?v.matcher(t):v.property(t)};v.iteratee=function(t,e){return b(t,e,1/0)};var w=function(t,e){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var o=arguments[r],a=t(o),s=a.length,l=0;s>l;l++){var u=a[l];e&&void 0!==n[u]||(n[u]=o[u])}return n}},_=function(t){if(!v.isObject(t))return{};if(g)return g(t);m.prototype=t;var e=new m;return m.prototype=null,e},x=Math.pow(2,53)-1,k=function(t){var e=t&&t.length;return"number"==typeof e&&e>=0&&x>=e};v.each=v.forEach=function(t,e,n){e=y(e,n);var i,r;if(k(t))for(i=0,r=t.length;r>i;i++)e(t[i],i,t);else{var o=v.keys(t);for(i=0,r=o.length;r>i;i++)e(t[o[i]],o[i],t)}return t},v.map=v.collect=function(t,e,n){e=b(e,n);for(var i=!k(t)&&v.keys(t),r=(i||t).length,o=Array(r),a=0;r>a;a++){var s=i?i[a]:a;o[a]=e(t[s],s,t)}return o},v.reduce=v.foldl=v.inject=t(1),v.reduceRight=v.foldr=t(-1),v.find=v.detect=function(t,e,n){var i;return i=k(t)?v.findIndex(t,e,n):v.findKey(t,e,n),void 0!==i&&-1!==i?t[i]:void 0},v.filter=v.select=function(t,e,n){var i=[];return e=b(e,n),v.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i},v.reject=function(t,e,n){return v.filter(t,v.negate(b(e)),n)},v.every=v.all=function(t,e,n){e=b(e,n);for(var i=!k(t)&&v.keys(t),r=(i||t).length,o=0;r>o;o++){var a=i?i[o]:o;if(!e(t[a],a,t))return!1}return!0},v.some=v.any=function(t,e,n){e=b(e,n);for(var i=!k(t)&&v.keys(t),r=(i||t).length,o=0;r>o;o++){var a=i?i[o]:o;if(e(t[a],a,t))return!0}return!1},v.contains=v.includes=v.include=function(t,e,n){return k(t)||(t=v.values(t)),v.indexOf(t,e,"number"==typeof n&&n)>=0},v.invoke=function(t,e){var n=u.call(arguments,2),i=v.isFunction(e);return v.map(t,function(t){var r=i?e:t[e];return null==r?r:r.apply(t,n)})},v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matcher(e))},v.findWhere=function(t,e){return v.find(t,v.matcher(e))},v.max=function(t,e,n){var i,r,o=-1/0,a=-1/0;if(null==e&&null!=t){t=k(t)?t:v.values(t);for(var s=0,l=t.length;l>s;s++)i=t[s],i>o&&(o=i)}else e=b(e,n),v.each(t,function(t,n,i){r=e(t,n,i),(r>a||r===-1/0&&o===-1/0)&&(o=t,a=r)});return o},v.min=function(t,e,n){var i,r,o=1/0,a=1/0;if(null==e&&null!=t){t=k(t)?t:v.values(t);for(var s=0,l=t.length;l>s;s++)i=t[s],o>i&&(o=i)}else e=b(e,n),v.each(t,function(t,n,i){r=e(t,n,i),(a>r||1/0===r&&1/0===o)&&(o=t,a=r)});return o},v.shuffle=function(t){for(var e,n=k(t)?t:v.values(t),i=n.length,r=Array(i),o=0;i>o;o++)e=v.random(0,o),e!==o&&(r[o]=r[e]),r[e]=n[o];return r},v.sample=function(t,e,n){return null==e||n?(k(t)||(t=v.values(t)),t[v.random(t.length-1)]):v.shuffle(t).slice(0,Math.max(0,e))},v.sortBy=function(t,e,n){return e=b(e,n),v.pluck(v.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var C=function(t){return function(e,n,i){var r={};return n=b(n,i),v.each(e,function(i,o){var a=n(i,o,e);t(r,i,a)}),r}};v.groupBy=C(function(t,e,n){v.has(t,n)?t[n].push(e):t[n]=[e]}),v.indexBy=C(function(t,e,n){t[n]=e}),v.countBy=C(function(t,e,n){v.has(t,n)?t[n]++:t[n]=1}),v.toArray=function(t){return t?v.isArray(t)?u.call(t):k(t)?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:k(t)?t.length:v.keys(t).length},v.partition=function(t,e,n){e=b(e,n);var i=[],r=[];return v.each(t,function(t,n,o){(e(t,n,o)?i:r).push(t)}),[i,r]},v.first=v.head=v.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:v.initial(t,t.length-e)},v.initial=function(t,e,n){return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},v.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:v.rest(t,Math.max(0,t.length-e))},v.rest=v.tail=v.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},v.compact=function(t){return v.filter(t,v.identity)};var $=function(t,e,n,i){for(var r=[],o=0,a=i||0,s=t&&t.length;s>a;a++){var l=t[a];if(k(l)&&(v.isArray(l)||v.isArguments(l))){e||(l=$(l,e,n));var u=0,c=l.length;for(r.length+=c;c>u;)r[o++]=l[u++]}else n||(r[o++]=l)}return r};v.flatten=function(t,e){return $(t,e,!1)},v.without=function(t){return v.difference(t,u.call(arguments,1))},v.uniq=v.unique=function(t,e,n,i){if(null==t)return[];v.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=b(n,i));for(var r=[],o=[],a=0,s=t.length;s>a;a++){var l=t[a],u=n?n(l,a,t):l;e?(a&&o===u||r.push(l),o=u):n?v.contains(o,u)||(o.push(u),r.push(l)):v.contains(r,l)||r.push(l)}return r},v.union=function(){return v.uniq($(arguments,!0,!0))},v.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,i=0,r=t.length;r>i;i++){var o=t[i];if(!v.contains(e,o)){for(var a=1;n>a&&v.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},v.difference=function(t){var e=$(arguments,!0,!0,1);return v.filter(t,function(t){return!v.contains(e,t)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(t){for(var e=t&&v.max(t,"length").length||0,n=Array(e),i=0;e>i;i++)n[i]=v.pluck(t,i);return n},v.object=function(t,e){for(var n={},i=0,r=t&&t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},v.indexOf=function(t,e,n){var i=0,r=t&&t.length;if("number"==typeof n)i=0>n?Math.max(0,r+n):n;else if(n&&r)return i=v.sortedIndex(t,e),t[i]===e?i:-1;if(e!==e)return v.findIndex(u.call(t,i),v.isNaN);for(;r>i;i++)if(t[i]===e)return i;return-1},v.lastIndexOf=function(t,e,n){var i=t?t.length:0;if("number"==typeof n&&(i=0>n?i+n+1:Math.min(i,n+1)),e!==e)return v.findLastIndex(u.call(t,0,i),v.isNaN);for(;--i>=0;)if(t[i]===e)return i;return-1},v.findIndex=e(1),v.findLastIndex=e(-1),v.sortedIndex=function(t,e,n,i){n=b(n,i,1);for(var r=n(e),o=0,a=t.length;a>o;){var s=Math.floor((o+a)/2);n(t[s])<r?o=s+1:a=s}return o},v.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;i>o;o++,t+=n)r[o]=t;return r};var S=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=_(t.prototype),a=t.apply(o,r);return v.isObject(a)?a:o};v.bind=function(t,e){if(f&&t.bind===f)return f.apply(t,u.call(arguments,1));if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),i=function(){return S(t,i,e,this,n.concat(u.call(arguments)))};return i},v.partial=function(t){var e=u.call(arguments,1),n=function(){for(var i=0,r=e.length,o=Array(r),a=0;r>a;a++)o[a]=e[a]===v?arguments[i++]:e[a];for(;i<arguments.length;)o.push(arguments[i++]);return S(t,n,this,this,o)};return n},v.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=v.bind(t[n],t);return t},v.memoize=function(t,e){var n=function(i){var r=n.cache,o=""+(e?e.apply(this,arguments):i);return v.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n},v.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},v.defer=v.partial(v.delay,v,1),v.throttle=function(t,e,n){var i,r,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:v.now(),a=null,o=t.apply(i,r),a||(i=r=null)};return function(){var u=v.now();s||n.leading!==!1||(s=u);var c=e-(u-s);return i=this,r=arguments,0>=c||c>e?(a&&(clearTimeout(a),a=null),s=u,o=t.apply(i,r),a||(i=r=null)):a||n.trailing===!1||(a=setTimeout(l,c)),o}},v.debounce=function(t,e,n){var i,r,o,a,s,l=function(){var u=v.now()-a;e>u&&u>=0?i=setTimeout(l,e-u):(i=null,n||(s=t.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,a=v.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(s=t.apply(o,r),o=r=null),s}},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},v.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},v.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},v.once=v.partial(v.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(t){if(!v.isObject(t))return[];if(p)return p(t);var e=[];for(var i in t)v.has(t,i)&&e.push(i);return M&&n(t,e),e},v.allKeys=function(t){if(!v.isObject(t))return[];var e=[];for(var i in t)e.push(i);return M&&n(t,e),e},v.values=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},v.mapObject=function(t,e,n){e=b(e,n);for(var i,r=v.keys(t),o=r.length,a={},s=0;o>s;s++)i=r[s],a[i]=e(t[i],i,t);return a},v.pairs=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},v.invert=function(t){for(var e={},n=v.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},v.functions=v.methods=function(t){var e=[];for(var n in t)v.isFunction(t[n])&&e.push(n);return e.sort()},v.extend=w(v.allKeys),v.extendOwn=v.assign=w(v.keys),v.findKey=function(t,e,n){e=b(e,n);for(var i,r=v.keys(t),o=0,a=r.length;a>o;o++)if(i=r[o],e(t[i],i,t))return i},v.pick=function(t,e,n){var i,r,o={},a=t;if(null==a)return o;v.isFunction(e)?(r=v.allKeys(a),i=y(e,n)):(r=$(arguments,!1,!1,1),i=function(t,e,n){return e in n},a=Object(a));for(var s=0,l=r.length;l>s;s++){var u=r[s],c=a[u];i(c,u,a)&&(o[u]=c)}return o},v.omit=function(t,e,n){if(v.isFunction(e))e=v.negate(e);else{var i=v.map($(arguments,!1,!1,1),String);e=function(t,e){return!v.contains(i,e)}}return v.pick(t,e,n)},v.defaults=w(v.allKeys,!0),v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t},v.isMatch=function(t,e){var n=v.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;i>o;o++){var a=n[o];if(e[a]!==r[a]||!(a in r))return!1}return!0};var E=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var r=c.call(t);if(r!==c.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(v.isFunction(a)&&a instanceof a&&v.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),o){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!E(t[l],e[l],n,i))return!1}else{var u,h=v.keys(t);if(l=h.length,v.keys(e).length!==l)return!1;for(;l--;)if(u=h[l],!v.has(e,u)||!E(t[u],e[u],n,i))return!1}return n.pop(),i.pop(),!0};v.isEqual=function(t,e){return E(t,e)},v.isEmpty=function(t){return null==t?!0:k(t)&&(v.isArray(t)||v.isString(t)||v.isArguments(t))?0===t.length:0===v.keys(t).length},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=d||function(t){return"[object Array]"===c.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){v["is"+t]=function(e){return c.call(e)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(t){return v.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&t!==+t},v.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===c.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){return null!=t&&h.call(t,e)},v.noConflict=function(){return i._=r,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=function(t){return function(e){return null==e?void 0:e[t]}},v.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(e){return v.isMatch(e,t)}},v.times=function(t,e,n){var i=Array(Math.max(0,t));e=y(e,n,1);for(var r=0;t>r;r++)i[r]=e(r);return i},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=v.invert(D),F=function(t){var e=function(e){return t[e]},n="(?:"+v.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};v.escape=F(D),v.unescape=F(N),v.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),v.isFunction(i)?i.call(t):i};var A=0;v.uniqueId=function(t){var e=++A+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\u2028|\u2029/g,O=function(t){return"\\"+P[t]};v.template=function(t,e,n){!e&&n&&(e=n),e=v.defaults({},e,v.templateSettings);var i=RegExp([(e.escape||H).source,(e.interpolate||H).source,(e.evaluate||H).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,function(e,n,i,a,s){return o+=t.slice(r,s).replace(L,O),r=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(s){throw s.source=o,s}var l=function(t){return a.call(this,t,v)},u=e.variable||"obj";return l.source="function("+u+"){\n"+o+"}",l},v.chain=function(t){var e=v(t);return e._chain=!0,e};var I=function(t,e){return t._chain?v(e).chain():e};v.mixin=function(t){v.each(v.functions(t),function(e){var n=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),I(this,n.apply(v,t))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];v.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],I(this,n)}}),v.each(["concat","join","slice"],function(t){var e=o[t];v.prototype[t]=function(){return I(this,e.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this),function(t,e,n){function i(t){return t}function r(t){return o(decodeURIComponent(t.replace(s," ")))}function o(t){return 0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),t}function a(t){return l.json?JSON.parse(t):t}var s=/\+/g,l=t.cookie=function(o,s,u){if(s!==n){if(u=t.extend({},l.defaults,u),null===s&&(u.expires=-1),"number"==typeof u.expires){var c=u.expires,h=u.expires=new Date;h.setDate(h.getDate()+c)}return s=l.json?JSON.stringify(s):String(s),e.cookie=[encodeURIComponent(o),"=",l.raw?s:encodeURIComponent(s),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}for(var d=l.raw?i:r,p=e.cookie.split("; "),f=o?null:{},g=0,m=p.length;m>g;g++){var v=p[g].split("="),y=d(v.shift()),b=d(v.join("="));if(o&&o===y){f=a(b);break}o||(f[y]=a(b))}return f};l.defaults={},t.removeCookie=function(e,n){return null!==t.cookie(e)?(t.cookie(e,null,n),!0):!1}}(jQuery,document),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t,e){var n=0,i=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(o){}r(e)},t.widget=function(e,n,i){var r,o,a,s,l={},u=e.split(".")[0];e=e.split(".")[1],r=u+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[u]=t[u]||{},o=t[u][e],a=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,o,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},r=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=o,e}}()):void(l[e]=i)}),a.prototype=t.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||e:e},l,{constructor:a,namespace:u,widgetName:e,widgetFullName:r}),o?(t.each(o._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),t.widget.bridge(e,a)},t.widget.extend=function(n){for(var r,o,a=i.call(arguments,1),s=0,l=a.length;l>s;s++)for(r in a[s])o=a[s][r],a[s].hasOwnProperty(r)&&o!==e&&(n[r]=t.isPlainObject(o)?t.isPlainObject(n[r])?t.widget.extend({},n[r],o):t.widget.extend({},o):o);return n},t.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;t.fn[n]=function(a){var s="string"==typeof a,l=i.call(arguments,1),u=this;return a=!s&&l.length?t.widget.extend.apply(null,[a].concat(l)):a,this.each(s?function(){var i,r=t.data(this,o);return r?t.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,l),i!==r&&i!==e?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+a+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}:function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new r(a,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var r,o,a,s=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(s={},r=n.split("."),n=r.shift(),r.length){for(o=s[n]=t.widget.extend({},this.options[n]),a=0;a<r.length-1;a++)o[r[a]]=o[r[a]]||{},o=o[r[a]];if(n=r.pop(),1===arguments.length)return o[n]===e?null:o[n];o[n]=i}else{if(1===arguments.length)return this.options[n]===e?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var r,o=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,function(i,a){function s(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?r.delegate(c,u,s):n.bind(u,s)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var r,o,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),a=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&t.effects&&t.effects.effect[s]?i[e](r):s!==e&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){t(this)[e](),o&&o.call(i[0]),n()})}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],t):t(window.jQuery)}(function(t){"use strict";t.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||t('<input type="file">').prop("disabled")),t.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:t(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(e,n){return e=this.messages[e]||e.toString(),n&&t.each(n,function(t,n){e=e.replace("{"+t+"}",n)}),e},formData:function(t){return t.serializeArray()},add:function(e,n){return e.isDefaultPrevented()?!1:void((n.autoUpload||n.autoUpload!==!1&&t(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:t.support.blobSlice&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,n){var i=t-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(e-this.loaded)*(1e3/i)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)
},_getFormData:function(e){var n;return"function"===t.type(e.formData)?e.formData(e.form):t.isArray(e.formData)?e.formData:"object"===t.type(e.formData)?(n=[],t.each(e.formData,function(t,e){n.push({name:t,value:e})}),n):[]},_getTotal:function(e){var n=0;return t.each(e,function(t,e){n+=e.size||1}),n},_initProgressObject:function(e){var n={loaded:0,total:0,bitrate:0};e._progress?t.extend(e._progress,n):e._progress=n},_initResponseObject:function(t){var e;if(t._response)for(e in t._response)t._response.hasOwnProperty(e)&&delete t._response[e];else t._response={}},_onProgress:function(e,n){if(e.lengthComputable){var i,r=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&r-n._time<n.progressInterval&&e.loaded!==e.total)return;n._time=r,i=Math.floor(e.loaded/e.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(r,i,n.bitrateInterval),this._trigger("progress",t.Event("progress",{delegatedEvent:e}),n),this._trigger("progressall",t.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(e){var n=this,i=e.xhr?e.xhr():t.ajaxSettings.xhr();i.upload&&(t(i.upload).bind("progress",function(t){var i=t.originalEvent;t.lengthComputable=i.lengthComputable,t.loaded=i.loaded,t.total=i.total,n._onProgress(t,e)}),e.xhr=function(){return i})},_isInstanceOf:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},_initXHRData:function(e){var n,i=this,r=e.files[0],o=e.multipart||!t.support.xhrFileUpload,a="array"===t.type(e.paramName)?e.paramName[0]:e.paramName;e.headers=t.extend({},e.headers),e.contentRange&&(e.headers["Content-Range"]=e.contentRange),o&&!e.blob&&this._isInstanceOf("File",r)||(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),o?t.support.xhrFormDataFileUpload&&(e.postMessage?(n=this._getFormData(e),e.blob?n.push({name:a,value:e.blob}):t.each(e.files,function(i,r){n.push({name:"array"===t.type(e.paramName)&&e.paramName[i]||a,value:r})})):(i._isInstanceOf("FormData",e.formData)?n=e.formData:(n=new FormData,t.each(this._getFormData(e),function(t,e){n.append(e.name,e.value)})),e.blob?n.append(a,e.blob,r.name):t.each(e.files,function(r,o){(i._isInstanceOf("File",o)||i._isInstanceOf("Blob",o))&&n.append("array"===t.type(e.paramName)&&e.paramName[r]||a,o,o.uploadName||o.name)})),e.data=n):(e.contentType=r.type||"application/octet-stream",e.data=e.blob||r),e.blob=null},_initIframeSettings:function(e){var n=t("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&n&&n!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(e){var n=t(e.fileInput),i=e.paramName;return i?t.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var e=t(this),n=e.prop("name")||"files[]",r=(e.prop("files")||[1]).length;r;)i.push(n),r-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||"string"===t.type(e.form.prop("method"))&&e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var n=t.extend({},this.options,e);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,n,i){var r=t.Deferred(),o=r.promise();return n=n||this.options.context||o,e===!0?r.resolveWith(n,i):e===!1&&r.rejectWith(n,i),o.abort=r.promise,this._enhancePromise(o)},_addConvenienceMethods:function(e,n){var i=this,r=function(e){return t.Deferred().resolveWith(i,e).promise()};n.process=function(e,o){return(e||o)&&(n._processQueue=this._processQueue=(this._processQueue||r([this])).pipe(function(){return n.errorThrown?t.Deferred().rejectWith(i,[n]).promise():r(arguments)}).pipe(e,o)),this._processQueue||r([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=i._trigger("submit",t.Event("submit",{delegatedEvent:e}),this)!==!1&&i._onSend(e,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),n=e&&e.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(e,n){e.uploadedBytes=e.uploadedBytes||0;var i,r,o=this,a=e.files[0],s=a.size,l=e.uploadedBytes,u=e.maxChunkSize||s,c=this._blobSlice,h=t.Deferred(),d=h.promise();return this._isXHRUpload(e)&&c&&(l||s>u)&&!e.data?n?!0:l>=s?(a.error=e.i18n("uploadedBytes"),this._getXHRPromise(!1,e.context,[null,"error",a.error])):(r=function(){var n=t.extend({},e),d=n._progress.loaded;n.blob=c.call(a,l,l+u,a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+s,o._initXHRData(n),o._initProgressListener(n),i=(o._trigger("chunksend",null,n)!==!1&&t.ajax(n)||o._getXHRPromise(!1,n.context)).done(function(i,a,u){l=o._getUploadedBytes(u)||l+n.chunkSize,d+n.chunkSize-n._progress.loaded&&o._onProgress(t.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),e.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=a,n.jqXHR=u,o._trigger("chunkdone",null,n),o._trigger("chunkalways",null,n),s>l?r():h.resolveWith(n.context,[i,a,u])}).fail(function(t,e,i){n.jqXHR=t,n.textStatus=e,n.errorThrown=i,o._trigger("chunkfail",null,n),o._trigger("chunkalways",null,n),h.rejectWith(n.context,[t,e,i])})},this._enhancePromise(d),d.abort=function(){return i.abort()},r(),d):!1},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(e),this._initProgressObject(e),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},_onDone:function(e,n,i,r){var o=r._progress.total,a=r._response;r._progress.loaded<o&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r),a.result=r.result=e,a.textStatus=r.textStatus=n,a.jqXHR=r.jqXHR=i,this._trigger("done",null,r)},_onFail:function(t,e,n,i){var r=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),r.jqXHR=i.jqXHR=t,r.textStatus=i.textStatus=e,r.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(t,e,n,i){this._trigger("always",null,i)},_onSend:function(e,n){n.submit||this._addConvenienceMethods(e,n);var i,r,o,a,s=this,l=s._getAJAXSettings(n),u=function(){return s._sending+=1,l._bitrateTimer=new s._BitrateTimer,i=i||((r||s._trigger("send",t.Event("send",{delegatedEvent:e}),l)===!1)&&s._getXHRPromise(!1,l.context,r)||s._chunkedUpload(l)||t.ajax(l)).done(function(t,e,n){s._onDone(t,e,n,l)}).fail(function(t,e,n){s._onFail(t,e,n,l)}).always(function(t,e,n){if(s._onAlways(t,e,n,l),s._sending-=1,s._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>s._sending)for(var i=s._slots.shift();i;){if("pending"===s._getDeferredState(i)){i.resolve();break}i=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(e,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=t.Deferred(),this._slots.push(o),a=o.pipe(u)):(this._sequence=this._sequence.pipe(u,u),a=this._sequence),a.abort=function(){return r=[void 0,"abort","abort"],i?i.abort():(o&&o.rejectWith(l.context,r),u())},this._enhancePromise(a)):u()},_onAdd:function(e,n){var i,r,o,a,s=this,l=!0,u=t.extend({},this.options,n),c=n.files,h=c.length,d=u.limitMultiFileUploads,p=u.limitMultiFileUploadSize,f=u.limitMultiFileUploadSizeOverhead,g=0,m=this._getParamName(u),v=0;if(!p||h&&void 0!==c[0].size||(p=void 0),(u.singleFileUploads||d||p)&&this._isXHRUpload(u))if(u.singleFileUploads||p||!d)if(!u.singleFileUploads&&p)for(o=[],i=[],a=0;h>a;a+=1)g+=c[a].size+f,(a+1===h||g+c[a+1].size+f>p||d&&a+1-v>=d)&&(o.push(c.slice(v,a+1)),r=m.slice(v,a+1),r.length||(r=m),i.push(r),v=a+1,g=0);else i=m;else for(o=[],i=[],a=0;h>a;a+=d)o.push(c.slice(a,a+d)),r=m.slice(a,a+d),r.length||(r=m),i.push(r);else o=[c],i=[m];return n.originalFiles=c,t.each(o||c,function(r,a){var u=t.extend({},n);return u.files=o?a:[a],u.paramName=i[r],s._initResponseObject(u),s._initProgressObject(u),s._addConvenienceMethods(e,u),l=s._trigger("add",t.Event("add",{delegatedEvent:e}),u)}),l},_replaceFileInput:function(e){var n=e.clone(!0);t("<form></form>").append(n)[0].reset(),e.after(n).detach(),t.cleanData(e.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,i){return i===e[0]?n[0]:i}),e[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(e,n){var i,r=this,o=t.Deferred(),a=function(t){t&&!t.entry&&(t.entry=e),o.resolve([t])};return n=n||"",e.isFile?e._file?(e._file.relativePath=n,o.resolve(e._file)):e.file(function(t){t.relativePath=n,o.resolve(t)},a):e.isDirectory?(i=e.createReader(),i.readEntries(function(t){r._handleFileTreeEntries(t,n+e.name+"/").done(function(t){o.resolve(t)}).fail(a)},a)):o.resolve([]),o.promise()},_handleFileTreeEntries:function(e,n){var i=this;return t.when.apply(t,t.map(e,function(t){return i._handleFileTreeEntry(t,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var n=e.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(t.map(n,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=t(e);var n,i,r=e.prop("webkitEntries")||e.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(n=t.makeArray(e.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&t.each(n,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(i=e.prop("value"),!i)return t.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return t.Deferred().resolve(n).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var n=this,i={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(i.fileInput).always(function(r){i.files=r,n.options.replaceFileInput&&n._replaceFileInput(i.fileInput),n._trigger("change",t.Event("change",{delegatedEvent:e}),i)!==!1&&n._onAdd(e,i)})},_onPaste:function(e){var n=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(t.each(n,function(t,e){var n=e.getAsFile&&e.getAsFile();n&&i.files.push(n)}),this._trigger("paste",t.Event("paste",{delegatedEvent:e}),i)!==!1&&this._onAdd(e,i))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var n=this,i=e.dataTransfer,r={};i&&i.files&&i.files.length&&(e.preventDefault(),this._getDroppedFiles(i).always(function(i){r.files=i,n._trigger("drop",t.Event("drop",{delegatedEvent:e}),r)!==!1&&n._onAdd(e,r)}))},_onDragOver:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var n=e.dataTransfer;n&&-1!==t.inArray("Files",n.types)&&this._trigger("dragover",t.Event("dragover",{delegatedEvent:e}))!==!1&&(e.preventDefault(),n.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),t.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,n){var i=-1!==t.inArray(e,this._specialOptions);i&&this._destroyEventHandlers(),this._super(e,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_getRegExp:function(t){var e=t.split("/"),n=e.pop();return e.shift(),new RegExp(e.join("/"),n)},_isRegExpOption:function(e,n){return"url"!==e&&"string"===t.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var e=this,n=this.options;t.each(t(this.element[0].cloneNode(!1)).data(),function(t,i){e._isRegExpOption(t,i)&&(i=e._getRegExp(i)),n[t]=i})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(e){var n=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,n._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var n,i,r=this,o=t.Deferred(),a=o.promise();return a.abort=function(){return i=!0,n?n.abort():(o.reject(null,"abort","abort"),a)},this._getFileInputFiles(e.fileInput).always(function(t){if(!i){if(!t.length)return void o.reject();e.files=t,n=r._onSend(null,e).then(function(t,e,n){o.resolve(t,e,n)},function(t,e,n){o.reject(t,e,n)})}}),this._enhancePromise(a)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),function(t){function e(){o=!1;for(var e=0;e<i.length;e++){var r=t(i[e]).filter(function(){return t(this).is(":appeared")});if(r.trigger("appear",[r]),n){var a=n.not(r);a.trigger("disappear",[a])}n=r}}var n,i=[],r=!1,o=!1,a={interval:250,force_process:!1},s=t(window);t.expr[":"].appeared=function(e){var n=t(e);if(!n.is(":visible"))return!1;var i=s.scrollLeft(),r=s.scrollTop(),o=n.offset(),a=o.left,l=o.top;return l+n.height()>=r&&l-(n.data("appear-top-offset")||0)<=r+s.height()&&a+n.width()>=i&&a-(n.data("appear-left-offset")||0)<=i+s.width()?!0:!1},t.fn.extend({appear:function(n){var s=t.extend({},a,n||{}),l=this.selector||this;if(!r){var u=function(){o||(o=!0,setTimeout(e,s.interval))};t(window).scroll(u).resize(u),r=!0}return s.force_process&&setTimeout(e,s.interval),i.push(l),t(l)}}),t.extend({force_appear:function(){return r?(e(),!0):!1}})}(jQuery),function(t){var e={init:function(n){var i=t.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:0,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",ellipsePageSet:!0,cssStyle:"light-theme",listStyle:"",labelMap:[],selectOnClick:!0,nextAtFront:!1,invertPageOrder:!1,useStartEdge:!0,useEndEdge:!0,onPageClick:function(){},onInit:function(){}},n||{}),r=this;return i.pages=i.pages?i.pages:Math.ceil(i.items/i.itemsOnPage)?Math.ceil(i.items/i.itemsOnPage):1,i.currentPage=i.currentPage?i.currentPage-1:i.invertPageOrder?i.pages-1:0,i.halfDisplayed=i.displayedPages/2,this.each(function(){r.addClass(i.cssStyle+" simple-pagination").data("pagination",i),e._draw.call(r)}),i.onInit(),this},selectPage:function(t){return e._selectPage.call(this,t-1),this},prevPage:function(){var t=this.data("pagination");return t.invertPageOrder?t.currentPage<t.pages-1&&e._selectPage.call(this,t.currentPage+1):t.currentPage>0&&e._selectPage.call(this,t.currentPage-1),this},nextPage:function(){var t=this.data("pagination");return t.invertPageOrder?t.currentPage>0&&e._selectPage.call(this,t.currentPage-1):t.currentPage<t.pages-1&&e._selectPage.call(this,t.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},setPagesCount:function(t){this.data("pagination").pages=t},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(t){var n=this.data("pagination");return n.currentPage=t-1,this.data("pagination",n),e._draw.call(this),this},redraw:function(){return e._draw.call(this),this},disable:function(){var t=this.data("pagination");return t.disabled=!0,this.data("pagination",t),e._draw.call(this),this},enable:function(){var t=this.data("pagination");return t.disabled=!1,this.data("pagination",t),e._draw.call(this),this},updateItems:function(t){var n=this.data("pagination");n.items=t,n.pages=e._getPages(n),this.data("pagination",n),e._draw.call(this)},updateItemsOnPage:function(t){var n=this.data("pagination");return n.itemsOnPage=t,n.pages=e._getPages(n),this.data("pagination",n),e._selectPage.call(this,0),this},getItemsOnPage:function(){return this.data("pagination").itemsOnPage},_draw:function(){var n,i,r=this.data("pagination"),o=e._getInterval(r);e.destroy.call(this),i="function"==typeof this.prop?this.prop("tagName"):this.attr("tagName");var a="UL"===i?this:t("<ul"+(r.listStyle?' class="'+r.listStyle+'"':"")+"></ul>").appendTo(this);if(r.prevText&&e._appendItem.call(this,r.invertPageOrder?r.currentPage+1:r.currentPage-1,{text:r.prevText,classes:"prev"}),r.nextText&&r.nextAtFront&&e._appendItem.call(this,r.invertPageOrder?r.currentPage-1:r.currentPage+1,{text:r.nextText,classes:"next"}),r.invertPageOrder){if(o.end<r.pages&&r.edges>0){if(r.useStartEdge){var s=Math.max(r.pages-r.edges,o.end);for(n=r.pages-1;n>=s;n--)e._appendItem.call(this,n)}r.pages-r.edges>o.end&&r.pages-r.edges-o.end!=1?a.append('<li class="disabled"><span class="ellipse">'+r.ellipseText+"</span></li>"):r.pages-r.edges-o.end==1&&e._appendItem.call(this,o.end)}}else if(o.start>0&&r.edges>0){if(r.useStartEdge){var l=Math.min(r.edges,o.start);for(n=0;l>n;n++)e._appendItem.call(this,n)}r.edges<o.start&&o.start-r.edges!=1?a.append('<li class="disabled"><span class="ellipse">'+r.ellipseText+"</span></li>"):o.start-r.edges==1&&e._appendItem.call(this,r.edges)}if(r.invertPageOrder)for(n=o.end-1;n>=o.start;n--)e._appendItem.call(this,n);else for(n=o.start;n<o.end;n++)e._appendItem.call(this,n);if(r.invertPageOrder){if(o.start>0&&r.edges>0&&(r.edges<o.start&&o.start-r.edges!=1?a.append('<li class="disabled"><span class="ellipse">'+r.ellipseText+"</span></li>"):o.start-r.edges==1&&e._appendItem.call(this,r.edges),r.useEndEdge)){var l=Math.min(r.edges,o.start);for(n=l-1;n>=0;n--)e._appendItem.call(this,n)}}else if(o.end<r.pages&&r.edges>0&&(r.pages-r.edges>o.end&&r.pages-r.edges-o.end!=1?a.append('<li class="disabled"><span class="ellipse">'+r.ellipseText+"</span></li>"):r.pages-r.edges-o.end==1&&e._appendItem.call(this,o.end),r.useEndEdge)){var s=Math.max(r.pages-r.edges,o.end);for(n=s;n<r.pages;n++)e._appendItem.call(this,n)}r.nextText&&!r.nextAtFront&&e._appendItem.call(this,r.invertPageOrder?r.currentPage-1:r.currentPage+1,{text:r.nextText,classes:"next"}),r.ellipsePageSet&&!r.disabled&&e._ellipseClick.call(this,a)},_getPages:function(t){var e=Math.ceil(t.items/t.itemsOnPage);return e||1},_getInterval:function(t){return{start:Math.ceil(t.currentPage>t.halfDisplayed?Math.max(Math.min(t.currentPage-t.halfDisplayed,t.pages-t.displayedPages),0):0),end:Math.ceil(t.currentPage>t.halfDisplayed?Math.min(t.currentPage+t.halfDisplayed,t.pages):Math.min(t.displayedPages,t.pages))}},_appendItem:function(n,i){var r,o,a=this,s=a.data("pagination"),l=t("<li></li>"),u=a.find("ul");n=0>n?0:n<s.pages?n:s.pages-1,r={text:n+1,classes:""},s.labelMap.length&&s.labelMap[n]&&(r.text=s.labelMap[n]),r=t.extend(r,i||{}),n==s.currentPage||s.disabled?(l.addClass(s.disabled||"prev"===r.classes||"next"===r.classes?"disabled":"active"),o=t('<span class="current">'+r.text+"</span>")):(o=t('<a href="'+s.hrefTextPrefix+(n+1)+s.hrefTextSuffix+'" class="page-link">'+r.text+"</a>"),o.click(function(t){return e._selectPage.call(a,n,t)})),r.classes&&o.addClass(r.classes),l.append(o),u.length?u.append(l):a.append(l)},_selectPage:function(t,n){var i=this.data("pagination");return i.currentPage=t,i.selectOnClick&&e._draw.call(this),i.onPageClick(t+1,n)},_ellipseClick:function(n){var i=this,r=this.data("pagination"),o=n.find(".ellipse");o.addClass("clickable").parent().removeClass("disabled"),o.click(function(){if(!r.disable){var n=t(this),a=(parseInt(n.parent().prev().text(),10)||0)+1;n.html('<input type="number" min="1" max="'+r.pages+'" step="1" value="'+a+'">').find("input").focus().click(function(t){t.stopPropagation()}).keyup(function(n){var a=t(this).val();13===n.which&&""!==a?a>0&&a<=r.pages&&e._selectPage.call(i,a-1):27===n.which&&o.empty().html(r.ellipseText)}).bind("blur",function(){var n=t(this).val();return""!==n&&e._selectPage.call(i,n-1),o.empty().html(r.ellipseText),!1})}return!1})}};t.fn.pagination=function(n){return e[n]&&"_"!=n.charAt(0)?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.pagination"):e.init.apply(this,arguments)}}(jQuery);var Handlebars=function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return s[t]||"&amp;"}function n(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function i(t){return t instanceof a?t.toString():t||0===t?(t=""+t,u.test(t)?t.replace(l,e):t):""}function r(t){return t||0===t?d(t)&&0===t.length?!0:!1:!0}var o={},a=t,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,u=/[&<>"'`]/;o.extend=n;var c=Object.prototype.toString;o.toString=c;var h=function(t){return"function"==typeof t};h(/x/)&&(h=function(t){return"function"==typeof t&&"[object Function]"===c.call(t)});var h;o.isFunction=h;var d=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===c.call(t):!1};return o.isArray=d,o.escapeExpression=i,o.isEmpty=r,o}(t),n=function(){"use strict";function t(t,e){var i;e&&e.firstLine&&(i=e.firstLine,t+=" - "+i+":"+e.firstColumn);for(var r=Error.prototype.constructor.call(this,t),o=0;o<n.length;o++)this[n[o]]=r[n[o]];i&&(this.lineNumber=i,this.column=e.firstColumn)}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),i=function(t,e){"use strict";function n(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw new s("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse||function(){},r=n.fn;return d(e)&&(e=e.call(this)),e===!0?r(this):e===!1||null==e?i(this):h(e)?e.length>0?t.helpers.each(e,n):i(this):r(e)}),t.registerHelper("each",function(t,e){var n,i=e.fn,r=e.inverse,o=0,a="";if(d(t)&&(t=t.call(this)),e.data&&(n=m(e.data)),t&&"object"==typeof t)if(h(t))for(var s=t.length;s>o;o++)n&&(n.index=o,n.first=0===o,n.last=o===t.length-1),a+=i(t[o],{data:n});else for(var l in t)t.hasOwnProperty(l)&&(n&&(n.key=l,n.index=o,n.first=0===o),a+=i(t[l],{data:n}),o++);return 0===o&&(a=r(this)),a}),t.registerHelper("if",function(t,e){return d(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||a.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){return d(t)&&(t=t.call(this)),a.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)})}function r(t,e){g.log(t,e)}var o={},a=t,s=e,l="1.3.0";o.VERSION=l;var u=4;o.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};o.REVISION_CHANGES=c;var h=a.isArray,d=a.isFunction,p=a.toString,f="[object Object]";o.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:g,log:r,registerHelper:function(t,e,n){if(p.call(t)===f){if(n||e)throw new s("Arg not supported with multiple helpers");a.extend(this.helpers,t)}else n&&(e.not=n),this.helpers[t]=e},registerPartial:function(t,e){p.call(t)===f?a.extend(this.partials,t):this.partials[t]=e}};var g={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(g.level<=t){var n=g.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};o.logger=g,o.log=r;var m=function(t){var e={};return a.extend(e,t),e};return o.createFrame=m,o}(e,n),r=function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=d;if(e!==n){if(n>e){var i=p[n],r=p[e];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){if(!e)throw new h("No environment passed to template");var n=function(t,n,i,r,o,a){var s=e.VM.invokePartial.apply(this,arguments);if(null!=s)return s;if(e.compile){var l={helpers:r,partials:o,data:a};return o[n]=e.compile(t,{data:void 0!==a},e),o[n](i,l)}throw new h("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(t,e,n){var i=this.programs[t];return n?i=a(t,e,n):i||(i=this.programs[t]=a(t,e)),i},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n={},c.extend(n,e),c.extend(n,t)),n},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(n,r){r=r||{};var o,a,s=r.partial?r:e;r.partial||(o=r.helpers,a=r.partials);var l=t.call(i,s,n,o,a,r.data);return r.partial||e.VM.checkRevision(i.compilerInfo),l}}function o(t,e,n){var i=Array.prototype.slice.call(arguments,3),r=function(t,r){return r=r||{},e.apply(this,[t,r.data||n].concat(i))};return r.program=t,r.depth=i.length,r}function a(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i}function s(t,e,n,i,r,o){var a={partial:!0,helpers:i,partials:r,data:o};if(void 0===t)throw new h("The partial "+e+" could not be found");return t instanceof Function?t(n,a):void 0}function l(){return""}var u={},c=t,h=e,d=n.COMPILER_REVISION,p=n.REVISION_CHANGES;return u.checkRevision=i,u.template=r,u.programWithDepth=o,u.program=a,u.invokePartial=s,u.noop=l,u}(e,n,i),o=function(t,e,n,i,r){"use strict";var o,a=t,s=e,l=n,u=i,c=r,h=function(){var t=new a.HandlebarsEnvironment;return u.extend(t,a),t.SafeString=s,t.Exception=l,t.Utils=u,t.VM=c,t.template=function(e){return c.template(e,t)},t},d=h();return d.create=h,o=d}(i,t,n,e,r),a=function(t){"use strict";function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var n,i=t,r={ProgramNode:function(t,n,i,o){var a,s;3===arguments.length?(o=i,i=null):2===arguments.length&&(o=n,n=null),e.call(this,o),this.type="program",this.statements=t,this.strip={},i?(s=i[0],s?(a={first_line:s.firstLine,last_line:s.lastLine,last_column:s.lastColumn,first_column:s.firstColumn},this.inverse=new r.ProgramNode(i,n,a)):this.inverse=new r.ProgramNode(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)},MustacheNode:function(t,n,i,o,a){if(e.call(this,a),this.type="mustache",this.strip=o,null!=i&&i.charAt){var s=i.charAt(3)||i.charAt(2);this.escaped="{"!==s&&"&"!==s}else this.escaped=!!i;this.sexpr=t instanceof r.SexprNode?t:new r.SexprNode(t,n),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,n,i){e.call(this,i),this.type="sexpr",this.hash=n;var r=this.id=t[0],o=this.params=t.slice(1),a=this.eligibleHelper=r.isSimple;this.isHelper=a&&(o.length||n)},PartialNode:function(t,n,i,r){e.call(this,r),this.type="partial",this.partialName=t,this.context=n,this.strip=i},BlockNode:function(t,n,r,o,a){if(e.call(this,a),t.sexpr.id.original!==o.path.original)throw new i(t.sexpr.id.original+" doesn't match "+o.path.original,this);this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.strip={left:t.strip.left,right:o.strip.right},(n||r).strip.left=t.strip.right,(r||n).strip.right=o.strip.left,r&&!n&&(this.isInverse=!0)},ContentNode:function(t,n){e.call(this,n),this.type="content",this.string=t},HashNode:function(t,n){e.call(this,n),this.type="hash",this.pairs=t},IdNode:function(t,n){e.call(this,n),this.type="ID";for(var r="",o=[],a=0,s=0,l=t.length;l>s;s++){var u=t[s].part;if(r+=(t[s].separator||"")+u,".."===u||"."===u||"this"===u){if(o.length>0)throw new i("Invalid path: "+r,this);".."===u?a++:this.isScoped=!0}else o.push(u)}this.original=r,this.parts=o,this.string=o.join("."),this.depth=a,this.isSimple=1===t.length&&!this.isScoped&&0===a,this.stringModeValue=this.string},PartialNameNode:function(t,n){e.call(this,n),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,n){e.call(this,n),this.type="DATA",this.id=t},StringNode:function(t,n){e.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,n){e.call(this,n),this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},BooleanNode:function(t,n){e.call(this,n),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,n){e.call(this,n),this.type="comment",this.comment=t}};return n=r}(n),s=function(){"use strict";var t,e=function(){function t(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function e(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(e,n,i,r,o,a){var s=a.length-1;switch(o){case 1:return new r.ProgramNode(a[s-1],this._$);case 2:return new r.ProgramNode([],this._$);case 3:this.$=new r.ProgramNode([],a[s-1],a[s],this._$);break;case 4:this.$=new r.ProgramNode(a[s-2],a[s-1],a[s],this._$);break;case 5:this.$=new r.ProgramNode(a[s-1],a[s],[],this._$);
break;case 6:this.$=new r.ProgramNode(a[s],this._$);break;case 7:this.$=new r.ProgramNode([],this._$);break;case 8:this.$=new r.ProgramNode([],this._$);break;case 9:this.$=[a[s]];break;case 10:a[s-1].push(a[s]),this.$=a[s-1];break;case 11:this.$=new r.BlockNode(a[s-2],a[s-1].inverse,a[s-1],a[s],this._$);break;case 12:this.$=new r.BlockNode(a[s-2],a[s-1],a[s-1].inverse,a[s],this._$);break;case 13:this.$=a[s];break;case 14:this.$=a[s];break;case 15:this.$=new r.ContentNode(a[s],this._$);break;case 16:this.$=new r.CommentNode(a[s],this._$);break;case 17:this.$=new r.MustacheNode(a[s-1],null,a[s-2],t(a[s-2],a[s]),this._$);break;case 18:this.$=new r.MustacheNode(a[s-1],null,a[s-2],t(a[s-2],a[s]),this._$);break;case 19:this.$={path:a[s-1],strip:t(a[s-2],a[s])};break;case 20:this.$=new r.MustacheNode(a[s-1],null,a[s-2],t(a[s-2],a[s]),this._$);break;case 21:this.$=new r.MustacheNode(a[s-1],null,a[s-2],t(a[s-2],a[s]),this._$);break;case 22:this.$=new r.PartialNode(a[s-2],a[s-1],t(a[s-3],a[s]),this._$);break;case 23:this.$=t(a[s-1],a[s]);break;case 24:this.$=new r.SexprNode([a[s-2]].concat(a[s-1]),a[s],this._$);break;case 25:this.$=new r.SexprNode([a[s]],null,this._$);break;case 26:this.$=a[s];break;case 27:this.$=new r.StringNode(a[s],this._$);break;case 28:this.$=new r.IntegerNode(a[s],this._$);break;case 29:this.$=new r.BooleanNode(a[s],this._$);break;case 30:this.$=a[s];break;case 31:a[s-1].isHelper=!0,this.$=a[s-1];break;case 32:this.$=new r.HashNode(a[s],this._$);break;case 33:this.$=[a[s-2],a[s]];break;case 34:this.$=new r.PartialNameNode(a[s],this._$);break;case 35:this.$=new r.PartialNameNode(new r.StringNode(a[s],this._$),this._$);break;case 36:this.$=new r.PartialNameNode(new r.IntegerNode(a[s],this._$));break;case 37:this.$=new r.DataNode(a[s],this._$);break;case 38:this.$=new r.IdNode(a[s],this._$);break;case 39:a[s-2].push({part:a[s],separator:a[s-1]}),this.$=a[s-2];break;case 40:this.$=[{part:a[s]}];break;case 43:this.$=[];break;case 44:a[s-1].push(a[s]);break;case 47:this.$=[a[s]];break;case 48:a[s-1].push(a[s])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],r=[null],o=[],a=this.table,s="",l=0,u=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,g,m,v,y,b,w,_,x={};;){if(g=i[i.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===p||"undefined"==typeof p)&&(p=e()),m=a[g]&&a[g][p]),"undefined"==typeof m||!m.length||!m[0]){var k="";if(!c){_=[];for(y in a[g])this.terminals_[y]&&y>2&&_.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:_})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(m[0]){case 1:i.push(p),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(m[1]),p=null,f?(p=f,f=null):(u=this.lexer.yyleng,s=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[m[1]][1],x.$=r[r.length-b],x._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},d&&(x._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(x,s,u,l,this.yy,m[1],r,o),"undefined"!=typeof v)return v;b&&(i=i.slice(0,-1*b*2),r=r.slice(0,-1*b),o=o.slice(0,-1*b)),i.push(this.productions_[m[1]][0]),r.push(x.$),o.push(x._$),w=a[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,r;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(n=this._input.match(this.rules[o[a]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=a,this.options.flex));a++);return e?(r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){function r(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return r(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return r(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return e.yytext=r(1,2).replace(/\\"/g,'"'),32;case 24:return e.yytext=r(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return e.yytext=r(1,2),40;case 31:return"INVALID";case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return n.lexer=i,e.prototype=n,n.Parser=e,new e}();return t=e}(),l=function(t,e){"use strict";function n(t){return t.constructor===o.ProgramNode?t:(r.yy=o,r.parse(t))}var i={},r=t,o=e;return i.parser=r,i.parse=n,i}(s,a),u=function(t){"use strict";function e(){}function n(t,e,n){if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var i=n.parse(t),r=(new n.Compiler).compile(i,e);return(new n.JavaScriptCompiler).compile(r,e)}function i(t,e,n){function i(){var i=n.parse(t),r=(new n.Compiler).compile(i,e),o=(new n.JavaScriptCompiler).compile(r,e,void 0,!0);return n.template(o)}if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var r;return function(t,e){return r||(r=i()),r.call(this,t,e)}}var r={},o=t;return r.Compiler=e,e.prototype={compiler:e,disassemble:function(){for(var t,e,n,i=this.opcodes,r=[],o=0,a=i.length;a>o;o++)if(t=i[o],"DECLARE"===t.opcode)r.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var s=0;s<t.args.length;s++)n=t.args[s],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);r.push(t.opcode+" "+e.join(" "))}return r.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],r=t.opcodes[n];if(i.opcode!==r.opcode||i.args.length!==r.args.length)return!1;for(var o=0;o<i.args.length;o++)if(i.args[o]!==r.args[o])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(t)},accept:function(t){var e,n=t.strip||{};return n.left&&this.opcode("strip"),e=this[t.type](t),n.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,n=0,i=e.length;i>n;n++)this.accept(e[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,o=n.depths.list.length;o>r;r++)e=n.depths.list[r],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=e.sexpr,o=this.classifySexpr(r);"helper"===o?this.helperSexpr(r,n,i):"simple"===o?(this.simpleSexpr(r),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(r,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var r=0,o=i.length;o>r;r++)e=i[r],n=e[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),this.opcode(t.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(t,e,n){var i=t.id,r=i.parts[0],o=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",r,o)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),r=t.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.options.knownHelpersOnly)throw new o("You specified knownHelpersOnly, but used the unknown helper "+r,t);this.opcode("invokeHelper",i.length,r,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new o("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,n=0,i=e.length;i>n;n++)this.opcode("lookup",e[n])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var r=t.id.parts[0];i.knownHelpers[r]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):this[e.type](e)},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}},r.precompile=n,r.compile=i,r}(n),c=function(t,e){"use strict";function n(t){this.value=t}function i(){}var r,o=t.COMPILER_REVISION,a=t.REVISION_CHANGES,s=t.log,l=e;i.prototype={nameLookup:function(t,e){var n,r;return 0===t.indexOf("depth")&&(n=!0),r=/^[0-9]+$/.test(e)?t+"["+e+"]":i.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",n?"("+t+" && "+r+")":r},compilerInfo:function(){var t=o,e=a[t];return"this.compilerInfo = ["+t+",'"+e+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var r,o=t.opcodes;this.i=0;for(var a=o.length;this.i<a;this.i++)r=o[this.i],"DECLARE"===r.opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args),r.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(i)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}t.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],r=0,o=this.environment.depths.list.length;o>r;r++)i.push("depth"+this.environment.depths.list[r]);var a=this.mergeSource();if(this.isChild||(a=this.compilerInfo()+a),t)return i.push(a),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+a+"}";return s("debug",l+"\n\n"),l},mergeSource:function(){for(var t,e="",n=0,i=this.source.length;i>n;n++){var r=this.source[n];r.appendToBuffer?t=t?t+"\n    + "+r.content:r.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=r+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){this.pushStackLiteral(null!=t?this.programExpression(t):null)},invokeHelper:function(t,e,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(t,e,!0),r=this.nameLookup("depth"+this.lastContext,e,"context"),o="helper = "+i.name+" || "+r;i.paramsInit&&(o+=","+i.paramsInit),this.push("("+o+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),r=this.nameLookup("depth"+this.lastContext,t,"context"),o=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+i+") { "+o+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+r+"; "+o+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var r=this.hash;e&&r.contexts.push("'"+t+"': "+e),n&&r.types.push("'"+t+"': "+n),r.values.push("'"+t+"': ("+i+")")},compiler:i,compileChildren:function(t,e){for(var n,i,r=t.children,o=0,a=r.length;a>o;o++){n=r[o],i=new this.compiler;var s=this.matchExistingProgram(n);null==s?(this.context.programs.push(""),s=this.context.programs.length,n.index=s,n.name="program"+s,this.context.programs[s]=i.compile(n,e,this.context),this.context.environments[s]=n):(n.index=s,n.name="program"+s)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,r=[n.index,n.name,"data"],o=0,a=i.length;a>o;o++)e=i[o],r.push(1===e?"depth0":"depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+r.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,i,r,o="",a=this.isInline();if(a){var s=this.popStack(!0);if(s instanceof n)e=s.value,r=!0;else{i=!this.stackSlot;var l=i?this.incrStack():this.topStackName();o="("+this.push(l)+" = "+s+"),",e=this.topStack()}}else e=this.topStack();var u=t.call(this,e);return a?(r||this.popStack(),i&&this.stackSlot--,this.push("("+o+u+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+o+u+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;i>e;e++){var r=t[e];r instanceof n?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof n)return i.value;if(!e){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return i},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof n?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[],r=this.setupParams(t,i,n),o=this.nameLookup("helpers",e,"helper");return{params:i,paramsInit:r,name:o,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupOptions:function(t,e){var n,i,r,o=[],a=[],s=[];o.push("hash:"+this.popStack()),this.options.stringParams&&(o.push("hashTypes:"+this.popStack()),o.push("hashContexts:"+this.popStack())),i=this.popStack(),r=this.popStack(),(r||i)&&(r||(this.context.aliases.self="this",r="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),o.push("inverse:"+i),o.push("fn:"+r));for(var l=0;t>l;l++)n=this.popStack(),e.push(n),this.options.stringParams&&(s.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(o.push("contexts:["+a.join(",")+"]"),o.push("types:["+s.join(",")+"]")),this.options.data&&o.push("data:data"),o},setupParams:function(t,e,n){var i="{"+this.setupOptions(t,e).join(",")+"}";return n?(this.useRegister("options"),e.push("options"),"options="+i):(e.push(i),"")}};for(var u="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=i.RESERVED_WORDS={},h=0,d=u.length;d>h;h++)c[u[h]]=!0;return i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)?!0:!1},r=i}(i,n),h=function(t,e,n,i,r){"use strict";var o,a=t,s=e,l=n.parser,u=n.parse,c=i.Compiler,h=i.compile,d=i.precompile,p=r,f=a.create,g=function(){var t=f();return t.compile=function(e,n){return h(e,n,t)},t.precompile=function(e,n){return d(e,n,t)},t.AST=s,t.Compiler=c,t.JavaScriptCompiler=p,t.Parser=l,t.parse=u,t};return a=g(),a.create=g,o=a}(o,a,l,u,c);return h}();!function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())
}function r(t){return function(){return this[t].apply(this,arguments)}}function o(e,n){function i(t,e){return e.toLowerCase()}var r,o=t(e).data(),a={},s=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var l in o)n.test(l)&&(r=l.replace(s,i),a[r]=o[l]);return a}function a(e){var n={};if(f[e]||(e=e.split("-")[0],f[e])){var i=f[e];return t.each(p,function(t,e){e in i&&(n[e]=i[e])}),n}}var s=t(window),l=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,i=this.length;i>n;n++)if(this[n].valueOf()===e)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new l;return t.replace(this),t}};return function(){var n=[];return n.push.apply(n,arguments),t.extend(n,e),n}}(),u=function(e,n){this.dates=new l,this.viewDate=i(),this.focusDate=null,this._process_options(n),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(g.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};u.prototype={constructor:u,_process_options:function(e){this._o=t.extend({},this._o,e);var n=this.o=t.extend({},this._o),i=n.language;switch(f[i]||(i=i.split("-")[0],f[i]||(i=d.language)),n.language=i,n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),n.multidate!==!0&&(n.multidate=Number(n.multidate)||!1,n.multidate=n.multidate!==!1?Math.max(0,n.multidate):1),n.multidateSeparator=String(n.multidateSeparator),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var r=g.parseFormat(n.format);n.startDate!==-1/0&&(n.startDate=n.startDate?n.startDate instanceof Date?this._local_to_utc(this._zero_time(n.startDate)):g.parseDate(n.startDate,r,n.language):-1/0),1/0!==n.endDate&&(n.endDate=n.endDate?n.endDate instanceof Date?this._local_to_utc(this._zero_time(n.endDate)):g.parseDate(n.endDate,r,n.language):1/0),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],t.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=t.map(n.daysOfWeekDisabled,function(t){return parseInt(t,10)});var o=String(n.orientation).toLowerCase().split(/\s+/g),a=n.orientation.toLowerCase();if(o=t.grep(o,function(t){return/^auto|left|right|top|bottom$/.test(t)}),n.orientation={x:"auto",y:"auto"},a&&"auto"!==a)if(1===o.length)switch(o[0]){case"top":case"bottom":n.orientation.y=o[0];break;case"left":case"right":n.orientation.x=o[0]}else a=t.grep(o,function(t){return/^left|right$/.test(t)}),n.orientation.x=a[0]||"auto",a=t.grep(o,function(t){return/^top|bottom$/.test(t)}),n.orientation.y=a[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var n,i,r,o=0;o<t.length;o++)n=t[o][0],2===t[o].length?(i=e,r=t[o][1]):3===t[o].length&&(i=t[o][1],r=t[o][2]),n.on(r,i)},_unapplyEvents:function(t){for(var n,i,r,o=0;o<t.length;o++)n=t[o][0],2===t[o].length?(r=e,i=t[o][1]):3===t[o].length&&(r=t[o][1],i=t[o][2]),n.off(i,r)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.dates.get(-1),r=this._utc_to_local(i);this.element.trigger({type:e,date:r,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return g.formatDate(n,e,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:r("setDates"),setUTCDate:r("setUTCDates"),setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t).change():this.component&&this.element.find("input").val(t).change()},getFormattedDate:function(n){n===e&&(n=this.o.format);var i=this.o.language;return t.map(this.dates,function(t){return g.formatDate(t,n,i)}).join(this.o.multidateSeparator)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=this.picker.outerWidth(),n=this.picker.outerHeight(),i=10,r=s.width(),o=s.height(),a=s.scrollTop(),l=parseInt(this.element.parents().filter(function(){return"auto"!==t(this).css("z-index")}).first().css("z-index"))+10,u=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),d=u.left,p=u.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(d-=e-h)):(this.picker.addClass("datepicker-orient-left"),u.left<0?d-=u.left-i:u.left+e>r&&(d=r-e-i));var f,g,m=this.o.orientation.y;"auto"===m&&(f=-a+u.top-n,g=a+o-(u.top+c+n),m=Math.max(f,g)===g?"top":"bottom"),this.picker.addClass("datepicker-orient-"+m),"top"===m?p+=c:p-=n+parseInt(this.picker.css("padding-top")),this.picker.css({top:p,left:d,zIndex:l})}},_allow_update:!0,update:function(){if(this._allow_update){var e=this.dates.copy(),n=[],i=!1;arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)},this)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy(function(t){return g.parseDate(t,this.o.format,this.o.language)},this)),n=t.grep(n,t.proxy(function(t){return t<this.o.startDate||t>this.o.endDate||!t},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),i?this.setValue():n.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';e+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+f[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+f[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var n=[],i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),o=new Date;return e.getUTCFullYear()<i||e.getUTCFullYear()===i&&e.getUTCMonth()<r?n.push("old"):(e.getUTCFullYear()>i||e.getUTCFullYear()===i&&e.getUTCMonth()>r)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===o.getFullYear()&&e.getUTCMonth()===o.getMonth()&&e.getUTCDate()===o.getDate()&&n.push("today"),-1!==this.dates.contains(e)&&n.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&n.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&n.push("selected")),n},fill:function(){var i,r=new Date(this.viewDate),o=r.getUTCFullYear(),a=r.getUTCMonth(),s=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,l=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,u=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,c=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0,h=f[this.o.language].today||f.en.today||"",d=f[this.o.language].clear||f.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(f[this.o.language].months[a]+" "+o),this.picker.find("tfoot th.today").text(h).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(d).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=n(o,a-1,28),m=g.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(m),p.setUTCDate(m-(p.getUTCDay()-this.o.weekStart+7)%7);var v=new Date(p);v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();for(var y,b=[];p.valueOf()<v;){if(p.getUTCDay()===this.o.weekStart&&(b.push("<tr>"),this.o.calendarWeeks)){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),_=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),x=new Date(Number(x=n(_.getUTCFullYear(),0,1))+(11-x.getUTCDay())%7*864e5),k=(_-x)/864e5/7+1;b.push('<td class="cw">'+k+"</td>")}if(y=this.getClassNames(p),y.push("day"),this.o.beforeShowDay!==t.noop){var C=this.o.beforeShowDay(this._utc_to_local(p));C===e?C={}:"boolean"==typeof C?C={enabled:C}:"string"==typeof C&&(C={classes:C}),C.enabled===!1&&y.push("disabled"),C.classes&&(y=y.concat(C.classes.split(/\s+/))),C.tooltip&&(i=C.tooltip)}y=t.unique(y),b.push('<td class="'+y.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+p.getUTCDate()+"</td>"),p.getUTCDay()===this.o.weekEnd&&b.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(b.join(""));var $=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");t.each(this.dates,function(t,e){e.getUTCFullYear()===o&&$.eq(e.getUTCMonth()).addClass("active")}),(s>o||o>u)&&$.addClass("disabled"),o===s&&$.slice(0,l).addClass("disabled"),o===u&&$.slice(c+1).addClass("disabled"),b="",o=10*parseInt(o/10,10);var S=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var M,T=t.map(this.dates,function(t){return t.getUTCFullYear()}),E=-1;11>E;E++)M=["year"],-1===E?M.push("old"):10===E&&M.push("new"),-1!==t.inArray(o,T)&&M.push("active"),(s>o||o>u)&&M.push("disabled"),b+='<span class="'+M.join(" ")+'">'+o+"</span>",o+=1;S.html(b)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}}},click:function(e){e.preventDefault();var i,r,o,a=t(e.target).closest("span, td, th");if(1===a.length)switch(a[0].nodeName.toLowerCase()){case"th":switch(a[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var s=g.modes[this.viewMode].navStep*("prev"===a[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var l=new Date;l=n(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0),this.showMode(-2);var u="linked"===this.o.todayBtn?null:"view";this._setDate(l,u);break;case"clear":var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":a.is(".disabled")||(this.viewDate.setUTCDate(1),a.is(".month")?(o=1,r=a.parent().find("span").index(a),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(r),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(n(i,r,o))):(o=1,r=0,i=parseInt(a.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(i,r,o))),this.showMode(-1),this.fill());break;case"td":a.is(".day")&&!a.is(".disabled")&&(o=parseInt(a.text(),10)||1,i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),a.is(".old")?0===r?(r=11,i-=1):r-=1:a.is(".new")&&(11===r?(r=0,i+=1):r+=1),this._setDate(n(i,r,o)))}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t?-1!==e?this.dates.remove(e):this.dates.push(t):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveMonth:function(t,n){if(!t)return e;if(!n)return t;var i,r,o=new Date(t.valueOf()),a=o.getUTCDate(),s=o.getUTCMonth(),l=Math.abs(n);if(n=n>0?1:-1,1===l)r=-1===n?function(){return o.getUTCMonth()===s}:function(){return o.getUTCMonth()!==i},i=s+n,o.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var u=0;l>u;u++)o=this.moveMonth(o,n);i=o.getUTCMonth(),o.setUTCDate(a),r=function(){return i!==o.getUTCMonth()}}for(;r();)o.setUTCDate(--a),o.setUTCMonth(i);return o},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27===t.keyCode&&this.show());var e,n,r,o=!1,a=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37===t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),e),r=this.moveYear(a,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),e),r=this.moveMonth(a,e),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+e),r=new Date(a),r.setUTCDate(a.getUTCDate()+e)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=r,this.setValue(),this.fill(),t.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38===t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),e),r=this.moveYear(a,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),e),r=this.moveMonth(a,e),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+7*e),r=new Date(a),r.setUTCDate(a.getUTCDate()+7*e)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=r,this.setValue(),this.fill(),t.preventDefault());break;case 32:break;case 13:a=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(a),o=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(o){this._trigger(this.dates.length?"changeDate":"clearDate");var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+g.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var c=function(e,n){this.element=t(e),this.inputs=t.map(n.inputs,function(t){return t.jquery?t[0]:t}),delete n.inputs,t(this.inputs).datepicker(n).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};c.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,n){n.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var n=t(e.target).data("datepicker"),i=n.getUTCDate(),r=t.inArray(e.target,this.inputs),o=this.inputs.length;if(-1!==r){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(i)}),i<this.dates[r])for(;r>=0&&i<this.dates[r];)this.pickers[r--].setUTCDate(i);else if(i>this.dates[r])for(;o>r&&i>this.dates[r];)this.pickers[r++].setUTCDate(i);this.updateDates(),delete this.updating}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var h=t.fn.datepicker;t.fn.datepicker=function(n){var i=Array.apply(null,arguments);i.shift();var r;return this.each(function(){var s=t(this),l=s.data("datepicker"),h="object"==typeof n&&n;if(!l){var p=o(this,"date"),f=t.extend({},d,p,h),g=a(f.language),m=t.extend({},d,g,p,h);if(s.is(".input-daterange")||m.inputs){var v={inputs:m.inputs||s.find("input").toArray()};s.data("datepicker",l=new c(this,t.extend(m,v)))}else s.data("datepicker",l=new u(this,m))}return"string"==typeof n&&"function"==typeof l[n]&&(r=l[n].apply(l,i),r!==e)?!1:void 0}),r!==e?r:this};var d=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},p=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=u;var f=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,g.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\x00").split("\x00"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(i,r,o){function a(){var t=this.slice(0,d[c].length),e=d[c].slice(0,t.length);return t===e}if(!i)return e;if(i instanceof Date)return i;"string"==typeof r&&(r=g.parseFormat(r));var s,l,c,h=/([\-+]\d+)([dmwy])/,d=i.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){for(i=new Date,c=0;c<d.length;c++)switch(s=h.exec(d[c]),l=parseInt(s[1]),s[2]){case"d":i.setUTCDate(i.getUTCDate()+l);break;case"m":i=u.prototype.moveMonth.call(u.prototype,i,l);break;case"w":i.setUTCDate(i.getUTCDate()+7*l);break;case"y":i=u.prototype.moveYear.call(u.prototype,i,l)}return n(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}d=i&&i.match(this.nonpunctuation)||[],i=new Date;var p,m,v={},y=["yyyy","yy","M","MM","m","mm","d","dd"],b={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};b.M=b.MM=b.mm=b.m,b.dd=b.d,i=n(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var w=r.parts.slice();if(d.length!==w.length&&(w=t(w).filter(function(e,n){return-1!==t.inArray(n,y)}).toArray()),d.length===w.length){var _;for(c=0,_=w.length;_>c;c++){if(p=parseInt(d[c],10),s=w[c],isNaN(p))switch(s){case"MM":m=t(f[o].months).filter(a),p=t.inArray(m[0],f[o].months)+1;break;case"M":m=t(f[o].monthsShort).filter(a),p=t.inArray(m[0],f[o].monthsShort)+1}v[s]=p}var x,k;for(c=0;c<y.length;c++)k=y[c],k in v&&!isNaN(v[k])&&(x=new Date(i),b[k](x,v[k]),isNaN(x)||(i=x))}return i},formatDate:function(e,n,i){if(!e)return"";"string"==typeof n&&(n=g.parseFormat(n));var r={d:e.getUTCDate(),D:f[i].daysShort[e.getUTCDay()],DD:f[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:f[i].monthsShort[e.getUTCMonth()],MM:f[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,e=[];for(var o=t.extend([],n.separators),a=0,s=n.parts.length;s>=a;a++)o.length&&e.push(o.shift()),e.push(r[n.parts[a]]);return e.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};g.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+g.headTemplate+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=g,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=h,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),n.datepicker("show"))}),t(function(){t('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),function(t,e,n){"use strict";var i=function(e,n){this.widget="",this.$element=t(e),this.defaultTime=n.defaultTime,this.disableFocus=n.disableFocus,this.disableMousewheel=n.disableMousewheel,this.isOpen=n.isOpen,this.minuteStep=n.minuteStep,this.modalBackdrop=n.modalBackdrop,this.orientation=n.orientation,this.secondStep=n.secondStep,this.showInputs=n.showInputs,this.showMeridian=n.showMeridian,this.showSeconds=n.showSeconds,this.template=n.template,this.appendWidgetTo=n.appendWidgetTo,this.showWidgetOnAddonClick=n.showWidgetOnAddonClick,this._init()};i.prototype={constructor:i,_init:function(){var e=this;this.showWidgetOnAddonClick&&(this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend"))?(this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":t.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":t.proxy(this.highlightUnit,this),"click.timepicker":t.proxy(this.highlightUnit,this),"keydown.timepicker":t.proxy(this.elementKeydown,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)})):this.$element.on(this.template?{"focus.timepicker":t.proxy(this.showWidget,this),"click.timepicker":t.proxy(this.showWidget,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)}:{"focus.timepicker":t.proxy(this.highlightUnit,this),"click.timepicker":t.proxy(this.highlightUnit,this),"keydown.timepicker":t.proxy(this.elementKeydown,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)}),this.$widget=this.template!==!1?t(this.getTemplate()).on("click",t.proxy(this.widgetClick,this)):!1,this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){t(this).on({"click.timepicker":function(){t(this).select()},"keydown.timepicker":t.proxy(e.widgetKeydown,e),"keyup.timepicker":t.proxy(e.widgetKeyup,e)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=null,this.updateFromElementVal()},clear:function(){this.hour="",this.minute="",this.second="",this.meridian="",this.$element.val("")},decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour<=0?this.hour=23:this.hour--},decrementMinute:function(t){var e;e=t?this.minute-t:this.minute-this.minuteStep,0>e?(this.decrementHour(),this.minute=e+60):this.minute=e},decrementSecond:function(){var t=this.second-this.secondStep;0>t?(this.decrementMinute(!0),this.second=t+60):this.second=t},elementKeydown:function(t){switch(t.keyCode){case 9:case 27:this.updateFromElementVal();break;case 37:t.preventDefault(),this.highlightPrevUnit();break;case 38:switch(t.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update();break;case 39:t.preventDefault(),this.highlightNextUnit();break;case 40:switch(t.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update()}},getCursorPosition:function(){var t=this.$element.get(0);if("selectionStart"in t)return t.selectionStart;if(n.selection){t.focus();var e=n.selection.createRange(),i=n.selection.createRange().text.length;return e.moveStart("character",-t.value.length),e.text.length-i}},getTemplate:function(){var t,e,n,i,r,o;switch(this.showInputs?(e='<input type="text" class="bootstrap-timepicker-hour" maxlength="2"/>',n='<input type="text" class="bootstrap-timepicker-minute" maxlength="2"/>',i='<input type="text" class="bootstrap-timepicker-second" maxlength="2"/>',r='<input type="text" class="bootstrap-timepicker-meridian" maxlength="2"/>'):(e='<span class="bootstrap-timepicker-hour"></span>',n='<span class="bootstrap-timepicker-minute"></span>',i='<span class="bootstrap-timepicker-second"></span>',r='<span class="bootstrap-timepicker-meridian"></span>'),o='<table><tr><td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr><tr><td>"+e+'</td> <td class="separator">:</td><td>'+n+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+i+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+r+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr></table>",this.template){case"modal":t='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">\xd7</a><h3>Pick a Time</h3></div><div class="modal-content">'+o+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case"dropdown":t='<div class="bootstrap-timepicker-widget dropdown-menu">'+o+"</div>"}return t},getTime:function(){return""===this.hour?"":this.hour+":"+(1===this.minute.toString().length?"0"+this.minute:this.minute)+(this.showSeconds?":"+(1===this.second.toString().length?"0"+this.second:this.second):"")+(this.showMeridian?" "+this.meridian:"")
},hideWidget:function(){this.isOpen!==!1&&(this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),t(n).off("mousedown.timepicker, touchend.timepicker"),this.isOpen=!1,this.$widget.detach())},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.showMeridian?this.highlightMeridian():this.showSeconds?this.highlightSecond():this.highlightMinute();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="hour",t.setSelectionRange&&setTimeout(function(){e.hour<10?t.setSelectionRange(0,1):t.setSelectionRange(0,2)},0)},highlightMinute:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="minute",t.setSelectionRange&&setTimeout(function(){e.hour<10?t.setSelectionRange(2,4):t.setSelectionRange(3,5)},0)},highlightSecond:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="second",t.setSelectionRange&&setTimeout(function(){e.hour<10?t.setSelectionRange(5,7):t.setSelectionRange(6,8)},0)},highlightMeridian:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="meridian",t.setSelectionRange&&(this.showSeconds?setTimeout(function(){e.hour<10?t.setSelectionRange(8,10):t.setSelectionRange(9,11)},0):setTimeout(function(){e.hour<10?t.setSelectionRange(5,7):t.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}return 23===this.hour?void(this.hour=0):void this.hour++},incrementMinute:function(t){var e;e=t?this.minute+t:this.minute+this.minuteStep-this.minute%this.minuteStep,e>59?(this.incrementHour(),this.minute=e-60):this.minute=e},incrementSecond:function(){var t=this.second+this.secondStep-this.second%this.secondStep;t>59?(this.incrementMinute(!0),this.second=t-60):this.second=t},mousewheel:function(e){if(!this.disableMousewheel){e.preventDefault(),e.stopPropagation();var n=e.originalEvent.wheelDelta||-e.originalEvent.detail,i=null;switch("mousewheel"===e.type?i=-1*e.originalEvent.wheelDelta:"DOMMouseScroll"===e.type&&(i=40*e.originalEvent.detail),i&&(e.preventDefault(),t(this).scrollTop(i+t(this).scrollTop())),this.highlightedUnit){case"minute":n>0?this.incrementMinute():this.decrementMinute(),this.highlightMinute();break;case"second":n>0?this.incrementSecond():this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian();break;default:n>0?this.incrementHour():this.decrementHour(),this.highlightHour()}return!1}},place:function(){if(!this.isInline){var n=this.$widget.outerWidth(),i=this.$widget.outerHeight(),r=10,o=t(e).width(),a=t(e).height(),s=t(e).scrollTop(),l=parseInt(this.$element.parents().filter(function(){}).first().css("z-index"),10)+10,u=this.component?this.component.parent().offset():this.$element.offset(),c=this.component?this.component.outerHeight(!0):this.$element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.$element.outerWidth(!1),d=u.left,p=u.top;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left"),"auto"!==this.orientation.x?(this.picker.addClass("datepicker-orient-"+this.orientation.x),"right"===this.orientation.x&&(d-=n-h)):(this.$widget.addClass("timepicker-orient-left"),u.left<0?d-=u.left-r:u.left+n>o&&(d=o-n-r));var f,g,m=this.orientation.y;"auto"===m&&(f=-s+u.top-i,g=s+a-(u.top+c+i),m=Math.max(f,g)===g?"top":"bottom"),this.$widget.addClass("timepicker-orient-"+m),"top"===m?p+=c:p-=i+parseInt(this.$widget.css("padding-top"),10),this.$widget.css({top:p,left:d,zIndex:l})}},remove:function(){t("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(t){if(this.$element.val())this.updateFromElementVal();else if("current"===t){var e=new Date,n=e.getHours(),i=e.getMinutes(),r=e.getSeconds(),o="AM";0!==r&&(r=Math.ceil(e.getSeconds()/this.secondStep)*this.secondStep,60===r&&(i+=1,r=0)),0!==i&&(i=Math.ceil(e.getMinutes()/this.minuteStep)*this.minuteStep,60===i&&(n+=1,i=0)),this.showMeridian&&(0===n?n=12:n>=12?(n>12&&(n-=12),o="PM"):o="AM"),this.hour=n,this.minute=i,this.second=r,this.meridian=o,this.update()}else t===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(t)},setTime:function(t,e){if(!t)return void this.clear();var n,i,r,o,a;"object"==typeof t&&t.getMonth?(i=t.getHours(),r=t.getMinutes(),o=t.getSeconds(),this.showMeridian&&(a="AM",i>12&&(a="PM",i%=12),12===i&&(a="PM"))):(a=null!==t.match(/p/i)?"PM":"AM",t=t.replace(/[^0-9\:]/g,""),n=t.split(":"),i=n[0]?n[0].toString():n.toString(),r=n[1]?n[1].toString():"",o=n[2]?n[2].toString():"",i.length>4&&(o=i.substr(4,2)),i.length>2&&(r=i.substr(2,2),i=i.substr(0,2)),r.length>2&&(o=r.substr(2,2),r=r.substr(0,2)),o.length>2&&(o=o.substr(2,2)),i=parseInt(i,10),r=parseInt(r,10),o=parseInt(o,10),isNaN(i)&&(i=0),isNaN(r)&&(r=0),isNaN(o)&&(o=0),this.showMeridian?1>i?i=1:i>12&&(i=12):(i>=24?i=23:0>i&&(i=0),13>i&&"PM"===a&&(i+=12)),0>r?r=0:r>=60&&(r=59),this.showSeconds&&(isNaN(o)?o=0:0>o?o=0:o>=60&&(o=59))),this.hour=i,this.minute=r,this.second=o,this.meridian=a,this.update(e)},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){this.$widget.appendTo(this.appendWidgetTo);var e=this;t(n).on("mousedown.timepicker, touchend.timepicker",function(t){e.$element.parent().find(t.target).length||e.$widget.is(t.target)||e.$widget.find(t.target).length||e.hideWidget()}),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.place(),this.disableFocus&&this.$element.blur(),""===this.hour&&(this.defaultTime?this.setDefaultTime(this.defaultTime):this.setTime("0:0:0")),"modal"===this.template&&this.$widget.modal?this.$widget.modal("show").on("hidden",t.proxy(this.hideWidget,this)):this.isOpen===!1&&this.$widget.addClass("open"),this.isOpen=!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM"},update:function(t){this.updateElement(),t||this.updateWidget(),this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}})},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){this.setTime(this.$element.val())},updateWidget:function(){if(this.$widget!==!1){var t=this.hour,e=1===this.minute.toString().length?"0"+this.minute:this.minute,n=1===this.second.toString().length?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(t),this.$widget.find("input.bootstrap-timepicker-minute").val(e),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(n),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(t),this.$widget.find("span.bootstrap-timepicker-minute").text(e),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(n),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(this.$widget!==!1){var t=this.$widget.find("input.bootstrap-timepicker-hour").val()+":"+this.$widget.find("input.bootstrap-timepicker-minute").val()+(this.showSeconds?":"+this.$widget.find("input.bootstrap-timepicker-second").val():"")+(this.showMeridian?this.$widget.find("input.bootstrap-timepicker-meridian").val():"");this.setTime(t,!0)}},widgetClick:function(e){e.stopPropagation(),e.preventDefault();var n=t(e.target),i=n.closest("a").data("action");i&&this[i](),this.update(),n.is("input")&&n.get(0).setSelectionRange(0,2)},widgetKeydown:function(e){var n=t(e.target),i=n.attr("class").replace("bootstrap-timepicker-","");switch(e.keyCode){case 9:if(this.showMeridian&&"meridian"===i||this.showSeconds&&"second"===i||!this.showMeridian&&!this.showSeconds&&"minute"===i)return this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(e.preventDefault(),i){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),n.get(0).setSelectionRange(0,2);break;case 40:switch(e.preventDefault(),i){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),n.get(0).setSelectionRange(0,2)}},widgetKeyup:function(t){(65===t.keyCode||77===t.keyCode||80===t.keyCode||46===t.keyCode||8===t.keyCode||t.keyCode>=46&&t.keyCode<=57||t.keyCode>=96&&t.keyCode<=105)&&this.updateFromWidgetInputs()}},t.fn.timepicker=function(e){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var r=t(this),o=r.data("timepicker"),a="object"==typeof e&&e;o||r.data("timepicker",o=new i(this,t.extend({},t.fn.timepicker.defaults,a,t(this).data()))),"string"==typeof e&&o[e].apply(o,n)})},t.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,disableMousewheel:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,orientation:{x:"auto",y:"auto"},secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:"body",showWidgetOnAddonClick:!0},t.fn.timepicker.Constructor=i}(jQuery,window,document),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=t.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){n.settings.submitHandler&&(n.submitButton=e.target),t(e.target).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.submit(function(e){function i(){var i,r;return n.settings.submitHandler?(n.submitButton&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),r=n.settings.submitHandler.call(n,n.currentForm,e),n.submitButton&&i.remove(),void 0!==r?r:!1):!0}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){var e,n;return t(this[0]).is("form")?e=this.validate().form():(e=!0,n=t(this[0].form).validate(),this.each(function(){e=n.element(this)&&e})),e},removeAttrs:function(e){var n={},i=this;return t.each(e.split(/\s/),function(t,e){n[e]=i.attr(e),i.removeAttr(e)}),n},rules:function(e,n){var i,r,o,a,s,l,u=this[0];if(e)switch(i=t.data(u.form,"validator").settings,r=i.rules,o=t.validator.staticRules(u),e){case"add":t.extend(o,t.validator.normalizeRule(n)),delete o.messages,r[u.name]=o,n.messages&&(i.messages[u.name]=t.extend(i.messages[u.name],n.messages));break;case"remove":return n?(l={},t.each(n.split(/\s/),function(e,n){l[n]=o[n],delete o[n],"required"===n&&t(u).removeAttr("aria-required")}),l):(delete r[u.name],o)}return a=t.validator.normalizeRules(t.extend({},t.validator.classRules(u),t.validator.attributeRules(u),t.validator.dataRules(u),t.validator.staticRules(u)),u),a.required&&(s=a.required,delete a.required,a=t.extend({required:s},a),t(u).attr("aria-required","true")),a.remote&&(s=a.remote,delete a.remote,a=t.extend(a,{remote:s})),a}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var n=t.data(this[0].form,"validator"),i="on"+e.type.replace(/^validate/,""),r=n.settings;r[i]&&!this.is(r.ignore)&&r[i].call(n,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};t.each(this.settings.groups,function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,function(t,n){i[n]=e})}),n=this.settings.rules,t.each(n,function(e,i){n[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",e).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var n=this.clean(e),i=this.validationTargetFor(n),r=!0;return this.lastElement=i,void 0===i?delete this.invalid[n.name]:(this.prepareElement(i),this.currentElements=t(i),r=this.check(i)!==!1,r?delete this.invalid[i.name]:this.invalid[i.name]=!0),t(e).attr("aria-invalid",!r),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),r},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var n in e)this.errorList.push({message:e[n],element:this.findByName(n)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!e.objectLength(t(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n,i=t(e),r=e.type;return"radio"===r||"checkbox"===r?t("input[name='"+e.name+"']:checked").val():"number"===r&&"undefined"!=typeof e.validity?e.validity.badInput?!1:i.val():(n=i.val(),"string"==typeof n?n.replace(/\r/g,""):n)},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i,r,o=t(e).rules(),a=t.map(o,function(t,e){return e}).length,s=!1,l=this.elementValue(e);for(i in o){r={method:i,parameters:o[i]};try{if(n=t.validator.methods[i].call(this,l,e,r.parameters),"dependency-mismatch"===n&&1===a){s=!0;continue}if(s=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,r),!1}catch(u){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+r.method+"' method.",u),u}}if(!s)return this.objectLength(o)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,n){return this.findDefined(this.customMessage(e.name,n),this.customDataMessage(e,n),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,n){var i=this.defaultMessage(e,n.method),r=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,e):r.test(i)&&(i=t.validator.format(i.replace(r,"{$1}"),n.parameters)),this.errorList.push({message:i,element:e,method:n.method}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,n;for(t=0;this.errorList[t];t++)n=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var i,r,o,a=this.errorsFor(e),s=this.idOrName(e),l=t(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(n)):(a=t("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass).html(n||""),i=a,this.settings.wrapper&&(i=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,t(e)):i.insertAfter(e),a.is("label")?a.attr("for",s):0===a.parents("label[for='"+s+"']").length&&(o=a.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),l?l.match(new RegExp("\\b"+o+"\\b"))||(l+=" "+o):l=o,t(e).attr("aria-describedby",l),r=this.groups[e.name],r&&t.each(this.groups,function(e,n){n===r&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",a.attr("id"))}))),!n&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var n=this.idOrName(e),i=t(e).attr("aria-describedby"),r="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(r=r+", #"+i.replace(/\s+/g,", #")),this.errors().filter(r)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,n){return!!t(e,n.form).length},"function":function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},attributeRules:function(e){var n,i,r={},o=t(e),a=e.getAttribute("type");for(n in t.validator.methods)"required"===n?(i=e.getAttribute(n),""===i&&(i=!0),i=!!i):i=o.attr(n),/min|max/.test(n)&&(null===a||/number|range|text/.test(a))&&(i=Number(i)),i||0===i?r[n]=i:a===n&&"range"!==a&&(r[n]=!0);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var n,i,r={},o=t(e);for(n in t.validator.methods)i=o.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),void 0!==i&&(r[n]=i);return r},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(i,r){if(r===!1)return void delete e[i];if(r.param||r.depends){var o=!0;switch(typeof r.depends){case"string":o=!!t(r.depends,n.form).length;break;case"function":o=r.depends.call(n,n)}o?e[i]=void 0!==r.param?r.param:!0:delete e[i]}}),t.each(e,function(i,r){e[i]=t.isFunction(r)?r(n):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,i){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==i?i:t.validator.messages[e],n.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var r=t(n).val();return r&&r.length>0}return this.checkable(n)?this.getLength(e,n)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var n,i,r=0,o=0,a=!1;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(n=t.length-1;n>=0;n--)i=t.charAt(n),o=parseInt(i,10),a&&(o*=2)>9&&(o-=9),r+=o,a=!a;return r%10===0},minlength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r>=i},maxlength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||i>=r},rangelength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r>=i[0]&&r<=i[1]},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||n>=t},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},equalTo:function(e,n,i){var r=t(i);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(n).valid()}),e===r.val()},remote:function(e,n,i){if(this.optional(n))return"dependency-mismatch";var r,o,a=this.previousValue(n);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),a.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=a.message,i="string"==typeof i&&{url:i}||i,a.old===e?a.valid:(a.old=e,r=this,this.startRequest(n),o={},o[n.name]=e,t.ajax(t.extend(!0,{url:i,mode:"abort",port:"validate"+n.name,dataType:"json",data:o,context:r.currentForm,success:function(i){var o,s,l,u=i===!0||"true"===i;r.settings.messages[n.name].remote=a.originalMessage,u?(l=r.formSubmitted,r.prepareElement(n),r.formSubmitted=l,r.successList.push(n),delete r.invalid[n.name],r.showErrors()):(o={},s=i||r.defaultMessage(n,"remote"),o[n.name]=a.message=t.isFunction(s)?s(e):s,r.invalid[n.name]=!0,r.showErrors(o)),a.valid=u,r.stopRequest(n,u)}},i)),"pending")}}}),t.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var e,n={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,i){var r=t.port;"abort"===t.mode&&(n[r]&&n[r].abort(),n[r]=i)}):(e=t.ajax,t.ajax=function(i){var r=("mode"in i?i:t.ajaxSettings).mode,o=("port"in i?i:t.ajaxSettings).port;return"abort"===r?(n[o]&&n[o].abort(),n[o]=e.apply(this,arguments),n[o]):e.apply(this,arguments)}),t.extend(t.fn,{validateDelegate:function(e,n,i){return this.bind(n,function(n){var r=t(n.target);return r.is(e)?i.apply(r,arguments):void 0})}})});var DateFormat={};!function(t){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=["January","February","March","April","May","June","July","August","September","October","November","December"],o={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},a=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[Z\-+]?(\d{2}:?\d{2})?/;t.format=function(){function t(t){return e[parseInt(t,10)]||t}function s(t){return n[parseInt(t,10)]||t}function l(t){var e=parseInt(t,10)-1;return i[e]||t}function u(t){var e=parseInt(t,10)-1;return r[e]||t}function c(t){return o[t]||t}function h(t){var e,n,i,r,o,a=t,s="";return-1!==a.indexOf(".")&&(r=a.split("."),a=r[0],s=r[r.length-1]),o=a.split(":"),3===o.length?(e=o[0],n=o[1],i=o[2].replace(/\s.+/,"").replace(/[a-z]/gi,""),a=a.replace(/\s.+/,"").replace(/[a-z]/gi,""),{time:a,hour:e,minute:n,second:i,millis:s}):{time:"",hour:"",minute:"",second:"",millis:""}
}function d(t,e){for(var n=e-String(t).length,i=0;n>i;i++)t="0"+t;return t}return{parseDate:function(t){var e,n,i={date:null,year:null,month:null,dayOfMonth:null,dayOfWeek:null,time:null};if("number"==typeof t)return this.parseDate(new Date(t));if("function"==typeof t.getFullYear)i.year=String(t.getFullYear()),i.month=String(t.getMonth()+1),i.dayOfMonth=String(t.getDate()),i.time=h(t.toTimeString()+"."+t.getMilliseconds());else if(-1!=t.search(a))e=t.split(/[T\+-]/),i.year=e[0],i.month=e[1],i.dayOfMonth=e[2],i.time=h(e[3].split(".")[0]);else switch(e=t.split(" "),6===e.length&&isNaN(e[5])&&(e[e.length]="()"),e.length){case 6:i.year=e[5],i.month=c(e[1]),i.dayOfMonth=e[2],i.time=h(e[3]);break;case 2:n=e[0].split("-"),i.year=n[0],i.month=n[1],i.dayOfMonth=n[2],i.time=h(e[1]);break;case 7:case 9:case 10:i.year=e[3],i.month=c(e[1]),i.dayOfMonth=e[2],i.time=h(e[4]);break;case 1:n=e[0].split(""),i.year=n[0]+n[1]+n[2]+n[3],i.month=n[5]+n[6],i.dayOfMonth=n[8]+n[9],i.time=h(n[13]+n[14]+n[15]+n[16]+n[17]+n[18]+n[19]+n[20]);break;default:return null}return i.date=i.time?new Date(i.year,i.month-1,i.dayOfMonth,i.time.hour,i.time.minute,i.time.second,i.time.millis):new Date(i.year,i.month-1,i.dayOfMonth),i.dayOfWeek=String(i.date.getDay()),i},date:function(e,n){try{var i=this.parseDate(e);if(null===i)return e;for(var r,o=i.year,a=i.month,c=i.dayOfMonth,h=i.dayOfWeek,p=i.time,f="",g="",m="",v=!1,y=0;y<n.length;y++){var b=n.charAt(y),w=n.charAt(y+1);if(v)"'"==b?(g+=""===f?"'":f,f="",v=!1):f+=b;else switch(f+=b,m="",f){case"ddd":g+=t(h),f="";break;case"dd":if("d"===w)break;g+=d(c,2),f="";break;case"d":if("d"===w)break;g+=parseInt(c,10),f="";break;case"D":c=1==c||21==c||31==c?parseInt(c,10)+"st":2==c||22==c?parseInt(c,10)+"nd":3==c||23==c?parseInt(c,10)+"rd":parseInt(c,10)+"th",g+=c,f="";break;case"MMMM":g+=u(a),f="";break;case"MMM":if("M"===w)break;g+=l(a),f="";break;case"MM":if("M"===w)break;g+=d(a,2),f="";break;case"M":if("M"===w)break;g+=parseInt(a,10),f="";break;case"y":case"yyy":if("y"===w)break;g+=f,f="";break;case"yy":if("y"===w)break;g+=String(o).slice(-2),f="";break;case"yyyy":g+=o,f="";break;case"HH":g+=d(p.hour,2),f="";break;case"H":if("H"===w)break;g+=parseInt(p.hour,10),f="";break;case"hh":r=0===parseInt(p.hour,10)?12:p.hour<13?p.hour:p.hour-12,g+=d(r,2),f="";break;case"h":if("h"===w)break;r=0===parseInt(p.hour,10)?12:p.hour<13?p.hour:p.hour-12,g+=parseInt(r,10),f="";break;case"mm":g+=d(p.minute,2),f="";break;case"m":if("m"===w)break;g+=p.minute,f="";break;case"ss":g+=d(p.second.substring(0,2),2),f="";break;case"s":if("s"===w)break;g+=p.second,f="";break;case"S":case"SS":if("S"===w)break;g+=f,f="";break;case"SSS":var _="000"+p.millis.substring(0,3);g+=_.substring(_.length-3),f="";break;case"a":g+=p.hour>=12?"PM":"AM",f="";break;case"p":g+=p.hour>=12?"p.m.":"a.m.",f="";break;case"E":g+=s(h),f="";break;case"'":f="",v=!0;break;default:g+=b,f=""}}return g+=m}catch(x){return console&&console.log&&console.log(x),e}},prettyDate:function(t){var e,n,i;return("string"==typeof t||"number"==typeof t)&&(e=new Date(t)),"object"==typeof t&&(e=new Date(t.toString())),n=((new Date).getTime()-e.getTime())/1e3,i=Math.floor(n/86400),isNaN(i)||0>i?void 0:60>n?"just now":120>n?"1 minute ago":3600>n?Math.floor(n/60)+" minutes ago":7200>n?"1 hour ago":86400>n?Math.floor(n/3600)+" hours ago":1===i?"Yesterday":7>i?i+" days ago":31>i?Math.ceil(i/7)+" weeks ago":i>=31?"more than 5 weeks ago":void 0},toBrowserTimeZone:function(t,e){return this.date(new Date(t),e||"MM/dd/yyyy HH:mm:ss")}}}()}(DateFormat),function(t){t.format=DateFormat.format}(jQuery),function(){var t,e,n,i,r,o,a,s,l=[].slice,u={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};a=function(){},e=function(){function t(){}return t.prototype.addEventListener=t.prototype.on,t.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},t.prototype.emit=function(){var t,e,n,i,r,o;if(i=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},n=this._callbacks[i])for(r=0,o=n.length;o>r;r++)e=n[r],e.apply(this,t);return this},t.prototype.removeListener=t.prototype.off,t.prototype.removeAllListeners=t.prototype.off,t.prototype.removeEventListener=t.prototype.off,t.prototype.off=function(t,e){var n,i,r,o,a;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(i=this._callbacks[t],!i)return this;if(1===arguments.length)return delete this._callbacks[t],this;for(r=o=0,a=i.length;a>o;r=++o)if(n=i[r],n===e){i.splice(r,1);break}return this},t}(),t=function(t){function n(t,e){var r,o,a;if(this.element=t,this.version=n.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(n.instances.push(this),this.element.dropzone=this,r=null!=(a=n.optionsForElement(this.element))?a:{},this.options=i({},this.defaultOptions,r,null!=e?e:{}),this.options.forceFallback||!n.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(o=this.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),this.options.previewsContainer!==!1&&(this.previewsContainer=this.options.previewsContainer?n.getElement(this.options.previewsContainer,"previewsContainer"):this.element),this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:n.getElements(this.options.clickable,"clickable")),this.init()}var i,r;return c(n,t),n.prototype.Emitter=e,n.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],n.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,filesizeBase:1e3,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return a},forceFallback:!1,fallback:function(){var t,e,i,r,o,a;for(this.element.className=""+this.element.className+" dz-browser-not-supported",a=this.element.getElementsByTagName("div"),r=0,o=a.length;o>r;r++)t=a[r],/(^| )dz-message($| )/.test(t.className)&&(e=t,t.className="dz-message");return e||(e=n.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e)),i=e.getElementsByTagName("span")[0],i&&(i.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,n,i;return e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},n=t.width/t.height,e.optWidth=this.options.thumbnailWidth,e.optHeight=this.options.thumbnailHeight,null==e.optWidth&&null==e.optHeight?(e.optWidth=e.srcWidth,e.optHeight=e.srcHeight):null==e.optWidth?e.optWidth=n*e.optHeight:null==e.optHeight&&(e.optHeight=1/n*e.optWidth),i=e.optWidth/e.optHeight,t.height<e.optHeight||t.width<e.optWidth?(e.trgHeight=e.srcHeight,e.trgWidth=e.srcWidth):n>i?(e.srcHeight=t.height,e.srcWidth=e.srcHeight*i):(e.srcWidth=t.width,e.srcHeight=e.srcWidth/i),e.srcX=(t.width-e.srcWidth)/2,e.srcY=(t.height-e.srcHeight)/2,e},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:a,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:a,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var e,i,r,o,a,s,l,u,c,h,d,p,f;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(t.previewElement=n.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),h=t.previewElement.querySelectorAll("[data-dz-name]"),o=0,l=h.length;l>o;o++)e=h[o],e.textContent=t.name;for(d=t.previewElement.querySelectorAll("[data-dz-size]"),a=0,u=d.length;u>a;a++)e=d[a],e.innerHTML=this.filesize(t.size);for(this.options.addRemoveLinks&&(t._removeLink=n.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),t.previewElement.appendChild(t._removeLink)),i=function(e){return function(i){return i.preventDefault(),i.stopPropagation(),t.status===n.UPLOADING?n.confirm(e.options.dictCancelUploadConfirmation,function(){return e.removeFile(t)}):e.options.dictRemoveFileConfirmation?n.confirm(e.options.dictRemoveFileConfirmation,function(){return e.removeFile(t)}):e.removeFile(t)}}(this),p=t.previewElement.querySelectorAll("[data-dz-remove]"),f=[],s=0,c=p.length;c>s;s++)r=p[s],f.push(r.addEventListener("click",i));return f}},removedfile:function(t){var e;return t.previewElement&&null!=(e=t.previewElement)&&e.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var n,i,r,o;if(t.previewElement){for(t.previewElement.classList.remove("dz-file-preview"),o=t.previewElement.querySelectorAll("[data-dz-thumbnail]"),i=0,r=o.length;r>i;i++)n=o[i],n.alt=t.name,n.src=e;return setTimeout(function(){return function(){return t.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(t,e){var n,i,r,o,a;if(t.previewElement){for(t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error),o=t.previewElement.querySelectorAll("[data-dz-errormessage]"),a=[],i=0,r=o.length;r>i;i++)n=o[i],a.push(n.textContent=e);return a}},errormultiple:a,processing:function(t){return t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink)?t._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:a,uploadprogress:function(t,e){var n,i,r,o,a;if(t.previewElement){for(o=t.previewElement.querySelectorAll("[data-dz-uploadprogress]"),a=[],i=0,r=o.length;r>i;i++)n=o[i],a.push("PROGRESS"===n.nodeName?n.value=e:n.style.width=""+e+"%");return a}},totaluploadprogress:a,sending:a,sendingmultiple:a,success:function(t){return t.previewElement?t.previewElement.classList.add("dz-success"):void 0},successmultiple:a,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:a,complete:function(t){return t._removeLink&&(t._removeLink.textContent=this.options.dictRemoveFile),t.previewElement?t.previewElement.classList.add("dz-complete"):void 0},completemultiple:a,maxfilesexceeded:a,maxfilesreached:a,queuecomplete:a,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},i=function(){var t,e,n,i,r,o,a;for(i=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],o=0,a=n.length;a>o;o++){e=n[o];for(t in e)r=e[t],i[t]=r}return i},n.prototype.getAcceptedFiles=function(){var t,e,n,i,r;for(i=this.files,r=[],e=0,n=i.length;n>e;e++)t=i[e],t.accepted&&r.push(t);return r},n.prototype.getRejectedFiles=function(){var t,e,n,i,r;for(i=this.files,r=[],e=0,n=i.length;n>e;e++)t=i[e],t.accepted||r.push(t);return r},n.prototype.getFilesWithStatus=function(t){var e,n,i,r,o;for(r=this.files,o=[],n=0,i=r.length;i>n;n++)e=r[n],e.status===t&&o.push(e);return o},n.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(n.QUEUED)},n.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(n.UPLOADING)},n.prototype.getActiveFiles=function(){var t,e,i,r,o;for(r=this.files,o=[],e=0,i=r.length;i>e;e++)t=r[e],(t.status===n.UPLOADING||t.status===n.QUEUED)&&o.push(t);return o},n.prototype.init=function(){var t,e,i,r,o,a,s;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(n.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(t){return function(){return t.hiddenFileInput&&document.body.removeChild(t.hiddenFileInput),t.hiddenFileInput=document.createElement("input"),t.hiddenFileInput.setAttribute("type","file"),(null==t.options.maxFiles||t.options.maxFiles>1)&&t.hiddenFileInput.setAttribute("multiple","multiple"),t.hiddenFileInput.className="dz-hidden-input",null!=t.options.acceptedFiles&&t.hiddenFileInput.setAttribute("accept",t.options.acceptedFiles),null!=t.options.capture&&t.hiddenFileInput.setAttribute("capture",t.options.capture),t.hiddenFileInput.style.visibility="hidden",t.hiddenFileInput.style.position="absolute",t.hiddenFileInput.style.top="0",t.hiddenFileInput.style.left="0",t.hiddenFileInput.style.height="0",t.hiddenFileInput.style.width="0",document.body.appendChild(t.hiddenFileInput),t.hiddenFileInput.addEventListener("change",function(){var e,n,r,o;if(n=t.hiddenFileInput.files,n.length)for(r=0,o=n.length;o>r;r++)e=n[r],t.addFile(e);return i()})}}(this))(),this.URL=null!=(a=window.URL)?a:window.webkitURL,s=this.events,r=0,o=s.length;o>r;r++)t=s[r],this.on(t,this.options[t]);return this.on("uploadprogress",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("canceled",function(t){return function(e){return t.emit("complete",e)}}(this)),this.on("complete",function(t){return function(){return 0===t.getUploadingFiles().length&&0===t.getQueuedFiles().length?setTimeout(function(){return t.emit("queuecomplete")},0):void 0}}(this)),e=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return function(e){return t.emit("dragstart",e)}}(this),dragenter:function(t){return function(n){return e(n),t.emit("dragenter",n)}}(this),dragover:function(t){return function(n){var i;try{i=n.dataTransfer.effectAllowed}catch(r){}return n.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",e(n),t.emit("dragover",n)}}(this),dragleave:function(t){return function(e){return t.emit("dragleave",e)}}(this),drop:function(t){return function(n){return e(n),t.drop(n)}}(this),dragend:function(t){return function(e){return t.emit("dragend",e)}}(this)}}],this.clickableElements.forEach(function(t){return function(e){return t.listeners.push({element:e,events:{click:function(i){return e!==t.element||i.target===t.element||n.elementInside(i.target,t.element.querySelector(".dz-message"))?t.hiddenFileInput.click():void 0}}})}}(this)),this.enable(),this.options.init.call(this)},n.prototype.destroy=function(){var t;return this.disable(),this.removeAllFiles(!0),(null!=(t=this.hiddenFileInput)?t.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,n.instances.splice(n.instances.indexOf(this),1)},n.prototype.updateTotalUploadProgress=function(){var t,e,n,i,r,o,a,s;if(i=0,n=0,t=this.getActiveFiles(),t.length){for(s=this.getActiveFiles(),o=0,a=s.length;a>o;o++)e=s[o],i+=e.upload.bytesSent,n+=e.upload.total;r=100*i/n}else r=100;return this.emit("totaluploadprogress",r,n,i)},n.prototype._getParamName=function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):""+this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")},n.prototype.getFallbackForm=function(){var t,e,i,r;return(t=this.getExistingFallback())?t:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',e=n.createElement(i),"FORM"!==this.element.tagName?(r=n.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),r.appendChild(e)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=r?r:e)},n.prototype.getExistingFallback=function(){var t,e,n,i,r,o;for(e=function(t){var e,n,i;for(n=0,i=t.length;i>n;n++)if(e=t[n],/(^| )fallback($| )/.test(e.className))return e},o=["div","form"],i=0,r=o.length;r>i;i++)if(n=o[i],t=e(this.element.getElementsByTagName(n)))return t},n.prototype.setupEventListeners=function(){var t,e,n,i,r,o,a;for(o=this.listeners,a=[],i=0,r=o.length;r>i;i++)t=o[i],a.push(function(){var i,r;i=t.events,r=[];for(e in i)n=i[e],r.push(t.element.addEventListener(e,n,!1));return r}());return a},n.prototype.removeEventListeners=function(){var t,e,n,i,r,o,a;for(o=this.listeners,a=[],i=0,r=o.length;r>i;i++)t=o[i],a.push(function(){var i,r;i=t.events,r=[];for(e in i)n=i[e],r.push(t.element.removeEventListener(e,n,!1));return r}());return a},n.prototype.disable=function(){var t,e,n,i,r;for(this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),i=this.files,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(this.cancelUpload(t));return r},n.prototype.enable=function(){return this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()},n.prototype.filesize=function(t){var e,n,i,r,o,a,s,l;for(a=["TB","GB","MB","KB","b"],i=r=null,n=s=0,l=a.length;l>s;n=++s)if(o=a[n],e=Math.pow(this.options.filesizeBase,4-n)/10,t>=e){i=t/Math.pow(this.options.filesizeBase,4-n),r=o;break}return i=Math.round(10*i)/10,"<strong>"+i+"</strong> "+r},n.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},n.prototype.drop=function(t){var e,n;t.dataTransfer&&(this.emit("drop",t),e=t.dataTransfer.files,e.length&&(n=t.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(e)))},n.prototype.paste=function(t){var e,n;if(null!=(null!=t&&null!=(n=t.clipboardData)?n.items:void 0))return this.emit("paste",t),e=t.clipboardData.items,e.length?this._addFilesFromItems(e):void 0},n.prototype.handleFiles=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(this.addFile(e));return r},n.prototype._addFilesFromItems=function(t){var e,n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push(null!=n.webkitGetAsEntry&&(e=n.webkitGetAsEntry())?e.isFile?this.addFile(n.getAsFile()):e.isDirectory?this._addFilesFromDirectory(e,e.name):void 0:null!=n.getAsFile?null==n.kind||"file"===n.kind?this.addFile(n.getAsFile()):void 0:void 0);return o},n.prototype._addFilesFromDirectory=function(t,e){var n,i;return n=t.createReader(),i=function(t){return function(n){var i,r,o;for(r=0,o=n.length;o>r;r++)i=n[r],i.isFile?i.file(function(n){return t.options.ignoreHiddenFiles&&"."===n.name.substring(0,1)?void 0:(n.fullPath=""+e+"/"+n.name,t.addFile(n))}):i.isDirectory&&t._addFilesFromDirectory(i,""+e+"/"+i.name)}}(this),n.readEntries(i,function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(t):void 0})},n.prototype.accept=function(t,e){return t.size>1024*this.options.maxFilesize*1024?e(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):n.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(e(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,e):e(this.options.dictInvalidFileType)},n.prototype.addFile=function(t){return t.upload={progress:0,total:t.size,bytesSent:0},this.files.push(t),t.status=n.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,function(e){return function(n){return n?(t.accepted=!1,e._errorProcessing([t],n)):(t.accepted=!0,e.options.autoQueue&&e.enqueueFile(t)),e._updateMaxFilesReachedClass()}}(this))},n.prototype.enqueueFiles=function(t){var e,n,i;for(n=0,i=t.length;i>n;n++)e=t[n],this.enqueueFile(e);return null},n.prototype.enqueueFile=function(t){if(t.status!==n.ADDED||t.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return t.status=n.QUEUED,this.options.autoProcessQueue?setTimeout(function(t){return function(){return t.processQueue()}}(this),0):void 0},n.prototype._thumbnailQueue=[],n.prototype._processingThumbnail=!1,n.prototype._enqueueThumbnail=function(t){return this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(t),setTimeout(function(t){return function(){return t._processThumbnailQueue()}}(this),0)):void 0},n.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(t){return function(){return t._processingThumbnail=!1,t._processThumbnailQueue()}}(this)))},n.prototype.removeFile=function(t){return t.status===n.UPLOADING&&this.cancelUpload(t),this.files=s(this.files,t),this.emit("removedfile",t),0===this.files.length?this.emit("reset"):void 0},n.prototype.removeAllFiles=function(t){var e,i,r,o;for(null==t&&(t=!1),o=this.files.slice(),i=0,r=o.length;r>i;i++)e=o[i],(e.status!==n.UPLOADING||t)&&this.removeFile(e);return null},n.prototype.createThumbnail=function(t,e){var n;return n=new FileReader,n.onload=function(i){return function(){var r;return"image/svg+xml"===t.type?(i.emit("thumbnail",t,n.result),void(null!=e&&e())):(r=document.createElement("img"),r.onload=function(){var n,a,s,l,u,c,h,d;return t.width=r.width,t.height=r.height,s=i.options.resize.call(i,t),null==s.trgWidth&&(s.trgWidth=s.optWidth),null==s.trgHeight&&(s.trgHeight=s.optHeight),n=document.createElement("canvas"),a=n.getContext("2d"),n.width=s.trgWidth,n.height=s.trgHeight,o(a,r,null!=(u=s.srcX)?u:0,null!=(c=s.srcY)?c:0,s.srcWidth,s.srcHeight,null!=(h=s.trgX)?h:0,null!=(d=s.trgY)?d:0,s.trgWidth,s.trgHeight),l=n.toDataURL("image/png"),i.emit("thumbnail",t,l),null!=e?e():void 0},r.onerror=e,r.src=n.result)}}(this),n.readAsDataURL(t)},n.prototype.processQueue=function(){var t,e,n,i;if(e=this.options.parallelUploads,n=this.getUploadingFiles().length,t=n,!(n>=e)&&(i=this.getQueuedFiles(),i.length>0)){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-n));for(;e>t;){if(!i.length)return;this.processFile(i.shift()),t++}}},n.prototype.processFile=function(t){return this.processFiles([t])},n.prototype.processFiles=function(t){var e,i,r;for(i=0,r=t.length;r>i;i++)e=t[i],e.processing=!0,e.status=n.UPLOADING,this.emit("processing",e);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)},n.prototype._getFilesWithXhr=function(t){var e,n;return n=function(){var n,i,r,o;for(r=this.files,o=[],n=0,i=r.length;i>n;n++)e=r[n],e.xhr===t&&o.push(e);return o}.call(this)},n.prototype.cancelUpload=function(t){var e,i,r,o,a,s,l;if(t.status===n.UPLOADING){for(i=this._getFilesWithXhr(t.xhr),r=0,a=i.length;a>r;r++)e=i[r],e.status=n.CANCELED;for(t.xhr.abort(),o=0,s=i.length;s>o;o++)e=i[o],this.emit("canceled",e);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else((l=t.status)===n.ADDED||l===n.QUEUED)&&(t.status=n.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));return this.options.autoProcessQueue?this.processQueue():void 0},r=function(){var t,e;return e=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],"function"==typeof e?e.apply(this,t):e},n.prototype.uploadFile=function(t){return this.uploadFiles([t])},n.prototype.uploadFiles=function(t){var e,o,a,s,l,u,c,h,d,p,f,g,m,v,y,b,w,_,x,k,C,$,S,M,T,E,D,N,F,A,H,P,L,O;for(x=new XMLHttpRequest,k=0,M=t.length;M>k;k++)e=t[k],e.xhr=x;g=r(this.options.method,t),w=r(this.options.url,t),x.open(g,w,!0),x.withCredentials=!!this.options.withCredentials,y=null,a=function(n){return function(){var i,r,o;for(o=[],i=0,r=t.length;r>i;i++)e=t[i],o.push(n._errorProcessing(t,y||n.options.dictResponseError.replace("{{statusCode}}",x.status),x));return o}}(this),b=function(n){return function(i){var r,o,a,s,l,u,c,h,d;if(null!=i)for(o=100*i.loaded/i.total,a=0,u=t.length;u>a;a++)e=t[a],e.upload={progress:o,total:i.total,bytesSent:i.loaded};else{for(r=!0,o=100,s=0,c=t.length;c>s;s++)e=t[s],(100!==e.upload.progress||e.upload.bytesSent!==e.upload.total)&&(r=!1),e.upload.progress=o,e.upload.bytesSent=e.upload.total;if(r)return}for(d=[],l=0,h=t.length;h>l;l++)e=t[l],d.push(n.emit("uploadprogress",e,o,e.upload.bytesSent));return d}}(this),x.onload=function(e){return function(i){var r;if(t[0].status!==n.CANCELED&&4===x.readyState){if(y=x.responseText,x.getResponseHeader("content-type")&&~x.getResponseHeader("content-type").indexOf("application/json"))try{y=JSON.parse(y)}catch(o){i=o,y="Invalid JSON response from server."}return b(),200<=(r=x.status)&&300>r?e._finished(t,y,i):a()}}}(this),x.onerror=function(){return function(){return t[0].status!==n.CANCELED?a():void 0}}(this),v=null!=(F=x.upload)?F:x,v.onprogress=b,u={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&i(u,this.options.headers);for(s in u)l=u[s],x.setRequestHeader(s,l);if(o=new FormData,this.options.params){A=this.options.params;for(f in A)_=A[f],o.append(f,_)}for(C=0,T=t.length;T>C;C++)e=t[C],this.emit("sending",e,x,o);if(this.options.uploadMultiple&&this.emit("sendingmultiple",t,x,o),"FORM"===this.element.tagName)for(H=this.element.querySelectorAll("input, textarea, select, button"),$=0,E=H.length;E>$;$++)if(h=H[$],d=h.getAttribute("name"),p=h.getAttribute("type"),"SELECT"===h.tagName&&h.hasAttribute("multiple"))for(P=h.options,S=0,D=P.length;D>S;S++)m=P[S],m.selected&&o.append(d,m.value);else(!p||"checkbox"!==(L=p.toLowerCase())&&"radio"!==L||h.checked)&&o.append(d,h.value);for(c=N=0,O=t.length-1;O>=0?O>=N:N>=O;c=O>=0?++N:--N)o.append(this._getParamName(c),t[c],t[c].name);return x.send(o)},n.prototype._finished=function(t,e,i){var r,o,a;for(o=0,a=t.length;a>o;o++)r=t[o],r.status=n.SUCCESS,this.emit("success",r,e,i),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("successmultiple",t,e,i),this.emit("completemultiple",t)),this.options.autoProcessQueue?this.processQueue():void 0},n.prototype._errorProcessing=function(t,e,i){var r,o,a;for(o=0,a=t.length;a>o;o++)r=t[o],r.status=n.ERROR,this.emit("error",r,e,i),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("errormultiple",t,e,i),this.emit("completemultiple",t)),this.options.autoProcessQueue?this.processQueue():void 0},n}(e),t.version="4.0.0",t.options={},t.optionsForElement=function(e){return e.getAttribute("id")?t.options[n(e.getAttribute("id"))]:void 0},t.instances=[],t.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},t.autoDiscover=!0,t.discover=function(){var e,n,i,r,o,a;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],e=function(t){var e,n,r,o;for(o=[],n=0,r=t.length;r>n;n++)e=t[n],o.push(/(^| )dropzone($| )/.test(e.className)?i.push(e):void 0);return o},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),a=[],r=0,o=i.length;o>r;r++)n=i[r],a.push(t.optionsForElement(n)!==!1?new t(n):void 0);
return a},t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],t.isBrowserSupported=function(){var e,n,i,r,o;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(o=t.blacklistedBrowsers,i=0,r=o.length;r>i;i++)n=o[i],n.test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},s=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],n!==e&&o.push(n);return o},n=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})},t.createElement=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.childNodes[0]},t.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},t.getElement=function(t,e){var n;if("string"==typeof t?n=document.querySelector(t):null!=t.nodeType&&(n=t),null==n)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},t.getElements=function(t,e){var n,i,r,o,a,s,l,u;if(t instanceof Array){r=[];try{for(o=0,s=t.length;s>o;o++)i=t[o],r.push(this.getElement(i,e))}catch(c){n=c,r=null}}else if("string"==typeof t)for(r=[],u=document.querySelectorAll(t),a=0,l=u.length;l>a;a++)i=u[a],r.push(i);else null!=t.nodeType&&(r=[t]);if(null==r||!r.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return r},t.confirm=function(t,e,n){return window.confirm(t)?e():null!=n?n():void 0},t.isValidFile=function(t,e){var n,i,r,o,a;if(!e)return!0;for(e=e.split(","),i=t.type,n=i.replace(/\/.*$/,""),o=0,a=e.length;a>o;o++)if(r=e[o],r=r.trim(),"."===r.charAt(0)){if(-1!==t.name.toLowerCase().indexOf(r.toLowerCase(),t.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(n===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}),"undefined"!=typeof module&&null!==module?module.exports=t:window.Dropzone=t,t.ADDED="added",t.QUEUED="queued",t.ACCEPTED=t.QUEUED,t.UPLOADING="uploading",t.PROCESSING=t.UPLOADING,t.CANCELED="canceled",t.ERROR="error",t.SUCCESS="success",r=function(t){var e,n,i,r,o,a,s,l,u,c;for(s=t.naturalWidth,a=t.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=a,i=n.getContext("2d"),i.drawImage(t,0,0),r=i.getImageData(0,0,1,a).data,c=0,o=a,l=a;l>c;)e=r[4*(l-1)+3],0===e?o=l:c=l,l=o+c>>1;return u=l/a,0===u?1:u},o=function(t,e,n,i,o,a,s,l,u,c){var h;return h=r(e),t.drawImage(e,n,i,o,a,s,l,u,c/h)},i=function(t,e){var n,i,r,o,a,s,l,u,c;if(r=!1,c=!0,i=t.document,u=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",s=i.addEventListener?"":"on",o=function(n){return"readystatechange"!==n.type||"complete"===i.readyState?(("load"===n.type?t:i)[l](s+n.type,o,!1),!r&&(r=!0)?e.call(t,n.type||n):void 0):void 0},a=function(){var t;try{u.doScroll("left")}catch(e){return t=e,void setTimeout(a,50)}return o("poll")},"complete"!==i.readyState){if(i.createEventObject&&u.doScroll){try{c=!t.frameElement}catch(h){}c&&a()}return i[n](s+"DOMContentLoaded",o,!1),i[n](s+"readystatechange",o,!1),t[n](s+"load",o,!1)}},t._autoDiscoverFunction=function(){return t.autoDiscover?t.discover():void 0},i(window,t._autoDiscoverFunction)}.call(this),function(t){function e(t,e,n,i){var r,o=0,a=0,s=0,n=(n||"(").toString(),i=(i||")").toString();for(r=0;r<t.length;r++){var l=t[r];if(l.indexOf(n,o)>l.indexOf(i,o)||~l.indexOf(n,o)&&!~l.indexOf(i,o)||!~l.indexOf(n,o)&&~l.indexOf(i,o)){if(a=l.indexOf(n,o),s=l.indexOf(i,o),~a&&!~s||!~a&&~s){var u=t.slice(0,(r||1)+1).join(e);t=[u].concat(t.slice((r||1)+1))}o=(s>a?s:a)+1,r=0}else o=0}return t}function n(t,e){for(var n,r=0,o="";n=t.substr(r).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)r=n.index+n[0].length,n[0]=n[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),o+=t.substr(0,n.index)+n[0];t=o+=t.substr(r);var a,s,l=t.match(/:([^\/]+)/gi);if(l){s=l.length;for(var u=0;s>u;u++)a=l[u],t="::"===a.slice(0,2)?a.slice(1):t.replace(a,i(a,e))}return t}function i(t,e,n){n=t;for(var i in e)if(e.hasOwnProperty(i)&&(n=e[i](t),n!==t))break;return n===t?"([._a-zA-Z0-9-%()]+)":n}function r(t,e,n){if(!t.length)return n();var i=0;!function r(){e(t[i],function(e){e||e===!1?(n(e),n=function(){}):(i+=1,i===t.length?n():r())})}()}function o(t){for(var e=[],n=0,i=t.length;i>n;n++)e=e.concat(t[n]);return e}function a(t,e){for(var n=0;n<t.length;n+=1)if(e(t[n],n,t)===!1)return}function l(){return""===u.hash||"#"===u.hash}var u=document.location,c={mode:"modern",hash:u.hash,history:!1,check:function(){var t=u.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,e){function n(t){for(var e=0,n=h.listeners.length;n>e;e++)h.listeners[e](t)}var i=this;if(this.history=e,h.listeners||(h.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=n},500):window.onhashchange=n,this.mode="modern";else{var r=document.createElement("iframe");r.id="state-frame",r.style.display="none",document.body.appendChild(r),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&i.check()}),window.setInterval(function(){i.check()},50),this.onHashChanged=n,this.mode="legacy"}return h.listeners.push(t),this.mode},destroy:function(t){if(h&&h.listeners)for(var e=h.listeners,n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),this.history===!0?(window.history.pushState({},document.title,t),this.fire()):u.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var e=document.getElementById("state-frame"),n=e.contentDocument||e.contentWindow.document;n.open(),n.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),n.close()},syncHash:function(){var t=this._hash;return t!=u.hash&&(u.hash=t),this},onHashChanged:function(){}},h=t.Router=function(t){return this instanceof h?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),this.mount(t||{}),void 0):new h(t)};h.prototype.init=function(t){var e,n=this;return this.handler=function(t){var e=t&&t.newURL||window.location.hash,i=n.history===!0?n.getPath():e.replace(/.*#/,"");n.dispatch("on","/"===i.charAt(0)?i:"/"+i)},c.init(this.handler,this.history),this.history===!1?l()&&t?u.hash=t:l()||n.dispatch("on","/"+u.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(e=l()&&t?t:l()?null:u.hash.replace(/^#/,""),e&&window.history.replaceState({},document.title,e)):e=this.getPath(),(e||this.run_in_init===!0)&&this.handler()),this},h.prototype.explode=function(){var t=this.history===!0?this.getPath():u.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},h.prototype.setRoute=function(t,e,n){var i=this.explode();return"number"==typeof t&&"string"==typeof e?i[t]=e:"string"==typeof n?i.splice(t,e,s):i=[t],c.setHash(i.join("/")),i},h.prototype.insertEx=function(t,e,n,i){return"once"===t&&(t="on",n=function(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}(n)),this._insert(t,e,n,i)},h.prototype.getRoute=function(t){var e=t;if("number"==typeof t)e=this.explode()[t];else if("string"==typeof t){var n=this.explode();e=n.indexOf(t)}else e=this.explode();return e},h.prototype.destroy=function(){return c.destroy(this.handler),this},h.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t};var d=/\?.*/;h.prototype.configure=function(t){t=t||{};for(var e=0;e<this.methods.length;e++)this._methods[this.methods[e]]=!0;return this.recurse=t.recurse||this.recurse||!1,this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict="undefined"==typeof t.strict?!0:t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&t.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&t.convert_hash_in_init!==!1,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},h.prototype.param=function(t,e){":"!==t[0]&&(t=":"+t);var n=new RegExp(t,"g");return this.params[t]=function(t){return t.replace(n,e.source||e)},this},h.prototype.on=h.prototype.route=function(t,n,i){var r=this;return!i&&"function"==typeof n&&(i=n,n=t,t="on"),Array.isArray(n)?n.forEach(function(e){r.on(t,e,i)}):(n.source&&(n=n.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(t){r.on(t.toLowerCase(),n,i)}):(n=n.split(new RegExp(this.delimiter)),n=e(n,this.delimiter),this.insert(t,this.scope.concat(n),i),void 0))},h.prototype.path=function(t,n){var i=this.scope.length;t.source&&(t=t.source.replace(/\\\//gi,"/")),t=t.split(new RegExp(this.delimiter)),t=e(t,this.delimiter),this.scope=this.scope.concat(t),n.call(this,this),this.scope.splice(i,t.length)},h.prototype.dispatch=function(t,e,n){function i(){o.last=a.after,o.invoke(o.runlist(a),o,n)}var r,o=this,a=this.traverse(t,e.replace(d,""),this.routes,""),s=this._invoked;return this._invoked=!0,a&&0!==a.length?("forward"===this.recurse&&(a=a.reverse()),r=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],r&&r.length>0&&s?(this.async?this.invoke(r,this,i):(this.invoke(r,this),i()),!0):(i(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:e},n),!1)},h.prototype.invoke=function(t,e,n){var i,o=this;this.async?(i=function(n,o){return Array.isArray(n)?r(n,i,o):void("function"==typeof n&&n.apply(e,(t.captures||[]).concat(o)))},r(t,i,function(){n&&n.apply(e,arguments)})):(i=function(n){return Array.isArray(n)?a(n,i):"function"==typeof n?n.apply(e,t.captures||[]):void("string"==typeof n&&o.resource&&o.resource[n].apply(e,t.captures||[]))},a(t,i))},h.prototype.traverse=function(t,e,n,i,r){function o(t){function e(t){for(var n=t.length-1;n>=0;n--)Array.isArray(t[n])?(e(t[n]),0===t[n].length&&t.splice(n,1)):r(t[n])||t.splice(n,1)}function n(t){for(var e=[],i=0;i<t.length;i++)e[i]=Array.isArray(t[i])?n(t[i]):t[i];return e}if(!r)return t;var i=n(t);return i.matched=t.matched,i.captures=t.captures,i.after=t.after.filter(r),e(i),i}var a,s,l,u,c=[];if(e===this.delimiter&&n[t])return u=[[n.before,n[t]].filter(Boolean)],u.after=[n.after].filter(Boolean),u.matched=!0,u.captures=[],o(u);for(var h in n)if(n.hasOwnProperty(h)&&(!this._methods[h]||this._methods[h]&&"object"==typeof n[h]&&!Array.isArray(n[h]))){if(a=s=i+this.delimiter+h,this.strict||(s+="["+this.delimiter+"]?"),l=e.match(new RegExp("^"+s)),!l)continue;if(l[0]&&l[0]==e&&n[h][t])return u=[[n[h].before,n[h][t]].filter(Boolean)],u.after=[n[h].after].filter(Boolean),u.matched=!0,u.captures=l.slice(1),this.recurse&&n===this.routes&&(u.push([n.before,n.on].filter(Boolean)),u.after=u.after.concat([n.after].filter(Boolean))),o(u);if(u=this.traverse(t,e,n[h],a),u.matched)return u.length>0&&(c=c.concat(u)),this.recurse&&(c.push([n[h].before,n[h].on].filter(Boolean)),u.after=u.after.concat([n[h].after].filter(Boolean)),n===this.routes&&(c.push([n.before,n.on].filter(Boolean)),u.after=u.after.concat([n.after].filter(Boolean)))),c.matched=!0,c.captures=u.captures,c.after=u.after,o(c)}return!1},h.prototype.insert=function(t,e,i,r){var o,a,s,l,u;if(e=e.filter(function(t){return t&&t.length>0}),r=r||this.routes,u=e.shift(),/\:|\*/.test(u)&&!/\\d|\\w/.test(u)&&(u=n(u,this.params)),e.length>0)return r[u]=r[u]||{},this.insert(t,e,i,r[u]);if(u||e.length||r!==this.routes){if(a=typeof r[u],s=Array.isArray(r[u]),r[u]&&!s&&"object"==a)switch(o=typeof r[u][t]){case"function":return void(r[u][t]=[r[u][t],i]);case"object":return void r[u][t].push(i);case"undefined":return void(r[u][t]=i)}else if("undefined"==a)return l={},l[t]=i,r[u]=l,void 0;throw new Error("Invalid route context: "+a)}switch(o=typeof r[t]){case"function":return void(r[t]=[r[t],i]);case"object":return void r[t].push(i);case"undefined":return void(r[t]=i)}},h.prototype.extend=function(t){function e(t){i._methods[t]=!0,i[t]=function(){var e=1===arguments.length?[t,""]:[t];i.on.apply(i,e.concat(Array.prototype.slice.call(arguments)))}}var n,i=this,r=t.length;for(n=0;r>n;n++)e(t[n])},h.prototype.runlist=function(t){var e=this.every&&this.every.before?[this.every.before].concat(o(t)):o(t);return this.every&&this.every.on&&e.push(this.every.on),e.captures=t.captures,e.source=t.source,e},h.prototype.mount=function(t,n){function i(n,i){var o=n,a=n.split(r.delimiter),s=typeof t[n],l=""===a[0]||!r._methods[a[0]],u=l?"on":o;l&&(o=o.slice((o.match(new RegExp("^"+r.delimiter))||[""])[0].length),a.shift()),l&&"object"===s&&!Array.isArray(t[n])?(i=i.concat(a),r.mount(t[n],i)):(l&&(i=i.concat(o.split(r.delimiter)),i=e(i,r.delimiter)),r.insert(u,i,t[n]))}if(t&&"object"==typeof t&&!Array.isArray(t)){var r=this;n=n||[],Array.isArray(n)||(n=n.split(r.delimiter));for(var o in t)t.hasOwnProperty(o)&&i(o,n.slice(0))}}}("object"==typeof exports?exports:window),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t:t(jQuery)}(function(t,e){"use strict";function n(e,n,i,r){for(var o=[],a=0;a<e.length;a++){var s=e[a];if(s){var l=tinycolor(s),u=l.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";u+=tinycolor.equals(n,s)?" sp-thumb-active":"";var c=l.toString(r.preferredFormat||"rgb"),h=m?"background-color:"+l.toRgbString():"filter:"+l.toFilter();o.push('<span title="'+c+'" data-color="'+l.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+h+';" /></span>')}else{var d="sp-clear-display";o.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="'+d+'"></span>').attr("title",r.noColorSelectedText)).html())}}return"<div class='sp-cf "+i+"'>"+o.join("")+"</div>"}function i(){for(var t=0;t<f.length;t++)f[t]&&f[t].hide()}function r(e,n){var i=t.extend({},p,e);return i.callbacks={move:u(i.move,n),change:u(i.change,n),show:u(i.show,n),hide:u(i.hide,n),beforeShow:u(i.beforeShow,n),updatedPosition:u(i.updatedPosition,n)},i}function o(o,s){function u(){if(V.showPaletteOnly&&(V.showPalette=!0),Ie.text(V.showPaletteOnly?V.togglePaletteMoreText:V.togglePaletteLessText),V.palette){pe=V.palette.slice(0),fe=t.isArray(pe[0])?pe:[pe],ge={};for(var e=0;e<fe.length;e++)for(var n=0;n<fe[e].length;n++){var i=tinycolor(fe[e][n]).toRgbString();ge[i]=!0}}ke.toggleClass("sp-flat",Y),ke.toggleClass("sp-input-disabled",!V.showInput),ke.toggleClass("sp-alpha-enabled",V.showAlpha),ke.toggleClass("sp-clear-enabled",Je),ke.toggleClass("sp-buttons-disabled",!V.showButtons),ke.toggleClass("sp-palette-buttons-disabled",!V.togglePaletteOnly),ke.toggleClass("sp-palette-disabled",!V.showPalette),ke.toggleClass("sp-palette-only",V.showPaletteOnly),ke.toggleClass("sp-initial-disabled",!V.showInitial),ke.addClass(V.className).addClass(V.containerClassName),R()}function p(){function e(e){return e.data&&e.data.ignore?(A(t(e.target).closest(".sp-thumb-el").data("color")),L()):(A(t(e.target).closest(".sp-thumb-el").data("color")),L(),j(!0),V.hideAfterPaletteSelect&&N()),!1}if(g&&ke.find("*:not(input)").attr("unselectable","on"),u(),ze&&_e.after(Be).hide(),Je||Le.hide(),Y)_e.after(ke).hide();else{var n="parent"===V.appendTo?_e.parent():t(V.appendTo);1!==n.length&&(n=t("body")),n.append(ke)}b(),Ue.bind("click.spectrum touchstart.spectrum",function(e){xe||M(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(_e.is(":disabled")||V.disabled===!0)&&q(),ke.click(l),Fe.change(S),Fe.bind("paste",function(){setTimeout(S,1)}),Fe.keydown(function(t){13==t.keyCode&&S()}),Pe.text(V.cancelText),Pe.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),F(),N()}),Le.attr("title",V.clearText),Le.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),Xe=!0,L(),Y&&j(!0)}),Oe.text(V.chooseText),Oe.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),g&&Fe.is(":focus")&&Fe.trigger("change"),P()&&(j(!0),N())}),Ie.text(V.showPaletteOnly?V.togglePaletteMoreText:V.togglePaletteLessText),Ie.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),V.showPaletteOnly=!V.showPaletteOnly,V.showPaletteOnly||Y||ke.css("left","-="+(Ce.outerWidth(!0)+5)),u()}),c(De,function(t,e,n){de=t/ae,Xe=!1,n.shiftKey&&(de=Math.round(10*de)/10),L()},C,$),c(Me,function(t,e){ue=parseFloat(e/re),Xe=!1,V.showAlpha||(de=1),L()},C,$),c($e,function(t,e,n){if(n.shiftKey){if(!be){var i=ce*ee,r=ne-he*ne,o=Math.abs(t-i)>Math.abs(e-r);be=o?"x":"y"}}else be=null;var a=!be||"x"===be,s=!be||"y"===be;a&&(ce=parseFloat(t/ee)),s&&(he=parseFloat((ne-e)/ne)),Xe=!1,V.showAlpha||(de=1),L()},C,$),We?(A(We),O(),Ge=Ye||tinycolor(We).format,w(We)):O(),Y&&T();var i=g?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ae.delegate(".sp-thumb-el",i,e),He.delegate(".sp-thumb-el:nth-child(1)",i,{ignore:!0},e)}function b(){if(Q&&window.localStorage){try{var e=window.localStorage[Q].split(",#");e.length>1&&(delete window.localStorage[Q],t.each(e,function(t,e){w(e)}))}catch(n){}try{me=window.localStorage[Q].split(";")}catch(n){}}}function w(e){if(G){var n=tinycolor(e).toRgbString();if(!ge[n]&&-1===t.inArray(n,me))for(me.push(n);me.length>ve;)me.shift();if(Q&&window.localStorage)try{window.localStorage[Q]=me.join(";")}catch(i){}}}function _(){var t=[];if(V.showPalette)for(var e=0;e<me.length;e++){var n=tinycolor(me[e]).toRgbString();ge[n]||t.push(me[e])}return t.reverse().slice(0,V.maxSelectionSize)}function x(){var e=H(),i=t.map(fe,function(t,i){return n(t,e,"sp-palette-row sp-palette-row-"+i,V)});b(),me&&i.push(n(_(),e,"sp-palette-row sp-palette-row-selection",V)),Ae.html(i.join(""))}function k(){if(V.showInitial){var t=Ve,e=H();He.html(n([t,e],e,"sp-palette-row-initial",V))}}function C(){(0>=ne||0>=ee||0>=re)&&R(),te=!0,ke.addClass(ye),be=null,_e.trigger("dragstart.spectrum",[H()])}function $(){te=!1,ke.removeClass(ye),_e.trigger("dragstop.spectrum",[H()])}function S(){var t=Fe.val();if(null!==t&&""!==t||!Je){var e=tinycolor(t);e.isValid()?(A(e),j(!0)):Fe.addClass("sp-validation-error")}else A(null),j(!0)}function M(){Z?N():T()}function T(){var e=t.Event("beforeShow.spectrum");return Z?void R():(_e.trigger(e,[H()]),void(J.beforeShow(H())===!1||e.isDefaultPrevented()||(i(),Z=!0,t(we).bind("keydown.spectrum",E),t(we).bind("click.spectrum",D),t(window).bind("resize.spectrum",K),Be.addClass("sp-active"),ke.removeClass("sp-hidden"),R(),O(),Ve=H(),k(),J.show(Ve),_e.trigger("show.spectrum",[Ve]))))}function E(t){27===t.keyCode&&N()}function D(t){2!=t.button&&(te||(Qe?j(!0):F(),N()))}function N(){Z&&!Y&&(Z=!1,t(we).unbind("keydown.spectrum",E),t(we).unbind("click.spectrum",D),t(window).unbind("resize.spectrum",K),Be.removeClass("sp-active"),ke.addClass("sp-hidden"),J.hide(H()),_e.trigger("hide.spectrum",[H()]))}function F(){A(Ve,!0),j(!0),J.change(Ve),_e.trigger("change",[Ve])}function A(t,e){if(tinycolor.equals(t,H()))return void O();var n,i;!t&&Je?Xe=!0:(Xe=!1,n=tinycolor(t),i=n.toHsv(),ue=i.h%360/360,ce=i.s,he=i.v,de=i.a),O(),n&&n.isValid()&&!e&&(Ge=Ye||n.getFormat())}function H(t){return t=t||{},Je&&Xe?null:tinycolor.fromRatio({h:ue,s:ce,v:he,a:Math.round(100*de)/100},{format:t.format||Ge})}function P(){return!Fe.hasClass("sp-validation-error")}function L(){O(),J.move(H()),_e.trigger("move.spectrum",[H()])}function O(){Fe.removeClass("sp-validation-error"),I();var t=tinycolor.fromRatio({h:ue,s:1,v:1});$e.css("background-color",t.toHexString());var e=Ge;1>de&&(0!==de||"name"!==e)&&("hex"===e||"hex3"===e||"hex6"===e||"name"===e)&&(e="rgb");var n=H({format:e}),i="";if(qe.removeClass("sp-clear-display"),qe.css("background-color","transparent"),!n&&Je)qe.addClass("sp-clear-display");else{var r=n.toHexString(),o=n.toRgbString();if(m||1===n.alpha?qe.css("background-color",o):(qe.css("background-color","transparent"),qe.css("filter",n.toFilter())),V.showAlpha){var a=n.toRgb();a.a=0;var s=tinycolor(a).toRgbString(),l="linear-gradient(left, "+s+", "+r+")";g?Ee.css("filter",tinycolor(s).toFilter({gradientType:1},r)):(Ee.css("background","-webkit-"+l),Ee.css("background","-moz-"+l),Ee.css("background","-ms-"+l),Ee.css("background","linear-gradient(to right, "+s+", "+r+")"))}i=n.toString(e)}V.showInput&&Fe.val(i),V.showPalette&&x(),k()}function I(){var t=ce,e=he;if(Je&&Xe)Ne.hide(),Te.hide(),Se.hide();else{Ne.show(),Te.show(),Se.show();var n=t*ee,i=ne-e*ne;n=Math.max(-ie,Math.min(ee-ie,n-ie)),i=Math.max(-ie,Math.min(ne-ie,i-ie)),Se.css({top:i+"px",left:n+"px"});var r=de*ae;Ne.css({left:r-se/2+"px"});var o=ue*re;Te.css({top:o-le+"px"})}}function j(t){var e=H(),n="",i=!tinycolor.equals(e,Ve);e&&(n=e.toString(Ge),w(e)),je&&_e.val(n),t&&i&&(J.change(e),_e.trigger("change",[e]))}function R(){_e.trigger("beforereflow.spectrum"),ee=$e.width(),ne=$e.height(),ie=Se.height(),oe=Me.width(),re=Me.height(),le=Te.height(),ae=De.width(),se=Ne.width(),Y||(ke.css("position","absolute"),V.offset?ke.offset(V.offset):(ke.offset(a(ke,Ue)),J.updatedPosition())),I(),V.showPalette&&x(),_e.trigger("reflow.spectrum",[ke])}function z(){_e.show(),Ue.unbind("click.spectrum touchstart.spectrum"),ke.remove(),Be.remove(),f[Ke.id]=null}function B(n,i){return n===e?t.extend({},V):i===e?V[n]:(V[n]=i,void u())}function U(){xe=!1,_e.attr("disabled",!1),Ue.removeClass("sp-disabled")}function q(){N(),xe=!0,_e.attr("disabled",!0),Ue.addClass("sp-disabled")}function W(t){V.offset=t,R()}var V=r(s,o),Y=V.flat,G=V.showSelectionPalette,Q=V.localStorageKey,X=V.theme,J=V.callbacks,K=h(R,10),Z=!1,te=!1,ee=0,ne=0,ie=0,re=0,oe=0,ae=0,se=0,le=0,ue=0,ce=0,he=0,de=1,pe=[],fe=[],ge={},me=V.selectionPalette.slice(0),ve=V.maxSelectionSize,ye="sp-dragging",be=null,we=o.ownerDocument,_e=(we.body,t(o)),xe=!1,ke=t(y,we).addClass(X),Ce=ke.find(".sp-picker-container"),$e=ke.find(".sp-color"),Se=ke.find(".sp-dragger"),Me=ke.find(".sp-hue"),Te=ke.find(".sp-slider"),Ee=ke.find(".sp-alpha-inner"),De=ke.find(".sp-alpha"),Ne=ke.find(".sp-alpha-handle"),Fe=ke.find(".sp-input"),Ae=ke.find(".sp-palette"),He=ke.find(".sp-initial"),Pe=ke.find(".sp-cancel"),Le=ke.find(".sp-clear"),Oe=ke.find(".sp-choose"),Ie=ke.find(".sp-palette-toggle"),je=_e.is("input"),Re=je&&"color"===_e.attr("type")&&d(),ze=je&&!Y,Be=ze?t(v).addClass(X).addClass(V.className).addClass(V.replacerClassName):t([]),Ue=ze?Be:_e,qe=Be.find(".sp-preview-inner"),We=V.color||je&&_e.val(),Ve=!1,Ye=V.preferredFormat,Ge=Ye,Qe=!V.showButtons||V.clickoutFiresChange,Xe=!We,Je=V.allowEmpty&&!Re;p();var Ke={show:T,hide:N,toggle:M,reflow:R,option:B,enable:U,disable:q,offset:W,set:function(t){A(t),j()},get:H,destroy:z,container:ke};return Ke.id=f.push(Ke)-1,Ke}function a(e,n){var i=0,r=e.outerWidth(),o=e.outerHeight(),a=n.outerHeight(),s=e[0].ownerDocument,l=s.documentElement,u=l.clientWidth+t(s).scrollLeft(),c=l.clientHeight+t(s).scrollTop(),h=n.offset();return h.top+=a,h.left-=Math.min(h.left,h.left+r>u&&u>r?Math.abs(h.left+r-u):0),h.top-=Math.min(h.top,h.top+o>c&&c>o?Math.abs(o+a-i):i),h}function s(){}function l(t){t.stopPropagation()}function u(t,e){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}function c(e,n,i,r){function o(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function a(t){if(c){if(g&&u.documentMode<9&&!t.button)return l();var i=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],r=i&&i.pageX||t.pageX,a=i&&i.pageY||t.pageY,s=Math.max(0,Math.min(r-h.left,p)),m=Math.max(0,Math.min(a-h.top,d));f&&o(t),n.apply(e,[s,m,t])}}function s(n){var r=n.which?3==n.which:2==n.button;r||c||i.apply(e,arguments)!==!1&&(c=!0,d=t(e).height(),p=t(e).width(),h=t(e).offset(),t(u).bind(m),t(u.body).addClass("sp-dragging"),a(n),o(n))}function l(){c&&(t(u).unbind(m),t(u.body).removeClass("sp-dragging"),setTimeout(function(){r.apply(e,arguments)},0)),c=!1}n=n||function(){},i=i||function(){},r=r||function(){};var u=document,c=!1,h={},d=0,p=0,f="ontouchstart"in window,m={};m.selectstart=o,m.dragstart=o,m["touchmove mousemove"]=a,m["touchend mouseup"]=l,t(e).bind("touchstart mousedown",s)}function h(t,e,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,t.apply(r,o)};n&&clearTimeout(i),(n||!i)&&(i=setTimeout(a,e))}}function d(){return t.fn.spectrum.inputTypeColorSupport()}var p={beforeShow:s,move:s,change:s,show:s,hide:s,updatedPosition:s,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},f=[],g=!!/msie/i.exec(window.navigator.userAgent),m=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div"),n=e.style;return n.cssText="background-color:rgba(0,0,0,.5)",t(n.backgroundColor,"rgba")||t(n.backgroundColor,"hsla")}(),v=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),y=function(){var t="";if(g)for(var e=1;6>=e;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),b="spectrum.id";t.fn.spectrum=function(e){if("string"==typeof e){var n=this,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=f[t(this).data(b)];if(r){var o=r[e];if(!o)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?n=r.get():"container"==e?n=r.container:"option"==e?n=r.option.apply(r,i):"destroy"==e?(r.destroy(),t(this).removeData(b)):o.apply(r,i)}}),n}return this.spectrum("destroy").each(function(){var n=t.extend({},e,t(this).data()),i=o(this,n);t(this).data(b,i.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=c,t.fn.spectrum.defaults=p,t.fn.spectrum.inputTypeColorSupport=function w(){if("undefined"==typeof w._cachedResult){var e=t("<input type='color' value='!' />")[0];w._cachedResult="color"===e.type&&"!"!==e.value}return w._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("input[type=color]");e.length&&!d()&&e.spectrum({preferredFormat:"hex6"})},function(){function t(t){var n={r:0,g:0,b:0},r=1,a=!1,s=!1;return"string"==typeof t&&(t=F(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(n=e(t.r,t.g,t.b),a=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=E(t.s),t.v=E(t.v),n=o(t.h,t.s,t.v),a=!0,s="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=E(t.s),t.l=E(t.l),n=i(t.h,t.s,t.l),a=!0,s="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=x(r),{ok:a,format:t.format||s,r:I(255,j(n.r,0)),g:I(255,j(n.g,0)),b:I(255,j(n.b,0)),a:r}}function e(t,e,n){return{r:255*k(t,255),g:255*k(e,255),b:255*k(n,255)}}function n(t,e,n){t=k(t,255),e=k(e,255),n=k(n,255);var i,r,o=j(t,e,n),a=I(t,e,n),s=(o+a)/2;if(o==a)i=r=0;else{var l=o-a;switch(r=s>.5?l/(2-o-a):l/(o+a),o){case t:i=(e-n)/l+(n>e?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,l:s}}function i(t,e,n){function i(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t}var r,o,a;if(t=k(t,360),e=k(e,100),n=k(n,100),0===e)r=o=a=n;else{var s=.5>n?n*(1+e):n+e-n*e,l=2*n-s;r=i(l,s,t+1/3),o=i(l,s,t),a=i(l,s,t-1/3)}return{r:255*r,g:255*o,b:255*a}}function r(t,e,n){t=k(t,255),e=k(e,255),n=k(n,255);var i,r,o=j(t,e,n),a=I(t,e,n),s=o,l=o-a;if(r=0===o?0:l/o,o==a)i=0;else{switch(o){case t:i=(e-n)/l+(n>e?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,v:s}}function o(t,e,n){t=6*k(t,360),e=k(e,100),n=k(n,100);var i=L.floor(t),r=t-i,o=n*(1-e),a=n*(1-r*e),s=n*(1-(1-r)*e),l=i%6,u=[n,a,o,o,s,n][l],c=[s,n,n,a,o,o][l],h=[o,o,s,n,n,a][l];return{r:255*u,g:255*c,b:255*h}}function a(t,e,n,i){var r=[T(O(t).toString(16)),T(O(e).toString(16)),T(O(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function s(t,e,n,i){var r=[T(D(i)),T(O(t).toString(16)),T(O(e).toString(16)),T(O(n).toString(16))];return r.join("")}function l(t,e){e=0===e?0:e||10;var n=z(t).toHsl();return n.s-=e/100,n.s=C(n.s),z(n)}function u(t,e){e=0===e?0:e||10;var n=z(t).toHsl();return n.s+=e/100,n.s=C(n.s),z(n)}function c(t){return z(t).desaturate(100)}function h(t,e){e=0===e?0:e||10;var n=z(t).toHsl();return n.l+=e/100,n.l=C(n.l),z(n)}function d(t,e){e=0===e?0:e||10;var n=z(t).toRgb();return n.r=j(0,I(255,n.r-O(255*-(e/100)))),n.g=j(0,I(255,n.g-O(255*-(e/100)))),n.b=j(0,I(255,n.b-O(255*-(e/100)))),z(n)}function p(t,e){e=0===e?0:e||10;var n=z(t).toHsl();return n.l-=e/100,n.l=C(n.l),z(n)}function f(t,e){var n=z(t).toHsl(),i=(O(n.h)+e)%360;return n.h=0>i?360+i:i,z(n)}function g(t){var e=z(t).toHsl();return e.h=(e.h+180)%360,z(e)}function m(t){var e=z(t).toHsl(),n=e.h;return[z(t),z({h:(n+120)%360,s:e.s,l:e.l}),z({h:(n+240)%360,s:e.s,l:e.l})]}function v(t){var e=z(t).toHsl(),n=e.h;return[z(t),z({h:(n+90)%360,s:e.s,l:e.l}),z({h:(n+180)%360,s:e.s,l:e.l}),z({h:(n+270)%360,s:e.s,l:e.l})]}function y(t){var e=z(t).toHsl(),n=e.h;return[z(t),z({h:(n+72)%360,s:e.s,l:e.l}),z({h:(n+216)%360,s:e.s,l:e.l})]}function b(t,e,n){e=e||6,n=n||30;var i=z(t).toHsl(),r=360/n,o=[z(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,o.push(z(i));return o}function w(t,e){e=e||6;for(var n=z(t).toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/e;e--;)a.push(z({h:i,s:r,v:o})),o=(o+s)%1;return a}function _(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function x(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function k(t,e){S(t)&&(t="100%");var n=M(t);return t=I(e,j(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),L.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function C(t){return I(1,j(0,t))}function $(t){return parseInt(t,16)}function S(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function M(t){return"string"==typeof t&&-1!=t.indexOf("%")}function T(t){return 1==t.length?"0"+t:""+t}function E(t){return 1>=t&&(t=100*t+"%"),t}function D(t){return Math.round(255*parseFloat(t)).toString(16)}function N(t){return $(t)/255}function F(t){t=t.replace(A,"").replace(H,"").toLowerCase();var e=!1;if(B[t])t=B[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=q.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=q.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=q.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=q.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=q.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=q.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=q.hex8.exec(t))?{a:N(n[1]),r:$(n[2]),g:$(n[3]),b:$(n[4]),format:e?"name":"hex8"}:(n=q.hex6.exec(t))?{r:$(n[1]),g:$(n[2]),b:$(n[3]),format:e?"name":"hex"}:(n=q.hex3.exec(t))?{r:$(n[1]+""+n[1]),g:$(n[2]+""+n[2]),b:$(n[3]+""+n[3]),format:e?"name":"hex"}:!1
}var A=/^[\s,#]+/,H=/\s+$/,P=0,L=Math,O=L.round,I=L.min,j=L.max,R=L.random,z=function(e,n){if(e=e?e:"",n=n||{},e instanceof z)return e;if(!(this instanceof z))return new z(e,n);var i=t(e);this._originalInput=e,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=O(100*this._a)/100,this._format=n.format||i.format,this._gradientType=n.gradientType,this._r<1&&(this._r=O(this._r)),this._g<1&&(this._g=O(this._g)),this._b<1&&(this._b=O(this._b)),this._ok=i.ok,this._tc_id=P++};z.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=x(t),this._roundA=O(100*this._a)/100,this},toHsv:function(){var t=r(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=r(this._r,this._g,this._b),e=O(360*t.h),n=O(100*t.s),i=O(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=n(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=n(this._r,this._g,this._b),e=O(360*t.h),i=O(100*t.s),r=O(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+r+"%)":"hsla("+e+", "+i+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return a(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return s(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:O(this._r),g:O(this._g),b:O(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+O(this._r)+", "+O(this._g)+", "+O(this._b)+")":"rgba("+O(this._r)+", "+O(this._g)+", "+O(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:O(100*k(this._r,255))+"%",g:O(100*k(this._g,255))+"%",b:O(100*k(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+O(100*k(this._r,255))+"%, "+O(100*k(this._g,255))+"%, "+O(100*k(this._b,255))+"%)":"rgba("+O(100*k(this._r,255))+"%, "+O(100*k(this._g,255))+"%, "+O(100*k(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:U[a(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+s(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var r=z(t);n=r.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,r=!e&&i&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return r?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(h,arguments)},brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(p,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(f,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(b,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(w,arguments)},splitcomplement:function(){return this._applyCombination(y,arguments)},triad:function(){return this._applyCombination(m,arguments)},tetrad:function(){return this._applyCombination(v,arguments)}},z.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:E(t[i]));t=n}return z(t,e)},z.equals=function(t,e){return t&&e?z(t).toRgbString()==z(e).toRgbString():!1},z.random=function(){return z.fromRatio({r:R(),g:R(),b:R()})},z.mix=function(t,e,n){n=0===n?0:n||50;var i,r=z(t).toRgb(),o=z(e).toRgb(),a=n/100,s=2*a-1,l=o.a-r.a;i=s*l==-1?s:(s+l)/(1+s*l),i=(i+1)/2;var u=1-i,c={r:o.r*i+r.r*u,g:o.g*i+r.g*u,b:o.b*i+r.b*u,a:o.a*a+r.a*(1-a)};return z(c)},z.readability=function(t,e){var n=z(t),i=z(e),r=n.toRgb(),o=i.toRgb(),a=n.getBrightness(),s=i.getBrightness(),l=Math.max(r.r,o.r)-Math.min(r.r,o.r)+Math.max(r.g,o.g)-Math.min(r.g,o.g)+Math.max(r.b,o.b)-Math.min(r.b,o.b);return{brightness:Math.abs(a-s),color:l}},z.isReadable=function(t,e){var n=z.readability(t,e);return n.brightness>125&&n.color>500},z.mostReadable=function(t,e){for(var n=null,i=0,r=!1,o=0;o<e.length;o++){var a=z.readability(t,e[o]),s=a.brightness>125&&a.color>500,l=3*(a.brightness/125)+a.color/500;(s&&!r||s&&r&&l>i||!s&&!r&&l>i)&&(r=s,i=l,n=z(e[o]))}return n};var B=z.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=z.hexNames=_(B),q=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+r),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=z}(),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})}),!function(){function t(t,e){return e>t?-1:t>e?1:t>=e?0:0/0}function e(t){return null===t?0/0:+t}function n(t){return!isNaN(t)}function i(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}function r(t){return t.length}function o(t){for(var e=1;t*e%1;)e*=10;return e}function a(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function s(){this._=Object.create(null)}function l(t){return(t+="")===cs||t[0]===hs?hs+t:t}function u(t){return(t+="")[0]===hs?t.slice(1):t}function c(t){return l(t)in this._}function h(t){return(t=l(t))in this._&&delete this._[t]}function d(){var t=[];for(var e in this._)t.push(u(e));return t}function p(){var t=0;for(var e in this._)++t;return t}function f(){for(var t in this._)return!1;return!0}function g(){this._=Object.create(null)}function m(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function v(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=ds.length;i>n;++n){var r=ds[n]+e;if(r in t)return r}}function y(){}function b(){}function w(t){function e(){for(var e,i=n,r=-1,o=i.length;++r<o;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new s;return e.on=function(e,r){var o,a=i.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function _(){Qa.event.preventDefault()}function x(){for(var t,e=Qa.event;t=e.sourceEvent;)e=t;return e}function k(t){for(var e=new b,n=0,i=arguments.length;++n<i;)e[arguments[n]]=w(e);return e.of=function(n,i){return function(r){try{var o=r.sourceEvent=Qa.event;r.target=t,Qa.event=r,e[r.type].apply(n,i)}finally{Qa.event=o}}},e}function C(t){return fs(t,bs),t}function $(t){return"function"==typeof t?t:function(){return gs(t,this)}}function S(t){return"function"==typeof t?t:function(){return ms(t,this)}}function M(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=Qa.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?s:a:t.local?o:r}function T(t){return t.trim().replace(/\s+/g," ")}function E(t){return new RegExp("(?:^|\\s+)"+Qa.requote(t)+"(?:\\s+|$)","g")}function D(t){return(t+"").trim().split(/^|\s+/)}function N(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=D(t).map(F);var r=t.length;return"function"==typeof e?i:n}function F(t){var e=E(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",T(r+" "+t))):n.setAttribute("class",T(r.replace(e," ")))}}function A(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function o(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?o:r}function H(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function P(t){return"function"==typeof t?t:(t=Qa.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function L(t){return{__data__:t}}function O(t){return function(){return ys(this,t)}}function I(e){return arguments.length||(e=t),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function j(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,o=t[n],a=0,s=o.length;s>a;a++)(r=o[a])&&e(r,a,n);return t}function R(t){return fs(t,_s),t}function z(t){var e,n;return function(i,r,o){var a,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),r>=e&&(e=r+1);!(a=s[e])&&++e<l;);return a}}function B(){var t=this.__transition__;t&&++t.active}function U(t,e,n){function i(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function r(){var r=l(e,Ja(arguments));i.call(this),this.addEventListener(t,this[a]=r,r.$=n),r._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+Qa.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var a="__on"+t,s=t.indexOf("."),l=q;s>0&&(t=t.slice(0,s));var u=ks.get(t);return u&&(t=u,l=W),s?e?r:i:e?y:o}function q(t,e){return function(n){var i=Qa.event;Qa.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{Qa.event=i}}}function W(t,e){var n=q(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function V(){var t=".dragsuppress-"+ ++$s,e="click"+t,n=Qa.select(ts).on("touchmove"+t,_).on("dragstart"+t,_).on("selectstart"+t,_);if(Cs){var i=Za.style,r=i[Cs];i[Cs]="none"}return function(o){function a(){n.on(e,null)}n.on(t,null),Cs&&(i[Cs]=r),o&&(n.on(e,function(){_(),a()},!0),setTimeout(a,0))}}function Y(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>Ss&&(ts.scrollX||ts.scrollY)){n=Qa.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var r=n[0][0].getScreenCTM();Ss=!(r.f||r.e),n.remove()}return Ss?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function G(){return Qa.event.changedTouches[0].identifier}function Q(){return Qa.event.target}function X(){return ts}function J(t){return t>0?1:0>t?-1:0}function K(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Z(t){return t>1?0:-1>t?Ms:Math.acos(t)}function te(t){return t>1?Es:-1>t?-Es:Math.asin(t)}function ee(t){return((t=Math.exp(t))-1/t)/2}function ne(t){return((t=Math.exp(t))+1/t)/2}function ie(t){return((t=Math.exp(2*t))-1)/(t+1)}function re(t){return(t=Math.sin(t/2))*t}function oe(){}function ae(t,e,n){return this instanceof ae?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof ae?new ae(t.h,t.s,t.l):we(""+t,_e,ae):new ae(t,e,n)}function se(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function r(t){return Math.round(255*i(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+e):n+e-n*e,o=2*n-a,new me(r(t+120),r(t),r(t-120))}function le(t,e,n){return this instanceof le?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof le?new le(t.h,t.c,t.l):t instanceof ce?de(t.l,t.a,t.b):de((t=xe((t=Qa.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new le(t,e,n)}function ue(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ce(n,Math.cos(t*=Fs)*e,Math.sin(t)*e)}function ce(t,e,n){return this instanceof ce?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ce?new ce(t.l,t.a,t.b):t instanceof le?ue(t.h,t.c,t.l):xe((t=me(t)).r,t.g,t.b):new ce(t,e,n)}function he(t,e,n){var i=(t+16)/116,r=i+e/500,o=i-n/200;return r=pe(r)*Us,i=pe(i)*qs,o=pe(o)*Ws,new me(ge(3.2404542*r-1.5371385*i-.4985314*o),ge(-.969266*r+1.8760108*i+.041556*o),ge(.0556434*r-.2040259*i+1.0572252*o))}function de(t,e,n){return t>0?new le(Math.atan2(n,e)*As,Math.sqrt(e*e+n*n),t):new le(0/0,0/0,t)}function pe(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function fe(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ge(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function me(t,e,n){return this instanceof me?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof me?new me(t.r,t.g,t.b):we(""+t,me,se):new me(t,e,n)}function ve(t){return new me(t>>16,t>>8&255,255&t)}function ye(t){return ve(t)+""}function be(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function we(t,e,n){var i,r,o,a=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(Ce(r[0]),Ce(r[1]),Ce(r[2]))}return(o=Gs.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,l=15&o,l=l<<4|l):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function _e(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(r=.5>l?s/(a+o):s/(2-a-o),i=t==a?(e-n)/s+(n>e?6:0):e==a?(n-t)/s+2:(t-e)/s+4,i*=60):(i=0/0,r=l>0&&1>l?0:i),new ae(i,r,l)}function xe(t,e,n){t=ke(t),e=ke(e),n=ke(n);var i=fe((.4124564*t+.3575761*e+.1804375*n)/Us),r=fe((.2126729*t+.7151522*e+.072175*n)/qs),o=fe((.0193339*t+.119192*e+.9503041*n)/Ws);return ce(116*r-16,500*(i-r),200*(r-o))}function ke(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ce(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function $e(t){return"function"==typeof t?t:function(){return t}}function Se(t){return t}function Me(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),Te(e,n,t,i)}}function Te(t,e,n,i){function r(){var t,e=l.status;if(!e&&De(l)||e>=200&&300>e||304===e){try{t=n.call(o,l)}catch(i){return void a.error.call(o,i)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=Qa.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!ts.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=Qa.event;Qa.event=t;try{a.progress.call(o,l)}finally{Qa.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(Ja(arguments)))}}),o.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=r&&o.on("error",r).on("load",function(t){r(null,t)}),a.beforesend.call(o,l),l.send(null==i?null:i),o},o.abort=function(){return l.abort(),o},Qa.rebind(o,a,"on"),null==i?o:o.get(Ee(i))}function Ee(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function De(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Ne(){var t=Fe(),e=Ae()-t;e>24?(isFinite(e)&&(clearTimeout(Ks),Ks=setTimeout(Ne,e)),Js=0):(Js=1,tl(Ne))}function Fe(){var t=Date.now();for(Zs=Qs;Zs;)t>=Zs.t&&(Zs.f=Zs.c(t-Zs.t)),Zs=Zs.n;return t}function Ae(){for(var t,e=Qs,n=1/0;e;)e.f?e=t?t.n=e.n:Qs=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return Xs=t,n}function He(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Pe(t,e){var n=Math.pow(10,3*us(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Le(t){var e=t.decimal,n=t.thousands,i=t.grouping,r=t.currency,o=i&&n?function(t,e){for(var r=t.length,o=[],a=0,s=i[0],l=0;r>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),o.push(t.substring(r-=s,r+s)),!((l+=s+1)>e));)s=i[a=(a+1)%i.length];return o.reverse().join(n)}:Se;return function(t){var n=nl.exec(t),i=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],h=n[7],d=n[8],p=n[9],f=1,g="",m="",v=!1,y=!0;switch(d&&(d=+d.substring(1)),(u||"0"===i&&"="===a)&&(u=i="0",a="="),p){case"n":h=!0,p="g";break;case"%":f=100,m="%",p="f";break;case"p":f=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+p.toLowerCase());case"c":y=!1;case"d":v=!0,d=0;break;case"s":f=-1,p="r"}"$"===l&&(g=r[0],m=r[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):("e"==p||"f"==p)&&(d=Math.max(0,Math.min(20,d)))),p=il.get(p)||Oe;var b=u&&h;return function(t){var n=m;if(v&&t%1)return"";var r=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>f){var l=Qa.formatPrefix(t,d);t=l.scale(t),n=l.symbol+m}else t*=f;t=p(t,d);var w,_,x=t.lastIndexOf(".");if(0>x){var k=y?t.lastIndexOf("e"):-1;0>k?(w=t,_=""):(w=t.substring(0,k),_=t.substring(k))}else w=t.substring(0,x),_=e+t.substring(x+1);!u&&h&&(w=o(w,1/0));var C=g.length+w.length+_.length+(b?0:r.length),$=c>C?new Array(C=c-C+1).join(i):"";return b&&(w=o($+w,$.length?c-_.length:1/0)),r+=g,t=w+_,("<"===a?r+t+$:">"===a?$+r+t:"^"===a?$.substring(0,C>>=1)+r+t+$.substring(C):r+(b?t:$+t))+n}}}function Oe(t){return t+""}function Ie(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function je(t,e,n){function i(e){var n=t(e),i=o(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new ol(n-1)),1),n}function o(t,n){return e(t=new ol(+t),n),t}function a(t,i,o){var a=r(t),s=[];if(o>1)for(;i>a;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;i>a;)s.push(new Date(+a)),e(a,1);return s}function s(t,e,n){try{ol=Ie;var i=new Ie;return i._=t,a(i,e,n)}finally{ol=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=o,t.range=a;var l=t.utc=Re(t);return l.floor=l,l.round=Re(i),l.ceil=Re(r),l.offset=Re(o),l.range=s,t}function Re(t){return function(e,n){try{ol=Ie;var i=new Ie;return i._=e,t(i,n)._}finally{ol=Date}}}function ze(t){function e(t){function e(e){for(var n,r,o,a=[],s=-1,l=0;++s<i;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(r=sl[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=T[n])&&(n=o(e,null==r?"e"===n?" ":"0":r)),a.push(n),l=s+1);return a.push(t.slice(l,s)),a.join("")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(i,t,e,0);if(r!=e.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var o=null!=i.Z&&ol!==Ie,a=new(o?Ie:ol);return"j"in i?a.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(a.setFullYear(i.y,0,1),a.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(a.getDay()+5)%7:i.w+7*i.U-(a.getDay()+6)%7)):a.setFullYear(i.y,i.m,i.d),a.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),o?a._:a},e.toString=function(){return t},e}function n(t,e,n,i){for(var r,o,a,s=0,l=e.length,u=n.length;l>s;){if(i>=u)return-1;if(r=e.charCodeAt(s++),37===r){if(a=e.charAt(s++),o=E[a in sl?e.charAt(s++):a],!o||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(t,e,n){x.lastIndex=0;var i=x.exec(e.slice(n));return i?(t.w=k.get(i[0].toLowerCase()),n+i[0].length):-1}function r(t,e,n){w.lastIndex=0;var i=w.exec(e.slice(n));return i?(t.w=_.get(i[0].toLowerCase()),n+i[0].length):-1}function o(t,e,n){S.lastIndex=0;var i=S.exec(e.slice(n));return i?(t.m=M.get(i[0].toLowerCase()),n+i[0].length):-1}function a(t,e,n){C.lastIndex=0;var i=C.exec(e.slice(n));return i?(t.m=$.get(i[0].toLowerCase()),n+i[0].length):-1}function s(t,e,i){return n(t,T.c.toString(),e,i)}function l(t,e,i){return n(t,T.x.toString(),e,i)}function u(t,e,i){return n(t,T.X.toString(),e,i)}function c(t,e,n){var i=b.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}var h=t.dateTime,d=t.date,p=t.time,f=t.periods,g=t.days,m=t.shortDays,v=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{ol=Ie;var e=new ol;return e._=t,i(e)}finally{ol=Date}}var i=e(t);return n.parse=function(t){try{ol=Ie;var e=i.parse(t);return e&&e._}finally{ol=Date}},n.toString=i.toString,n},e.multi=e.utc.multi=ln;var b=Qa.map(),w=Ue(g),_=qe(g),x=Ue(m),k=qe(m),C=Ue(v),$=qe(v),S=Ue(y),M=qe(y);f.forEach(function(t,e){b.set(t.toLowerCase(),e)});var T={a:function(t){return m[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:e(h),d:function(t,e){return Be(t.getDate(),e,2)},e:function(t,e){return Be(t.getDate(),e,2)},H:function(t,e){return Be(t.getHours(),e,2)},I:function(t,e){return Be(t.getHours()%12||12,e,2)},j:function(t,e){return Be(1+rl.dayOfYear(t),e,3)},L:function(t,e){return Be(t.getMilliseconds(),e,3)},m:function(t,e){return Be(t.getMonth()+1,e,2)},M:function(t,e){return Be(t.getMinutes(),e,2)},p:function(t){return f[+(t.getHours()>=12)]},S:function(t,e){return Be(t.getSeconds(),e,2)},U:function(t,e){return Be(rl.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Be(rl.mondayOfYear(t),e,2)},x:e(d),X:e(p),y:function(t,e){return Be(t.getFullYear()%100,e,2)},Y:function(t,e){return Be(t.getFullYear()%1e4,e,4)},Z:an,"%":function(){return"%"}},E={a:i,A:r,b:o,B:a,c:s,d:Ze,e:Ze,H:en,I:en,j:tn,L:on,m:Ke,M:nn,p:c,S:rn,U:Ve,w:We,W:Ye,x:l,X:u,y:Qe,Y:Ge,Z:Xe,"%":sn};return e}function Be(t,e,n){var i=0>t?"-":"",r=(i?-t:t)+"",o=r.length;return i+(n>o?new Array(n-o+1).join(e)+r:r)}function Ue(t){return new RegExp("^(?:"+t.map(Qa.requote).join("|")+")","i")}function qe(t){for(var e=new s,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function We(t,e,n){ll.lastIndex=0;var i=ll.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Ve(t,e,n){ll.lastIndex=0;var i=ll.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Ye(t,e,n){ll.lastIndex=0;var i=ll.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Ge(t,e,n){ll.lastIndex=0;var i=ll.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Qe(t,e,n){ll.lastIndex=0;var i=ll.exec(e.slice(n,n+2));return i?(t.y=Je(+i[0]),n+i[0].length):-1}function Xe(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Je(t){return t+(t>68?1900:2e3)}function Ke(t,e,n){ll.lastIndex=0;var i=ll.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Ze(t,e,n){ll.lastIndex=0;var i=ll.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function tn(t,e,n){ll.lastIndex=0;var i=ll.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function en(t,e,n){ll.lastIndex=0;var i=ll.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function nn(t,e,n){ll.lastIndex=0;var i=ll.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function rn(t,e,n){ll.lastIndex=0;var i=ll.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function on(t,e,n){ll.lastIndex=0;var i=ll.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function an(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=us(e)/60|0,r=us(e)%60;return n+Be(i,"0",2)+Be(r,"0",2)}function sn(t,e,n){ul.lastIndex=0;var i=ul.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function ln(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}function un(){}function cn(t,e,n){var i=n.s=t+e,r=i-t,o=i-r;n.t=t-o+(e-r)}function hn(t,e){t&&pl.hasOwnProperty(t.type)&&pl[t.type](t,e)}function dn(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function pn(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)dn(t[n],e,1);e.polygonEnd()}function fn(){function t(t,e){t*=Fs,e=e*Fs/2+Ms/4;var n=t-i,a=n>=0?1:-1,s=a*n,l=Math.cos(e),u=Math.sin(e),c=o*u,h=r*l+c*Math.cos(s),d=c*a*Math.sin(s);gl.add(Math.atan2(d,h)),i=t,r=l,o=u}var e,n,i,r,o;ml.point=function(a,s){ml.point=t,i=(e=a)*Fs,r=Math.cos(s=(n=s)*Fs/2+Ms/4),o=Math.sin(s)},ml.lineEnd=function(){t(e,n)}}function gn(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function mn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function vn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function yn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function bn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function wn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _n(t){return[Math.atan2(t[1],t[0]),te(t[2])]}function xn(t,e){return us(t[0]-e[0])<Ds&&us(t[1]-e[1])<Ds}function kn(t,e){t*=Fs;var n=Math.cos(e*=Fs);Cn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Cn(t,e,n){++vl,bl+=(t-bl)/vl,wl+=(e-wl)/vl,_l+=(n-_l)/vl}function $n(){function t(t,r){t*=Fs;var o=Math.cos(r*=Fs),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=n*l-i*s)*u+(u=i*a-e*l)*u+(u=e*s-n*a)*u),e*a+n*s+i*l);yl+=u,xl+=u*(e+(e=a)),kl+=u*(n+(n=s)),Cl+=u*(i+(i=l)),Cn(e,n,i)}var e,n,i;Tl.point=function(r,o){r*=Fs;var a=Math.cos(o*=Fs);e=a*Math.cos(r),n=a*Math.sin(r),i=Math.sin(o),Tl.point=t,Cn(e,n,i)}}function Sn(){Tl.point=kn}function Mn(){function t(t,e){t*=Fs;var n=Math.cos(e*=Fs),a=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=r*l-o*s,c=o*a-i*l,h=i*s-r*a,d=Math.sqrt(u*u+c*c+h*h),p=i*a+r*s+o*l,f=d&&-Z(p)/d,g=Math.atan2(d,p);$l+=f*u,Sl+=f*c,Ml+=f*h,yl+=g,xl+=g*(i+(i=a)),kl+=g*(r+(r=s)),Cl+=g*(o+(o=l)),Cn(i,r,o)}var e,n,i,r,o;Tl.point=function(a,s){e=a,n=s,Tl.point=t,a*=Fs;var l=Math.cos(s*=Fs);i=l*Math.cos(a),r=l*Math.sin(a),o=Math.sin(s),Cn(i,r,o)},Tl.lineEnd=function(){t(e,n),Tl.lineEnd=Sn,Tl.point=kn}}function Tn(){return!0}function En(t,e,n,i,r){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(xn(n,i)){r.lineStart();for(var s=0;e>s;++s)r.point((n=t[s])[0],n[1]);return void r.lineEnd()}var l=new Nn(n,t,null,!0),u=new Nn(n,null,l,!1);l.o=u,o.push(l),a.push(u),l=new Nn(i,t,null,!1),u=new Nn(i,null,l,!0),l.o=u,o.push(l),a.push(u)}}),a.sort(e),Dn(o),Dn(a),o.length){for(var s=0,l=n,u=a.length;u>s;++s)a[s].e=l=!l;for(var c,h,d=o[0];;){for(var p=d,f=!0;p.v;)if((p=p.n)===d)return;c=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(var s=0,u=c.length;u>s;++s)r.point((h=c[s])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(f){c=p.p.z;for(var s=c.length-1;s>=0;--s)r.point((h=c[s])[0],h[1])}else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,c=p.z,f=!f}while(!p.v);r.lineEnd()}}}function Dn(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Nn(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Fn(t,e,n,i){return function(r,o){function a(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function s(t,e){var n=r(t,e);m.point(n[0],n[1])}function l(){y.point=s,m.lineStart()}function u(){y.point=a,m.lineEnd()}function c(t,e){g.push([t,e]);var n=r(t,e);w.point(n[0],n[1])}function h(){w.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),w.lineEnd();var t,e=w.clean(),n=b.buffer(),i=n.length;if(g.pop(),f.push(g),g=null,i)if(1&e){t=n[0];var r,i=t.length-1,a=-1;if(i>0){for(_||(o.polygonStart(),_=!0),o.lineStart();++a<i;)o.point((r=t[a])[0],r[1]);o.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),p.push(n.filter(An))}var p,f,g,m=e(o),v=r.invert(i[0],i[1]),y={point:a,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=h,y.lineEnd=d,p=[],f=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=u,p=Qa.merge(p);var t=jn(v,f);p.length?(_||(o.polygonStart(),_=!0),En(p,Pn,t,n,o)):t&&(_||(o.polygonStart(),_=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),p=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b=Hn(),w=e(b),_=!1;return y}}function An(t){return t.length>1}function Hn(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:y,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Pn(t,e){return((t=t.x)[0]<0?t[1]-Es-Ds:Es-t[1])-((e=e.x)[0]<0?e[1]-Es-Ds:Es-e[1])}function Ln(t){var e,n=0/0,i=0/0,r=0/0;return{lineStart:function(){t.lineStart(),e=1
},point:function(o,a){var s=o>0?Ms:-Ms,l=us(o-n);us(l-Ms)<Ds?(t.point(n,i=(i+a)/2>0?Es:-Es),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&l>=Ms&&(us(n-r)<Ds&&(n-=r*Ds),us(o-s)<Ds&&(o-=s*Ds),i=On(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=0/0},clean:function(){return 2-e}}}function On(t,e,n,i){var r,o,a=Math.sin(t-n);return us(a)>Ds?Math.atan((Math.sin(e)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*o*a)):(e+i)/2}function In(t,e,n,i){var r;if(null==t)r=n*Es,i.point(-Ms,r),i.point(0,r),i.point(Ms,r),i.point(Ms,0),i.point(Ms,-r),i.point(0,-r),i.point(-Ms,-r),i.point(-Ms,0),i.point(-Ms,r);else if(us(t[0]-e[0])>Ds){var o=t[0]<e[0]?Ms:-Ms;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function jn(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],o=0,a=0;gl.reset();for(var s=0,l=e.length;l>s;++s){var u=e[s],c=u.length;if(c)for(var h=u[0],d=h[0],p=h[1]/2+Ms/4,f=Math.sin(p),g=Math.cos(p),m=1;;){m===c&&(m=0),t=u[m];var v=t[0],y=t[1]/2+Ms/4,b=Math.sin(y),w=Math.cos(y),_=v-d,x=_>=0?1:-1,k=x*_,C=k>Ms,$=f*b;if(gl.add(Math.atan2($*x*Math.sin(k),g*w+$*Math.cos(k))),o+=C?_+x*Ts:_,C^d>=n^v>=n){var S=vn(gn(h),gn(t));wn(S);var M=vn(r,S);wn(M);var T=(C^_>=0?-1:1)*te(M[2]);(i>T||i===T&&(S[0]||S[1]))&&(a+=C^_>=0?1:-1)}if(!m++)break;d=v,f=b,g=w,h=t}}return(-Ds>o||Ds>o&&0>gl)^1&a}function Rn(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,d){var p,f=[h,d],g=e(h,d),m=a?g?0:r(h,d):g?r(h+(0>h?Ms:-Ms),d):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(p=i(n,f),(xn(n,p)||xn(f,p))&&(f[0]+=Ds,f[1]+=Ds,g=e(f[0],f[1]))),g!==l)c=0,g?(t.lineStart(),p=i(f,n),t.point(p[0],p[1])):(p=i(n,f),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(s&&n&&a^g){var v;m&o||!(v=i(f,n,!0))||(c=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||n&&xn(n,f)||t.point(f[0],f[1]),n=f,l=g,o=m},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function i(t,e,n){var i=gn(t),r=gn(e),a=[1,0,0],s=vn(i,r),l=mn(s,s),u=s[0],c=l-u*u;if(!c)return!n&&t;var h=o*l/c,d=-o*u/c,p=vn(a,s),f=bn(a,h),g=bn(s,d);yn(f,g);var m=p,v=mn(f,m),y=mn(m,m),b=v*v-y*(mn(f,f)-1);if(!(0>b)){var w=Math.sqrt(b),_=bn(m,(-v-w)/y);if(yn(_,f),_=_n(_),!n)return _;var x,k=t[0],C=e[0],$=t[1],S=e[1];k>C&&(x=k,k=C,C=x);var M=C-k,T=us(M-Ms)<Ds,E=T||Ds>M;if(!T&&$>S&&(x=$,$=S,S=x),E?T?$+S>0^_[1]<(us(_[0]-k)<Ds?$:S):$<=_[1]&&_[1]<=S:M>Ms^(k<=_[0]&&_[0]<=C)){var D=bn(m,(-v+w)/y);return yn(D,f),[_,_n(D)]}}}function r(e,n){var i=a?t:Ms-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var o=Math.cos(t),a=o>0,s=us(o)>Ds,l=fi(t,6*Fs);return Fn(e,n,l,a?[0,-t]:[-Ms,t-Ms])}function zn(t,e,n,i){return function(r){var o,a=r.a,s=r.b,l=a.x,u=a.y,c=s.x,h=s.y,d=0,p=1,f=c-l,g=h-u;if(o=t-l,f||!(o>0)){if(o/=f,0>f){if(d>o)return;p>o&&(p=o)}else if(f>0){if(o>p)return;o>d&&(d=o)}if(o=n-l,f||!(0>o)){if(o/=f,0>f){if(o>p)return;o>d&&(d=o)}else if(f>0){if(d>o)return;p>o&&(p=o)}if(o=e-u,g||!(o>0)){if(o/=g,0>g){if(d>o)return;p>o&&(p=o)}else if(g>0){if(o>p)return;o>d&&(d=o)}if(o=i-u,g||!(0>o)){if(o/=g,0>g){if(o>p)return;o>d&&(d=o)}else if(g>0){if(d>o)return;p>o&&(p=o)}return d>0&&(r.a={x:l+d*f,y:u+d*g}),1>p&&(r.b={x:l+p*f,y:u+p*g}),r}}}}}}function Bn(t,e,n,i){function r(i,r){return us(i[0]-t)<Ds?r>0?0:3:us(i[0]-n)<Ds?r>0?2:1:us(i[1]-e)<Ds?r>0?1:0:r>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t){for(var e=0,n=m.length,i=t[1],r=0;n>r;++r)for(var o,a=1,s=m[r],l=s.length,u=s[0];l>a;++a)o=s[a],u[1]<=i?o[1]>i&&K(u,o,t)>0&&++e:o[1]<=i&&K(u,o,t)<0&&--e,u=o;return 0!==e}function u(o,s,l,u){var c=0,h=0;if(null==o||(c=r(o,l))!==(h=r(s,l))||a(o,s)<0^l>0){do u.point(0===c||3===c?t:n,c>1?i:e);while((c=(c+l+4)%4)!==h)}else u.point(s[0],s[1])}function c(r,o){return r>=t&&n>=r&&o>=e&&i>=o}function h(t,e){c(t,e)&&s.point(t,e)}function d(){E.point=f,m&&m.push(v=[]),C=!0,k=!1,_=x=0/0}function p(){g&&(f(y,b),w&&k&&M.rejoin(),g.push(M.buffer())),E.point=h,k&&s.lineEnd()}function f(t,e){t=Math.max(-Dl,Math.min(Dl,t)),e=Math.max(-Dl,Math.min(Dl,e));var n=c(t,e);if(m&&v.push([t,e]),C)y=t,b=e,w=n,C=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&k)s.point(t,e);else{var i={a:{x:_,y:x},b:{x:t,y:e}};T(i)?(k||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),$=!1):n&&(s.lineStart(),s.point(t,e),$=!1)}_=t,x=e,k=n}var g,m,v,y,b,w,_,x,k,C,$,S=s,M=Hn(),T=zn(t,e,n,i),E={point:h,lineStart:d,lineEnd:p,polygonStart:function(){s=M,g=[],m=[],$=!0},polygonEnd:function(){s=S,g=Qa.merge(g);var e=l([t,i]),n=$&&e,r=g.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),r&&En(g,o,e,u,s),s.polygonEnd()),g=m=v=null}};return E}}function Un(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function qn(t){var e=0,n=Ms/3,i=ai(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Ms/180,n=t[1]*Ms/180):[e/Ms*180,n/Ms*180]},r}function Wn(t,e){function n(t,e){var n=Math.sqrt(o-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),a-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,o=1+i*(2*r-i),a=Math.sqrt(o)/r;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,te((o-(t*t+n*n)*r*r)/(2*r))]},n}function Vn(){function t(t,e){Fl+=r*t-i*e,i=t,r=e}var e,n,i,r;Ol.point=function(o,a){Ol.point=t,e=i=o,n=r=a},Ol.lineEnd=function(){t(e,n)}}function Yn(t,e){Al>t&&(Al=t),t>Pl&&(Pl=t),Hl>e&&(Hl=e),e>Ll&&(Ll=e)}function Gn(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function i(){s.point=t}function r(){a.push("Z")}var o=Qn(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return o=Qn(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function Qn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Xn(t,e){bl+=t,wl+=e,++_l}function Jn(){function t(t,i){var r=t-e,o=i-n,a=Math.sqrt(r*r+o*o);xl+=a*(e+t)/2,kl+=a*(n+i)/2,Cl+=a,Xn(e=t,n=i)}var e,n;jl.point=function(i,r){jl.point=t,Xn(e=i,n=r)}}function Kn(){jl.point=Xn}function Zn(){function t(t,e){var n=t-i,o=e-r,a=Math.sqrt(n*n+o*o);xl+=a*(i+t)/2,kl+=a*(r+e)/2,Cl+=a,a=r*t-i*e,$l+=a*(i+t),Sl+=a*(r+e),Ml+=3*a,Xn(i=t,r=e)}var e,n,i,r;jl.point=function(o,a){jl.point=t,Xn(e=i=o,n=r=a)},jl.lineEnd=function(){t(e,n)}}function ti(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,a,0,Ts)}function n(e,n){t.moveTo(e,n),s.point=i}function i(e,n){t.lineTo(e,n)}function r(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(t){return a=t,s},result:y};return s}function ei(t){function e(t){return(s?i:n)(t)}function n(e){return ri(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})}function i(e){function n(n,i){n=t(n,i),e.point(n[0],n[1])}function i(){b=0/0,C.point=o,e.lineStart()}function o(n,i){var o=gn([n,i]),a=t(n,i);r(b,w,y,_,x,k,b=a[0],w=a[1],y=n,_=o[0],x=o[1],k=o[2],s,e),e.point(b,w)}function a(){C.point=n,e.lineEnd()}function l(){i(),C.point=u,C.lineEnd=c}function u(t,e){o(h=t,d=e),p=b,f=w,g=_,m=x,v=k,C.point=o}function c(){r(b,w,y,_,x,k,p,f,h,g,m,v,s,e),C.lineEnd=a,a()}var h,d,p,f,g,m,v,y,b,w,_,x,k,C={point:n,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),C.lineStart=l},polygonEnd:function(){e.polygonEnd(),C.lineStart=i}};return C}function r(e,n,i,s,l,u,c,h,d,p,f,g,m,v){var y=c-e,b=h-n,w=y*y+b*b;if(w>4*o&&m--){var _=s+p,x=l+f,k=u+g,C=Math.sqrt(_*_+x*x+k*k),$=Math.asin(k/=C),S=us(us(k)-1)<Ds||us(i-d)<Ds?(i+d)/2:Math.atan2(x,_),M=t(S,$),T=M[0],E=M[1],D=T-e,N=E-n,F=b*D-y*N;(F*F/w>o||us((y*D+b*N)/w-.5)>.3||a>s*p+l*f+u*g)&&(r(e,n,i,s,l,u,T,E,S,_/=C,x/=C,k,m,v),v.point(T,E),r(T,E,S,_,x,k,c,h,d,p,f,g,m,v))}}var o=.5,a=Math.cos(30*Fs),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function ni(t){var e=ei(function(e,n){return t([e*As,n*As])});return function(t){return si(e(t))}}function ii(t){this.stream=t}function ri(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function oi(t){return ai(function(){return t})()}function ai(t){function e(t){return t=s(t[0]*Fs,t[1]*Fs),[t[0]*d+l,u-t[1]*d]}function n(t){return t=s.invert((t[0]-l)/d,(u-t[1])/d),t&&[t[0]*As,t[1]*As]}function i(){s=Un(a=ci(v,y,b),o);var t=o(g,m);return l=p-t[0]*d,u=f+t[1]*d,r()}function r(){return c&&(c.valid=!1,c=null),e}var o,a,s,l,u,c,h=ei(function(t,e){return t=o(t,e),[t[0]*d+l,u-t[1]*d]}),d=150,p=480,f=250,g=0,m=0,v=0,y=0,b=0,w=El,_=Se,x=null,k=null;return e.stream=function(t){return c&&(c.valid=!1),c=si(w(a,h(_(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(x=t,El):Rn((x=+t)*Fs),r()):x},e.clipExtent=function(t){return arguments.length?(k=t,_=t?Bn(t[0][0],t[0][1],t[1][0],t[1][1]):Se,r()):k},e.scale=function(t){return arguments.length?(d=+t,i()):d},e.translate=function(t){return arguments.length?(p=+t[0],f=+t[1],i()):[p,f]},e.center=function(t){return arguments.length?(g=t[0]%360*Fs,m=t[1]%360*Fs,i()):[g*As,m*As]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Fs,y=t[1]%360*Fs,b=t.length>2?t[2]%360*Fs:0,i()):[v*As,y*As,b*As]},Qa.rebind(e,h,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,i()}}function si(t){return ri(t,function(e,n){t.point(e*Fs,n*Fs)})}function li(t,e){return[t,e]}function ui(t,e){return[t>Ms?t-Ts:-Ms>t?t+Ts:t,e]}function ci(t,e,n){return t?e||n?Un(di(t),pi(e,n)):di(t):e||n?pi(e,n):ui}function hi(t){return function(e,n){return e+=t,[e>Ms?e-Ts:-Ms>e?e+Ts:e,n]}}function di(t){var e=hi(t);return e.invert=hi(-t),e}function pi(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*i+s*r;return[Math.atan2(l*o-c*a,s*i-u*r),te(c*o+l*a)]}var i=Math.cos(t),r=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*o-l*a;return[Math.atan2(l*o+u*a,s*i+c*r),te(c*i-s*r)]},n}function fi(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,o,a,s){var l=a*e;null!=r?(r=gi(n,r),o=gi(n,o),(a>0?o>r:r>o)&&(r+=a*Ts)):(r=t+a*Ts,o=t-.5*l);for(var u,c=r;a>0?c>o:o>c;c-=l)s.point((u=_n([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],u[1])}}function gi(t,e){var n=gn(e);n[0]-=t,wn(n);var i=Z(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Ds)%(2*Math.PI)}function mi(t,e,n){var i=Qa.range(t,e-Ds,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function vi(t,e,n){var i=Qa.range(t,e-Ds,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function yi(t){return t.source}function bi(t){return t.target}function wi(t,e,n,i){var r=Math.cos(e),o=Math.sin(e),a=Math.cos(i),s=Math.sin(i),l=r*Math.cos(t),u=r*Math.sin(t),c=a*Math.cos(n),h=a*Math.sin(n),d=2*Math.asin(Math.sqrt(re(i-e)+r*a*re(n-t))),p=1/Math.sin(d),f=d?function(t){var e=Math.sin(t*=d)*p,n=Math.sin(d-t)*p,i=n*l+e*c,r=n*u+e*h,a=n*o+e*s;return[Math.atan2(r,i)*As,Math.atan2(a,Math.sqrt(i*i+r*r))*As]}:function(){return[t*As,e*As]};return f.distance=d,f}function _i(){function t(t,r){var o=Math.sin(r*=Fs),a=Math.cos(r),s=us((t*=Fs)-e),l=Math.cos(s);Rl+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=i*o-n*a*l)*s),n*o+i*a*l),e=t,n=o,i=a}var e,n,i;zl.point=function(r,o){e=r*Fs,n=Math.sin(o*=Fs),i=Math.cos(o),zl.point=t},zl.lineEnd=function(){zl.point=zl.lineEnd=y}}function xi(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),o=t(i*r);return[o*r*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),o=Math.sin(r),a=Math.cos(r);return[Math.atan2(t*o,i*a),Math.asin(i&&n*o/i)]},n}function ki(t,e){function n(t,e){a>0?-Es+Ds>e&&(e=-Es+Ds):e>Es-Ds&&(e=Es-Ds);var n=a/Math.pow(r(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var i=Math.cos(t),r=function(t){return Math.tan(Ms/4+t/2)},o=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),a=i*Math.pow(r(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,i=J(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/i,1/o))-Es]},n):$i}function Ci(t,e){function n(t,e){var n=o-e;return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),o=i/r+t;return us(r)<Ds?li:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,o-J(r)*Math.sqrt(t*t+n*n)]},n)}function $i(t,e){return[t,Math.log(Math.tan(Ms/4+e/2))]}function Si(t){var e,n=oi(t),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=Ms*i(),l=r();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}function Mi(t,e){return[Math.log(Math.tan(Ms/4+e/2)),-t]}function Ti(t){return t[0]}function Ei(t){return t[1]}function Di(t){for(var e=t.length,n=[0,1],i=2,r=2;e>r;r++){for(;i>1&&K(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Ni(t,e){return t[0]-e[0]||t[1]-e[1]}function Fi(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Ai(t,e,n,i){var r=t[0],o=n[0],a=e[0]-r,s=i[0]-o,l=t[1],u=n[1],c=e[1]-l,h=i[1]-u,d=(s*(l-u)-h*(r-o))/(h*a-s*c);return[r+d*a,l+d*c]}function Hi(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Pi(){nr(this),this.edge=this.site=this.circle=null}function Li(t){var e=Zl.pop()||new Pi;return e.site=t,e}function Oi(t){Yi(t),Xl.remove(t),Zl.push(t),nr(t)}function Ii(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},o=t.P,a=t.N,s=[t];Oi(t);for(var l=o;l.circle&&us(n-l.circle.x)<Ds&&us(i-l.circle.cy)<Ds;)o=l.P,s.unshift(l),Oi(l),l=o;s.unshift(l),Yi(l);for(var u=a;u.circle&&us(n-u.circle.x)<Ds&&us(i-u.circle.cy)<Ds;)a=u.N,s.push(u),Oi(u),u=a;s.push(u),Yi(u);var c,h=s.length;for(c=1;h>c;++c)u=s[c],l=s[c-1],Zi(u.edge,l.site,u.site,r);l=s[0],u=s[h-1],u.edge=Ji(l.site,u.site,null,r),Vi(l),Vi(u)}function ji(t){for(var e,n,i,r,o=t.x,a=t.y,s=Xl._;s;)if(i=Ri(s,a)-o,i>Ds)s=s.L;else{if(r=o-zi(s,a),!(r>Ds)){i>-Ds?(e=s.P,n=s):r>-Ds?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=Li(t);if(Xl.insert(e,l),e||n){if(e===n)return Yi(e),n=Li(e.site),Xl.insert(l,n),l.edge=n.edge=Ji(e.site,l.site),Vi(e),void Vi(n);if(!n)return void(l.edge=Ji(e.site,l.site));Yi(e),Yi(n);var u=e.site,c=u.x,h=u.y,d=t.x-c,p=t.y-h,f=n.site,g=f.x-c,m=f.y-h,v=2*(d*m-p*g),y=d*d+p*p,b=g*g+m*m,w={x:(m*y-p*b)/v+c,y:(d*b-g*y)/v+h};Zi(n.edge,u,f,w),l.edge=Ji(u,t,null,w),n.edge=Ji(t,f,null,w),Vi(e),Vi(n)}}function Ri(t,e){var n=t.site,i=n.x,r=n.y,o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;n=a.site;var s=n.x,l=n.y,u=l-e;if(!u)return s;var c=s-i,h=1/o-1/u,d=c/u;return h?(-d+Math.sqrt(d*d-2*h*(c*c/(-2*u)-l+u/2+r-o/2)))/h+i:(i+s)/2}function zi(t,e){var n=t.N;if(n)return Ri(n,e);var i=t.site;return i.y===e?i.x:1/0}function Bi(t){this.site=t,this.edges=[]}function Ui(t){for(var e,n,i,r,o,a,s,l,u,c,h=t[0][0],d=t[1][0],p=t[0][1],f=t[1][1],g=Ql,m=g.length;m--;)if(o=g[m],o&&o.prepare())for(s=o.edges,l=s.length,a=0;l>a;)c=s[a].end(),i=c.x,r=c.y,u=s[++a%l].start(),e=u.x,n=u.y,(us(i-e)>Ds||us(r-n)>Ds)&&(s.splice(a,0,new tr(Ki(o.site,c,us(i-h)<Ds&&f-r>Ds?{x:h,y:us(e-h)<Ds?n:f}:us(r-f)<Ds&&d-i>Ds?{x:us(n-f)<Ds?e:d,y:f}:us(i-d)<Ds&&r-p>Ds?{x:d,y:us(e-d)<Ds?n:p}:us(r-p)<Ds&&i-h>Ds?{x:us(n-p)<Ds?e:h,y:p}:null),o.site,null)),++l)}function qi(t,e){return e.angle-t.angle}function Wi(){nr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vi(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r.x,s=r.y,l=i.x-a,u=i.y-s,c=o.x-a,h=o.y-s,d=2*(l*h-u*c);if(!(d>=-Ns)){var p=l*l+u*u,f=c*c+h*h,g=(h*p-u*f)/d,m=(l*f-c*p)/d,h=m+s,v=tu.pop()||new Wi;v.arc=t,v.site=r,v.x=g+a,v.y=h+Math.sqrt(g*g+m*m),v.cy=h,t.circle=v;for(var y=null,b=Kl._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Kl.insert(y,v),y||(Jl=v)}}}}function Yi(t){var e=t.circle;e&&(e.P||(Jl=e.N),Kl.remove(e),tu.push(e),nr(e),t.circle=null)}function Gi(t){for(var e,n=Gl,i=zn(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)e=n[r],(!Qi(e,t)||!i(e)||us(e.a.x-e.b.x)<Ds&&us(e.a.y-e.b.y)<Ds)&&(e.a=e.b=null,n.splice(r,1))}function Qi(t,e){var n=t.b;if(n)return!0;var i,r,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,h=t.r,d=c.x,p=c.y,f=h.x,g=h.y,m=(d+f)/2,v=(p+g)/2;if(g===p){if(a>m||m>=s)return;if(d>f){if(o){if(o.y>=u)return}else o={x:m,y:l};n={x:m,y:u}}else{if(o){if(o.y<l)return}else o={x:m,y:u};n={x:m,y:l}}}else if(i=(d-f)/(g-p),r=v-i*m,-1>i||i>1)if(d>f){if(o){if(o.y>=u)return}else o={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else if(g>p){if(o){if(o.x>=s)return}else o={x:a,y:i*a+r};n={x:s,y:i*s+r}}else{if(o){if(o.x<a)return}else o={x:s,y:i*s+r};n={x:a,y:i*a+r}}return t.a=o,t.b=n,!0}function Xi(t,e){this.l=t,this.r=e,this.a=this.b=null}function Ji(t,e,n,i){var r=new Xi(t,e);return Gl.push(r),n&&Zi(r,t,e,n),i&&Zi(r,e,t,i),Ql[t.i].edges.push(new tr(r,t,e)),Ql[e.i].edges.push(new tr(r,e,t)),r}function Ki(t,e,n){var i=new Xi(t,null);return i.a=e,i.b=n,Gl.push(i),i}function Zi(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function tr(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function er(){this._=null}function nr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ir(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function rr(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function or(t){for(;t.L;)t=t.L;return t}function ar(t,e){var n,i,r,o=t.sort(sr).pop();for(Gl=[],Ql=new Array(t.length),Xl=new er,Kl=new er;;)if(r=Jl,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))(o.x!==n||o.y!==i)&&(Ql[o.i]=new Bi(o),ji(o),n=o.x,i=o.y),o=t.pop();else{if(!r)break;Ii(r.arc)}e&&(Gi(e),Ui(e));var a={cells:Ql,edges:Gl};return Xl=Kl=Gl=Ql=null,a}function sr(t,e){return e.y-t.y||e.x-t.x}function lr(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function ur(t){return t.x}function cr(t){return t.y}function hr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function dr(t,e,n,i,r,o){if(!t(e,n,i,r,o)){var a=.5*(n+r),s=.5*(i+o),l=e.nodes;l[0]&&dr(t,l[0],n,i,a,s),l[1]&&dr(t,l[1],a,i,r,s),l[2]&&dr(t,l[2],n,s,a,o),l[3]&&dr(t,l[3],a,s,r,o)}}function pr(t,e){t=Qa.rgb(t),e=Qa.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,a=e.g-i,s=e.b-r;return function(t){return"#"+be(Math.round(n+o*t))+be(Math.round(i+a*t))+be(Math.round(r+s*t))}}function fr(t,e){var n,i={},r={};for(n in t)n in e?i[n]=vr(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function gr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function mr(t,e){var n,i,r,o=nu.lastIndex=iu.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=nu.exec(t))&&(i=iu.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:gr(n,i)})),o=iu.lastIndex;return o<e.length&&(r=e.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,i=0;e>i;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}function vr(t,e){for(var n,i=Qa.interpolators.length;--i>=0&&!(n=Qa.interpolators[i](t,e)););return n}function yr(t,e){var n,i=[],r=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)i.push(vr(t[n],e[n]));for(;o>n;++n)r[n]=t[n];for(;a>n;++n)r[n]=e[n];return function(t){for(n=0;s>n;++n)r[n]=i[n](t);return r}}function br(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function wr(t){return function(e){return 1-t(1-e)}}function _r(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function xr(t){return t*t}function kr(t){return t*t*t}function Cr(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function $r(t){return function(e){return Math.pow(e,t)}}function Sr(t){return 1-Math.cos(t*Es)}function Mr(t){return Math.pow(2,10*(t-1))}function Tr(t){return 1-Math.sqrt(1-t*t)}function Er(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Ts*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*Ts/e)}}function Dr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Nr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Fr(t,e){t=Qa.hcl(t),e=Qa.hcl(e);var n=t.h,i=t.c,r=t.l,o=e.h-n,a=e.c-i,s=e.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?e.c:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return ue(n+o*t,i+a*t,r+s*t)+""}}function Ar(t,e){t=Qa.hsl(t),e=Qa.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,a=e.s-i,s=e.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?e.s:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return se(n+o*t,i+a*t,r+s*t)+""}}function Hr(t,e){t=Qa.lab(t),e=Qa.lab(e);var n=t.l,i=t.a,r=t.b,o=e.l-n,a=e.a-i,s=e.b-r;return function(t){return he(n+o*t,i+a*t,r+s*t)+""}}function Pr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Lr(t){var e=[t.a,t.b],n=[t.c,t.d],i=Ir(e),r=Or(e,n),o=Ir(jr(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*As,this.translate=[t.e,t.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*As:0}function Or(t,e){return t[0]*e[0]+t[1]*e[1]}function Ir(t){var e=Math.sqrt(Or(t,t));return e&&(t[0]/=e,t[1]/=e),e}function jr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Rr(t,e){var n,i=[],r=[],o=Qa.transform(t),a=Qa.transform(e),s=o.translate,l=a.translate,u=o.rotate,c=a.rotate,h=o.skew,d=a.skew,p=o.scale,f=a.scale;return s[0]!=l[0]||s[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:gr(s[0],l[0])},{i:3,x:gr(s[1],l[1])})):i.push(l[0]||l[1]?"translate("+l+")":""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:gr(u,c)})):c&&i.push(i.pop()+"rotate("+c+")"),h!=d?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:gr(h,d)}):d&&i.push(i.pop()+"skewX("+d+")"),p[0]!=f[0]||p[1]!=f[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:gr(p[0],f[0])},{i:n-2,x:gr(p[1],f[1])})):(1!=f[0]||1!=f[1])&&i.push(i.pop()+"scale("+f+")"),n=r.length,function(t){for(var e,o=-1;++o<n;)i[(e=r[o]).i]=e.x(t);return i.join("")}}function zr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Br(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Ur(t){for(var e=t.source,n=t.target,i=Wr(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function qr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Wr(t,e){if(t===e)return t;for(var n=qr(t),i=qr(e),r=n.pop(),o=i.pop(),a=null;r===o;)a=r,r=n.pop(),o=i.pop();return a}function Vr(t){t.fixed|=2}function Yr(t){t.fixed&=-7}function Gr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Qr(t){t.fixed&=-5}function Xr(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,l=-1;++l<s;)o=a[l],null!=o&&(Xr(o,e,n),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function Jr(t,e){return Qa.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=io,t}function Kr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function Zr(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(o=t.children)&&(r=o.length))for(var r,o,a=-1;++a<r;)n.push(o[a]);for(;null!=(t=i.pop());)e(t)}function to(t){return t.children}function eo(t){return t.value}function no(t,e){return e.value-t.value}function io(t){return Qa.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function ro(t){return t.x}function oo(t){return t.y}function ao(t,e,n){t.y0=e,t.y=n}function so(t){return Qa.range(t.length)}function lo(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function uo(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function co(t){return t.reduce(ho,0)}function ho(t,e){return t+e[1]}function po(t,e){return fo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function fo(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];++n<=e;)o[n]=r*n+i;return o}function go(t){return[Qa.min(t),Qa.max(t)]}function mo(t,e){return t.value-e.value}function vo(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function yo(t,e){t._pack_next=e,e._pack_prev=t}function bo(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function wo(t){function e(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),d=Math.min(t.y-t.r,d),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(u=n.length)){var n,i,r,o,a,s,l,u,c=1/0,h=-1/0,d=1/0,p=-1/0;if(n.forEach(_o),i=n[0],i.x=-i.r,i.y=0,e(i),u>1&&(r=n[1],r.x=r.r,r.y=0,e(r),u>2))for(o=n[2],Co(i,r,o),e(o),vo(i,o),i._pack_prev=o,vo(o,r),r=i._pack_next,a=3;u>a;a++){Co(i,r,o=n[a]);var f=0,g=1,m=1;for(s=r._pack_next;s!==r;s=s._pack_next,g++)if(bo(s,o)){f=1;break}if(1==f)for(l=i._pack_prev;l!==s._pack_prev&&!bo(l,o);l=l._pack_prev,m++);f?(m>g||g==m&&r.r<i.r?yo(i,r=s):yo(i=l,r),a--):(vo(i,o),r=o,e(o))}var v=(c+h)/2,y=(d+p)/2,b=0;for(a=0;u>a;a++)o=n[a],o.x-=v,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,n.forEach(xo)}}function _o(t){t._pack_next=t._pack_prev=t}function xo(t){delete t._pack_next,delete t._pack_prev}function ko(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var o=-1,a=r.length;++o<a;)ko(r[o],e,n,i)}function Co(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var a=e.r+n.r,s=r*r+o*o;a*=a,i*=i;var l=.5+(i-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(i+s)-(i-=s)*i-a*a))/(2*s);n.x=t.x+l*r+u*o,n.y=t.y+l*o-u*r}else n.x=t.x+i,n.y=t.y}function $o(t,e){return t.parent==e.parent?1:2}function So(t){var e=t.children;return e.length?e[0]:t.t}function Mo(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function To(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Eo(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)e=r[o],e.z+=n,e.m+=n,n+=e.s+(i+=e.c)}function Do(t,e,n){return t.a.parent===e.parent?t.a:n}function No(t){return 1+Qa.max(t,function(t){return t.y})}function Fo(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Ao(t){var e=t.children;return e&&e.length?Ao(e[0]):t}function Ho(t){var e,n=t.children;return n&&(e=n.length)?Ho(n[e-1]):t}function Po(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Lo(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>o&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function Oo(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Io(t){return t.rangeExtent?t.rangeExtent():Oo(t.range())}function jo(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function Ro(t,e){var n,i=0,r=t.length-1,o=t[i],a=t[r];return o>a&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t}function zo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:fu}function Bo(t,e,n,i){var r=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)r.push(n(t[a-1],t[a])),o.push(i(e[a-1],e[a]));return function(e){var n=Qa.bisect(t,e,1,s)-1;return o[n](r[n](e))}}function Uo(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?Bo:jo,l=i?Br:zr;return a=r(t,e,l,n),s=r(e,t,l,vr),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},o.range=function(t){return arguments.length?(e=t,r()):e},o.rangeRound=function(t){return o.range(t).interpolate(Pr)},o.clamp=function(t){return arguments.length?(i=t,r()):i},o.interpolate=function(t){return arguments.length?(n=t,r()):n},o.ticks=function(e){return Yo(t,e)},o.tickFormat=function(e,n){return Go(t,e,n)},o.nice=function(e){return Wo(t,e),r()},o.copy=function(){return Uo(t,e,n,i)},r()}function qo(t,e){return Qa.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Wo(t,e){return Ro(t,zo(Vo(t,e)[2]))}function Vo(t,e){null==e&&(e=10);var n=Oo(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Yo(t,e){return Qa.range.apply(Qa,Vo(t,e))}function Go(t,e,n){var i=Vo(t,e);if(n){var r=nl.exec(n);if(r.shift(),"s"===r[8]){var o=Qa.formatPrefix(Math.max(us(i[0]),us(i[1])));return r[7]||(r[7]="."+Qo(o.scale(i[2]))),r[8]="f",n=Qa.format(r.join("")),function(t){return n(o.scale(t))+o.symbol}}r[7]||(r[7]="."+Xo(r[8],i)),n=r.join("")}else n=",."+Qo(i[2])+"f";return Qa.format(n)}function Qo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Xo(t,e){var n=Qo(e[2]);return t in gu?Math.abs(n-Qo(Math.max(us(e[0]),us(e[1]))))+ +("e"!==t):n-2*("%"===t)}function Jo(t,e,n,i){function r(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(r(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),a):i},a.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),a):e},a.nice=function(){var e=Ro(i.map(r),n?Math:vu);return t.domain(e),i=e.map(o),a},a.ticks=function(){var t=Oo(i),a=[],s=t[0],l=t[1],u=Math.floor(r(s)),c=Math.ceil(r(l)),h=e%1?2:e;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var d=1;h>d;d++)a.push(o(u)*d);a.push(o(u))}else for(a.push(o(u));u++<c;)for(var d=h-1;d>0;d--)a.push(o(u)*d);for(u=0;a[u]<s;u++);for(c=a.length;a[c-1]>l;c--);a=a.slice(u,c)}return a},a.tickFormat=function(t,e){if(!arguments.length)return mu;arguments.length<2?e=mu:"function"!=typeof e&&(e=Qa.format(e));var i,s=Math.max(.1,t/a.ticks().length),l=n?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(t){return t/o(l(r(t)+i))<=s?e(t):""}},a.copy=function(){return Jo(t.copy(),e,n,i)},qo(a,t)}function Ko(t,e,n){function i(e){return t(r(e))}var r=Zo(e),o=Zo(1/e);return i.invert=function(e){return o(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return Yo(n,t)},i.tickFormat=function(t,e){return Go(n,t,e)},i.nice=function(t){return i.domain(Wo(n,t))},i.exponent=function(a){return arguments.length?(r=Zo(e=a),o=Zo(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return Ko(t.copy(),e,n)},qo(i,t)}function Zo(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function ta(t,e){function n(n){return o[((r.get(n)||("range"===e.t?r.set(n,t.push(n)):0/0))-1)%o.length]}function i(e,n){return Qa.range(t.length).map(function(t){return e+n*t})}var r,o,a;return n.domain=function(i){if(!arguments.length)return t;t=[],r=new s;for(var o,a=-1,l=i.length;++a<l;)r.has(o=i[a])||r.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,a=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],u=r[1],c=(u-l)/(Math.max(1,t.length-1)+s);return o=i(t.length<2?(l+u)/2:l+c*s/2,c),a=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=r[1]<r[0],c=r[u-0],h=r[1-u],d=(h-c)/(t.length-s+2*l);return o=i(c+d*l,d),u&&o.reverse(),a=d*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=r[1]<r[0],c=r[u-0],h=r[1-u],d=Math.floor((h-c)/(t.length-s+2*l)),p=h-c-(t.length-s)*d;return o=i(c+Math.round(p/2),d),u&&o.reverse(),a=Math.round(d*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Oo(e.a[0])},n.copy=function(){return ta(t,e)
},n.domain(t)}function ea(i,r){function o(){var t=0,e=r.length;for(s=[];++t<e;)s[t-1]=Qa.quantile(i,t/e);return a}function a(t){return isNaN(t=+t)?void 0:r[Qa.bisect(s,t)]}var s;return a.domain=function(r){return arguments.length?(i=r.map(e).filter(n).sort(t),o()):i},a.range=function(t){return arguments.length?(r=t,o()):r},a.quantiles=function(){return s},a.invertExtent=function(t){return t=r.indexOf(t),0>t?[0/0,0/0]:[t>0?s[t-1]:i[0],t<s.length?s[t]:i[i.length-1]]},a.copy=function(){return ea(i,r)},o()}function na(t,e,n){function i(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function r(){return o=n.length/(e-t),a=n.length-1,i}var o,a;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.invertExtent=function(e){return e=n.indexOf(e),e=0>e?0/0:e/o+t,[e,e+1/o]},i.copy=function(){return na(t,e,n)},r()}function ia(t,e){function n(n){return n>=n?e[Qa.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return ia(t,e)},n}function ra(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Yo(t,e)},e.tickFormat=function(e,n){return Go(t,e,n)},e.copy=function(){return ra(t)},e}function oa(t){return t.innerRadius}function aa(t){return t.outerRadius}function sa(t){return t.startAngle}function la(t){return t.endAngle}function ua(t){function e(e){function a(){u.push("M",o(t(c),s))}for(var l,u=[],c=[],h=-1,d=e.length,p=$e(n),f=$e(i);++h<d;)r.call(this,l=e[h],h)?c.push([+p.call(this,l,h),+f.call(this,l,h)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=Ti,i=Ei,r=Tn,o=ca,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Cu.get(t)||ca).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function ca(t){return t.join("L")}function ha(t){return ca(t)+"Z"}function da(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function pa(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function fa(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function ga(t,e){return t.length<4?ca(t):t[1]+ya(t.slice(1,t.length-1),ba(t,e))}function ma(t,e){return t.length<3?ca(t):t[0]+ya((t.push(t[0]),t),ba([t[t.length-2]].concat(t,[t[1]]),e))}function va(t,e){return t.length<3?ca(t):t[0]+ya(t,ba(t,e))}function ya(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return ca(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(i+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],r=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,i+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],s=e[u],i+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[l];i+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return i}function ba(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],i.push([r*(a[0]-n[0]),r*(a[1]-n[1])]);return i}function wa(t){if(t.length<3)return ca(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],a=[r,r,r,(i=t[1])[0]],s=[o,o,o,i[1]],l=[r,",",o,"L",Ca(Mu,a),",",Ca(Mu,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],a.shift(),a.push(i[0]),s.shift(),s.push(i[1]),$a(l,a,s);return t.pop(),l.push("L",i),l.join("")}function _a(t){if(t.length<4)return ca(t);for(var e,n=[],i=-1,r=t.length,o=[0],a=[0];++i<3;)e=t[i],o.push(e[0]),a.push(e[1]);for(n.push(Ca(Mu,o)+","+Ca(Mu,a)),--i;++i<r;)e=t[i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),$a(n,o,a);return n.join("")}function xa(t){for(var e,n,i=-1,r=t.length,o=r+4,a=[],s=[];++i<4;)n=t[i%r],a.push(n[0]),s.push(n[1]);for(e=[Ca(Mu,a),",",Ca(Mu,s)],--i;++i<o;)n=t[i%r],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),$a(e,a,s);return e.join("")}function ka(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,u=-1;++u<=n;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(o+r*s),i[1]=e*i[1]+(1-e)*(a+r*l);return wa(t)}function Ca(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function $a(t,e,n){t.push("C",Ca($u,e),",",Ca($u,n),",",Ca(Su,e),",",Ca(Su,n),",",Ca(Mu,e),",",Ca(Mu,n))}function Sa(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ma(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],a=i[0]=Sa(r,o);++e<n;)i[e]=(a+(a=Sa(r=o,o=t[e+1])))/2;return i[e]=a,i}function Ta(t){for(var e,n,i,r,o=[],a=Ma(t),s=-1,l=t.length-1;++s<l;)e=Sa(t[s],t[s+1]),us(e)<Ds?a[s]=a[s+1]=0:(n=a[s]/e,i=a[s+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),a[s]=r*n,a[s+1]=r*i));for(s=-1;++s<=l;)r=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([r||0,a[s]*r||0]);return o}function Ea(t){return t.length<3?ca(t):t[0]+ya(t,Ta(t))}function Da(t){for(var e,n,i,r=-1,o=t.length;++r<o;)e=t[r],n=e[0],i=e[1]+xu,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Na(t){function e(e){function l(){g.push("M",s(t(v),h),c,u(t(m.reverse()),h),"Z")}for(var d,p,f,g=[],m=[],v=[],y=-1,b=e.length,w=$e(n),_=$e(r),x=n===i?function(){return p}:$e(i),k=r===o?function(){return f}:$e(o);++y<b;)a.call(this,d=e[y],y)?(m.push([p=+w.call(this,d,y),f=+_.call(this,d,y)]),v.push([+x.call(this,d,y),+k.call(this,d,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=Ti,i=Ti,r=0,o=Ei,a=Tn,s=ca,l=s.key,u=s,c="L",h=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=o=t,e):o},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=Cu.get(t)||ca).key,u=s.reverse||s,c=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(h=t,e):h},e}function Fa(t){return t.radius}function Aa(t){return[t.x,t.y]}function Ha(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]+xu;return[n*Math.cos(i),n*Math.sin(i)]}}function Pa(){return 64}function La(){return"circle"}function Oa(t){var e=Math.sqrt(t/Ms);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Ia(t,e){return fs(t,Au),t.id=e,t}function ja(t,e,n,i){var r=t.id;return j(t,"function"==typeof n?function(t,o,a){t.__transition__[r].tween.set(e,i(n.call(t,t.__data__,o,a)))}:(n=i(n),function(t){t.__transition__[r].tween.set(e,n)}))}function Ra(t){return null==t&&(t=""),function(){this.textContent=t}}function za(t,e,n,i){var r=t.__transition__||(t.__transition__={active:0,count:0}),o=r[n];if(!o){var a=i.time;o=r[n]={tween:new s,time:a,ease:i.ease,delay:i.delay,duration:i.duration},++r.count,Qa.timer(function(i){function s(i){return r.active>n?u():(r.active=n,o.event&&o.event.start.call(t,c,e),o.tween.forEach(function(n,i){(i=i.call(t,c,e))&&g.push(i)}),void Qa.timer(function(){return f.c=l(i||1)?Tn:l,1},0,a))}function l(i){if(r.active!==n)return u();for(var a=i/p,s=h(a),l=g.length;l>0;)g[--l].call(t,s);return a>=1?(o.event&&o.event.end.call(t,c,e),u()):void 0}function u(){return--r.count?delete r[n]:delete t.__transition__,1}var c=t.__data__,h=o.ease,d=o.delay,p=o.duration,f=Zs,g=[];return f.t=d+a,i>=d?s(i-d):void(f.c=s)},0,a)}}function Ba(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate("+(isFinite(i)?i:n(t))+",0)"})}function Ua(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate(0,"+(isFinite(i)?i:n(t))+")"})}function qa(t){return t.toISOString()}function Wa(t,e,n){function i(e){return t(e)}function r(t,n){var i=t[1]-t[0],r=i/n,o=Qa.bisect(Bu,r);return o==Bu.length?[e.year,Vo(t.map(function(t){return t/31536e6}),n)[2]]:o?e[r/Bu[o-1]<Bu[o]/r?o-1:o]:[Wu,Vo(t,n)[2]]}return i.invert=function(e){return Va(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Va)},i.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Va(+n+1),e).length}var o=i.domain(),a=Oo(o),s=null==t?r(a,10):"number"==typeof t&&r(a,t);return s&&(t=s[0],e=s[1]),i.domain(Ro(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Va(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Va(+e+1);return e}}:t))},i.ticks=function(t,e){var n=Oo(i.domain()),o=null==t?r(n,10):"number"==typeof t?r(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Va(+n[1]+1),1>e?1:e)},i.tickFormat=function(){return n},i.copy=function(){return Wa(t.copy(),e,n)},qo(i,t)}function Va(t){return new Date(t)}function Ya(t){return JSON.parse(t.responseText)}function Ga(t){var e=Ka.createRange();return e.selectNode(Ka.body),e.createContextualFragment(t.responseText)}var Qa={version:"3.4.13"};Date.now||(Date.now=function(){return+new Date});var Xa=[].slice,Ja=function(t){return Xa.call(t)},Ka=document,Za=Ka.documentElement,ts=window;try{Ja(Za.childNodes)[0].nodeType}catch(es){Ja=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{Ka.createElement("div").style.setProperty("opacity",0,"")}catch(ns){var is=ts.Element.prototype,rs=is.setAttribute,os=is.setAttributeNS,as=ts.CSSStyleDeclaration.prototype,ss=as.setProperty;is.setAttribute=function(t,e){rs.call(this,t,e+"")},is.setAttributeNS=function(t,e,n){os.call(this,t,e,n+"")},as.setProperty=function(t,e,n){ss.call(this,t,e+"",n)}}Qa.ascending=t,Qa.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},Qa.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o&&!(null!=(n=t[r])&&n>=n);)n=void 0;for(;++r<o;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<o&&!(null!=(n=e.call(t,t[r],r))&&n>=n);)n=void 0;for(;++r<o;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},Qa.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o&&!(null!=(n=t[r])&&n>=n);)n=void 0;for(;++r<o;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<o&&!(null!=(n=e.call(t,t[r],r))&&n>=n);)n=void 0;for(;++r<o;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},Qa.extent=function(t,e){var n,i,r,o=-1,a=t.length;if(1===arguments.length){for(;++o<a&&!(null!=(n=r=t[o])&&n>=n);)n=r=void 0;for(;++o<a;)null!=(i=t[o])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++o<a&&!(null!=(n=r=e.call(t,t[o],o))&&n>=n);)n=void 0;for(;++o<a;)null!=(i=e.call(t,t[o],o))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},Qa.sum=function(t,e){var i,r=0,o=t.length,a=-1;if(1===arguments.length)for(;++a<o;)n(i=+t[a])&&(r+=i);else for(;++a<o;)n(i=+e.call(t,t[a],a))&&(r+=i);return r},Qa.mean=function(t,i){var r,o=0,a=t.length,s=-1,l=a;if(1===arguments.length)for(;++s<a;)n(r=e(t[s]))?o+=r:--l;else for(;++s<a;)n(r=e(i.call(t,t[s],s)))?o+=r:--l;return l?o/l:void 0},Qa.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r},Qa.median=function(i,r){var o,a=[],s=i.length,l=-1;if(1===arguments.length)for(;++l<s;)n(o=e(i[l]))&&a.push(o);else for(;++l<s;)n(o=e(r.call(i,i[l],l)))&&a.push(o);return a.length?Qa.quantile(a.sort(t),.5):void 0};var ls=i(t);Qa.bisectLeft=ls.left,Qa.bisect=Qa.bisectRight=ls.right,Qa.bisector=function(e){return i(1===e.length?function(n,i){return t(e(n),i)}:e)},Qa.shuffle=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t},Qa.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},Qa.pairs=function(t){for(var e,n=0,i=t.length-1,r=t[0],o=new Array(0>i?0:i);i>n;)o[n]=[e=r,r=t[++n]];return o},Qa.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=Qa.min(arguments,r),n=new Array(e);++t<e;)for(var i,o=-1,a=n[t]=new Array(i);++o<i;)a[o]=arguments[o][t];return n},Qa.transpose=function(t){return Qa.zip.apply(Qa,t)},Qa.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Qa.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Qa.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Qa.merge=function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--a]=i[e];return n};var us=Math.abs;Qa.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var i,r=[],a=o(us(n)),s=-1;if(t*=a,e*=a,n*=a,0>n)for(;(i=t+n*++s)>e;)r.push(i/a);else for(;(i=t+n*++s)<e;)r.push(i/a);return r},Qa.map=function(t){var e=new s;if(t instanceof s)t.forEach(function(t,n){e.set(t,n)});else for(var n in t)e.set(n,t[n]);return e};var cs="__proto__",hs="\x00";a(s,{has:c,get:function(t){return this._[l(t)]},set:function(t,e){return this._[l(t)]=e},remove:h,keys:d,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:u(e),value:this._[e]});return t},size:p,empty:f,forEach:function(t){for(var e in this._)t.call(this,u(e),this._[e])}}),Qa.nest=function(){function t(e,a,l){if(l>=o.length)return i?i.call(r,a):n?a.sort(n):a;for(var u,c,h,d,p=-1,f=a.length,g=o[l++],m=new s;++p<f;)(d=m.get(u=g(c=a[p])))?d.push(c):m.set(u,[c]);return e?(c=e(),h=function(n,i){c.set(n,t(e,i,l))}):(c={},h=function(n,i){c[n]=t(e,i,l)}),m.forEach(h),c}function e(t,n){if(n>=o.length)return t;var i=[],r=a[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,r={},o=[],a=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(n){return e(t(Qa.map,n,0),0)},r.key=function(t){return o.push(t),r},r.sortKeys=function(t){return a[o.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return i=t,r},r},Qa.set=function(t){var e=new g;if(t)for(var n=0,i=t.length;i>n;++n)e.add(t[n]);return e},a(g,{has:c,add:function(t){return this._[l(t+="")]=!0,t},remove:h,values:d,size:p,empty:f,forEach:function(t){for(var e in this._)t.call(this,u(e))}}),Qa.behavior={},Qa.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=m(t,e,e[n]);return t};var ds=["webkit","ms","moz","Moz","o","O"];Qa.dispatch=function(){for(var t=new b,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=w(t);return t},b.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},Qa.event=null,Qa.requote=function(t){return t.replace(ps,"\\$&")};var ps=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,fs={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},gs=function(t,e){return e.querySelector(t)},ms=function(t,e){return e.querySelectorAll(t)},vs=Za.matches||Za[v(Za,"matchesSelector")],ys=function(t,e){return vs.call(t,e)};"function"==typeof Sizzle&&(gs=function(t,e){return Sizzle(t,e)[0]||null},ms=Sizzle,ys=Sizzle.matchesSelector),Qa.selection=function(){return xs};var bs=Qa.selection.prototype=[];bs.select=function(t){var e,n,i,r,o=[];t=$(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(i=this[a]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,a)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return C(o)},bs.selectAll=function(t){var e,n,i=[];t=S(t);for(var r=-1,o=this.length;++r<o;)for(var a=this[r],s=-1,l=a.length;++s<l;)(n=a[s])&&(i.push(e=Ja(t.call(n,n.__data__,s,r))),e.parentNode=n);return C(i)};var ws={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Qa.ns={prefix:ws,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),ws.hasOwnProperty(n)?{space:ws[n],local:t}:t}},bs.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=Qa.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(M(e,t[e]));return this}return this.each(M(t,e))},bs.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=D(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!E(t[r]).test(e))return!1;return!0}for(e in t)this.each(N(e,t[e]));return this}return this.each(N(t,e))},bs.style=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.each(A(n,t[n],e));return this}if(2>i)return ts.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(A(t,e,n))},bs.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(H(e,t[e]));return this}return this.each(H(t,e))},bs.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},bs.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},bs.append=function(t){return t=P(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},bs.insert=function(t,e){return t=P(t),e=$(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},bs.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},bs.data=function(t,e){function n(t,n){var i,r,o,a=t.length,h=n.length,d=Math.min(a,h),p=new Array(h),f=new Array(h),g=new Array(a);if(e){var m,v=new s,y=new Array(a);for(i=-1;++i<a;)v.has(m=e.call(r=t[i],r.__data__,i))?g[i]=r:v.set(m,r),y[i]=m;for(i=-1;++i<h;)(r=v.get(m=e.call(n,o=n[i],i)))?r!==!0&&(p[i]=r,r.__data__=o):f[i]=L(o),v.set(m,!0);for(i=-1;++i<a;)v.get(y[i])!==!0&&(g[i]=t[i])}else{for(i=-1;++i<d;)r=t[i],o=n[i],r?(r.__data__=o,p[i]=r):f[i]=L(o);for(;h>i;++i)f[i]=L(n[i]);for(;a>i;++i)g[i]=t[i]}f.update=p,f.parentNode=p.parentNode=g.parentNode=t.parentNode,l.push(f),u.push(p),c.push(g)}var i,r,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(i=this[0]).length);++o<a;)(r=i[o])&&(t[o]=r.__data__);return t}var l=R([]),u=C([]),c=C([]);if("function"==typeof t)for(;++o<a;)n(i=this[o],t.call(i,i.parentNode.__data__,o));else for(;++o<a;)n(i=this[o],t);return u.enter=function(){return l},u.exit=function(){return c},u},bs.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},bs.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=O(t));for(var o=0,a=this.length;a>o;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;l>s;s++)(i=n[s])&&t.call(i,i.__data__,s,o)&&e.push(i)}return C(r)},bs.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},bs.sort=function(t){t=I.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},bs.each=function(t){return j(this,function(e,n,i){t.call(e,e.__data__,n,i)})},bs.call=function(t){var e=Ja(arguments);return t.apply(e[0]=this,e),this},bs.empty=function(){return!this.node()},bs.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var o=n[i];if(o)return o}return null},bs.size=function(){var t=0;return j(this,function(){++t}),t};var _s=[];Qa.selection.enter=R,Qa.selection.enter.prototype=_s,_s.append=bs.append,_s.empty=bs.empty,_s.node=bs.node,_s.call=bs.call,_s.size=bs.size,_s.select=function(t){for(var e,n,i,r,o,a=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,a.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,c=r.length;++u<c;)(o=r[u])?(e.push(i[u]=n=t.call(r.parentNode,o.__data__,u,s)),n.__data__=o.__data__):e.push(null)}return C(a)},_s.insert=function(t,e){return arguments.length<2&&(e=z(this)),bs.insert.call(this,t,e)},bs.transition=function(){for(var t,e,n=Eu||++Hu,i=[],r=Du||{time:Date.now(),ease:Cr,delay:0,duration:250},o=-1,a=this.length;++o<a;){i.push(t=[]);for(var s=this[o],l=-1,u=s.length;++l<u;)(e=s[l])&&za(e,l,n,r),t.push(e)}return Ia(i,n)},bs.interrupt=function(){return this.each(B)},Qa.select=function(t){var e=["string"==typeof t?gs(t,Ka):t];return e.parentNode=Za,C([e])},Qa.selectAll=function(t){var e=Ja("string"==typeof t?ms(t,Ka):t);return e.parentNode=Za,C([e])};var xs=Qa.select(Za);bs.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(U(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(U(t,e,n))};var ks=Qa.map({mouseenter:"mouseover",mouseleave:"mouseout"});ks.forEach(function(t){"on"+t in Ka&&ks.remove(t)});var Cs="onselectstart"in Ka?null:v(Za.style,"userSelect"),$s=0;Qa.mouse=function(t){return Y(t,x())};var Ss=/WebKit/.test(ts.navigator.userAgent)?-1:0;Qa.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=x().changedTouches),e)for(var i,r=0,o=e.length;o>r;++r)if((i=e[r]).identifier===n)return Y(t,i)},Qa.behavior.drag=function(){function t(){this.on("mousedown.drag",r).on("touchstart.drag",o)}function e(t,e,r,o,a){return function(){function s(){var t,n,i=e(d,g);i&&(t=i[0]-b[0],n=i[1]-b[1],f|=t|n,b=i,p({type:"drag",x:i[0]+u[0],y:i[1]+u[1],dx:t,dy:n}))}function l(){e(d,g)&&(v.on(o+m,null).on(a+m,null),y(f&&Qa.event.target===h),p({type:"dragend"}))}var u,c=this,h=Qa.event.target,d=c.parentNode,p=n.of(c,arguments),f=0,g=t(),m=".drag"+(null==g?"":"-"+g),v=Qa.select(r()).on(o+m,s).on(a+m,l),y=V(),b=e(d,g);i?(u=i.apply(c,arguments),u=[u.x-b[0],u.y-b[1]]):u=[0,0],p({type:"dragstart"})}}var n=k(t,"drag","dragstart","dragend"),i=null,r=e(y,Qa.mouse,X,"mousemove","mouseup"),o=e(G,Qa.touch,Q,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},Qa.rebind(t,n,"on")},Qa.touches=function(t,e){return arguments.length<2&&(e=x().touches),e?Ja(e).map(function(e){var n=Y(t,e);return n.identifier=e.identifier,n}):[]};var Ms=Math.PI,Ts=2*Ms,Es=Ms/2,Ds=1e-6,Ns=Ds*Ds,Fs=Ms/180,As=180/Ms,Hs=Math.SQRT2,Ps=2,Ls=4;Qa.interpolateZoom=function(t,e){function n(t){var e=t*y;if(v){var n=ne(g),a=o/(Ps*d)*(n*ie(Hs*e+g)-ee(g));return[i+a*u,r+a*c,o*n/ne(Hs*e+g)]}return[i+t*u,r+t*c,o*Math.exp(Hs*e)]}var i=t[0],r=t[1],o=t[2],a=e[0],s=e[1],l=e[2],u=a-i,c=s-r,h=u*u+c*c,d=Math.sqrt(h),p=(l*l-o*o+Ls*h)/(2*o*Ps*d),f=(l*l-o*o-Ls*h)/(2*l*Ps*d),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(f*f+1)-f),v=m-g,y=(v||Math.log(l/o))/Hs;return n.duration=1e3*y,n},Qa.behavior.zoom=function(){function t(t){t.on(M,u).on(js+".zoom",h).on("dblclick.zoom",d).on(D,c)}function e(t){return[(t[0]-C.x)/C.k,(t[1]-C.y)/C.k]}function n(t){return[t[0]*C.k+C.x,t[1]*C.k+C.y]}function i(t){C.k=Math.max(S[0],Math.min(S[1],t))}function r(t,e){e=n(e),C.x+=t[0]-e[0],C.y+=t[1]-e[1]}function o(){b&&b.domain(y.range().map(function(t){return(t-C.x)/C.k}).map(y.invert)),x&&x.domain(w.range().map(function(t){return(t-C.y)/C.k}).map(w.invert))}function a(t){t({type:"zoomstart"})}function s(t){o(),t({type:"zoom",scale:C.k,translate:[C.x,C.y]})}function l(t){t({type:"zoomend"})}function u(){function t(){c=1,r(Qa.mouse(i),d),s(u)}function n(){h.on(T,null).on(E,null),p(c&&Qa.event.target===o),l(u)}var i=this,o=Qa.event.target,u=N.of(i,arguments),c=0,h=Qa.select(ts).on(T,t).on(E,n),d=e(Qa.mouse(i)),p=V();B.call(i),a(u)}function c(){function t(){var t=Qa.touches(p);return d=C.k,t.forEach(function(t){t.identifier in g&&(g[t.identifier]=e(t))}),t}function n(){var e=Qa.event.target;Qa.select(e).on(b,o).on(w,h),x.push(e);for(var n=Qa.event.changedTouches,a=0,l=n.length;l>a;++a)g[n[a].identifier]=null;var u=t(),c=Date.now();if(1===u.length){if(500>c-v){var d=u[0],p=g[d.identifier];i(2*C.k),r(d,p),_(),s(f)}v=c}else if(u.length>1){var d=u[0],y=u[1],k=d[0]-y[0],$=d[1]-y[1];m=k*k+$*$}}function o(){for(var t,e,n,o,a=Qa.touches(p),l=0,u=a.length;u>l;++l,o=null)if(n=a[l],o=g[n.identifier]){if(e)break;t=n,e=o}if(o){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,h=m&&Math.sqrt(c/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+o[0])/2,(e[1]+o[1])/2],i(h*d)}v=null,r(t,e),s(f)}function h(){if(Qa.event.touches.length){for(var e=Qa.event.changedTouches,n=0,i=e.length;i>n;++n)delete g[e[n].identifier];for(var r in g)return void t()}Qa.selectAll(x).on(y,null),k.on(M,u).on(D,c),$(),l(f)}var d,p=this,f=N.of(p,arguments),g={},m=0,y=".zoom-"+Qa.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,x=[],k=Qa.select(p),$=V();B.call(p),n(),a(f),k.on(M,null).on(D,n)}function h(){var t=N.of(this,arguments);m?clearTimeout(m):(p=e(f=g||Qa.mouse(this)),B.call(this),a(t)),m=setTimeout(function(){m=null,l(t)},50),_(),i(Math.pow(2,.002*Os())*C.k),r(f,p),s(t)}function d(){var t=N.of(this,arguments),n=Qa.mouse(this),o=e(n),u=Math.log(C.k)/Math.LN2;a(t),i(Math.pow(2,Qa.event.shiftKey?Math.ceil(u)-1:Math.floor(u)+1)),r(n,o),s(t),l(t)}var p,f,g,m,v,y,b,w,x,C={x:0,y:0,k:1},$=[960,500],S=Is,M="mousedown.zoom",T="mousemove.zoom",E="mouseup.zoom",D="touchstart.zoom",N=k(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=N.of(this,arguments),e=C;Eu?Qa.select(this).transition().each("start.zoom",function(){C=this.__chart__||{x:0,y:0,k:1},a(t)}).tween("zoom:zoom",function(){var n=$[0],i=$[1],r=n/2,o=i/2,a=Qa.interpolateZoom([(r-C.x)/C.k,(o-C.y)/C.k,n/C.k],[(r-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var i=a(e),l=n/i[2];this.__chart__=C={x:r-i[0]*l,y:o-i[1]*l,k:l},s(t)}}).each("end.zoom",function(){l(t)}):(this.__chart__=C,a(t),s(t),l(t))})},t.translate=function(e){return arguments.length?(C={x:+e[0],y:+e[1],k:C.k},o(),t):[C.x,C.y]},t.scale=function(e){return arguments.length?(C={x:C.x,y:C.y,k:+e},o(),t):C.k},t.scaleExtent=function(e){return arguments.length?(S=null==e?Is:[+e[0],+e[1]],t):S},t.center=function(e){return arguments.length?(g=e&&[+e[0],+e[1]],t):g},t.size=function(e){return arguments.length?($=e&&[+e[0],+e[1]],t):$},t.x=function(e){return arguments.length?(b=e,y=e.copy(),C={x:0,y:0,k:1},t):b},t.y=function(e){return arguments.length?(x=e,w=e.copy(),C={x:0,y:0,k:1},t):x},Qa.rebind(t,N,"on")};var Os,Is=[0,1/0],js="onwheel"in Ka?(Os=function(){return-Qa.event.deltaY*(Qa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ka?(Os=function(){return Qa.event.wheelDelta},"mousewheel"):(Os=function(){return-Qa.event.detail},"MozMousePixelScroll");Qa.color=oe,oe.prototype.toString=function(){return this.rgb()+""},Qa.hsl=ae;var Rs=ae.prototype=new oe;Rs.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ae(this.h,this.s,this.l/t)},Rs.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ae(this.h,this.s,t*this.l)},Rs.rgb=function(){return se(this.h,this.s,this.l)},Qa.hcl=le;var zs=le.prototype=new oe;zs.brighter=function(t){return new le(this.h,this.c,Math.min(100,this.l+Bs*(arguments.length?t:1)))},zs.darker=function(t){return new le(this.h,this.c,Math.max(0,this.l-Bs*(arguments.length?t:1)))},zs.rgb=function(){return ue(this.h,this.c,this.l).rgb()},Qa.lab=ce;var Bs=18,Us=.95047,qs=1,Ws=1.08883,Vs=ce.prototype=new oe;Vs.brighter=function(t){return new ce(Math.min(100,this.l+Bs*(arguments.length?t:1)),this.a,this.b)},Vs.darker=function(t){return new ce(Math.max(0,this.l-Bs*(arguments.length?t:1)),this.a,this.b)},Vs.rgb=function(){return he(this.l,this.a,this.b)},Qa.rgb=me;var Ys=me.prototype=new oe;Ys.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),new me(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new me(r,r,r)},Ys.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new me(t*this.r,t*this.g,t*this.b)},Ys.hsl=function(){return _e(this.r,this.g,this.b)},Ys.toString=function(){return"#"+be(this.r)+be(this.g)+be(this.b)};var Gs=Qa.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Gs.forEach(function(t,e){Gs.set(t,ve(e))}),Qa.functor=$e,Qa.xhr=Me(Se),Qa.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=Te(t,e,null==n?i:r(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?i:r(t)):n},a}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(c>=u)return a;if(r)return r=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&++c):10===i&&(r=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;u>c;){var i=t.charCodeAt(c++),s=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(c)&&(++c,++s);else if(i!==l)continue;return t.slice(e,c-s)}return t.slice(e)}for(var i,r,o={},a={},s=[],u=t.length,c=0,h=0;(i=n())!==a;){for(var d=[];i!==o&&i!==a;)d.push(i),i=n();e&&null==(d=e(d,h++))||s.push(d)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new g,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(a).join(t)].concat(e.map(function(e){return r.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},Qa.csv=Qa.dsv(",","text/csv"),Qa.tsv=Qa.dsv(" ","text/tab-separated-values");
var Qs,Xs,Js,Ks,Zs,tl=ts[v(ts,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Qa.timer=function(t,e,n){var i=arguments.length;2>i&&(e=0),3>i&&(n=Date.now());var r=n+e,o={c:t,t:r,f:!1,n:null};Xs?Xs.n=o:Qs=o,Xs=o,Js||(Ks=clearTimeout(Ks),Js=1,tl(Ne))},Qa.timer.flush=function(){Fe(),Ae()},Qa.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var el=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Pe);Qa.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=Qa.round(t,He(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),el[8+n/3]};var nl=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,il=Qa.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Qa.round(t,He(t,e))).toFixed(Math.max(0,Math.min(20,He(t*(1+1e-15),e))))}}),rl=Qa.time={},ol=Date;Ie.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){al.setUTCDate.apply(this._,arguments)},setDay:function(){al.setUTCDay.apply(this._,arguments)},setFullYear:function(){al.setUTCFullYear.apply(this._,arguments)},setHours:function(){al.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){al.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){al.setUTCMinutes.apply(this._,arguments)},setMonth:function(){al.setUTCMonth.apply(this._,arguments)},setSeconds:function(){al.setUTCSeconds.apply(this._,arguments)},setTime:function(){al.setTime.apply(this._,arguments)}};var al=Date.prototype;rl.year=je(function(t){return t=rl.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),rl.years=rl.year.range,rl.years.utc=rl.year.utc.range,rl.day=je(function(t){var e=new ol(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),rl.days=rl.day.range,rl.days.utc=rl.day.utc.range,rl.dayOfYear=function(t){var e=rl.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=rl[t]=je(function(t){return(t=rl.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=rl.year(t).getDay();return Math.floor((rl.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});rl[t+"s"]=n.range,rl[t+"s"].utc=n.utc.range,rl[t+"OfYear"]=function(t){var n=rl.year(t).getDay();return Math.floor((rl.dayOfYear(t)+(n+e)%7)/7)}}),rl.week=rl.sunday,rl.weeks=rl.sunday.range,rl.weeks.utc=rl.sunday.utc.range,rl.weekOfYear=rl.sundayOfYear;var sl={"-":"",_:" ",0:"0"},ll=/^\s*\d+/,ul=/^%/;Qa.locale=function(t){return{numberFormat:Le(t),timeFormat:ze(t)}};var cl=Qa.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Qa.format=cl.numberFormat,Qa.geo={},un.prototype={s:0,t:0,add:function(t){cn(t,this.t,hl),cn(hl.s,this.s,this),this.s?this.t+=hl.t:this.s=hl.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var hl=new un;Qa.geo.stream=function(t,e){t&&dl.hasOwnProperty(t.type)?dl[t.type](t,e):hn(t,e)};var dl={Feature:function(t,e){hn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)hn(n[i].geometry,e)}},pl={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){dn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)dn(n[i],e,0)},Polygon:function(t,e){pn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)pn(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)hn(n[i],e)}};Qa.geo.area=function(t){return fl=0,Qa.geo.stream(t,ml),fl};var fl,gl=new un,ml={sphere:function(){fl+=4*Ms},point:y,lineStart:y,lineEnd:y,polygonStart:function(){gl.reset(),ml.lineStart=fn},polygonEnd:function(){var t=2*gl;fl+=0>t?4*Ms+t:t,ml.lineStart=ml.lineEnd=ml.point=y}};Qa.geo.bounds=function(){function t(t,e){b.push(w=[c=t,d=t]),h>e&&(h=e),e>p&&(p=e)}function e(e,n){var i=gn([e*Fs,n*Fs]);if(v){var r=vn(v,i),o=[r[1],-r[0],0],a=vn(o,r);wn(a),a=_n(a);var l=e-f,u=l>0?1:-1,g=a[0]*As*u,m=us(l)>180;if(m^(g>u*f&&u*e>g)){var y=a[1]*As;y>p&&(p=y)}else if(g=(g+360)%360-180,m^(g>u*f&&u*e>g)){var y=-a[1]*As;h>y&&(h=y)}else h>n&&(h=n),n>p&&(p=n);m?f>e?s(c,e)>s(c,d)&&(d=e):s(e,d)>s(c,d)&&(c=e):d>=c?(c>e&&(c=e),e>d&&(d=e)):e>f?s(c,e)>s(c,d)&&(d=e):s(e,d)>s(c,d)&&(c=e)}else t(e,n);v=i,f=e}function n(){_.point=e}function i(){w[0]=c,w[1]=d,_.point=t,v=null}function r(t,n){if(v){var i=t-f;y+=us(i)>180?i+(i>0?360:-360):i}else g=t,m=n;ml.point(t,n),e(t,n)}function o(){ml.lineStart()}function a(){r(g,m),ml.lineEnd(),us(y)>Ds&&(c=-(d=180)),w[0]=c,w[1]=d,v=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,h,d,p,f,g,m,v,y,b,w,_={point:t,lineStart:n,lineEnd:i,polygonStart:function(){_.point=r,_.lineStart=o,_.lineEnd=a,y=0,ml.polygonStart()},polygonEnd:function(){ml.polygonEnd(),_.point=t,_.lineStart=n,_.lineEnd=i,0>gl?(c=-(d=180),h=-(p=90)):y>Ds?p=90:-Ds>y&&(h=-90),w[0]=c,w[1]=d}};return function(t){p=d=-(c=h=1/0),b=[],Qa.geo.stream(t,_);var e=b.length;if(e){b.sort(l);for(var n,i=1,r=b[0],o=[r];e>i;++i)n=b[i],u(n[0],r)||u(n[1],r)?(s(r[0],n[1])>s(r[0],r[1])&&(r[1]=n[1]),s(n[0],r[1])>s(r[0],r[1])&&(r[0]=n[0])):o.push(r=n);for(var a,n,f=-1/0,e=o.length-1,i=0,r=o[e];e>=i;r=n,++i)n=o[i],(a=s(r[1],n[0]))>f&&(f=a,c=n[0],d=r[1])}return b=w=null,1/0===c||1/0===h?[[0/0,0/0],[0/0,0/0]]:[[c,h],[d,p]]}}(),Qa.geo.centroid=function(t){vl=yl=bl=wl=_l=xl=kl=Cl=$l=Sl=Ml=0,Qa.geo.stream(t,Tl);var e=$l,n=Sl,i=Ml,r=e*e+n*n+i*i;return Ns>r&&(e=xl,n=kl,i=Cl,Ds>yl&&(e=bl,n=wl,i=_l),r=e*e+n*n+i*i,Ns>r)?[0/0,0/0]:[Math.atan2(n,e)*As,te(i/Math.sqrt(r))*As]};var vl,yl,bl,wl,_l,xl,kl,Cl,$l,Sl,Ml,Tl={sphere:y,point:kn,lineStart:$n,lineEnd:Sn,polygonStart:function(){Tl.lineStart=Mn},polygonEnd:function(){Tl.lineStart=$n}},El=Fn(Tn,Ln,In,[-Ms,-Ms/2]),Dl=1e9;Qa.geo.clipExtent=function(){var t,e,n,i,r,o,a={stream:function(t){return r&&(r.valid=!1),r=o(t),r.valid=!0,r},extent:function(s){return arguments.length?(o=Bn(t=+s[0][0],e=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),a):[[t,e],[n,i]]}};return a.extent([[0,0],[960,500]])},(Qa.geo.conicEqualArea=function(){return qn(Wn)}).raw=Wn,Qa.geo.albers=function(){return Qa.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Qa.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(i(o,a),e)||r(o,a),e}var e,n,i,r,o=Qa.geo.albers(),a=Qa.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=Qa.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?a:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),i=s.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var u=o.scale(),c=+e[0],h=+e[1];return n=o.translate(e).clipExtent([[c-.455*u,h-.238*u],[c+.455*u,h+.238*u]]).stream(l).point,i=a.translate([c-.307*u,h+.201*u]).clipExtent([[c-.425*u+Ds,h+.12*u+Ds],[c-.214*u-Ds,h+.234*u-Ds]]).stream(l).point,r=s.translate([c-.205*u,h+.212*u]).clipExtent([[c-.214*u+Ds,h+.166*u+Ds],[c-.115*u-Ds,h+.234*u-Ds]]).stream(l).point,t},t.scale(1070)};var Nl,Fl,Al,Hl,Pl,Ll,Ol={point:y,lineStart:y,lineEnd:y,polygonStart:function(){Fl=0,Ol.lineStart=Vn},polygonEnd:function(){Ol.lineStart=Ol.lineEnd=Ol.point=y,Nl+=us(Fl/2)}},Il={point:Yn,lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y},jl={point:Xn,lineStart:Jn,lineEnd:Kn,polygonStart:function(){jl.lineStart=Zn},polygonEnd:function(){jl.point=Xn,jl.lineStart=Jn,jl.lineEnd=Kn}};Qa.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=r(o)),Qa.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,i,r,o,a,s=4.5;return t.area=function(t){return Nl=0,Qa.geo.stream(t,r(Ol)),Nl},t.centroid=function(t){return bl=wl=_l=xl=kl=Cl=$l=Sl=Ml=0,Qa.geo.stream(t,r(jl)),Ml?[$l/Ml,Sl/Ml]:Cl?[xl/Cl,kl/Cl]:_l?[bl/_l,wl/_l]:[0/0,0/0]},t.bounds=function(t){return Pl=Ll=-(Al=Hl=1/0),Qa.geo.stream(t,r(Il)),[[Al,Hl],[Pl,Ll]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||ni(t):Se,e()):n},t.context=function(t){return arguments.length?(o=null==(i=t)?new Gn:new ti(t),"function"!=typeof s&&o.pointRadius(s),e()):i},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(Qa.geo.albersUsa()).context(null)},Qa.geo.transform=function(t){return{stream:function(e){var n=new ii(e);for(var i in t)n[i]=t[i];return n}}},ii.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Qa.geo.projection=oi,Qa.geo.projectionMutator=ai,(Qa.geo.equirectangular=function(){return oi(li)}).raw=li.invert=li,Qa.geo.rotation=function(t){function e(e){return e=t(e[0]*Fs,e[1]*Fs),e[0]*=As,e[1]*=As,e}return t=ci(t[0]%360*Fs,t[1]*Fs,t.length>2?t[2]*Fs:0),e.invert=function(e){return e=t.invert(e[0]*Fs,e[1]*Fs),e[0]*=As,e[1]*=As,e},e},ui.invert=li,Qa.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=ci(-t[0]*Fs,-t[1]*Fs,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=As,t[1]*=As}}),{type:"Polygon",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=fi((e=+i)*Fs,r*Fs),t):e},t.precision=function(i){return arguments.length?(n=fi(e*Fs,(r=+i)*Fs),t):r},t.angle(90)},Qa.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Fs,r=t[1]*Fs,o=e[1]*Fs,a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r),c=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*a)*n+(n=u*c-l*h*s)*n),l*c+u*h*s)},Qa.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Qa.range(Math.ceil(o/m)*m,r,m).map(d).concat(Qa.range(Math.ceil(u/v)*v,l,v).map(p)).concat(Qa.range(Math.ceil(i/f)*f,n,f).filter(function(t){return us(t%m)>Ds}).map(c)).concat(Qa.range(Math.ceil(s/g)*g,a,g).filter(function(t){return us(t%v)>Ds}).map(h))}var n,i,r,o,a,s,l,u,c,h,d,p,f=10,g=f,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(p(l).slice(1),d(r).reverse().slice(1),p(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],u=+e[0][1],l=+e[1][1],o>r&&(e=o,o=r,r=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[o,u],[r,l]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],i>n&&(e=i,i=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(y)):[[i,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(f=+e[0],g=+e[1],t):[f,g]},t.precision=function(e){return arguments.length?(y=+e,c=mi(s,a,90),h=vi(i,n,y),d=mi(u,l,90),p=vi(o,r,y),t):y},t.majorExtent([[-180,-90+Ds],[180,90-Ds]]).minorExtent([[-180,-80-Ds],[180,80+Ds]])},Qa.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=yi,r=bi;return t.distance=function(){return Qa.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},Qa.geo.interpolate=function(t,e){return wi(t[0]*Fs,t[1]*Fs,e[0]*Fs,e[1]*Fs)},Qa.geo.length=function(t){return Rl=0,Qa.geo.stream(t,zl),Rl};var Rl,zl={sphere:y,point:y,lineStart:_i,lineEnd:y,polygonStart:y,polygonEnd:y},Bl=xi(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Qa.geo.azimuthalEqualArea=function(){return oi(Bl)}).raw=Bl;var Ul=xi(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},Se);(Qa.geo.azimuthalEquidistant=function(){return oi(Ul)}).raw=Ul,(Qa.geo.conicConformal=function(){return qn(ki)}).raw=ki,(Qa.geo.conicEquidistant=function(){return qn(Ci)}).raw=Ci;var ql=xi(function(t){return 1/t},Math.atan);(Qa.geo.gnomonic=function(){return oi(ql)}).raw=ql,$i.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Es]},(Qa.geo.mercator=function(){return Si($i)}).raw=$i;var Wl=xi(function(){return 1},Math.asin);(Qa.geo.orthographic=function(){return oi(Wl)}).raw=Wl;var Vl=xi(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Qa.geo.stereographic=function(){return oi(Vl)}).raw=Vl,Mi.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Es]},(Qa.geo.transverseMercator=function(){var t=Si(Mi),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Mi,Qa.geom={},Qa.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r=$e(n),o=$e(i),a=t.length,s=[],l=[];for(e=0;a>e;e++)s.push([+r.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(Ni),e=0;a>e;e++)l.push([s[e][0],-s[e][1]]);var u=Di(s),c=Di(l),h=c[0]===u[0],d=c[c.length-1]===u[u.length-1],p=[];for(e=u.length-1;e>=0;--e)p.push(t[s[u[e]][2]]);for(e=+h;e<c.length-d;++e)p.push(t[s[c[e]][2]]);return p}var n=Ti,i=Ei;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},Qa.geom.polygon=function(t){return fs(t,Yl),t};var Yl=Qa.geom.polygon.prototype=[];Yl.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},Yl.centroid=function(t){var e,n,i=-1,r=this.length,o=0,a=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},Yl.clip=function(t){for(var e,n,i,r,o,a,s=Hi(t),l=-1,u=this.length-Hi(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,r=this[l],o=e[(i=e.length-s)-1],n=-1;++n<i;)a=e[n],Fi(a,c,r)?(Fi(o,c,r)||t.push(Ai(o,a,c,r)),t.push(a)):Fi(o,c,r)&&t.push(Ai(o,a,c,r)),o=a;s&&t.push(t[0]),c=r}return t};var Gl,Ql,Xl,Jl,Kl,Zl=[],tu=[];Bi.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(qi),e.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=or(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(ir(this,n),t=n,n=t.U),n.C=!1,i.C=!0,rr(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(rr(this,n),t=n,n=t.U),n.C=!1,i.C=!0,ir(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?or(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,ir(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,rr(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,ir(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,rr(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ir(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,rr(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},Qa.geom.voronoi=function(t){function e(t){var e=new Array(t.length),i=s[0][0],r=s[0][1],o=s[1][0],a=s[1][1];return ar(n(t),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=i&&u.x<=o&&u.y>=r&&u.y<=a?[[i,a],[o,a],[o,r],[i,r]]:[];c.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Ds)*Ds,y:Math.round(a(t,e)/Ds)*Ds,i:e}})}var i=Ti,r=Ei,o=i,a=r,s=eu;return t?e(t):(e.links=function(t){return ar(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return ar(n(t)).cells.forEach(function(n,i){for(var r,o,a=n.site,s=n.edges.sort(qi),l=-1,u=s.length,c=s[u-1].edge,h=c.l===a?c.r:c.l;++l<u;)r=c,o=h,c=s[l].edge,h=c.l===a?c.r:c.l,i<o.i&&i<h.i&&lr(a,o,h)<0&&e.push([t[i],t[o.i],t[h.i]])}),e},e.x=function(t){return arguments.length?(o=$e(i=t),e):i},e.y=function(t){return arguments.length?(a=$e(r=t),e):r},e.clipExtent=function(t){return arguments.length?(s=null==t?eu:t,e):s===eu?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===eu?null:s&&s[1]},e)};var eu=[[-1e6,-1e6],[1e6,1e6]];Qa.geom.delaunay=function(t){return Qa.geom.voronoi().triangles(t)},Qa.geom.quadtree=function(t,e,n,i,r){function o(t){function o(t,e,n,i,r,o,a,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(us(l-n)+us(c-i)<.01)u(t,e,n,i,r,o,a,s);else{var h=t.point;t.x=t.y=t.point=null,u(t,h,l,c,r,o,a,s),u(t,e,n,i,r,o,a,s)}else t.x=n,t.y=i,t.point=e}else u(t,e,n,i,r,o,a,s)}function u(t,e,n,i,r,a,s,l){var u=.5*(r+s),c=.5*(a+l),h=n>=u,d=i>=c,p=(d<<1)+h;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=hr()),h?r=u:s=u,d?a=c:l=c,o(t,e,n,i,r,a,s,l)}var c,h,d,p,f,g,m,v,y,b=$e(s),w=$e(l);if(null!=e)g=e,m=n,v=i,y=r;else if(v=y=-(g=m=1/0),h=[],d=[],f=t.length,a)for(p=0;f>p;++p)c=t[p],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),h.push(c.x),d.push(c.y);else for(p=0;f>p;++p){var _=+b(c=t[p],p),x=+w(c,p);g>_&&(g=_),m>x&&(m=x),_>v&&(v=_),x>y&&(y=x),h.push(_),d.push(x)}var k=v-g,C=y-m;k>C?y=m+k:v=g+C;var $=hr();if($.add=function(t){o($,t,+b(t,++p),+w(t,p),g,m,v,y)},$.visit=function(t){dr(t,$,g,m,v,y)},p=-1,null==e){for(;++p<f;)o($,t[p],h[p],d[p],g,m,v,y);--p}else t.forEach($.add);return h=d=t=c=null,$}var a,s=Ti,l=Ei;return(a=arguments.length)?(s=ur,l=cr,3===a&&(r=n,i=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),o):null==e?null:[[e,n],[i,r]]},o.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),o):null==e?null:[i-e,r-n]},o)},Qa.interpolateRgb=pr,Qa.interpolateObject=fr,Qa.interpolateNumber=gr,Qa.interpolateString=mr;var nu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iu=new RegExp(nu.source,"g");Qa.interpolate=vr,Qa.interpolators=[function(t,e){var n=typeof e;return("string"===n?Gs.has(e)||/^(#|rgb\(|hsl\()/.test(e)?pr:mr:e instanceof oe?pr:Array.isArray(e)?yr:"object"===n&&isNaN(e)?fr:gr)(t,e)}],Qa.interpolateArray=yr;var ru=function(){return Se},ou=Qa.map({linear:ru,poly:$r,quad:function(){return xr},cubic:function(){return kr},sin:function(){return Sr},exp:function(){return Mr},circle:function(){return Tr},elastic:Er,back:Dr,bounce:function(){return Nr}}),au=Qa.map({"in":Se,out:wr,"in-out":_r,"out-in":function(t){return _r(wr(t))}});Qa.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";return n=ou.get(n)||ru,i=au.get(i)||Se,br(i(n.apply(null,Xa.call(arguments,1))))},Qa.interpolateHcl=Fr,Qa.interpolateHsl=Ar,Qa.interpolateLab=Hr,Qa.interpolateRound=Pr,Qa.transform=function(t){var e=Ka.createElementNS(Qa.ns.prefix.svg,"g");return(Qa.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Lr(n?n.matrix:su)})(t)},Lr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var su={a:1,b:0,c:0,d:1,e:0,f:0};Qa.interpolateTransform=Rr,Qa.layout={},Qa.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(Ur(t[n]));return e}},Qa.layout.chord=function(){function t(){var t,u,h,d,p,f={},g=[],m=Qa.range(o),v=[];for(n=[],i=[],t=0,d=-1;++d<o;){for(u=0,p=-1;++p<o;)u+=r[d][p];g.push(u),v.push(Qa.range(o)),t+=u}for(a&&m.sort(function(t,e){return a(g[t],g[e])}),s&&v.forEach(function(t,e){t.sort(function(t,n){return s(r[e][t],r[e][n])})}),t=(Ts-c*o)/t,u=0,d=-1;++d<o;){for(h=u,p=-1;++p<o;){var y=m[d],b=v[y][p],w=r[y][b],_=u,x=u+=w*t;f[y+"-"+b]={index:y,subindex:b,startAngle:_,endAngle:x,value:w}}i[y]={index:y,startAngle:h,endAngle:u,value:(u-h)/t},u+=c}for(d=-1;++d<o;)for(p=d-1;++p<o;){var k=f[d+"-"+p],C=f[p+"-"+d];(k.value||C.value)&&n.push(k.value<C.value?{source:C,target:k}:{source:k,target:C})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,o,a,s,l,u={},c=0;return u.matrix=function(t){return arguments.length?(o=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(c=t,n=i=null,u):c},u.sortGroups=function(t){return arguments.length?(a=t,n=i=null,u):a},u.sortSubgroups=function(t){return arguments.length?(s=t,n=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},Qa.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=r-n,l=o*o+a*a;if(l>s*s/m){if(f>l){var u=e.charge/l;t.px-=o*u,t.py-=a*u}return!0}if(e.point&&l&&f>l){var u=e.pointCharge/l;t.px-=o*u,t.py-=a*u}}return!e.charge}}function e(t){t.px=Qa.event.x,t.py=Qa.event.y,s.resume()}var n,i,r,o,a,s={},l=Qa.dispatch("start","tick","end"),u=[1,1],c=.9,h=lu,d=uu,p=-30,f=cu,g=.1,m=.64,v=[],y=[];return s.tick=function(){if((i*=.99)<.005)return l.end({type:"end",alpha:i=0}),!0;var e,n,s,h,d,f,m,b,w,_=v.length,x=y.length;for(n=0;x>n;++n)s=y[n],h=s.source,d=s.target,b=d.x-h.x,w=d.y-h.y,(f=b*b+w*w)&&(f=i*o[n]*((f=Math.sqrt(f))-r[n])/f,b*=f,w*=f,d.x-=b*(m=h.weight/(d.weight+h.weight)),d.y-=w*m,h.x+=b*(m=1-m),h.y+=w*m);if((m=i*g)&&(b=u[0]/2,w=u[1]/2,n=-1,m))for(;++n<_;)s=v[n],s.x+=(b-s.x)*m,s.y+=(w-s.y)*m;if(p)for(Xr(e=Qa.geom.quadtree(v),i,a),n=-1;++n<_;)(s=v[n]).fixed||e.visit(t(s));for(n=-1;++n<_;)s=v[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*c,s.y-=(s.py-(s.py=s.y))*c);l.tick({type:"tick",alpha:i})},s.nodes=function(t){return arguments.length?(v=t,s):v},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(u=t,s):u},s.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,s):p},s.chargeDistance=function(t){return arguments.length?(f=t*t,s):Math.sqrt(f)},s.gravity=function(t){return arguments.length?(g=+t,s):g},s.theta=function(t){return arguments.length?(m=t*t,s):Math.sqrt(m)},s.alpha=function(t){return arguments.length?(t=+t,i?i=t>0?t:0:t>0&&(l.start({type:"start",alpha:i=t}),Qa.timer(s.tick)),s):i},s.start=function(){function t(t,i){if(!n){for(n=new Array(l),s=0;l>s;++s)n[s]=[];for(s=0;u>s;++s){var r=y[s];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var o,a=n[e],s=-1,u=a.length;++s<u;)if(!isNaN(o=a[s][t]))return o;return Math.random()*i}var e,n,i,l=v.length,c=y.length,f=u[0],g=u[1];for(e=0;l>e;++e)(i=v[e]).index=e,i.weight=0;for(e=0;c>e;++e)i=y[e],"number"==typeof i.source&&(i.source=v[i.source]),"number"==typeof i.target&&(i.target=v[i.target]),++i.source.weight,++i.target.weight;for(e=0;l>e;++e)i=v[e],isNaN(i.x)&&(i.x=t("x",f)),isNaN(i.y)&&(i.y=t("y",g)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(r=[],"function"==typeof h)for(e=0;c>e;++e)r[e]=+h.call(this,y[e],e);else for(e=0;c>e;++e)r[e]=h;if(o=[],"function"==typeof d)for(e=0;c>e;++e)o[e]=+d.call(this,y[e],e);else for(e=0;c>e;++e)o[e]=d;if(a=[],"function"==typeof p)for(e=0;l>e;++e)a[e]=+p.call(this,v[e],e);else for(e=0;l>e;++e)a[e]=p;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=Qa.behavior.drag().origin(Se).on("dragstart.force",Vr).on("drag.force",e).on("dragend.force",Yr)),arguments.length?void this.on("mouseover.force",Gr).on("mouseout.force",Qr).call(n):n},Qa.rebind(s,l,"on")};var lu=20,uu=1,cu=1/0;Qa.layout.hierarchy=function(){function t(r){var o,a=[r],s=[];for(r.depth=0;null!=(o=a.pop());)if(s.push(o),(u=n.call(t,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;i&&(o.value=0),o.children=u}else i&&(o.value=+i.call(t,o,o.depth)||0),delete o.children;return Zr(r,function(t){var n,r;e&&(n=t.children)&&n.sort(e),i&&(r=t.parent)&&(r.value+=t.value)}),s}var e=no,n=to,i=eo;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(i=e,t):i},t.revalue=function(e){return i&&(Kr(e,function(t){t.children&&(t.value=0)}),Zr(e,function(e){var n;e.children||(e.value=+i.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},Qa.layout.partition=function(){function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(a=o.length)){var a,s,l,u=-1;for(i=e.value?i/e.value:0;++u<a;)t(s=o[u],n,l=s.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,e(n[o]));return 1+i}function n(n,o){var a=i.call(this,n,o);return t(a[0],0,r[0],r[1]/e(a[0])),a}var i=Qa.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},Jr(n,i)},Qa.layout.pie=function(){function t(o){var a=o.map(function(n,i){return+e.call(t,n,i)}),s=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof r?r.apply(this,arguments):r)-s)/Qa.sum(a),u=Qa.range(o.length);null!=n&&u.sort(n===hu?function(t,e){return a[e]-a[t]}:function(t,e){return n(o[t],o[e])});var c=[];return u.forEach(function(t){var e;c[t]={data:o[t],value:e=a[t],startAngle:s,endAngle:s+=e*l}}),c}var e=Number,n=hu,i=0,r=Ts;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var hu={};Qa.layout.stack=function(){function t(s,l){if(!(d=s.length))return s;var u=s.map(function(n,i){return e.call(t,n,i)}),c=u.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),h=n.call(t,c,l);u=Qa.permute(u,h),c=Qa.permute(c,h);var d,p,f,g,m=i.call(t,c,l),v=u[0].length;for(f=0;v>f;++f)for(r.call(t,u[0][f],g=m[f],c[0][f][1]),p=1;d>p;++p)r.call(t,u[p][f],g+=c[p-1][f][1],c[p][f][1]);return s}var e=Se,n=so,i=lo,r=ao,o=ro,a=oo;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:du.get(e)||so,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:pu.get(e)||lo,t):i},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(r=e,t):r},t};var du=Qa.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(uo),o=t.map(co),a=Qa.range(i).sort(function(t,e){return r[t]-r[e]}),s=0,l=0,u=[],c=[];for(e=0;i>e;++e)n=a[e],l>s?(s+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return Qa.range(t.length).reverse()},"default":so}),pu=Qa.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>s&&(s=i),a.push(i)}for(n=0;o>n;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,i,r,o,a,s,l,u,c=t.length,h=t[0],d=h.length,p=[];for(p[0]=l=u=0,n=1;d>n;++n){for(e=0,r=0;c>e;++e)r+=t[e][n][1];for(e=0,o=0,s=h[n][0]-h[n-1][0];c>e;++e){for(i=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);e>i;++i)a+=(t[i][n][1]-t[i][n-1][1])/s;o+=a*t[e][n][1]}p[n]=l-=r?o/r*s:0,u>l&&(u=l)}for(n=0;d>n;++n)p[n]-=u;return p},expand:function(t){var e,n,i,r=t.length,o=t[0].length,a=1/r,s=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:lo});Qa.layout.histogram=function(){function t(t,o){for(var a,s,l=[],u=t.map(n,this),c=i.call(this,u,o),h=r.call(this,c,u,o),o=-1,d=u.length,p=h.length-1,f=e?1:1/d;++o<p;)a=l[o]=[],a.dx=h[o+1]-(a.x=h[o]),a.y=0;if(p>0)for(o=-1;++o<d;)s=u[o],s>=c[0]&&s<=c[1]&&(a=l[Qa.bisect(h,s,1,p)-1],a.y+=f,a.push(t[o]));return l}var e=!0,n=Number,i=go,r=po;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=$e(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return fo(t,e)}:$e(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},Qa.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),s=a[0],l=r[0],u=r[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,Zr(s,function(t){t.r=+c(t.value)}),Zr(s,wo),i){var h=i*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;Zr(s,function(t){t.r+=h}),Zr(s,wo),Zr(s,function(t){t.r-=h})}return ko(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var e,n=Qa.layout.hierarchy().sort(mo),i=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(i=+e,t):i},Jr(t,n)},Qa.layout.tree=function(){function t(t,r){var c=a.call(this,t,r),h=c[0],d=e(h);if(Zr(d,n),d.parent.m=-d.z,Kr(d,i),u)Kr(h,o);else{var p=h,f=h,g=h;Kr(h,function(t){t.x<p.x&&(p=t),t.x>f.x&&(f=t),t.depth>g.depth&&(g=t)});var m=s(p,f)/2-p.x,v=l[0]/(f.x+s(f,p)/2+m),y=l[1]/(g.depth||1);Kr(h,function(t){t.x=(t.x+m)*v,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},i=[n];null!=(e=i.pop());)for(var r,o=e.children,a=0,s=o.length;s>a;++a)i.push((o[a]=r={_:o[a],parent:e,children:(r=o[a].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=r);
return n.children[0]}function n(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){Eo(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+s(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+s(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function i(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var i,r=t,o=t,a=e,l=r.parent.children[0],u=r.m,c=o.m,h=a.m,d=l.m;a=Mo(a),r=So(r),a&&r;)l=So(l),o=Mo(o),o.a=t,i=a.z+h-r.z-u+s(a._,r._),i>0&&(To(Do(a,t,n),t,i),u+=i,c+=i),h+=a.m,u+=r.m,d+=l.m,c+=o.m;a&&!Mo(o)&&(o.t=a,o.m+=h-c),r&&!So(l)&&(l.t=r,l.m+=u-d,n=t)}return n}function o(t){t.x*=l[0],t.y=t.depth*l[1]}var a=Qa.layout.hierarchy().sort(null).value(null),s=$o,l=[1,1],u=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(u=null==(l=e)?o:null,t):u?null:l},t.nodeSize=function(e){return arguments.length?(u=null==(l=e)?null:o,t):u?l:null},Jr(t,a)},Qa.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),l=s[0],u=0;Zr(l,function(t){var e=t.children;e&&e.length?(t.x=Fo(e),t.y=No(e)):(t.x=a?u+=n(t,a):0,t.y=0,a=t)});var c=Ao(l),h=Ho(l),d=c.x-n(c,h)/2,p=h.x+n(h,c)/2;return Zr(l,r?function(t){t.x=(t.x-l.x)*i[0],t.y=(l.y-t.y)*i[1]}:function(t){t.x=(t.x-d)/(p-d)*i[0],t.y=(1-(l.y?t.y/l.y:1))*i[1]}),s}var e=Qa.layout.hierarchy().sort(null).value(null),n=$o,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},Jr(t,e)},Qa.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,o=t.length;++r<o;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var o=n.children;if(o&&o.length){var a,s,l,u=h(n),c=[],d=o.slice(),f=1/0,g="slice"===p?u.dx:"dice"===p?u.dy:"slice-dice"===p?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(a=d[l-1]),c.area+=a.area,"squarify"!==p||(s=i(c,g))<=f?(d.pop(),f=s):(c.area-=c.pop().area,r(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,f=1/0);c.length&&(r(c,g,u,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var o,a=h(e),s=i.slice(),l=[];for(t(s,a.dx*a.dy/e.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(r(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(o>n&&(o=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*f/i,i/(e*o*f)):1/0}function r(t,e,n,i){var r,o=-1,a=t.length,s=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++o<a;)r=t[o],r.x=s,r.y=u,r.dy=c,s+=r.dx=Math.min(n.x+n.dx-s,c?l(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++o<a;)r=t[o],r.x=s,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?l(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(i){var r=a||s(i),o=r[0];return o.x=0,o.y=0,o.dx=u[0],o.dy=u[1],a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),d&&(a=r),r}var a,s=Qa.layout.hierarchy(),l=Math.round,u=[1,1],c=null,h=Po,d=!1,p="squarify",f=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(u=t,o):u},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Po(e):Lo(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Lo(e,t)}if(!arguments.length)return c;var i;return h=null==(c=t)?Po:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(d=t,a=null,o):d},o.ratio=function(t){return arguments.length?(f=t,o):f},o.mode=function(t){return arguments.length?(p=t+"",o):p},Jr(o,s)},Qa.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=Qa.random.normal.apply(Qa,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=Qa.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},Qa.scale={};var fu={floor:Se,ceil:Se};Qa.scale.linear=function(){return Uo([0,1],[0,1],vr,!1)};var gu={s:1,g:1,p:1,r:1,e:1};Qa.scale.log=function(){return Jo(Qa.scale.linear().domain([0,1]),10,!0,[1,10])};var mu=Qa.format(".0e"),vu={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Qa.scale.pow=function(){return Ko(Qa.scale.linear(),1,[0,1])},Qa.scale.sqrt=function(){return Qa.scale.pow().exponent(.5)},Qa.scale.ordinal=function(){return ta([],{t:"range",a:[[]]})},Qa.scale.category10=function(){return Qa.scale.ordinal().range(yu)},Qa.scale.category20=function(){return Qa.scale.ordinal().range(bu)},Qa.scale.category20b=function(){return Qa.scale.ordinal().range(wu)},Qa.scale.category20c=function(){return Qa.scale.ordinal().range(_u)};var yu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ye),bu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ye),wu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ye),_u=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ye);Qa.scale.quantile=function(){return ea([],[])},Qa.scale.quantize=function(){return na(0,1,[0,1])},Qa.scale.threshold=function(){return ia([.5],[0,1])},Qa.scale.identity=function(){return ra([0,1])},Qa.svg={},Qa.svg.arc=function(){function t(){var t=e.apply(this,arguments),o=n.apply(this,arguments),a=i.apply(this,arguments)+xu,s=r.apply(this,arguments)+xu,l=(a>s&&(l=a,a=s,s=l),s-a),u=Ms>l?"0":"1",c=Math.cos(a),h=Math.sin(a),d=Math.cos(s),p=Math.sin(s);return l>=ku?t?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":t?"M"+o*c+","+o*h+"A"+o+","+o+" 0 "+u+",1 "+o*d+","+o*p+"L"+t*d+","+t*p+"A"+t+","+t+" 0 "+u+",0 "+t*c+","+t*h+"Z":"M"+o*c+","+o*h+"A"+o+","+o+" 0 "+u+",1 "+o*d+","+o*p+"L0,0Z"}var e=oa,n=aa,i=sa,r=la;return t.innerRadius=function(n){return arguments.length?(e=$e(n),t):e},t.outerRadius=function(e){return arguments.length?(n=$e(e),t):n},t.startAngle=function(e){return arguments.length?(i=$e(e),t):i},t.endAngle=function(e){return arguments.length?(r=$e(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,o=(i.apply(this,arguments)+r.apply(this,arguments))/2+xu;return[Math.cos(o)*t,Math.sin(o)*t]},t};var xu=-Es,ku=Ts-Ds;Qa.svg.line=function(){return ua(Se)};var Cu=Qa.map({linear:ca,"linear-closed":ha,step:da,"step-before":pa,"step-after":fa,basis:wa,"basis-open":_a,"basis-closed":xa,bundle:ka,cardinal:va,"cardinal-open":ga,"cardinal-closed":ma,monotone:Ea});Cu.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var $u=[0,2/3,1/3,0],Su=[0,1/3,2/3,0],Mu=[0,1/6,2/3,1/6];Qa.svg.line.radial=function(){var t=ua(Da);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},pa.reverse=fa,fa.reverse=pa,Qa.svg.area=function(){return Na(Se)},Qa.svg.area.radial=function(){var t=Na(Da);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Qa.svg.chord=function(){function t(t,s){var l=e(this,o,t,s),u=e(this,a,t,s);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),o=s.call(t,r,i),a=l.call(t,r,i)+xu,c=u.call(t,r,i)+xu;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ms)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var o=yi,a=bi,s=Fa,l=sa,u=la;return t.radius=function(e){return arguments.length?(s=$e(e),t):s},t.source=function(e){return arguments.length?(o=$e(e),t):o},t.target=function(e){return arguments.length?(a=$e(e),t):a},t.startAngle=function(e){return arguments.length?(l=$e(e),t):l},t.endAngle=function(e){return arguments.length?(u=$e(e),t):u},t},Qa.svg.diagonal=function(){function t(t,r){var o=e.call(this,t,r),a=n.call(this,t,r),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=yi,n=bi,i=Aa;return t.source=function(n){return arguments.length?(e=$e(n),t):e},t.target=function(e){return arguments.length?(n=$e(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},Qa.svg.diagonal.radial=function(){var t=Qa.svg.diagonal(),e=Aa,n=t.projection;return t.projection=function(t){return arguments.length?n(Ha(e=t)):e},t},Qa.svg.symbol=function(){function t(t,i){return(Tu.get(e.call(this,t,i))||Oa)(n.call(this,t,i))}var e=La,n=Pa;return t.type=function(n){return arguments.length?(e=$e(n),t):e},t.size=function(e){return arguments.length?(n=$e(e),t):n},t};var Tu=Qa.map({circle:Oa,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Fu)),n=e*Fu;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Nu),n=e*Nu/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Nu),n=e*Nu/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Qa.svg.symbolTypes=Tu.keys();var Eu,Du,Nu=Math.sqrt(3),Fu=Math.tan(30*Fs),Au=[],Hu=0;Au.call=bs.call,Au.empty=bs.empty,Au.node=bs.node,Au.size=bs.size,Qa.transition=function(t){return arguments.length?Eu?t.transition():t:xs.transition()},Qa.transition.prototype=Au,Au.select=function(t){var e,n,i,r=this.id,o=[];t=$(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]);for(var l=this[a],u=-1,c=l.length;++u<c;)(i=l[u])&&(n=t.call(i,i.__data__,u,a))?("__data__"in i&&(n.__data__=i.__data__),za(n,u,r,i.__transition__[r]),e.push(n)):e.push(null)}return Ia(o,r)},Au.selectAll=function(t){var e,n,i,r,o,a=this.id,s=[];t=S(t);for(var l=-1,u=this.length;++l<u;)for(var c=this[l],h=-1,d=c.length;++h<d;)if(i=c[h]){o=i.__transition__[a],n=t.call(i,i.__data__,h,l),s.push(e=[]);for(var p=-1,f=n.length;++p<f;)(r=n[p])&&za(r,p,a,o),e.push(r)}return Ia(s,a)},Au.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=O(t));for(var o=0,a=this.length;a>o;o++){r.push(e=[]);for(var n=this[o],s=0,l=n.length;l>s;s++)(i=n[s])&&t.call(i,i.__data__,s,o)&&e.push(i)}return Ia(r,this.id)},Au.tween=function(t,e){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(t):j(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(i){i.__transition__[n].tween.set(t,e)})},Au.attr=function(t,e){function n(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=a(n,t),function(t){this.setAttribute(s,e(t))})})}function o(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Rr:vr,s=Qa.ns.qualify(t);return ja(this,"attr."+t,e,s.local?o:r)},Au.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=Qa.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},Au.style=function(t,e,n){function i(){this.style.removeProperty(t)}function r(e){return null==e?i:(e+="",function(){var i,r=ts.getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(i=vr(r,e),function(e){this.style.setProperty(t,i(e),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return ja(this,"style."+t,e,r)},Au.styleTween=function(t,e,n){function i(i,r){var o=e.call(this,i,r,ts.getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,i)},Au.text=function(t){return ja(this,"text",t,Ra)},Au.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},Au.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=Qa.ease.apply(Qa,arguments)),j(this,function(n){n.__transition__[e].ease=t}))},Au.delay=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].delay:j(this,"function"==typeof t?function(n,i,r){n.__transition__[e].delay=+t.call(n,n.__data__,i,r)}:(t=+t,function(n){n.__transition__[e].delay=t}))},Au.duration=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].duration:j(this,"function"==typeof t?function(n,i,r){n.__transition__[e].duration=Math.max(1,t.call(n,n.__data__,i,r))}:(t=Math.max(1,t),function(n){n.__transition__[e].duration=t}))},Au.each=function(t,e){var n=this.id;if(arguments.length<2){var i=Du,r=Eu;Eu=n,j(this,function(e,i,r){Du=e.__transition__[n],t.call(e,e.__data__,i,r)}),Du=i,Eu=r}else j(this,function(i){var r=i.__transition__[n];(r.event||(r.event=Qa.dispatch("start","end"))).on(t,e)});return this},Au.transition=function(){for(var t,e,n,i,r=this.id,o=++Hu,a=[],s=0,l=this.length;l>s;s++){a.push(t=[]);for(var e=this[s],u=0,c=e.length;c>u;u++)(n=e[u])&&(i=Object.create(n.__transition__[r]),i.delay+=i.duration,za(n,u,o,i)),t.push(n)}return Ia(a,o)},Qa.svg.axis=function(){function t(t){t.each(function(){var t,u=Qa.select(this),c=this.__chart__||n,h=this.__chart__=n.copy(),d=null==l?h.ticks?h.ticks.apply(h,s):h.domain():l,p=null==e?h.tickFormat?h.tickFormat.apply(h,s):Se:e,f=u.selectAll(".tick").data(d,h),g=f.enter().insert("g",".domain").attr("class","tick").style("opacity",Ds),m=Qa.transition(f.exit()).style("opacity",Ds).remove(),v=Qa.transition(f.order()).style("opacity",1),y=Math.max(r,0)+a,b=Io(h),w=u.selectAll(".domain").data([0]),_=(w.enter().append("path").attr("class","domain"),Qa.transition(w));g.append("line"),g.append("text");var x,k,C,$,S=g.select("line"),M=v.select("line"),T=f.select("text").text(p),E=g.select("text"),D=v.select("text"),N="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(t=Ba,x="x",C="y",k="x2",$="y2",T.attr("dy",0>N?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+b[0]+","+N*o+"V0H"+b[1]+"V"+N*o)):(t=Ua,x="y",C="x",k="y2",$="x2",T.attr("dy",".32em").style("text-anchor",0>N?"end":"start"),_.attr("d","M"+N*o+","+b[0]+"H0V"+b[1]+"H"+N*o)),S.attr($,N*r),E.attr(C,N*y),M.attr(k,0).attr($,N*r),D.attr(x,0).attr(C,N*y),h.rangeBand){var F=h,A=F.rangeBand()/2;c=h=function(t){return F(t)+A}}else c.rangeBand?c=h:m.call(t,h,c);g.call(t,c,h),v.call(t,h,h)})}var e,n=Qa.scale.linear(),i=Pu,r=6,o=6,a=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in Lu?e+"":Pu,t):i},t.ticks=function(){return arguments.length?(s=arguments,t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,o=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Pu="bottom",Lu={top:1,right:1,bottom:1,left:1};Qa.svg.brush=function(){function t(o){o.each(function(){var o=Qa.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),a=o.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=o.selectAll(".resize").data(f,Se);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ou[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var c,h=Qa.transition(o),d=Qa.transition(a);l&&(c=Io(l),d.attr("x",c[0]).attr("width",c[1]-c[0]),n(h)),u&&(c=Io(u),d.attr("y",c[0]).attr("height",c[1]-c[0]),i(h)),e(h)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",c[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function i(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function r(){function r(){32==Qa.event.keyCode&&(T||(y=null,D[0]-=c[1],D[1]-=h[1],T=2),_())}function f(){32==Qa.event.keyCode&&2==T&&(D[0]+=c[1],D[1]+=h[1],T=0,_())}function g(){var t=Qa.mouse(w),r=!1;b&&(t[0]+=b[0],t[1]+=b[1]),T||(Qa.event.altKey?(y||(y=[(c[0]+c[1])/2,(h[0]+h[1])/2]),D[0]=c[+(t[0]<y[0])],D[1]=h[+(t[1]<y[1])]):y=null),S&&m(t,l,0)&&(n(C),r=!0),M&&m(t,u,1)&&(i(C),r=!0),r&&(e(C),k({type:"brush",mode:T?"move":"resize"}))}function m(t,e,n){var i,r,s=Io(e),l=s[0],u=s[1],f=D[n],g=n?h:c,m=g[1]-g[0];return T&&(l-=f,u-=m+f),i=(n?p:d)?Math.max(l,Math.min(u,t[n])):t[n],T?r=(i+=f)+m:(y&&(f=Math.max(l,Math.min(u,2*y[n]-i))),i>f?(r=i,i=f):r=f),g[0]!=i||g[1]!=r?(n?a=null:o=null,g[0]=i,g[1]=r,!0):void 0}function v(){g(),C.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),Qa.select("body").style("cursor",null),N.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),k({type:"brushend"})}var y,b,w=this,x=Qa.select(Qa.event.target),k=s.of(w,arguments),C=Qa.select(w),$=x.datum(),S=!/^(n|s)$/.test($)&&l,M=!/^(e|w)$/.test($)&&u,T=x.classed("extent"),E=V(),D=Qa.mouse(w),N=Qa.select(ts).on("keydown.brush",r).on("keyup.brush",f);if(Qa.event.changedTouches?N.on("touchmove.brush",g).on("touchend.brush",v):N.on("mousemove.brush",g).on("mouseup.brush",v),C.interrupt().selectAll("*").interrupt(),T)D[0]=c[0]-D[0],D[1]=h[0]-D[1];else if($){var F=+/w$/.test($),A=+/^n/.test($);b=[c[1-F]-D[0],h[1-A]-D[1]],D[0]=c[F],D[1]=h[A]}else Qa.event.altKey&&(y=D.slice());C.style("pointer-events","none").selectAll(".resize").style("display",null),Qa.select("body").style("cursor",x.style("cursor")),k({type:"brushstart"}),g()}var o,a,s=k(t,"brushstart","brush","brushend"),l=null,u=null,c=[0,0],h=[0,0],d=!0,p=!0,f=Iu[0];return t.event=function(t){t.each(function(){var t=s.of(this,arguments),e={x:c,y:h,i:o,j:a},n=this.__chart__||e;this.__chart__=e,Eu?Qa.select(this).transition().each("start.brush",function(){o=n.i,a=n.j,c=n.x,h=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=yr(c,e.x),i=yr(h,e.y);return o=a=null,function(r){c=e.x=n(r),h=e.y=i(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,a=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,f=Iu[!l<<1|!u],t):l},t.y=function(e){return arguments.length?(u=e,f=Iu[!l<<1|!u],t):u},t.clamp=function(e){return arguments.length?(l&&u?(d=!!e[0],p=!!e[1]):l?d=!!e:u&&(p=!!e),t):l&&u?[d,p]:l?d:u?p:null},t.extent=function(e){var n,i,r,s,d;return arguments.length?(l&&(n=e[0],i=e[1],u&&(n=n[0],i=i[0]),o=[n,i],l.invert&&(n=l(n),i=l(i)),n>i&&(d=n,n=i,i=d),(n!=c[0]||i!=c[1])&&(c=[n,i])),u&&(r=e[0],s=e[1],l&&(r=r[1],s=s[1]),a=[r,s],u.invert&&(r=u(r),s=u(s)),r>s&&(d=r,r=s,s=d),(r!=h[0]||s!=h[1])&&(h=[r,s])),t):(l&&(o?(n=o[0],i=o[1]):(n=c[0],i=c[1],l.invert&&(n=l.invert(n),i=l.invert(i)),n>i&&(d=n,n=i,i=d))),u&&(a?(r=a[0],s=a[1]):(r=h[0],s=h[1],u.invert&&(r=u.invert(r),s=u.invert(s)),r>s&&(d=r,r=s,s=d))),l&&u?[[n,r],[i,s]]:l?[n,i]:u&&[r,s])},t.clear=function(){return t.empty()||(c=[0,0],h=[0,0],o=a=null),t},t.empty=function(){return!!l&&c[0]==c[1]||!!u&&h[0]==h[1]},Qa.rebind(t,s,"on")};var Ou={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Iu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],ju=rl.format=cl.timeFormat,Ru=ju.utc,zu=Ru("%Y-%m-%dT%H:%M:%S.%LZ");ju.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?qa:zu,qa.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},qa.toString=zu.toString,rl.second=je(function(t){return new ol(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),rl.seconds=rl.second.range,rl.seconds.utc=rl.second.utc.range,rl.minute=je(function(t){return new ol(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),rl.minutes=rl.minute.range,rl.minutes.utc=rl.minute.utc.range,rl.hour=je(function(t){var e=t.getTimezoneOffset()/60;return new ol(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),rl.hours=rl.hour.range,rl.hours.utc=rl.hour.utc.range,rl.month=je(function(t){return t=rl.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),rl.months=rl.month.range,rl.months.utc=rl.month.utc.range;var Bu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Uu=[[rl.second,1],[rl.second,5],[rl.second,15],[rl.second,30],[rl.minute,1],[rl.minute,5],[rl.minute,15],[rl.minute,30],[rl.hour,1],[rl.hour,3],[rl.hour,6],[rl.hour,12],[rl.day,1],[rl.day,2],[rl.week,1],[rl.month,1],[rl.month,3],[rl.year,1]],qu=ju.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Tn]]),Wu={range:function(t,e,n){return Qa.range(Math.ceil(t/n)*n,+e,n).map(Va)},floor:Se,ceil:Se};Uu.year=rl.year,rl.scale=function(){return Wa(Qa.scale.linear(),Uu,qu)};var Vu=Uu.map(function(t){return[t[0].utc,t[1]]}),Yu=Ru.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Tn]]);Vu.year=rl.year.utc,rl.scale.utc=function(){return Wa(Qa.scale.linear(),Vu,Yu)},Qa.text=Me(function(t){return t.responseText}),Qa.json=function(t,e){return Te(t,"application/json",Ya,e)},Qa.html=function(t,e){return Te(t,"text/html",Ga,e)},Qa.xml=Me(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(Qa):"object"==typeof module&&module.exports&&(module.exports=Qa),this.d3=Qa}(),function(t){function e(t,e,n){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:n;default:throw new Error("Implement me")}}function n(t,e){return $e.call(t,e)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(t){be.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function o(t,e){var n=!0;return d(function(){return n&&(r(t),n=!1),e.apply(this,arguments)},e)}function a(t,e){vn[t]||(r(e),vn[t]=!0)}function s(t,e){return function(n){return g(t.call(this,n),e)}}function l(t,e){return function(n){return this.localeData().ordinal(t.call(this,n),e)}}function u(){}function c(t,e){e!==!1&&N(t),p(this,t),this._d=new Date(+t._d)}function h(t){var e=C(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||0,a=e.day||0,s=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*s,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=be.localeData(),this._bubble()}function d(t,e){for(var i in e)n(e,i)&&(t[i]=e[i]);return n(e,"toString")&&(t.toString=e.toString),n(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e){var n,i,r;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),He.length>0)for(n in He)i=He[n],r=e[i],"undefined"!=typeof r&&(t[i]=r);return t}function f(t){return 0>t?Math.ceil(t):Math.floor(t)}function g(t,e,n){for(var i=""+Math.abs(t),r=t>=0;i.length<e;)i="0"+i;return(r?n?"+":"":"-")+i}function m(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function v(t,e){var n;return e=L(e,t),t.isBefore(e)?n=m(t,e):(n=m(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function y(t,e){return function(n,i){var r,o;return null===i||isNaN(+i)||(a(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,r=be.duration(n,i),b(this,r,t),this}}function b(t,e,n,i){var r=e._milliseconds,o=e._days,a=e._months;i=null==i?!0:i,r&&t._d.setTime(+t._d+r*n),o&&pe(t,"Date",de(t,"Date")+o*n),a&&he(t,de(t,"Month")+a*n),i&&be.updateOffset(t,o||a)}function w(t){return"[object Array]"===Object.prototype.toString.call(t)}function _(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function x(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&S(t[i])!==S(e[i]))&&a++;return a+o}function k(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=cn[t]||hn[e]||e}return t}function C(t){var e,i,r={};for(i in t)n(t,i)&&(e=k(i),e&&(r[e]=t[i]));return r}function $(e){var n,i;if(0===e.indexOf("week"))n=7,i="day";else{if(0!==e.indexOf("month"))return;n=12,i="month"}be[e]=function(r,o){var a,s,l=be._locale[e],u=[];if("number"==typeof r&&(o=r,r=t),s=function(t){var e=be().utc().set(i,t);return l.call(be._locale,e,r||"")},null!=o)return s(o);for(a=0;n>a;a++)u.push(s(a));return u}}function S(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function M(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function T(t,e,n){return se(be([t,11,31+e-n]),e,n).week}function E(t){return D(t)?366:365}function D(t){return t%4===0&&t%100!==0||t%400===0}function N(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[Me]<0||t._a[Me]>11?Me:t._a[Te]<1||t._a[Te]>M(t._a[Se],t._a[Me])?Te:t._a[Ee]<0||t._a[Ee]>24||24===t._a[Ee]&&(0!==t._a[De]||0!==t._a[Ne]||0!==t._a[Fe])?Ee:t._a[De]<0||t._a[De]>59?De:t._a[Ne]<0||t._a[Ne]>59?Ne:t._a[Fe]<0||t._a[Fe]>999?Fe:-1,t._pf._overflowDayOfYear&&(Se>e||e>Te)&&(e=Te),t._pf.overflow=e)}function F(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===t)),e._isValid}function A(t){return t?t.toLowerCase().replace("_","-"):t}function H(t){for(var e,n,i,r,o=0;o<t.length;){for(r=A(t[o]).split("-"),e=r.length,n=A(t[o+1]),n=n?n.split("-"):null;e>0;){if(i=P(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&x(r,n,!0)>=e-1)break;e--}o++}return null}function P(t){var e=null;if(!Ae[t]&&Pe)try{e=be.locale(),require("./locale/"+t),be.locale(e)}catch(n){}return Ae[t]}function L(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(be.isMoment(t)||_(t)?+t:+be(t))-+n,n._d.setTime(+n._d+i),be.updateOffset(n,!1),n):be(t).local()}function O(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function I(t){var e,n,i=t.match(je);for(e=0,n=i.length;n>e;e++)i[e]=mn[i[e]]?mn[i[e]]:O(i[e]);return function(r){var o="";for(e=0;n>e;e++)o+=i[e]instanceof Function?i[e].call(r,t):i[e];return o}}function j(t,e){return t.isValid()?(e=R(e,t.localeData()),dn[e]||(dn[e]=I(e)),dn[e](t)):t.localeData().invalidDate()}function R(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Re.lastIndex=0;i>=0&&Re.test(t);)t=t.replace(Re,n),Re.lastIndex=0,i-=1;return t}function z(t,e){var n,i=e._strict;switch(t){case"Q":return Je;case"DDDD":return Ze;case"YYYY":case"GGGG":case"gggg":return i?tn:Ue;case"Y":case"G":case"g":return nn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?en:qe;case"S":if(i)return Je;case"SS":if(i)return Ke;case"SSS":if(i)return Ze;case"DDD":return Be;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ve;case"a":case"A":return e._locale._meridiemParse;case"x":return Qe;case"X":return Xe;case"Z":case"ZZ":return Ye;case"T":return Ge;case"SSSS":return We;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Ke:ze;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return ze;case"Do":return i?e._locale._ordinalParse:e._locale._ordinalParseLenient;default:return n=new RegExp(X(Q(t.replace("\\","")),"i"))}}function B(t){t=t||"";var e=t.match(Ye)||[],n=e[e.length-1]||[],i=(n+"").match(ln)||["-",0,0],r=+(60*i[1])+S(i[2]);return"+"===i[0]?-r:r}function U(t,e,n){var i,r=n._a;switch(t){case"Q":null!=e&&(r[Me]=3*(S(e)-1));break;case"M":case"MM":null!=e&&(r[Me]=S(e)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(e,t,n._strict),null!=i?r[Me]=i:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(r[Te]=S(e));break;case"Do":null!=e&&(r[Te]=S(parseInt(e.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=S(e));break;case"YY":r[Se]=be.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":r[Se]=S(e);break;case"a":case"A":n._isPm=n._locale.isPM(e);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":r[Ee]=S(e);break;case"m":case"mm":r[De]=S(e);break;case"s":case"ss":r[Ne]=S(e);break;case"S":case"SS":case"SSS":case"SSSS":r[Fe]=S(1e3*("0."+e));break;case"x":n._d=new Date(S(e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=B(e);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(e),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=S(e));break;case"gg":case"GG":n._w=n._w||{},n._w[t]=be.parseTwoDigitYear(e)}}function q(t){var n,i,r,o,a,s,l;n=t._w,null!=n.GG||null!=n.W||null!=n.E?(a=1,s=4,i=e(n.GG,t._a[Se],se(be(),1,4).year),r=e(n.W,1),o=e(n.E,1)):(a=t._locale._week.dow,s=t._locale._week.doy,i=e(n.gg,t._a[Se],se(be(),a,s).year),r=e(n.w,1),null!=n.d?(o=n.d,a>o&&++r):o=null!=n.e?n.e+a:a),l=le(i,r,o,s,a),t._a[Se]=l.year,t._dayOfYear=l.dayOfYear}function W(t){var n,i,r,o,a=[];if(!t._d){for(r=Y(t),t._w&&null==t._a[Te]&&null==t._a[Me]&&q(t),t._dayOfYear&&(o=e(t._a[Se],r[Se]),t._dayOfYear>E(o)&&(t._pf._overflowDayOfYear=!0),i=ie(o,0,t._dayOfYear),t._a[Me]=i.getUTCMonth(),t._a[Te]=i.getUTCDate()),n=0;3>n&&null==t._a[n];++n)t._a[n]=a[n]=r[n];for(;7>n;n++)t._a[n]=a[n]=null==t._a[n]?2===n?1:0:t._a[n];24===t._a[Ee]&&0===t._a[De]&&0===t._a[Ne]&&0===t._a[Fe]&&(t._nextDay=!0,t._a[Ee]=0),t._d=(t._useUTC?ie:ne).apply(null,a),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()+t._tzm),t._nextDay&&(t._a[Ee]=24)
}}function V(t){var e;t._d||(e=C(t._i),t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],W(t))}function Y(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function G(e){if(e._f===be.ISO_8601)return void K(e);e._a=[],e._pf.empty=!0;var n,i,r,o,a,s=""+e._i,l=s.length,u=0;for(r=R(e._f,e._locale).match(je)||[],n=0;n<r.length;n++)o=r[n],i=(s.match(z(o,e))||[])[0],i&&(a=s.substr(0,s.indexOf(i)),a.length>0&&e._pf.unusedInput.push(a),s=s.slice(s.indexOf(i)+i.length),u+=i.length),mn[o]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(o),U(o,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=l-u,s.length>0&&e._pf.unusedInput.push(s),e._pf.bigHour===!0&&e._a[Ee]<=12&&(e._pf.bigHour=t),e._isPm&&e._a[Ee]<12&&(e._a[Ee]+=12),e._isPm===!1&&12===e._a[Ee]&&(e._a[Ee]=0),W(e),N(e)}function Q(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r})}function X(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(t){var e,n,r,o,a;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(o=0;o<t._f.length;o++)a=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=i(),e._f=t._f[o],G(e),F(e)&&(a+=e._pf.charsLeftOver,a+=10*e._pf.unusedTokens.length,e._pf.score=a,(null==r||r>a)&&(r=a,n=e));d(t,n||e)}function K(t){var e,n,i=t._i,r=rn.exec(i);if(r){for(t._pf.iso=!0,e=0,n=an.length;n>e;e++)if(an[e][1].exec(i)){t._f=an[e][0]+(r[6]||" ");break}for(e=0,n=sn.length;n>e;e++)if(sn[e][1].exec(i)){t._f+=sn[e][0];break}i.match(Ye)&&(t._f+="Z"),G(t)}else t._isValid=!1}function Z(t){K(t),t._isValid===!1&&(delete t._isValid,be.createFromInputFallback(t))}function te(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function ee(e){var n,i=e._i;i===t?e._d=new Date:_(i)?e._d=new Date(+i):null!==(n=Le.exec(i))?e._d=new Date(+n[1]):"string"==typeof i?Z(e):w(i)?(e._a=te(i.slice(0),function(t){return parseInt(t,10)}),W(e)):"object"==typeof i?V(e):"number"==typeof i?e._d=new Date(i):be.createFromInputFallback(e)}function ne(t,e,n,i,r,o,a){var s=new Date(t,e,n,i,r,o,a);return 1970>t&&s.setFullYear(t),s}function ie(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function re(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function oe(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function ae(t,e,n){var i=be.duration(t).abs(),r=Ce(i.as("s")),o=Ce(i.as("m")),a=Ce(i.as("h")),s=Ce(i.as("d")),l=Ce(i.as("M")),u=Ce(i.as("y")),c=r<pn.s&&["s",r]||1===o&&["m"]||o<pn.m&&["mm",o]||1===a&&["h"]||a<pn.h&&["hh",a]||1===s&&["d"]||s<pn.d&&["dd",s]||1===l&&["M"]||l<pn.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=e,c[3]=+t>0,c[4]=n,oe.apply({},c)}function se(t,e,n){var i,r=n-e,o=n-t.day();return o>r&&(o-=7),r-7>o&&(o+=7),i=be(t).add(o,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function le(t,e,n,i,r){var o,a,s=ie(t,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:r,o=r-s+(s>i?7:0)-(r>s?7:0),a=7*(e-1)+(n-r)+o+1,{year:a>0?t:t-1,dayOfYear:a>0?a:E(t-1)+a}}function ue(e){var n,i=e._i,r=e._f;return e._locale=e._locale||be.localeData(e._l),null===i||r===t&&""===i?be.invalid({nullInput:!0}):("string"==typeof i&&(e._i=i=e._locale.preparse(i)),be.isMoment(i)?new c(i,!0):(r?w(r)?J(e):G(e):ee(e),n=new c(e),n._nextDay&&(n.add(1,"d"),n._nextDay=t),n))}function ce(t,e){var n,i;if(1===e.length&&w(e[0])&&(e=e[0]),!e.length)return be();for(n=e[0],i=1;i<e.length;++i)e[i][t](n)&&(n=e[i]);return n}function he(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),M(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function de(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function pe(t,e,n){return"Month"===e?he(t,n):t._d["set"+(t._isUTC?"UTC":"")+e](n)}function fe(t,e){return function(n){return null!=n?(pe(this,t,n),be.updateOffset(this,e),this):de(this,t)}}function ge(t){return 400*t/146097}function me(t){return 146097*t/400}function ve(t){be.duration.fn[t]=function(){return this._data[t]}}function ye(t){"undefined"==typeof ender&&(we=ke.moment,ke.moment=t?o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",be):be)}for(var be,we,_e,xe="2.8.4",ke="undefined"!=typeof global?global:this,Ce=Math.round,$e=Object.prototype.hasOwnProperty,Se=0,Me=1,Te=2,Ee=3,De=4,Ne=5,Fe=6,Ae={},He=[],Pe="undefined"!=typeof module&&module&&module.exports,Le=/^\/?Date\((\-?\d+)/i,Oe=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ie=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,je=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Re=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ze=/\d\d?/,Be=/\d{1,3}/,Ue=/\d{1,4}/,qe=/[+\-]?\d{1,6}/,We=/\d+/,Ve=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ye=/Z|[\+\-]\d\d:?\d\d/gi,Ge=/T/i,Qe=/[\+\-]?\d+/,Xe=/[\+\-]?\d+(\.\d{1,3})?/,Je=/\d/,Ke=/\d\d/,Ze=/\d{3}/,tn=/\d{4}/,en=/[+-]?\d{6}/,nn=/[+-]?\d+/,rn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,on="YYYY-MM-DDTHH:mm:ssZ",an=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],sn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ln=/([\+\-]|\d\d)/gi,un=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),cn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},hn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},dn={},pn={s:45,m:45,h:22,d:26,M:11},fn="DDD w W M D d".split(" "),gn="M D H h m s w W".split(" "),mn={M:function(){return this.month()+1},MMM:function(t){return this.localeData().monthsShort(this,t)},MMMM:function(t){return this.localeData().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.localeData().weekdaysMin(this,t)},ddd:function(t){return this.localeData().weekdaysShort(this,t)},dddd:function(t){return this.localeData().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return g(this.year()%100,2)},YYYY:function(){return g(this.year(),4)},YYYYY:function(){return g(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+g(Math.abs(t),6)},gg:function(){return g(this.weekYear()%100,2)},gggg:function(){return g(this.weekYear(),4)},ggggg:function(){return g(this.weekYear(),5)},GG:function(){return g(this.isoWeekYear()%100,2)},GGGG:function(){return g(this.isoWeekYear(),4)},GGGGG:function(){return g(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return S(this.milliseconds()/100)},SS:function(){return g(S(this.milliseconds()/10),2)},SSS:function(){return g(this.milliseconds(),3)},SSSS:function(){return g(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+g(S(t/60),2)+":"+g(S(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+g(S(t/60),2)+g(S(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},vn={},yn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];fn.length;)_e=fn.pop(),mn[_e+"o"]=l(mn[_e],_e);for(;gn.length;)_e=gn.pop(),mn[_e+_e]=s(mn[_e],2);mn.DDDD=s(mn.DDD,3),d(u.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t,e,n){var i,r,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=be.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=be([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e,n){var i=this._calendar[t];return"function"==typeof i?i.apply(e,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(t){return t},postformat:function(t){return t},week:function(t){return se(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),be=function(e,n,r,o){var a;return"boolean"==typeof r&&(o=r,r=t),a={},a._isAMomentObject=!0,a._i=e,a._f=n,a._l=r,a._strict=o,a._isUTC=!1,a._pf=i(),ue(a)},be.suppressDeprecationWarnings=!1,be.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),be.min=function(){var t=[].slice.call(arguments,0);return ce("isBefore",t)},be.max=function(){var t=[].slice.call(arguments,0);return ce("isAfter",t)},be.utc=function(e,n,r,o){var a;return"boolean"==typeof r&&(o=r,r=t),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=r,a._i=e,a._f=n,a._strict=o,a._pf=i(),ue(a).utc()},be.unix=function(t){return be(1e3*t)},be.duration=function(t,e){var i,r,o,a,s=t,l=null;return be.isDuration(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(s={},e?s[e]=t:s.milliseconds=t):(l=Oe.exec(t))?(i="-"===l[1]?-1:1,s={y:0,d:S(l[Te])*i,h:S(l[Ee])*i,m:S(l[De])*i,s:S(l[Ne])*i,ms:S(l[Fe])*i}):(l=Ie.exec(t))?(i="-"===l[1]?-1:1,o=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},s={y:o(l[2]),M:o(l[3]),d:o(l[4]),h:o(l[5]),m:o(l[6]),s:o(l[7]),w:o(l[8])}):"object"==typeof s&&("from"in s||"to"in s)&&(a=v(be(s.from),be(s.to)),s={},s.ms=a.milliseconds,s.M=a.months),r=new h(s),be.isDuration(t)&&n(t,"_locale")&&(r._locale=t._locale),r},be.version=xe,be.defaultFormat=on,be.ISO_8601=function(){},be.momentProperties=He,be.updateOffset=function(){},be.relativeTimeThreshold=function(e,n){return pn[e]===t?!1:n===t?pn[e]:(pn[e]=n,!0)},be.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(t,e){return be.locale(t,e)}),be.locale=function(t,e){var n;return t&&(n="undefined"!=typeof e?be.defineLocale(t,e):be.localeData(t),n&&(be.duration._locale=be._locale=n)),be._locale._abbr},be.defineLocale=function(t,e){return null!==e?(e.abbr=t,Ae[t]||(Ae[t]=new u),Ae[t].set(e),be.locale(t),Ae[t]):(delete Ae[t],null)},be.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(t){return be.localeData(t)}),be.localeData=function(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return be._locale;if(!w(t)){if(e=P(t))return e;t=[t]}return H(t)},be.isMoment=function(t){return t instanceof c||null!=t&&n(t,"_isAMomentObject")},be.isDuration=function(t){return t instanceof h};for(_e=yn.length-1;_e>=0;--_e)$(yn[_e]);be.normalizeUnits=function(t){return k(t)},be.invalid=function(t){var e=be.utc(0/0);return null!=t?d(e._pf,t):e._pf.userInvalidated=!0,e},be.parseZone=function(){return be.apply(null,arguments).parseZone()},be.parseTwoDigitYear=function(t){return S(t)+(S(t)>68?1900:2e3)},d(be.fn=c.prototype,{clone:function(){return be(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=be(this).utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():j(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):j(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return F(this)},isDSTShifted:function(){return this._a?this.isValid()&&x(this._a,(this._isUTC?be.utc(this._a):be(this._a)).toArray())>0:!1},parsingFlags:function(){return d({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(t){return this.zone(0,t)},local:function(t){return this._isUTC&&(this.zone(0,t),this._isUTC=!1,t&&this.add(this._dateTzOffset(),"m")),this},format:function(t){var e=j(this,t||be.defaultFormat);return this.localeData().postformat(e)},add:y(1,"add"),subtract:y(-1,"subtract"),diff:function(t,e,n){var i,r,o,a=L(t,this),s=6e4*(this.zone()-a.zone());return e=k(e),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+a.daysInMonth()),r=12*(this.year()-a.year())+(this.month()-a.month()),o=this-be(this).startOf("month")-(a-be(a).startOf("month")),o-=6e4*(this.zone()-be(this).startOf("month").zone()-(a.zone()-be(a).startOf("month").zone())),r+=o/i,"year"===e&&(r/=12)):(i=this-a,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-s)/864e5:"week"===e?(i-s)/6048e5:i),n?r:f(r)},from:function(t,e){return be.duration({to:this,from:t}).locale(this.locale()).humanize(!e)},fromNow:function(t){return this.from(be(),t)},calendar:function(t){var e=t||be(),n=L(e,this).startOf("day"),i=this.diff(n,"days",!0),r=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,be(e)))},isLeapYear:function(){return D(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=re(t,this.localeData()),this.add(t-e,"d")):e},month:fe("Month",!0),startOf:function(t){switch(t=k(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=k(e),e===t||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(t,e){var n;return e=k("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+this>+t):(n=be.isMoment(t)?+t:+be(t),n<+this.clone().startOf(e))},isBefore:function(t,e){var n;return e=k("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+t>+this):(n=be.isMoment(t)?+t:+be(t),+this.clone().endOf(e)<n)},isSame:function(t,e){var n;return e=k(e||"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+this===+t):(n=+be(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=be.apply(null,arguments),this>t?this:t}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=be.apply(null,arguments),t>this?this:t}),zone:function(t,e){var n,i=this._offset||0;return null==t?this._isUTC?i:this._dateTzOffset():("string"==typeof t&&(t=B(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(n=this._dateTzOffset()),this._offset=t,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==t&&(!e||this._changeInProgress?b(this,be.duration(i-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,be.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?be(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return M(this.year(),this.month())},dayOfYear:function(t){var e=Ce((be(this).startOf("day")-be(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=se(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=se(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=se(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return T(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return T(this.year(),t.dow,t.doy)},get:function(t){return t=k(t),this[t]()},set:function(t,e){return t=k(t),"function"==typeof this[t]&&this[t](e),this},locale:function(e){var n;return e===t?this._locale._abbr:(n=be.localeData(e),null!=n&&(this._locale=n),this)},lang:o("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===t?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),be.fn.millisecond=be.fn.milliseconds=fe("Milliseconds",!1),be.fn.second=be.fn.seconds=fe("Seconds",!1),be.fn.minute=be.fn.minutes=fe("Minutes",!1),be.fn.hour=be.fn.hours=fe("Hours",!0),be.fn.date=fe("Date",!0),be.fn.dates=o("dates accessor is deprecated. Use date instead.",fe("Date",!0)),be.fn.year=fe("FullYear",!0),be.fn.years=o("years accessor is deprecated. Use year instead.",fe("FullYear",!0)),be.fn.days=be.fn.day,be.fn.months=be.fn.month,be.fn.weeks=be.fn.week,be.fn.isoWeeks=be.fn.isoWeek,be.fn.quarters=be.fn.quarter,be.fn.toJSON=be.fn.toISOString,d(be.duration.fn=h.prototype,{_bubble:function(){var t,e,n,i=this._milliseconds,r=this._days,o=this._months,a=this._data,s=0;a.milliseconds=i%1e3,t=f(i/1e3),a.seconds=t%60,e=f(t/60),a.minutes=e%60,n=f(e/60),a.hours=n%24,r+=f(n/24),s=f(ge(r)),r-=f(me(s)),o+=f(r/30),r%=30,s+=f(o/12),o%=12,a.days=r,a.months=o,a.years=s},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return f(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*S(this._months/12)},humanize:function(t){var e=ae(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var n=be.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=be.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=k(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,n;if(t=k(t),"month"===t||"year"===t)return e=this._days+this._milliseconds/864e5,n=this._months+12*ge(e),"month"===t?n:n/12;switch(e=this._days+Math.round(me(this._months/12)),t){case"week":return e/7+this._milliseconds/6048e5;case"day":return e+this._milliseconds/864e5;case"hour":return 24*e+this._milliseconds/36e5;case"minute":return 24*e*60+this._milliseconds/6e4;case"second":return 24*e*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+t)}},lang:be.fn.lang,locale:be.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||r||o?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale}}),be.duration.fn.toString=be.duration.fn.toISOString;for(_e in un)n(un,_e)&&ve(_e.toLowerCase());be.duration.fn.asMilliseconds=function(){return this.as("ms")},be.duration.fn.asSeconds=function(){return this.as("s")},be.duration.fn.asMinutes=function(){return this.as("m")},be.duration.fn.asHours=function(){return this.as("h")},be.duration.fn.asDays=function(){return this.as("d")},be.duration.fn.asWeeks=function(){return this.as("weeks")},be.duration.fn.asMonths=function(){return this.as("M")},be.duration.fn.asYears=function(){return this.as("y")},be.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===S(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),Pe?module.exports=be:"function"==typeof define&&define.amd?(define("moment",function(t,e,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(ke.moment=we),be}),ye(!0)):ye()}.call(this),function(){$(document).ready(function(t){return t("body").on("copy",".substitution-tag-copy",function(e){var n;return e.preventDefault(),t(".substitution-tag-copy-text").hide(),n=t(e.currentTarget),n.parent().find(".substitution-tag-copy-text").show().delay(5e3).fadeOut("slow"),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",n.data("substitution-tag-text"))})})}.call(this),window.Nlvx=window.Nlvx||{},$(document).on("ready",function(){$(".add-tooltip").tooltip(),$(".add-popover").popover()}),function(){Nlvx.Alert=function(){function t(t,e,n){this.$container=e,/This field name is already in use. Please choose a new, unique name./.test(t)&&(t=t.concat(' <a id="link" href="https://support.sendgrid.com/hc/en-us/articles/206923947" target="_blank">Click here for more information.</a>')),this.$html=$('<div class="sg-alert '+n+'">\n  <a class="close" href="#">close</a>\n  <p>'+t+"</p>\n</div>").hide(),this.bindEvents(),this.$container.prepend(this.$html)}return t.prototype.bindEvents=function(){return this.$html.find("a").on("click",function(t){return function(){return t.remove()}}(this))},t.prototype.show=function(){return this.$container.scrollTop(0),this.$html.show()},t.prototype.hide=function(){return this.$html.hide()},t.prototype.remove=function(){return this.hide(),this.$html.remove()},t}()}.call(this),function(){Nlvx.BaseModal=function(){function t(t,e,n,i,r,o){this.$trigger=t,this.$modal=null!=e?e:null,this.$confirmButton=n,this.$cancelButton=i,this.$trigger.on("click.basemodal",_.bind(this.onTrigger,this)),this.$confirmButton.on("click.basemodal",_.bind(this.onConfirm,this,r)),this.$cancelButton.on("click.basemodal",_.bind(this.onCancel,this,o))}return t.prototype.show=function(t,e){return null==t&&(t=!1),null==e&&(e=!0),this.$modal.modal({show:!0,backdrop:t,keyboard:e})},t.prototype.hide=function(){return this.$modal.modal({show:!1})},t.prototype.onConfirm=function(t){return null!=t?t():void 0},t.prototype.onCancel=function(t){return null!=t&&t(),this.hide()},t.prototype.onTrigger=function(t){return t.preventDefault(),this.show()},t.prototype.destroy=function(){return this.$trigger.off("click.basemodal"),this.$confirmButton.off("click.basemodal"),this.$cancelButton.off("click.basemodal"),this.$trigger=null,this.$modal=null,this.$confirmButton=null,this.$cancelButton=null},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.BaseVersionEditor=function(){function e(e,n,i){var r;this.testModal=n,this.makeVersionActive=t(this.makeVersionActive,this),this.renderActiveModal=t(this.renderActiveModal,this),this.renderDeleteModal=t(this.renderDeleteModal,this),this.renderTestModal=t(this.renderTestModal,this),this.filterXSS=t(this.filterXSS,this),this.$el=$(e),this.isActive=1===i,r=this.$el.find("input[name='version[name]']"),""===(null!=r?r.val():void 0)&&r.focus(),this.$versionSubject=this.$el.find("#version_subject"),this.$saveButton=this.$el.find("#version_form .save-content"),this.$displayError=this.$el.find(".version_subject_error"),this.$subjectLabel=this.$el.find("#subject_line"),this.$el.validateForm({custom:this.validations()})}return e.prototype.bindEvents=function(){return this.$el.find('a[data-action="test"]').on("click",this.renderTestModal),this.$el.find('a[data-action="delete"]').on("click",this.renderDeleteModal),this.$el.find(".modal").on("hidden.bs.modal",function(){return $(this).removeData("bs.modal")}),this.$el.find('[data-group="make_active"]').click(this.renderActiveModal),this.$el.find("#make_active_modal_confirm").click(this.makeVersionActive),this.$el.on("contentChange",function(t){return function(){return t.$el.validateForm("check")}}(this)),this.$saveButton.on("click",this.filterXSS)},e.prototype.filterXSS=function(){var t;return this.$versionSubject.val(Nlvx.Sanitizers.removeJavascript(this.$versionSubject.val())),t=$('a[data-action="test"]'),t.data("subject",Nlvx.Sanitizers.removeJavascript(t.data("subject")))},e.prototype.renderTestModal=function(t){var e,n,i;return e=t.currentTarget.getAttribute("data-path"),n=t.currentTarget.getAttribute("data-send-test-path"),i=t.currentTarget.getAttribute("data-subject"),this.testModal.render(e,n,Nlvx.Sanitizers.removeJavascript(i))},e.prototype.renderDeleteModal=function(){return this.$el.find(".delete-modal").modal({show:!0,backdrop:!1})},e.prototype.renderActiveModal=function(){return this.isActive?Nlvx.FlashMessageHandler.add("danger","This version is already active."):this.$el.find("#make_active_modal").modal({show:!0,backdrop:!1})},e.prototype.makeVersionActive=function(t){var e,n;return this.filterXSS(),t.preventDefault(),e=$(t.target),n=$.ajax({url:e.attr("data-version-path"),method:"PUT",data:{version:{active:1}}}),n.done(function(t){return function(){var e;return t.isActive=!0,e=$("#campaign-sending .label-default"),e.addClass("active"),e.html("ACTIVE"),t.$el.find("#make_active_modal").modal("hide"),Nlvx.FlashMessageHandler.add("success","Successfully made this version active.")}}(this))},e.prototype.validations=function(){return{}},e}()}.call(this),function(){var t;t=300,this.Collapsible=function(){function e(t,e){this.$trigger=null!=t?t:$(),this.$container=null!=e?e:$(),this.$trigger.hasClass("open")&&this.$container.show(),this.$trigger.on("click",_.bind(this.onToggle,this))}return e.prototype.onToggle=function(){return this.$trigger.hasClass("open")?this.close():this.open()},e.prototype.close=function(){return $(this).trigger("collapsible:beforeclose"),this.$container.slideUp(t,function(t){return function(){return $(t).trigger("collapsible:close")}}(this)),this.$trigger.removeClass("open")},e.prototype.open=function(e){return null==e&&(e=!1),this.$trigger.hasClass("open")?void 0:($(this).trigger("collapsible:beforeopen"),e?(this.$container.show(),$(this).trigger("collapsible:open")):this.$container.slideDown(t,function(t){return function(){return $(t).trigger("collapsible:open")}}(this)),this.$trigger.addClass("open"))},e}()}.call(this),function(){Nlvx.ConfirmationModal=function(){function t(t,e){this.$target=$(t),this.buttonSelector=e||'[data-action="delete"]'}var e,n;return t.prototype.bindEvents=function(){return this.$target.find(this.buttonSelector).on("click",_.bind(this.showConfirmDelete,this))},t.prototype.showConfirmDelete=function(t){var e,n;return this.$target.find(".modal").on("hidden.bs.modal",function(){return $(this).removeData("bs.modal")}),e=t.currentTarget.getAttribute("data-id"),n=this.$target.find(".modal[data-id='"+e+"']").modal({show:!0,backdrop:"static"}),this.positionModal(n),$(".modal-backdrop").remove()},t.prototype.positionModal=function(t){return n(t)>=this.windowHeight()?t.css({top:-t.find(".modal-content").height()}):void 0},t.prototype.windowHeight=function(){return $(window).height()},e=function(t){return t.parent().offset().top-$(window).scrollTop()},n=function(t){return e(t)+t.find(".modal-content").height()+100},t}()}.call(this),function(){Nlvx.Converters={html_to_plain_text:function(t){var e;return e=$("<div>").html($.parseHTML(t)),e.find("a").each(function(){var t;return t=$(this),t.replaceWith(""+t.text()+" "+t.attr("href"))}),e.find("br").replaceWith("\n"),e.find("p").each(function(){var t;return t=$(this),t.replaceWith("\n"+t.text()+"\n")}),e.find("style").replaceWith(""),e.text().replace(/(?:(?:\r\n|\r|\n)\s*){2,}/g,"\n\n").replace(RegExp(" +(?= )","g"),"").replace(/^\s+|\s+$/g,"")}}}.call(this),function(){Nlvx.CoordinateLocator=function(){function t(){}return t.prototype.getNearestPoint=function(t,e){var n,i;return this.data=t,0===this.data.length?null:(n=this._findNearestX(e[0]),i=this._findNearestY(n,e[1]),{x:n,y:i,type:this._findLineTypeForPoint(n,i)})},t.prototype._findClosest=function(t,e){var n,i,r;return r=d3.bisect(t,e,1),i=t[r-1],n=t[r],e-i>n-e?n:i},t.prototype._getYValues=function(t){var e;return e=moment.unix(t).unix(),_.sortBy(_.map(this.data,function(t){return _.find(t.data,function(t){return t[0]===e})[1]
}),function(t){return t})},t.prototype._dates=function(){return _.map(this.data[0].data,function(t){return t[0]})},t.prototype._findNearestX=function(t){return this._findClosest(this._dates(),t)},t.prototype._findNearestY=function(t,e){return this._findClosest(this._getYValues(t),e)},t.prototype._findLineTypeForPoint=function(t,e){return _.find(this.data,function(n){return _.find(n.data,function(n){return n[0]===t&&n[1]===e})}).type},t}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.CustomSelect=function(){function n(n,i,r,o){var a;null==i&&(i={}),null==r&&(r=new Nlvx.CustomSelectTrigger),null==o&&(o=new Nlvx.CustomSelectMenu),this.scrollMenu=e(this.scrollMenu,this),this.filterMenu=e(this.filterMenu,this),this.closeMenu=e(this.closeMenu,this),this.openMenu=e(this.openMenu,this),this.hideNativeSelect=e(this.hideNativeSelect,this),this.handleMenuClosed=e(this.handleMenuClosed,this),this.handleOptionAdded=e(this.handleOptionAdded,this),a={fetchData:!1,dataUrl:""},this.settings=t.extend(a,i),this.customSelectTrigger=r,this.customSelectMenu=o,this.customSelectMenu.configure(this.settings).registerOptionAddedCallback(this.handleOptionAdded).registerCloseCallback(this.handleMenuClosed),this.$select=n,this.customSelectTrigger.setPlaceholder(this.$select.attr("placeholder")).registerFocusCallback(this.openMenu).registerBlurCallback(this.closeMenu).registerScrollCallback(this.scrollMenu).registerValueChangeCallback(this.filterMenu),this.currentMatches=[],this.originalOptions=[]}return n.prototype.el=n.$select,n.prototype.render=function(){var e,n,i,r,o,a,s;for(this.hideNativeSelect(),this.$select.wrap('<div class="custom-select">'),this.$wrapper=this.$select.parent(),i=[],e=function(e){return{value:Nlvx.Sanitizers.removeJavascript(t(e).val()),label:Nlvx.Sanitizers.removeJavascript(t(e).text())}},s=this.$select.find("option"),o=0,a=s.length;a>o;o++)n=s[o],i.push(e(n));return this.customSelectMenu.setElement(this.$wrapper).setOptions(i).render(),this.customSelectTrigger.setElement(this.$wrapper).render(),r=this.$select.children(":selected"),r.length&&(this.customSelectTrigger.updateText(r.text()),this.customSelectMenu.selectOptionWithLabel(r.text())),this},n.prototype.handleOptionAdded=function(t){return this.$select.append("<option value='"+Nlvx.Sanitizers.removeJavascript(t.value)+"'>"+Nlvx.Sanitizers.removeJavascript(t.label)+"</option>")},n.prototype.handleMenuClosed=function(){var t;return t=this.customSelectMenu.selected(),this.$select.val(t.value),this.customSelectTrigger.updateText(t.label)},n.prototype.hideNativeSelect=function(){return this.$select.addClass("hide")},n.prototype.openMenu=function(){return this.customSelectMenu.open()},n.prototype.closeMenu=function(){return this.customSelectMenu.close()},n.prototype.filterMenu=function(t){return this.customSelectMenu.filter(t)},n.prototype.scrollMenu=function(t){return this.customSelectMenu.scroll(t)},n}(),t=jQuery,t.fn.extend({customSelect:function(e){return null==e&&(e={}),this.each(function(n,i){return new Nlvx.CustomSelect(t(i),e).render().el})}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.CustomSelectMenu=function(){function e(){this._hoverSelected=t(this._hoverSelected,this),this.selectOptionWithLabel=t(this.selectOptionWithLabel,this),this.handleListItemClick=t(this.handleListItemClick,this),this.hoverListItem=t(this.hoverListItem,this),this.settings={fetchData:!1,dataUrl:""},this.options=[]}return e.prototype.configure=function(t){return this.settings=$.extend(this.settings,t),this},e.prototype.setOptions=function(t){return this.options=t||[],this},e.prototype.setElement=function(t){return this.$el=t,this},e.prototype.render=function(){var t;return this.$el.append('<div class="options-menu">'),this.$optionsMenu=this.$el.find(".options-menu"),this.$optionsMenu.append('<ul class="options">'),this.$optionsList=this.$el.find("ul.options"),this.settings.fetchData&&this.settings.dataUrl.length>0?(t=$.get(this.settings.dataUrl),t.success(function(t){return function(e){return t._addOptions(e),t._populateOptionsList(t.options,t._hoverSelected)}}(this))):this._populateOptionsList(this.options,this._hoverSelected),this._bindEvents(),this},e.prototype.selected=function(){var t;return t=this.$optionsList.find(".hover"),{value:t.data("value"),label:t.text()}},e.prototype.registerOptionAddedCallback=function(t){return this.addOptionCallback=t,this},e.prototype.registerCloseCallback=function(t){return this.closeCallback=t,this},e.prototype.open=function(){return this.$optionsMenu.css("width",""+this.$optionsMenu.parent().outerWidth()+"px"),this.$optionsMenu.hasClass("open")||this.$optionsMenu.addClass("open"),this},e.prototype.close=function(){return this.$optionsMenu.hasClass("open")&&this.$optionsMenu.removeClass("open"),this.closeCallback&&this.closeCallback(),this},e.prototype.scroll=function(t){switch(t){case"DOWN":this._scrollDown();break;case"UP":this._scrollUp()}return this},e.prototype.filter=function(t){var e,n,i;return i=new RegExp(t,"i"),e=function(){var t,e,r,o;for(r=this.options,o=[],t=0,e=r.length;e>t;t++)n=r[t],n.label.match(i)&&o.push(n);return o}.call(this),this._clearOptionsList(),this._populateOptionsList(e)},e.prototype.hoverListItem=function(t){return this._resetAndRetrieveHovered(),t.addClass("hover")},e.prototype.handleListItemClick=function(t){return this.hoverListItem($(t.currentTarget)),this.close()},e.prototype.selectOptionWithLabel=function(t){var e,n;return n=function(){var n,i,r,o;for(r=this.$optionsList.children("li"),o=[],n=0,i=r.length;i>n;n++)e=r[n],$(e).text()===t&&o.push(e);return o}.call(this),n.length?(this._resetAndRetrieveHovered(),$(n[0]).addClass("hover")):void 0},e.prototype._addOptions=function(t){var e,n,i,r;r=[];for(e in t)i=t[e],n={value:e,label:i},this.options.push(n),r.push(this.addOptionCallback&&this.addOptionCallback(n));return r},e.prototype._clearOptionsList=function(){return this.$optionsList.children("li").remove()},e.prototype._populateOptionsList=function(t,e){var n,i,r;for(null==e&&(e=null),i=0,r=t.length;r>i;i++)n=t[i],this.$optionsList.append('<li data-value="'+n.value+'">'+n.label+"</li>");return this.$optionsList.children("li").first().addClass("hover"),e&&e()},e.prototype._hoverSelected=function(){},e.prototype._resetAndRetrieveHovered=function(){var t;return t=this.$optionsList.find(".hover"),t.removeClass("hover"),t},e.prototype._scrollUp=function(){var t;return t=this._resetAndRetrieveHovered(),t.length&&t.index()>0?t.prev().addClass("hover"):this.$optionsList.find("li:last-child").addClass("hover")},e.prototype._scrollDown=function(){var t;return t=this._resetAndRetrieveHovered(),t.length&&t.index()<this.$optionsList.find("li").length-1?t.next().addClass("hover"):this.$optionsList.find("li:first-child").addClass("hover")},e.prototype._bindEvents=function(){return this.$optionsList.on("click","li",function(t){return function(e){return t.handleListItemClick(e)}}(this)),this.$optionsList.on("mouseenter","li",function(t){return function(e){var n;return n=$(e.currentTarget),t.hoverListItem(n)}}(this))},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.CustomSelectTrigger=function(){function e(){this._handleKeypress=t(this._handleKeypress,this),this._handleKeyup=t(this._handleKeyup,this),this._handleKeydown=t(this._handleKeydown,this),this.triggerHtml='<div class="trigger-wrapper">\n  <i class="icon-caret-thick" />\n  <input type="text" class="trigger" />\n</div>'}return e.prototype.setElement=function(t){return this.$el=t,this},e.prototype.setPlaceholder=function(t){return t=t||"",this.triggerHtml='<div class="trigger-wrapper">\n  <i class="icon-caret-thick" />\n  <input type="text" class="trigger" placeholder="'+t+'"/>\n</div>',this},e.prototype.render=function(){return this.$el.append(this.triggerHtml),this.$trigger=$(".trigger",this.$el),this._bindEvents(),this},e.prototype.registerFocusCallback=function(t){return this.focusCallback=t,this},e.prototype.registerBlurCallback=function(t){return this.blurCallback=t,this},e.prototype.registerScrollCallback=function(t){return this.scrollCallback=t,this},e.prototype.registerValueChangeCallback=function(t){return this.valueChangeCallback=t,this},e.prototype.updateText=function(t){return this.$trigger.val(t),this},e.prototype._handleKeydown=function(t){var e;switch((38===(e=t.which)||40===e||13===e)&&this.focusCallback&&this.focusCallback(),t.which){case 38:return function(e){return function(){return t.preventDefault(),e.scrollCallback&&e.scrollCallback("UP")}}(this)();case 40:return function(e){return function(){return t.preventDefault(),e.scrollCallback&&e.scrollCallback("DOWN")}}(this)();case 13:return function(e){return function(){return t.preventDefault(),e.blurCallback&&e.blurCallback()}}(this)()}},e.prototype._handleKeyup=function(t){var e;switch(8===(e=t.which)&&this.focusCallback&&this.focusCallback(),t.which){case 8:return function(t){return function(){return t.valueChangeCallback(t.$trigger.val())}}(this)()}},e.prototype._handleKeypress=function(t){return this.valueChangeCallback&&this.valueChangeCallback(this.$trigger.val()+String.fromCharCode(t.which))},e.prototype._bindEvents=function(){return this.focusCallback&&this.$trigger.on("focus",this.focusCallback),this.blurCallback&&this.$trigger.on("blur",this.blurCallback),this.$trigger.on("keypress",this._handleKeypress),this.$trigger.on("keydown",this._handleKeydown),this.$trigger.on("keyup",this._handleKeyup),this},e}()}.call(this),function(){Nlvx.DocumentHelper={isHidden:function(){return document.hidden}}}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.DropzoneUploader=function(){function e(e,n,i){this.dropzone=n,null==i&&(i={}),this.submit=t(this.submit,this),this.handleFileAdd=t(this.handleFileAdd,this),this.$element=$(e),this.options=$.extend(this.defaultOptions(),i),this.file=void 0}return e.prototype.defaultOptions=function(){return{url:"",form:this.$element}},e.prototype.handleFileAdd=function(t){return this.validateFileSize(t.size)},e.prototype.validateFileSize=function(t){return t>2147483648?(this.displayError("File size must be less than 2GB"),this.$element.trigger("invalid"),!1):!0},e.prototype.removeFile=function(){return this.file=void 0},e.prototype.changeFile=function(t){return this.dropzone.removeAllFiles(),this.validateFileSize(t.size)?(this.file=t,this.dropzone.addFile(t)):void 0},e.prototype.displayError=function(t){return Nlvx.FlashMessageHandler.add("danger",t)},e.prototype.submit=function(t,e,n,i,r){return this.file?(r.off("success"),r.on("success",function(r){return function(){return $.ajax({url:r.$element.data("upload-url"),data:JSON.stringify({list:{csv:t,id:e,rebuilt_headers:n,delimiter:i}}),dataType:"json",contentType:"application/json",method:"POST",success:function(){return Nlvx.WindowHandler.reload()}})}}(this)),r.off("error"),r.on("error",function(t){return function(e,n){return $(t).trigger("upload:fail"),t.displayError(n)}}(this)),$(this).trigger("upload:start"),r.processQueue()):this.displayError("please select a file")},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.EditPage=function(){function e(e,n,i,r){this.setGroupActiveTemplate=t(this.setGroupActiveTemplate,this),this.renderActiveModal=t(this.renderActiveModal,this),this.renderDeleteModal=t(this.renderDeleteModal,this),this.$target=$(e),this.isActive=r,this.templateVersionEditor=new Nlvx.TemplateVersionEditor(".template_version_editor",n,i)}return e.prototype.bindEvents=function(){return this.$target.find(".modal").on("hidden.bs.modal",function(){return $(this).removeData("bs.modal")}),this.$target.find(".save").unbind("click").click(function(t){return function(){return t.templateVersionEditor.saveContent()}}(this)),$(".template_version_editor").on("valuesSaved",function(t){return function(){return t.$target.submit()}}(this)),this.$target.find('[data-action="delete"]').click(this.renderDeleteModal),this.$target.find('[data-group="make_active"]').click(this.renderActiveModal),this.$target.find("#make_active_modal_confirm").click(this.setGroupActiveTemplate)},e.prototype.renderDeleteModal=function(){return this.$target.find(".delete-modal").modal({show:!0,backdrop:!1})},e.prototype.setupTemplateEditor=function(){return this.templateVersionEditor.loadAceEditor(),this.templateVersionEditor.bindEvents()},e.prototype.renderActiveModal=function(){return 1===this.isActive?Nlvx.FlashMessageHandler.add("danger","This version is already active."):this.$target.find("#make_active_modal").modal({show:!0,backdrop:!1})},e.prototype.setGroupActiveTemplate=function(t){var e,n;return t.preventDefault(),e=$(t.target),n=$.ajax({url:e.attr("data-version-path"),method:"PUT",data:{version:{active:1}}}),n.done(function(t){return function(){return t.isActive=1,t.$target.find(".active-label").removeClass("hidden"),t.$target.find("#make_active_modal").modal("hide"),Nlvx.FlashMessageHandler.add("success","Successfully made this version active.")}}(this))},e}()}.call(this),function(){var t,e,n;null==(n=window.Nlvx).ContentEditor&&(n.ContentEditor={}),e=["a","b","c","d","e","f"],Nlvx.ContentEditor.contentCollection=function(){function n(){}var i,r,o,a;return i=null,o=1,r="a",a={},n.canRewindHTML=function(){var t;return t=this.getActiveContent(),t.canRewindHTML()},n.rewindHTML=function(){var t;return t=this.getActiveContent(),t.rewindHTML()},n.canForwardHTML=function(){var t;return t=this.getActiveContent(),t.canForwardHTML()},n.forwardHTML=function(){var t;return t=this.getActiveContent(),t.forwardHTML()},n.resetHistory=function(){var t;return t=this.getActiveContent(),t.resetHistory()},n.getActiveContent=function(){return a[this.getVersion()]},n.setVersion=function(t){return t?r=t:void 0},n.getVersion=function(){return r},n.setVersionCount=function(t){var n,i;return o=t,n=_.size(a),o>n?(i=e.slice(n,o),this.addContentsFromA(i)):n>o?this.removeContents(e.slice(o)):void 0},n.getVersionCount=function(){return o},n.setContents=function(n){var i;return a={},i=_.map(n,function(n,i){var r;return r={},r[e[i]]=t(n),r}),_.each(i,function(t){return _.extend(a,t)})},n.getContents=function(){return a},n.addContentsFromA=function(e){var n,i,r;return null==e&&(e=[]),n=this.getHTMLforA(),i=this.getPlaintextForA(),r={content:n,plain_content:i},_.each(e,function(e){return a[e]=t(r)})},n.removeContentsExceptA=function(){return this.removeContents(["b","c","d","e","f"])},n.removeContents=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(delete a[e]);return r},n.getContentsForSaving=function(){return _.mapObject(a,function(t){return{content:t.getUnescapedHTML(),plain_content:t.getPlaintext()}})},n.hasMultiple=function(){return _.size(a)>1},n.getVersions=function(){return _.keys(a)},n.getHTMLforA=function(){return a.a.getHTML()},n.getHTML=function(){var t;return t=a[r],t?t.getHTML():this.getHTMLforA()},n.setHTML=function(t){return a[r]?a[r].setHTML(t):void 0},n.getPlaintext=function(){return a[r].getPlaintext()},n.getPlaintextForA=function(){return a.a.getPlaintext()},n.setPlaintext=function(t){return a[r]?a[r].setPlaintext(t):void 0},n.contentMatches=function(){return a[r].contentMatches()},n.copyHTMLToPlain=function(){return _.each(a,function(t){return t.copyHTMLToPlain()})},n.getUnescapedHTML=function(){return a[r].getUnescapedHTML()},n.contentsThatDontMatch=function(){var t;return t=_.pick(a,function(t){return!t.contentMatches()}),_.keys(t)},n.hasContentsThatDontMatch=function(){return this.contentsThatDontMatch().length>0},n.isDNDTemplate=function(){var t,e,n;return e=$("<iframe/>").appendTo("body"),e.get(0).contentDocument.write(this.getHTML()),t=$(e).contents().find("html"),n="true"===t.attr("data-dnd"),e.remove(),n},n}(),t=function(t){return new Nlvx.ContentEditor.content(t)},Nlvx.ContentEditor.content=function(){function t(t){this.activeHTML=0,this.history={plain:"",html:[]},this.setHTML(t.content),this.setPlaintext(t.plain_content)}return t.prototype.setHTML=function(t){var e;return e=Nlvx.Sanitizers.removeJavascript(t),this.getHTML()!==e?(this.activeHTML!==this.history.html.length-1&&(this.history.html=this.history.html.slice(0,this.activeHTML+1)),this.history.html.push(e),this.history.html.length>100&&(this.history.html=_.last(this.history.html,100)),this.activeHTML=this.history.html.length-1):void 0},t.prototype.setPlaintext=function(t){var e,n;return n=Nlvx.Sanitizers.removeJavascript(t),e=Nlvx.Sanitizers.removeCarriages(n),this.history.plain=e},t.prototype.canRewindHTML=function(){var t;return t=this.activeHTML-1,t>=0},t.prototype.rewindHTML=function(){var t;return t=this.activeHTML-1,this.activeHTML=t>0?t:0},t.prototype.canForwardHTML=function(){var t;return t=this.activeHTML+1,t<this.history.html.length},t.prototype.forwardHTML=function(){var t;return t=this.activeHTML+1,this.activeHTML=t<this.history.html.length?t:this.history.html.length-1},t.prototype.resetHistory=function(){return this.history.html=this.history.html.length?[this.history.html.pop()]:[],this.activeHTML=this.history.html.length-1},t.prototype.getHTML=function(){return this.history.html[this.activeHTML]},t.prototype.getUnescapedHTML=function(){return this.getHTML().replace("&lt;%body%&gt;","<%body%>")},t.prototype.getHTMLToPlain=function(){return Nlvx.Converters.html_to_plain_text(this.getHTML())},t.prototype.getPlaintext=function(){return this.history.plain},t.prototype.getContent=function(){return{html:this.getHTML(),plain:this.getPlaintext()}},t.prototype.contentMatches=function(){return this.getPlaintext()===this.getHTMLToPlain()},t.prototype.copyHTMLToPlain=function(){var t;return t=this.getHTMLToPlain(),this.setPlaintext(t)},t}()}.call(this),function(){Nlvx.ElementLocator=function(){function t(t,e,n){this.$target=t,this.height=e,this.$window=n||$(window)}return t.prototype.offBottomOfPage=function(){var t,e;return e=this.$target.offset().top-this.$window.scrollTop(),t=e+this.height,t>this.$window.height()},t}()}.call(this),function(){Nlvx.EmailValidator=function(){function t(){}return t.are_valid=function(t){return t.length>0&&_.every(t,function(t){return function(e){return t.is_valid(e)}}(this))},t.is_valid=function(t){return!!t.match(/.+@.+/)},t.has_subject=function(t){return void 0!==t&&t.length>0},t.has_body=function(t){return void 0!==t&&t.length>0},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};!function(e){return Nlvx.ErrorNotice=function(){function n(n,i){this.check=t(this.check,this),this.validate=t(this.validate,this),this.$el=e(n),this.options=e.extend(!0,{message:""},i),this.$noticeBox=e("<div/>",{"class":"validation-error-text",html:this.options.message}).hide().appendTo(this.options.noticeEl),this.$label=this.options.label}return n.prototype.bindEvents=function(){return this.$el.on(this.options.events,this.validate)},n.prototype.unbindEvents=function(){return this.$el.off(this.options.events,this.validate)},n.prototype.validate=function(){var t,e,n;return t=this.options.validator.call(this.$el),t?(this.options.noticeEl.removeClass("validation-error"),this.$noticeBox.hide(),null!=(n=this.$label)?n.removeClass("invalid-label"):void 0):(this.$noticeBox.show(),this.options.noticeEl.addClass("validation-error"),null!=(e=this.$label)?e.addClass("invalid-label"):void 0)},n.prototype.check=function(){return this.validate()},n.prototype.update=function(t){return t.events&&this.unbindEvents(),this.options=e.extend(!0,this.options,t),t.events?this.bindEvents():void 0},n.prototype.destroy=function(){return this.unbindEvents(),e.removeData(this.$el.get(0),"errorNotice"),this.$noticeBox.remove()},e.fn.errorNotice=function(t){var n,i;return n=e.makeArray(arguments),i=n.slice(1),this.each(function(){var r;return r=e.data(this,"errorNotice"),r?"string"==typeof t?r[t].apply(r,i):r.update.apply(r,n):(r=new Nlvx.ErrorNotice(this,t),e.data(this,"errorNotice",r),r.bindEvents())})},n}()}(jQuery)}.call(this),function(){Nlvx.FlashMessageHandler=function(){function t(){}var e;return t.add=function(t,n){var i;return i=$(e(t,n)),$(".flash_notice").append(i),setTimeout(function(){return i.fadeOut()},1e4)},t.clear=function(){return $(".flash_notice").empty()},e=function(t,e){return'<span class="fader alert alert-'+t+' alert-dismissable"><button class="close" aria-hidden="true" data-dismiss="alert" type="button"><i class="icon-close-circle"></i></button>'+e+"</span>"},t}()}.call(this),function(){Nlvx.FormHelper=function(){function t(){}return t.clearFormData=function(t){return $.each(t.find("input"),function(t,e){return $(e).val("")}),$.each(t.find("select"),function(t,e){var n,i;return n=$(e),i=n.find("option:first").val(),n.val(i),n.change()})},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};!function(e){return Nlvx.FormValidator=function(){function n(n,i){this.validate=t(this.validate,this),this.delayedValidation=t(this.delayedValidation,this),this.$form=e(n),this.options=e.extend(!0,{ignoreWhen:null},i),this.$submitButton=this.$form.find('[data-validate-with="submit"]'),this.$requiredFields=this.$form.find('[data-validate-with="required"]'),this.$customValidationFields=this.$form.find("[data-validate-custom]"),this.$itemsToCheckOnClick=this.$form.find('[data-validate-on="click"]')}return n.prototype.bindEvents=function(){return this.$form.on("change keyup",'[data-validate-with="required"], [data-validate-custom]',this.validate),this.$itemsToCheckOnClick.on("click",this.delayedValidation)},n.prototype.unbindEvents=function(){return this.$form.off("change keyup",'[data-validate-with="required"], [data-validate-custom]',this.validate),this.$itemsToCheckOnClick.off("click",this.delayedValidation)},n.prototype.delayedValidation=function(){return setTimeout(function(t){return function(){return t.validate()}}(this),0)},n.prototype.validate=function(){var t;return t=!1,e.each(this.$requiredFields,function(n){return function(i,r){var o,a,s;return o=e(r),s=o.data(),a=s.skipValidation,n.options.ignoreWhen&&n.options.ignoreWhen[a]&&n.options.ignoreWhen[a].call()===!0?!0:e.trim(o.val())?void 0:(t=!0,!1)}}(this)),e.each(this.$customValidationFields,function(n){return function(i,r){var o,a,s;return o=e(r),a=o.data(),s=a.validateCustom,n.options.custom[s].call(n,o)?!0:(t=!0,!1)}}(this)),this.$submitButton.prop({disabled:t})},n.prototype.update=function(t){return this.options=e.extend(!0,this.options,t)},n.prototype.check=function(){return this.validate()},n.prototype.destroy=function(){return this.unbindEvents(),this.$submitButton.prop({disabled:!1}),e.removeData(this.$form.get(0),"validateForm")},n}(),e.fn.validateForm=function(t){var n,i;return n=e.makeArray(arguments),i=n.slice(1),this.each(function(){var r;return r=e.data(this,"validateForm"),r?"string"==typeof t?r[t].apply(r,i):r.update.apply(r,n):(r=new Nlvx.FormValidator(this,t),e.data(this,"validateForm",r),r.bindEvents(),r.validate())})}}(jQuery)}.call(this),Handlebars.registerHelper("trimString",function(t,e,n){if(t.length<n)return new Handlebars.SafeString(t);var i=t.substring(e,n);return i+="...",new Handlebars.SafeString(i)}),function(){Nlvx.ContentEditor.History=function(){function t(){}var e,n,i,r,o,a,s,l,u;return n=null,e=!1,s=[],r=[],t.init=function(){return u(),i()},t.onRewind=function(t){return s.push(t)},t.offRewind=function(t){return s=_.reject(s,function(e){return e===t})},t.onForward=function(t){return r.push(t)},t.offForward=function(t){return r=_.reject(r,function(e){return e===t})},t.teardown=function(){return $(document).off("focus blur visibilitychange -moz-visibilitychange -ms-visibilitychange -o-visibilitychange -webkit-visibilitychange",l),$(window).off("focus blur",l),$(document).off("keydown",o),$(document).off("keyup",a),s=[],r=[],l()},l=function(){return e=!1},u=function(){return $(document).on({focus:l,blur:l,visibilitychange:l,"-moz-visibilitychange":l,"-ms-visibilitychange":l,"-o-visibilitychange":l,"-webkit-visibilitychange":l}),$(window).on({focus:l,blur:l})},o=function(t){return(91===t.which||93===t.which||224===t.which||17===t.which)&&(e=!0),!t.ctrlKey&&!e||t.shiftKey||90!==t.which?(t.ctrlKey||e)&&t.shiftKey&&90===t.which?(_.each(r,function(t){return t()}),!1):!0:(_.each(s,function(t){return t()}),!1)},a=function(t){return(91===t.which||93===t.which||224===t.which||17===t.which)&&(e=!1),!0},i=function(){return $(document).on({keydown:o,keyup:a})},t}()}.call(this),function(){var t;t='<div class="image-manager" id="<%= id %>">\n  <div class="image-manager__header">\n    <ul class="image-manager__tabs">\n      <li class="image-manager__tab js-image-manager__tab" data-tab="library">Image Library</li>\n      <li class="image-manager__tab js-image-manager__tab" data-tab="url">Image URL</li>\n    </ul>\n    <div class="image-manager__header-buttons">\n      <button class="image-manager__header-buttons--upload js-image-manager__upload-button btn btn-small btn-primary" value="upload">Upload</button>\n    </div>\n  </div>\n  <div class="image-manager__content-wrapper"></div>\n</div>',Nlvx.ImageManager=function(){function e(e,n){var i;this.$container=e,null==n&&(n=""),i=_.template(t),this.$html=$(i({id:n})),this.$container.append(this.$html),this.$contentContainer=this.$container.find(".image-manager__content-wrapper"),this.library=new Nlvx.ImageLibrary(this.$contentContainer),this.externalImage=new Nlvx.ExternalImage(this.$contentContainer),this.onKeyUpGlobalScoped=_.bind(this.onKeyUpGlobal,this),this.$modal=$("<div class='image-manager__modal'/>"),$("body").append(this.$modal),this.bindGlobalEvents(),$(".js-image-manager__upload-button").focus(),this.setModalPosition(),this.$container.find(".js-image-manager__tab:eq(0)").trigger("click")}return e.prototype.setModalPosition=function(){var t,e,n;return e=$(window).height(),t=this.$html.outerHeight(),n=e>t?(e-t)/2:0,this.$html.css("top",""+n+"px")},e.prototype.bindGlobalEvents=function(){return $(this.library).on({cancel:_.bind(this.onCancel,this),insert:_.bind(this.onInsert,this),select:_.bind(this.onSelect,this),imagesloaded:_.bind(this.onImagesLoaded,this)}),$(this.externalImage).on({cancel:_.bind(this.onCancel,this),insert:_.bind(this.onInsert,this)}),this.$container.find(".js-image-manager__tab").on("click",_.bind(this.onTabClick,this)),this.$container.find(".js-image-manager__upload-button").on("click",_.bind(this.library.onUploadClick,this.library)),this.$contentContainer.on("click",function(t){return t.stopPropagation()}),this.$modal.on("click",_.bind(this.onCancel,this)),$(document).on("keyup",this.onKeyUpGlobalScoped)},e.prototype.onCancel=function(t){return null!=t&&t.preventDefault(),this.teardown(),$(this).trigger("cancel")},e.prototype.onImagesLoaded=function(){return this.$html.find(".js-image-manager__upload-button").show()},e.prototype.onInsert=function(t,e){return this.teardown(),$(this).trigger("insert",e)},e.prototype.onKeyUpGlobal=function(t){return 27===t.which?this.onCancel():void 0},e.prototype.onSelect=function(t,e){return this.$container.find(".js-image-manager__tab").trigger("click"),this.externalImage.setURL(e.url)},e.prototype.onTabClick=function(t){var e,n;return t.preventDefault(),e=$(t.currentTarget),n=e.data("tab"),this.$container.find(".js-image-manager__tab.open").removeClass("open"),e.addClass("open"),"library"===n?(this.library.activate(),this.externalImage.deactivate()):"url"===n?(this.library.deactivate(),this.externalImage.activate()):void 0},e.prototype.setImage=function(t){return this.externalImage.setImage(t),this.$container.find(".js-image-manager__tab").trigger("click")},e.prototype.teardown=function(){return this.$html.remove(),this.$modal.remove(),$(document).off("keyup",this.onKeyUpGlobalScoped)},e}()}.call(this),function(){var t,e,n;n=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,e=function(){var t,e;for(e="js-image-manager__0",t=-1;$("."+e).length>0;)t++,e="js-image-manager__"+t;return e},t=function(){function t(){}var e,n;return n=null,e={url:"",responsive:!0,alt:""},t.data={},t.setImage=function(t){return null!=t.width&&(t.width=parseInt(t.width)),null!=t.height&&(t.height=parseInt(t.height)),_.extend(this.data={},e,t),this.dfd=new $.Deferred,this.image=new Image,this.image.onload=function(t){return function(){var e,n;return t.data.originalWidth=t.image.width,t.data.originalHeight=t.image.height,null==(e=t.data).width&&(e.width=t.image.width),null==(n=t.data).height&&(n.height=t.image.height),t.image.width=t.data.width,t.image.height=t.data.height,t.dfd.resolve({image:t.image})}}(this),this.image.onerror=function(t){return function(){return t.dfd.reject()}}(this),this.image.src=this.data.url},t.getImage=function(){return this.dfd.promise()},t}(),Nlvx.ExternalImage=function(){function i(t,i){var r,o,a;this.$container=t,this.maxWidth=i,o=$("#image-manager-content-url").html(),a=Handlebars.compile(o),r=a(),this.$container.append(r),this.uniqueID=e(),this.$content=this.$container.find(".js-image-manager__content--url").addClass(this.uniqueID),this.$insertButton=this.$content.find(".image-manager__buttons-footer__insert"),this.$lockTrigger=this.$content.find(".js-image-manager__dimensions-lock"),this.$resetTrigger=this.$content.find(".js-image-manager__dimensions-reset"),this.$height=$(".js-image-manager__image-url-properties[name='height']"),this.$width=$(".js-image-manager__image-url-properties[name='width']"),this.responsiveSwitch=new Nlvx.OnOffSwitch($("#responsive-toggle")),this.bindGlobalEvents(),jQuery.validator.addMethod("sendgridUrl",function(t,e){return this.optional(e)||n.test(t)||/127\.0\.0\.1/i.test(t)||/localhost/i.test(t)},"Please enter a valid URL"),this.validator=this.$content.find("form").validate({ignore:"[class*='select2']",onsubmit:!1,onfocusout:!1,showErrors:function(t,e){return Nlvx.FlashMessageHandler.clear(),null!=e[0]&&Nlvx.FlashMessageHandler.add("danger",e[0].message),this.defaultShowErrors()},rules:{url:{required:!0,sendgridUrl:!0},link:{required:!1,sendgridUrl:!0},height:{required:!0,digits:!0},width:{required:!0,digits:!0}},messages:{url:{required:"The URL field is required."},height:{required:"The height field is required.",digits:"The height field can only be digits."},width:{required:"The width field is required.",digits:"The width field can only be digits."}}}),this.validator.settings.ignore=".foo"}return i.prototype.bindGlobalEvents=function(){var t;return t=null,this.$content.find(".image-manager__image-url-properties--url").on("keyup",function(e){return function(n){return window.clearTimeout(t),t=window.setTimeout(function(){return e.onUrlChange(n)},500)}}(this)),this.$content.find(".image-manager__image-url-properties--url").on("blur",_.bind(this.onUrlChange,this)),this.$content.find(".image-manager__image-url-properties--link").on("blur",_.bind(this.onLinkUrlChange,this)),$(this.responsiveSwitch).on({on:function(t){return function(){return t.onResponsiveChange(!0)}}(this),off:function(t){return function(){return t.onResponsiveChange(!1)}}(this)}),this.$content.find(".image-manager__buttons-footer__insert").on("click",_.bind(this.onInsert,this)),this.$content.find(".image-manager__buttons-footer__cancel").on("click",_.bind(this.onCancel,this)),this.$content.find("form.image-manager__external-url-form").on("submit",_.bind(this.onSubmit,this))},i.prototype.onSubmit=function(t){return t.preventDefault(),this.onInsert()},i.prototype.activate=function(){var t;return this.$content.show(),t=$("select.image-manager__image-url-properties--alignment"),t.data("select2")?void 0:t.select2()},i.prototype.deactivate=function(){return this.$content.hide()},i.prototype.onCancel=function(t){return null!=(null!=t?t.stopPropagation:void 0)&&t.stopPropagation(),t.preventDefault(),$(this).trigger("cancel")},i.prototype.onResponsiveChange=function(e){return t.data.responsive=e,this.setResponsive()},i.prototype.onLinkUrlChange=function(){var t,e;return t=$(".image-manager__image-url-properties--link"),e=t.val(),this.linkUrl!==e?(this.linkUrl=e,Nlvx.FlashMessageHandler.clear(),this.isValidUrl(e)||""===e?(this.$insertButton.removeAttr("disabled"),t.removeClass("error")):(this.$insertButton.attr("disabled","disabled"),t.addClass("error"),Nlvx.FlashMessageHandler.add("danger","Please enter a valid link URL"))):void 0},i.prototype.onUrlChange=function(){var t,e;return t=$(".image-manager__image-url-properties--url"),e=t.val(),this.url!==e&&(this.$insertButton.attr("disabled","disabled"),this.resetImage(),this.isValidUrl(e))?(this.url=e,this.download(this.url)):void 0},i.prototype.isValidUrl=function(t){return n.test(t)||/127\.0\.0\.1/i.test(t)||/localhost/i.test(t)},i.prototype.resetImage=function(){return this.image=null,this.url=null,$(".js-image-manager__image-url--image").empty(),$(".js-image-manager__content--url input[type='text']").not("[name='url'],[name='link']").val("")
},i.prototype.onInsert=function(t){var e;return null!=(null!=t?t.stopPropagation:void 0)&&t.stopPropagation(),this.validator.form()?(e={},$(".js-image-manager__content--url form [name]").each(function(){return e[$(this).attr("name")]=$(this).val()}),e.responsive=this.responsiveSwitch.state===!0,this.validator.reset(),this.validator.resetForm(),this.validator.clean(),Nlvx.FlashMessageHandler.clear(),$(this).trigger("insert",e)):void 0},i.prototype.download=function(e){return t.setImage({url:e}),$.when(t.getImage()).done(function(t){return function(){return t.onDownload()}}(this)).fail(function(){return Nlvx.FlashMessageHandler.clear(),Nlvx.FlashMessageHandler.add("danger","Please enter a valid image URL")}),$(".js-image-manager__image-url-properties[name='alignment']").val("").trigger("change"),$(".js-image-manager__image-url-properties[name='border']").val(""),$(".js-image-manager__image-url-properties[name='alt_text']").val(""),$(".js-image-manager__image-url-properties[name='link']").val(""),this.responsiveSwitch.on(),$(".js-image-manager__image-url-properties[name='height']").removeAttr("disabled"),$(".image-manager__image-url-properties--responsive").parent(".image-manager__form-element-group--item").removeClass("disabled")},i.prototype.onDownload=function(){return Nlvx.FlashMessageHandler.clear(),this.$insertButton.removeAttr("disabled"),this.setDimensions(),this.setResponsive()},i.prototype.setURL=function(t){return $(".js-image-manager__image-url-properties[name='url']").val(t).trigger("blur"),this.validator.resetForm()},i.prototype.setDimensions=function(){var e,n,i;return i=1,n=t.data.width,e=t.data.height,this.$width.val(n),this.$height.val(e),this.dimensions=new Nlvx.ImageDimensionsControls(this.$height,this.$width,t,this.$lockTrigger,this.$resetTrigger,this.maxWidth),$(".js-image-manager__image-url--image").html('<span class="image-manager__center-image-helper"></span>\n<img src=\''+t.data.url+"'>")},i.prototype.setResponsive=function(){var e,n;return e=this.$content.find(".js-image-manager__image-url-properties[name='height']"),n=this.$content.find(".image-manager__image-url-properties--height").parent(".image-manager__form-element-group--item"),t.data.responsive?(e.attr("disabled","disabled"),n.addClass("disabled")):(e.removeAttr("disabled"),n.removeClass("disabled"))},i.prototype.setImage=function(e){var n;return t.setImage(e),n=_.pick(e,["width","height","alt_text","url","link"]),this.$insertButton.removeAttr("disabled"),_.each(n,function(t){return function(e,n){return t.$content.find("input.js-image-manager__image-url-properties[name='"+n+"']").val(e)}}(this)),e.alignment&&this.$content.find("select.js-image-manager__image-url-properties[name='alignment']").val(e.alignment).trigger("change"),e.responsive?this.responsiveSwitch.on():this.responsiveSwitch.off(),$.when(t.getImage()).then(function(t){return function(){return t.setDimensions(),t.setResponsive()}}(this)),this.validator.resetForm()},i}()}.call(this),function(){this.Nlvx.ImageDimensionsControls=function(){function t(t,e,n,i,r){this.$height=t,this.$width=e,this.UserImage=n,this.$lockTrigger=i,this.$resetTrigger=r,this.imageData=this.UserImage.data,this.image=this.UserImage.image,this.height=this.imageData.height,this.width=this.imageData.width,this.ratio=this.width/this.height,this.startHeight=this.imageData.originalHeight,this.startWidth=this.imageData.originalWidth,this.locked=!0,this.$height.val(this.height),this.$width.val(this.width),this.$height.on("keyup",_.bind(this.onHeightChange,this)),this.$width.on("keyup",_.bind(this.onWidthChange,this)),this.$lockTrigger.on("click",_.bind(this.onLockTriggerClick,this)),this.$resetTrigger.on("click",_.bind(this.onResetTriggerClick,this)),this.dimensionsChanged()&&this.$resetTrigger.removeClass("disabled")}return t.prototype.dimensionsChanged=function(){return this.height!==this.startHeight||this.width!==this.startWidth},t.prototype.hasStartingDimensions=function(){return parseInt(this.$height.val())===this.startHeight&&parseInt(this.$width.val())===this.startWidth},t.prototype.onHeightChange=function(t){var e,n;return 9!==t.which&&this.locked&&(e=parseInt($(t.currentTarget).val()),_.isNaN(e)||(n=Math.round(e*this.ratio),this.height=e,this.width=n,this.$width.val(this.width))),this.dimensionsChanged()&&this.$resetTrigger.removeClass("disabled"),this.hasStartingDimensions()?this.$resetTrigger.addClass("disabled"):void 0},t.prototype.onWidthChange=function(){var t,e;return this.$resetTrigger.removeClass("disabled"),e=parseInt(this.$width.val()),this.locked&&(_.isNaN(e)||(t=Math.round(e/this.ratio),this.height=t,this.width=e,this.$height.val(this.height))),this.dimensionsChanged()&&this.$resetTrigger.removeClass("disabled"),this.hasStartingDimensions()?this.$resetTrigger.addClass("disabled"):void 0},t.prototype.onLockTriggerClick=function(t){return t.preventDefault(),this.locked?(this.locked=!1,this.$lockTrigger.addClass("unlocked")):(this.locked=!0,this.$lockTrigger.removeClass("unlocked"),this.reset())},t.prototype.onResetTriggerClick=function(t){return t.preventDefault(),$(t.currentTarget).hasClass("disabled")?void 0:this.reset()},t.prototype.reset=function(){return this.$height.val(this.startHeight),this.$width.val(this.startWidth),this.$resetTrigger.addClass("disabled")},t}()}.call(this),function(){Nlvx.ImageLibrary=function(){function t(t){var e,n,i;this.$container=t,n=$("#image-manager-content-library-loading").html(),i=Handlebars.compile(n),e=i(),this.$container.html(e),this.$content=this.$container.find(".js-image-manager__content--library"),$.when(Nlvx.ImageLibraryStore.populate()).done(function(t){return function(e){return null==e&&(e=[]),t.setupAfterGetImages(e)}}(this)).fail(function(t){return function(){return t.setupAfterGetImages([])}}(this))}return t.prototype.activate=function(){return this.$content.show()},t.prototype.deactivate=function(){return this.$content.hide()},t.prototype.bindGlobalEvents=function(){return this.$content.on("click",".js-image-manager__thumb--delete",_.bind(this.onThumbDeleteClick,this)),this.$content.on("click",".image-manager__thumb",_.bind(this.onThumbClick,this)),this.$content.find(".image-manager__buttons-footer__cancel").on("click",_.bind(this.onCancel,this)),this.$content.find(".image-manager__buttons-footer__insert").on("click",_.bind(this.onInsertClick,this))},t.prototype.currentImage=function(){return this.currentImageId?this.getImageById(this.currentImageId):void 0},t.prototype.getImageById=function(t){return Nlvx.ImageLibraryStore.find(t||this.currentImageId)},t.prototype.setupAfterGetImages=function(t){var e,n,i;return jQuery.contains(document,this.$container[0])?(t=Nlvx.ImageLibraryStore.get(),n=$("#image-manager-content-library").html(),i=Handlebars.compile(n),e=i({images:t}),this.$content.replaceWith(e),this.$content=this.$container.find(".js-image-manager__content--library"),this.$insertButton=this.$container.find(".image-manager__buttons-footer__insert"),this.$properties=this.$container.find(".image-manager__home__image-properties"),this.bindGlobalEvents(),this.setupUploadBox(),$(".js-image-manager__tab[data-tab='library']").hasClass("open")&&this.activate(),window.setTimeout(function(t){return function(){return $(t).trigger("imagesloaded")}}(this),100)):void 0},t.prototype.setupUploadBox=function(){var t,e;return e=this,t=$("meta[name='csrf-token']").attr("content"),this.dropzone=new Dropzone(".image-manager__drop-area",{url:"/marketing_campaigns/images.json",paramName:"upload",maxFilesize:10,parallelUploads:4,headers:{"X-CSRF-Token":t},clickable:!0,dictFileTooBig:"Your image cannot exceed 10MB.",acceptedFiles:"image/*,.png,.jpg,.jpeg,.gif",previewsContainer:".image-manager__loading-thumbs-container",previewTemplate:'<div class="dz-preview dz-file-preview">\n  <svg class="svgi svgi-image-ph"><use xlink:href="/assets/palette/svg-icons.svg#svgi-image-ph"></use></svg>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n</div>',init:function(){return this.on("addedfile",function(){return $(e).trigger("dropzone:addedfile",arguments)})},success:_.bind(this.onUploadSuccess,this),error:_.bind(this.onUploadError,this),sending:function(){var t;return t=Nlvx.ImageLibraryStore.get(),$(e).trigger("dropzone:sending",arguments)},complete:function(t){var e;return e=$(t.previewElement).remove()},canceled:$.noop})},t.prototype.onCancel=function(t){return t.preventDefault(),$(this).trigger("cancel")},t.prototype.onInsertClick=function(t){var e,n;return t.preventDefault(),e=Nlvx.ImageLibraryStore.find(this.currentImageId),$(".js-image-manager__preview-property").each(function(){var t;return t=$(this).data("property"),e[t]=$(this).val()}),n=e.to_json(),$(this).trigger("insert",n)},t.prototype.onThumbClick=function(t){var e,n;return e=$(t.currentTarget),this.currentImageId=e.data("imageid"),n=this.getImageById(this.currentImageId),$(this).trigger("select",n)},t.prototype.onThumbDeleteClick=function(t){var e,n,i,r;return t.stopPropagation(),t.preventDefault(),e=$(t.currentTarget).closest(".image-manager__thumb").data("imageid"),n=Nlvx.ImageLibraryStore.find(e),i=$("#image-manager-content-library-delete-confirmation").html(),r=Handlebars.compile(i),this.$deleteModal=$(r(n)),this.$content.append(this.$deleteModal),this.$deleteModal.show(),this.$deleteModal.find(".btn-primary").on("click",_.bind(this.deleteImage,this)),this.$deleteModal.find(".btn-secondary").on("click",function(t){return function(){return t.$deleteModal.remove()}}(this))},t.prototype.deleteImage=function(t){var e,n;return this.$deleteModal.remove(),n=$(t.currentTarget).closest(".image-manager__delete-confirmation-modal").data("imageid"),e=this.$content.find(".image-manager__thumb[data-imageid='"+n+"']"),e.remove(),Nlvx.ImageLibraryStore.remove(n),$.ajax({method:"POST",url:"/marketing_campaigns/images/"+n+".json",data:{_method:"delete"}})},t.prototype.onUploadClick=function(){return this.$content.toggleClass("upload-opened")},t.prototype.onUploadSuccess=function(t,e){var n,i,r,o,a;return(null!=e&&null!=(a=e.errors)?a.length:void 0)?($(t.previewElement).remove(),this.showErrorMessages(e.errors)):(window.analytics.track("image_uploaded",{file_size:t.size}),this.$content.find("[data-imageid='"+e.id+"']").remove(),i=Nlvx.ImageLibraryStore.add(e),r=$("#image-manager-content-library-thumbnail").html(),o=Handlebars.compile(r),n=o(i),this.$content.find(".image-manager__loading-thumbs-container").after(n))},t.prototype.onUploadError=function(t,e){var n,i;return $(t.previewElement).remove(),n="string"==typeof e?[e]:(null!=e&&null!=(i=e.errors)?i.length:void 0)?e.errors:[],this.showErrorMessages(n)},t.prototype.showErrorMessages=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(null==e||/\<html\>/i.test(e)?void 0:Nlvx.FlashMessageHandler.add("danger",e));return r},t}()}.call(this),function(){Nlvx.ImageLibraryStore=function(){function t(){}var e,n,i,r;return n=null,i=null,r=null,e=[],t.populate=function(){return i||(i=$.Deferred(function(t){return $.when(Nlvx.ImagesFetcher.get()).then(function(t){var n,i,o;if(!r){for(i=0,o=t.length;o>i;i++)n=t[i],Nlvx.ImageLibraryStore.add(n);r=!0}return e},function(){return t.resolve(e)}).then(t.resolve,t.reject)}).promise()),i},t.get=function(){return e},t.find=function(t){return _.find(e,function(e){return e.id===t})},t.add=function(t){var n,i;return n=t.id,Nlvx.ImageLibraryStore.remove(n),i=new Nlvx.LibraryImage(t),e.push(i),i},t.remove=function(t){return e=_.reject(e,function(e){return e.id===t})},t.reset=function(){return e=[],i=null,r=null},t}()}.call(this),function(){Nlvx.ImagesFetcher=function(){function t(){}var e,n;return e=null,n=null,t.reset=function(){return n=null},t.get=function(){return n||(n=$.Deferred(function(t){return $.get("/marketing_campaigns/images.json").then(t.resolve,t.reject)}).promise()),n},t}()}.call(this),function(){Nlvx.LibraryImage=function(){function t(t){this.json=t,this.id=this.json.id,this.name=this.json.name,this.url=this.json.url,this.thumb=this.json.thumb,this.height=this.json.height,this.width=this.json.width,this.alt_text=null,this.border=null,this.alignment=null,this.filesize=this.prettyFileSize(this.json.size_bytes),this.created_at=this.prettyCreatedAt(this.json.created_at),this.image=new Image,this.image.onload=function(t){return function(){return t.height=t.image.height,t.width=t.image.width}}(this),this.image.src=this.url}return t.prototype.prettyFileSize=function(t){return t>1e5?parseFloat((t/1e5).toFixed(2))+"mb":parseFloat((t/1e3).toFixed(2))+"kb"},t.prototype.prettyCreatedAt=function(t){var e;return e=new Date(t),e.toLocaleDateString()},t.prototype.to_json=function(){return _.pick(this,"url","thumb","height","width","id","alt_text","border","alignment")},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.InfiniteScrollListing=function(){function e(e,n){this.handleAjaxCompletion=t(this.handleAjaxCompletion,this),this.handleFailure=t(this.handleFailure,this),this.handleAppear=t(this.handleAppear,this),this.$element=$(e),this.options=$.extend(this.defaultOptions(),n),this.tokenOffset=this.options.tokenOffset,this.rowTemplate=Handlebars.compile(this.options.$template)}return e.prototype.defaultOptions=function(){return{tokenOffset:"",loadingIndicatorSelector:"#profile_loader",$loadingIndicator:this.$element.find("#profile_loader"),$template:$("#profile_row").html(),$appendableContainer:this.$element.find("table tbody")}},e.prototype.init=function(){return this.options.$loadingIndicator.appear(),this.bindEvents(),this.activateLoadingIndicator()},e.prototype.bindEvents=function(){return this.$element.on("appear",this.options.loadingIndicatorSelector,this.handleAppear)},e.prototype.handleAppear=function(){return null===this.tokenOffset?this.completeScrolling():this.requestNextPage()},e.prototype.handleFailure=function(){return Nlvx.FlashMessageHandler.add("danger","There was an error. Please reload the page.")},e.prototype.handleAjaxCompletion=function(t){var e,n,i,r,o;for(this.tokenOffset=t.offset,e=$("<div></div>"),o=t.items,i=0,r=o.length;r>i;i++)n=o[i],e.append(this.rowTemplate(n));return this.options.$appendableContainer.append(e.html()),null===this.tokenOffset?this.completeScrolling():void 0},e.prototype.completeScrolling=function(){return this.options.$loadingIndicator.remove()},e.prototype.activateLoadingIndicator=function(){return this.options.$loadingIndicator.text("Loading...")},e.prototype.requestNextPage=function(){return $.ajax({url:this.options.$loadingIndicator.data("url"),data:{offset:this.tokenOffset}}).done(this.handleAjaxCompletion).fail(this.handleFailure)},e}()}.call(this),function(){Nlvx.MaintenanceMessage=function(){function t(){console.log("Nlvx.MaintenanceMessage: Don't instantiate me. Use my static showMessage function.")}var e,n,i,r,o,a;return o=!1,a={},e=null,r=function(){return'<div class="alert alert-info maintenance-message {{ sanitize model.cssClassNames }}">{{ sanitize model.messageText }}</div>'},i=function(){return $.get("https://uiux.s3.amazonaws.com/nlvx/"+(window.Nlvx.isProduction?"":"staging_")+"maintenance_message.json").done(function(t){return o=!1,a=t}).fail(function(t,e,n){return console.log(e,n)})},n=function(){var t;return(t=Handlebars.compile(r()))({model:a})},t.showMessage=function(t){var r;if(!o)return this.hideMessage(),o=!0,r=i(),r.done(function(){return _.find(a.affectedUrls,function(t){return window.location.href.match(new RegExp(t))})?(e=$(n()),new Date(a.expirationDate)>new Date?$(t).prepend(e):void 0):void 0})},t.hideMessage=function(){return e&&e.remove()},t}(),Handlebars.registerHelper("sanitize",function(t){return Nlvx.Sanitizers.removeJavascript(t)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.NotificationForm=function(){function e(e){this.confirmation=t(this.confirmation,this),this.$target=$(e)}return e.prototype.bindEvents=function(){return this.$target.on("ajax:success",this.confirmation)},e.prototype.clearForm=function(){return $("#user_profile_notification_email").val("")},e.prototype.confirmation=function(){var t,e;return t=$("#user_profile_notification_email").val(),e=/^[\w-]+(?:\.[\w-]+)*@(?:[\w-]+\.)+[a-zA-Z]{2,7}$/,t.match(e)?Nlvx.FlashMessageHandler.add("success","You have successfully changed your email for notifications."):(Nlvx.FlashMessageHandler.add("danger","Please enter a valid email address."),this.clearForm())},e}()}.call(this),function(){Nlvx.OnOffSwitch=function(){function t(t,e,n){var i,r,o;this.$input=t,this.$modal=null!=e?e:null,this.state=n,this.state=this.$input.is(":checked"),(null!=(o=this.$modal)?o.length:void 0)&&(this.$modal.on("click",".confirm",function(t){return function(){return t.toggle()}}(this)),r=this.$input.attr("id"),r&&(i=$("label[for='"+r+"']"),i.on("click",function(t){return function(e){return e.preventDefault(),t.state?t.toggle():t.$modal.modal({show:!0,backdrop:!1})}}(this)))),this.$input.on("change",function(t){return function(){return t.state=t.$input.is(":checked"),t.state?(t.on(),$(t).trigger("on")):(t.off(),$(t).trigger("off"))}}(this))}return t.prototype.toggle=function(){return this.state?(this.off(),$(this).trigger("off")):(this.on(),$(this).trigger("on"))},t.prototype.on=function(){return this.state=!0,this.$input.get(0).checked=!0},t.prototype.off=function(){return this.state=!1,this.$input.get(0).checked=!1},t.prototype.set=function(t){return this.state=t,this.state?this.on():this.off()},t}()}.call(this),function(){Nlvx.Preview=function(){function t(t){e=$(t)}var e,n,i,r;return e=null,n=null,t.prototype.render=function(t,n){var o;return e.find("iframe").attr("src",t),e.find('[data-action="mobile-view"]').click(r),e.find('[data-action="desktop-view"]').click(i),o=e.find("a#preview_edit"),n?(o.removeClass("hidden"),o.attr("href",n)):(o.addClass("hidden"),o.removeAttr("href")),e.find("iframe").load(function(){return e.find("iframe").contents().find("a").attr("href","javascript:void(0)")})},r=function(){var t;return t=e.find(".desktop-view"),t.removeClass("desktop-view").hide(),setTimeout(function(){return t.addClass("mobile-view").show()},100)},i=function(){return e.find(".mobile-view").addClass("desktop-view").removeClass("mobile-view")},t}()}.call(this),function(){Nlvx.PreviewModal=function(){function t(t){e=$(t)}var e,n;return e=null,n=null,t.prototype.render=function(t,n){var i;return null==n&&(n=""),e.modal("show"),i=new Nlvx.Preview(e),i.render(t,n)},t}()}.call(this),function(){Nlvx.Sanitizers={removeJavascript:function(t){var e,n,i,r,o,a;if(n=["FSCommand","onAbort","onActivate","onAfterPrint","onAfterUpdate","onBeforeActivate","onBeforeCopy","onBeforeCut","onBeforeDeactivate","onBeforeEditFocus","onBeforePaste","onBeforePrint","onBeforeUnload","onBeforeUpdate","onBegin","onBlur","onBounce","onCellChange","onChange","onClick","onContextMenu","onControlSelect","onCopy","onCut","onDataAvailable","onDataSetChanged","onDataSetComplete","onDblClick","onDeactivate","onDrag","onDragEnd","onDragLeave","onDragEnter","onDragOver","onDragDrop","onDragStart","onDrop","onEnd","onError","onErrorUpdate","onFilterChange","onFinish","onFocus","onFocusIn","onFocusOut","onHashChange","onHelp","onInput","onKeyDown","onKeyPress","onKeyUp","onLayoutComplete","onLoad","onLoseCapture","onMediaComplete","onMediaError","onMessage","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseWheel","onMove","onMoveEnd","onMoveStart","onOffline","onOnline","onOutOfSync","onPaste","onPause","onPopState","onProgress","onPropertyChange","onReadyStateChange","onRedo","onRepeat","onReset","onResize","onResizeEnd","onResizeStart","onResume","onReverse","onRowsEnter","onRowExit","onRowDelete","onRowInserted","onScroll","onSeek","onSelect","onSelectionChange","onSelectStart","onStart","onStop","onStorage","onSyncRestored","onSubmit","onTimeError","onTrackChange","onUndo","onUnload","onURLFlip","seekSegmentTime"],!t)return t;for(r=t,o=0,a=n.length;a>o;o++)for(e=n[o],i=new RegExp("(<|&lt;)([^>]*)"+e+"(=[^>]*)(>|&gt;)","gim");r.match(i);)r=r.replace(i,"$1$2data-noop$3$4");return r=r.replace(/([src|href]="?)javascript(:)/gi,"$1noop$2"),r=r.replace(/([src|href|data]=["|']?)\s*data:text\/html/gi,"$1noop"),r=r.replace(/<script[\s\S]*?\/script>/gi,""),r=r.replace(/<script[\s\S]*/gi,"")},removeIframes:function(t){return t=t.replace(/<iframe[\s\S]*?\/iframe>/gi,""),t.replace(/<iframe[\s\S]*/gi,"")},sanitize:function(t){return this.removeJavascript(this.removeIframes(t))},removeCarriages:function(t){return null==t&&(t=""),t.replace(/\r\n*/g,"\n")}}}.call(this),function(){Nlvx.SelectableList=function(){function t(t){this.dependantSelectBoxesSelector="input.dependant-checkbox",this.selectAllInputSelector="input.parent-checkbox",this.$element=$(t),this.$primaryActionButton=$("button[data-primary-action]"),this.$bulkActionButton=$("[data-bulk-action]"),this.init()}return t.prototype.init=function(){return this.displayAppropriateButton()},t.prototype.bindEvents=function(){return $(document).on("change",this.selectAllInputSelector,function(t){return function(e){return t.handleCheckAll(e)}}(this)),this.$element.on("change",this.dependantSelectBoxesSelector,function(t){return function(e){return t.handleIndividualCheck(e)}}(this))},t.prototype.handleCheckAll=function(t){var e;return this.$dependantSelectBoxes=this.$element.find(this.dependantSelectBoxesSelector),e=$(t.currentTarget).is(":checked"),this.$dependantSelectBoxes.prop("checked",e).change()},t.prototype.handleIndividualCheck=function(){return this.displayAppropriateButton()},t.prototype.updateSelectedCount=function(){return this.$bulkActionButton.find("span.selection-count").text(this.getSelectedCount())},t.prototype.getSelectedCount=function(){return this.$dependantSelectBoxes=this.$element.find(this.dependantSelectBoxesSelector),$(this.dependantSelectBoxesSelector+":checked").length},t.prototype.displayAppropriateButton=function(){return this.$dependantSelectBoxes=this.$element.find(this.dependantSelectBoxesSelector),this.$dependantSelectBoxes.is(":checked")?(this.updateSelectedCount(),this.$bulkActionButton.removeClass("hide"),this.$primaryActionButton.addClass("hide")):(this.$bulkActionButton.addClass("hide"),this.$primaryActionButton.removeClass("hide"))},t}()}.call(this),function(){Nlvx.SendCreditsValidator=function(){function t(){}var e,n,i;return i=function(t,n){var i;return e(n)?!0:404===n.status?!0:_.include([4,5],Math.floor(n.status/100))?!0:(i=t,!(!i.email_complete&&i.email_required||!i.mfa_complete&&i.mfa_required||!i.whitelabel_complete&&i.whitelabel_required))},n=function(t,n,i){var r;return e(i)?!0:_.include([4,5],Math.floor(i.status/100))?!0:(r=n,(null!=r?r.is_hard_limit:void 0)?(null!=r?r.remain:void 0)?t<=r.remain:!1:!0)},e=function(t){return"string"==typeof t},t.validate=function(t,e){return $.when(window.tiara.signup_status).always(function(r,o,a){return $.when(window.tiara.credits).always(function(o,s,l){return n(t,o,l)?e.canSend():i(r,a)?e.insufficientCredits():e.unverified()})})},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Nlvx.StatsGraphController=function(){function n(e,n,i){null==n&&(n=null),null==i&&(i=new Nlvx.CoordinateLocator),this.positionHovercard=t(this.positionHovercard,this),this.hideHovercard=t(this.hideHovercard,this),this.showHovercard=t(this.showHovercard,this),this.render=t(this.render,this),this.computeGraphData=t(this.computeGraphData,this),this.coordinateLocator=i,this.names={requests:"requests",delivers:"delivers",opens:"opens",opens_unique:"unique_opens",clicks:"clicks",clicks_unique:"unique_clicks",unsubscribes_unique:"unique_unsubscribes",bounces:"bounces",bounces_unique:"unique_bounces",spam_reports:"spam_reports",spam_reports_unique:"unique_spam_reports",invalid_emails:"invalid_emails"},this.data=[],this.disabledFilters=n,this.$graphContainer=e,this.builder=new Nlvx.StatsGraphView(this.$graphContainer,n)}return n.TYPE_NAMES={requests:"Requests",delivers:"Delivered",opens:"Opens",unique_opens:"Unique Opens",clicks:"Clicks",unique_clicks:"Unique Clicks",unique_unsubscribes:"Unsubscribes",bounces:"Bounce Drops",unique_bounces:"Bounces",spam_reports:"Spam Report Drops",unique_spam_reports:"Spam Reports",invalid_emails:"Invalid Emails"},n.prototype.initialize=function(t,e){var n;return n=$.get(t),n.success(function(t){return function(e){return t.computeGraphData(e),t.render()}}(this)),this.builder.setNumDays(e),$(window).resize(_.debounce(this.render,100))},n.prototype.computeGraphData=function(t){return _.each(this.names,function(n){return function(i,r){var o,a,s;for(s={type:i,data:[],enabled:n.disabledFilters&&e.call(n.disabledFilters,i)>=0?!1:!0},a=null,_.each(t,function(t){return s.data.push([moment(t.day).valueOf(),t[r]]),a=t.day}),o=t.length;7>o;)s.data.push([moment(a).add(o-t.length+1,"days").valueOf(),0]),o++;return n.data.push(s)}}(this))},n.prototype.render=function(){return this.builder.drawGraph(this.data,{minX:this.getMinDate(),maxX:this.getMaxDate(),minY:0,maxY:this.getMaxValue(),tickFormat:this.yTickFormat,mouseover:this.showHovercard,mouseout:this.hideHovercard,mousemove:this.positionHovercard})},n.prototype.showHovercard=function(){return this.builder.showHovercard()},n.prototype.hideHovercard=function(){return this.builder.hideHovercard()},n.prototype.positionHovercard=function(){var t;return t=this.getNearestPoint(),t?this.builder.moveHovercardTo(t,this.getTypeLabel(t.type)):this.hideHovercard()},n.prototype.getNearestPoint=function(){return this.coordinateLocator.getNearestPoint(this._enabledLines(),this.builder.getCurrentPoint())},n.prototype._enabledLines=function(){return _.filter(this.data,function(t){return t.enabled})},n.prototype.toggleLine=function(t){var e;return e=_.find(this.data,function(e){return e.type===t}),e.enabled=!e.enabled},n.prototype.yTickFormat=function(t){var e,n;return e=1e6,n=1e3,t>=e?""+t/e+"m":t>=n?""+t/n+"k":t},n.prototype.getMinDate=function(){return this._getDataBound(function(t,e){return t>e},Number.MAX_VALUE,0)},n.prototype.getMaxDate=function(){return this._getDataBound(function(t,e){return e>t},Number.MIN_VALUE,0)},n.prototype.getMaxValue=function(){return this._getDataBound(function(t,e){return e>t},-1,1)},n.prototype.getTypeLabel=function(t){return Nlvx.StatsGraphController.TYPE_NAMES[t].toUpperCase()},n.prototype._getDataBound=function(t,e,n){return _(this.data).reduce(function(i,r){var o;return o=_(r.data).reduce(function(e,i){return t(e,i[n])?i[n]:e},e),t(i,o)?o:i},e)},n}(),Nlvx.StatsGraphControllerNoAjax=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.initialize=function(t,e){return this.builder.setNumDays(e),$(window).resize(_.debounce(this.render,100)),this.computeGraphData(t),this.render()},e}(Nlvx.StatsGraphController)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};Nlvx.StatsGraphView=function(){function n(e,n){this.$graphContainer=e,this.yScaler=t(this.yScaler,this),this.xScaler=t(this.xScaler,this),this.margins={top:10,right:20,bottom:40,left:50},this.drawArea=this.$graphContainer.find(".draw-area").get(0),this.numberOfDays=7,this.disabledFilters=n}return n.prototype.drawGraph=function(t,e){return this.data=t,this.config=e,$(this.drawArea).empty(),this.setDimensions(),this.createGraph(),this.setScales(),this.applyYAxis(),this.applyXAxis(),this.draw(),this.drawHovercard(),this.drawOverlay(e)},n.prototype.setNumDays=function(t){return this.numberOfDays=t},n.prototype.setDimensions=function(){return this.drawAreaWidth=this.$graphContainer.width()-10,this.drawAreaHeight=390,this.width=this.drawAreaWidth-(this.margins.left+this.margins.right),this.height=this.drawAreaHeight-(this.margins.top+this.margins.bottom)},n.prototype.drawHovercard=function(){return this.hovercard=this.graph.append("g").attr("class","hovercard").style("display","none"),this.circle=this.hovercard.append("circle").attr("class","hovercard-circle").attr("fill","blue").attr("stroke","white").attr("stroke-width","2").attr("r",6.25),this.label=this.hovercard.append("text").attr("class","stat-label").style("font-weight","bold").attr("y",-6),this.box=this.hovercard.insert("rect",".hovercard-circle").attr("height","62").attr("fill","white").attr("stroke","#eee").attr("transform","translate(0, -31)").attr("rx","3").attr("ry","3"),this.value=this.hovercard.append("text").attr("class","stat-value").attr("stroke","blue").attr("dy",".35em").style("font-size","17px").attr("y",9)},n.prototype.drawOverlay=function(t){return this.overlay=this.graph.append("rect").attr("class","overlay").attr("width",this.width).attr("height",this.height),this.overlay.on("mouseover",t.mouseover).on("mouseout",t.mouseout).on("mousemove",t.mousemove)},n.prototype.showHovercard=function(){return this.hovercard.style("display",null)},n.prototype.hideHovercard=function(){return this.hovercard.style("display","none")},n.prototype.moveHovercardTo=function(t,e){var n,i,r,o;return this.label.text(e),r=this.label.node().getBBox().width+44,o=this.value.node().getBBox().width+44,n=r>o?r:o,i=this._getBoxX(n,t),this.hovercard.attr("transform","translate("+this.xScale(t.x)+","+this.yScale(t.y)+")"),this.box.attr("width",n),this.box.attr("transform","translate("+i+", -31)"),this.label.attr("x",22+i),this.value.attr("x",22+i),this.circle.attr("class","hovercard-circle "+t.type),this.value.text(t.y).attr("class","stat-value "+t.type)},n.prototype._getBoxX=function(t,e){return this.xScale(e.x)+t>this.graph.node().getBBox().width?-t:0},n.prototype.getCurrentPoint=function(){var t;return t=d3.mouse(this.overlay[0][0]),[this.xScale.invert(t[0]),this.yScale.invert(t[1])]},n.prototype.createGraph=function(){return this.graph=d3.select(this.drawArea).append("svg:svg").attr("viewBox","0 0 "+this.drawAreaWidth+" "+this.drawAreaHeight).attr("preserveAspectRatio","xMidYMid meet").append("svg:g").attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},n.prototype.setScales=function(){return this.xScale=d3.time.scale().domain([this.config.minX,this.config.maxX]).range([0,this.width]),this.yScale=d3.scale.linear().domain([this.config.minY,1.1*this.config.maxY]).range([this.height,0])},n.prototype.applyYAxis=function(){return this.graph.append("svg:g").attr("transform","translate(-5, 0)").attr("class","y-axis").call(this.yAxis()).attr("transform","translate("+this.width+", 0)")},n.prototype.applyXAxis=function(){return 7===this.numberOfDays?(this.graph.append("svg:g").attr("transform","translate(0, "+this.height+")").attr("class","x-axis").call(this.xAxisWeekDay()),this.graph.append("svg:g").attr("transform","translate(0, "+(this.height+18)+")").attr("class","x-axis-date").call(this.xAxisWeekDate())):(this.graph.append("svg:g").attr("transform","translate(0, "+this.height+")").attr("class","x-axis").call(this.xAxisMonthDays()),this.graph.append("svg:g").attr("transform","translate(0, "+(this.height+14)+")").attr("class","x-axis-month").call(this.xAxisMonthNames()))},n.prototype.draw=function(){var t,e,n,i,r,o;for(e=d3.svg.line().x(this.xScaler).y(this.yScaler),r=this.data,o=[],n=0,i=r.length;i>n;n++)t=r[n],o.push(this.drawLine(t,e(t.data)));return o},n.prototype.drawLine=function(t,n){var i,r;return i=this.disabledFilters&&(r=t.type,e.call(this.disabledFilters,r)>=0)?!1:!0,i?this.graph.append("svg:path").attr("d",n).attr("class",t.type):this.graph.append("svg:path").attr("d",n).attr("class",t.type).style("display","none")},n.prototype.xScaler=function(t){return this.xScale(t[0])},n.prototype.yScaler=function(t){return this.yScale(t[1])},n.prototype.xAxisWeekDay=function(){return d3.svg.axis().scale(this.xScale).tickSize(5).ticks(this.numberOfDays).tickFormat(d3.time.format("%a")).orient("bottom")},n.prototype.xAxisWeekDate=function(){return d3.svg.axis().scale(this.xScale).tickSize(0).ticks(this.numberOfDays).tickFormat(d3.time.format("%_m/%d")).orient("bottom")},n.prototype.xAxisMonthDays=function(){return d3.svg.axis().scale(this.xScale).tickSize(5).ticks(30).tickFormat(d3.time.format("%d")).orient("bottom")},n.prototype.xAxisMonthNames=function(){var t;return t=0,d3.svg.axis().scale(this.xScale).tickSize(5).orient("bottom").ticks(30).tickFormat(function(e){var n;return t++,1===e.getDate()||1===t?(n=d3.time.format("%b"))(e):null})},n.prototype.yAxis=function(){return d3.svg.axis().scale(this.yScale).ticks(6).tickFormat(this.config.tickFormat).tickSize(this.width).orient("left")
},n}()}.call(this),function(){var t;t=function(){var t;return t=function(){var t,e,n;return t=$("nav.subnav"),t.length?(n=t.offset().top,e=$(window),e.scroll(function(){return function(){return e.scrollTop()>n+76?t.addClass("sticky"):t.removeClass("sticky")}}(this))):void 0},{init:function(){return t()}}}(),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=SendGridPalette:"object"==typeof window&&"object"==typeof window.document&&(window.StickySubNav=t)}.call(this),function(){Nlvx.TemplateVersionEditor=function(){function t(t,l,u){o=$(t),e=$(".version_html_editor"),i=$(".version_plain_editor"),n=o.find("#version_html_content"),r=o.find("#version_plain_content"),a=l,w=u,s=$("#version_name_input"),""===s.val()&&s.focus()}var e,n,i,r,o,a,s,l,u,c,h,d,p,f,g,m,v,y,b,w,_;return o=null,e=null,i=null,n=null,r=null,l=null,u=null,a=null,w=null,s=null,t.prototype.loadAceEditor=function(){return l=ace.edit(e[0]),l.setTheme("ace/theme/tomorrow_night"),l.getSession().setMode("ace/mode/html"),u=ace.edit(i[0]),u.setTheme("ace/theme/tomorrow_night"),u.getSession().setMode("ace/mode/text")},t.prototype.bindEvents=function(){return o.find(".html_toggle").click(v),o.find(".plain_text_toggle").click(b),o.find(".import_from_html").click(h),o.find("#htmlplain_modal .btn-primary").click(d),o.find('[data-action="test"]').click(f)},t.prototype.saveContent=function(){return _()?c()?(y(),!1):d():void 0},f=function(t){var e,n,i;return e=t.target.getAttribute("data-path"),n=t.target.getAttribute("data-send-test-path"),i=t.target.getAttribute("data-subject"),a.render(e,n,i)},d=function(){return $(".disabling-div").css("display","block").css("position","fixed"),n.val(Nlvx.Sanitizers.removeJavascript(l.getValue())),r.val(u.getValue()),o.trigger("valuesSaved")},v=function(){return e.show(),i.hide(),$(".html_toggle").addClass("active"),$(".plain_text_toggle").removeClass("active")},b=function(){return e.hide(),i.show(),p()&&m(),c()&&g(),$(".plain_text_toggle").addClass("active"),$(".html_toggle").removeClass("active")},g=function(){return o.find("#conversion_warning_modal").modal({show:!0,backdrop:!1})},m=function(){return o.find("#empty_plaintext_warning_modal").modal({show:!0,backdrop:!1})},y=function(){return o.find("#htmlplain_modal").modal({show:!0,backdrop:!1})},p=function(){return""!==Nlvx.Converters.html_to_plain_text(Nlvx.Sanitizers.removeJavascript(l.getValue()))&&""===u.getValue()},c=function(){return""!==u.getValue()&&u.getValue()!==Nlvx.Converters.html_to_plain_text(Nlvx.Sanitizers.removeJavascript(l.getValue()))},h=function(){return u.setValue(Nlvx.Converters.html_to_plain_text(Nlvx.Sanitizers.removeJavascript(l.getValue())))},_=function(){return s.val()&&s.val().trim()?!0:(Nlvx.FlashMessageHandler.add("danger","The version name is required."),!1)},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.ToggleableTarget=function(){function e(e,n){this.handleClick=t(this.handleClick,this),this.$el=$(e),this.options=$.extend(this.defaultOptions(),n)}return e.prototype.defaultOptions=function(){return{hideClass:"hide"}},e.prototype.init=function(t){return t&&this.showHide(t),this.bindEvents()},e.prototype.bindEvents=function(){return this.$el.on("click",this.handleClick)},e.prototype.handleClick=function(t){return this.showHide($(t.currentTarget))},e.prototype.showHide=function(t){var e,n;return e=$(t.data("hide")),n=$(t.data("show")),this.toggleHiddenClass(e,n),this.toggleHiddenAttributes(e,n)},e.prototype.toggleHiddenClass=function(t,e){return t.addClass(this.options.hideClass),e.removeClass(this.options.hideClass)},e.prototype.toggleHiddenAttributes=function(t,e){var n,i,r,o,a;for(o=this.options.hideAttributes,a=[],i=0,r=o.length;r>i;i++)n=o[i],t.prop(n,!0),a.push(e.prop(n,!1));return a},e}()}.call(this),function(){var t;t=function(){function t(t){this.$wrapper=t,this.$trigger=this.$wrapper.find("[role='sg-tooltip-trigger']"),this.$popup=this.$wrapper.find("[role='sg-tooltip-popup']"),this.overTimeout=null,this.outTimeout=null,this.$wrapper.on({mouseover:_.bind(this.onMouseOver,this),mouseout:_.bind(this.onMouseOut,this)})}return t.prototype.onMouseOver=function(){return window.clearTimeout(this.outTimeout),this.overTimeout=window.setTimeout(function(t){return function(){return t.setPopupPosition(),t.$popup.show()}}(this),300)},t.prototype.onMouseOut=function(){return window.clearTimeout(this.overTimeout),this.outTimeout=window.setTimeout(function(t){return function(){return t.$popup.hide()}}(this),500)},t.prototype.setPopupPosition=function(){var t;return t=this.getPopupPosition(),this.$popup.css({left:t.left,top:t.top})},t.prototype.getPopupPosition=function(){var t,e;return e=this.$trigger.offset(),t=this.getPopupSize(),{left:e.left-t.width/2,top:e.top-t.height-this.$wrapper.height()-10}},t.prototype.getPopupSize=function(){return{height:this.$popup.height(),width:this.$popup.width()}},t}(),$(document).ready(function(){return $("[role='sg-tooltip']").each(function(){return new t($(this))})})}.call(this),function(){Nlvx.UpdateCount=function(){function t(t,e,n,i,r){this.id=t,this.url=e,this.$el=n,this.refresh=null!=i?i:!0,this.callback=r,this.$el.find(".list-count").html('<div class="icon-spinner-wrapper"></div><div class="loading-icon"><div class="outer"></div><div class="inner"></div></div></div>'),this.updateCount()}return t.prototype.updateCount=function(){var t,e;if(!document.hidden)return t=0,(e=function(e){return function(){return $.ajax({url:e.url,data:{query_id:e.id},success:function(n){var i,r;return null!=e.callback?e.callback(n.count):(t+=1,i=n.count,r=!!(i&&i>0),e.$el.find(".list-count").html(r?i:"\u2014"))}})}}(this))()},t.prototype.getCount=function(){return parseInt(this.$el.find(".list-count").html())||0},t}()}.call(this),function(){Nlvx.UrlHelper=function(){function t(){}return t.readHash=function(){return window.location.hash.replace(/^#/,"")},t}()}.call(this),function(){Nlvx.WelcomePageShower={checkSawWelcomePage:function(){return localStorage.getItem("app-sawWelcomePage")||$.cookie("saw_welcome_page")?void 0:window.location.href="/marketing_campaigns/ui/welcome"}}}.call(this),function(){Nlvx.WindowHandler=function(){function t(){}return t.reload=function(){return location.reload()},t.redirect=function(t){return location.href=t},t}()}.call(this),window.Nlvx=window.Nlvx||{},window.Nlvx.Routers=window.Nlvx.Routers||{},window.Nlvx.ContentEditor=window.Nlvx.ContentEditor||{},function(){Nlvx.ContentEditor.ScreenBehaviors={overrideDeleteKey:function(t,e){var n;return n="keydown.dragndropdeletekeyoverride",t?($(document).off(n),$(document).on(n,function(){return function(t){var n;return n=t.keyCode||t.which,8!==n&&46!==n||!e?void 0:e(t)}}(this))):$(document).off(n)}}}.call(this),function(){Nlvx.ContentEditor.EditorViewBase=function(){function t(){}return t.prototype.isInputFocused=function(){var t;return t=$(":focus"),t.is("input")||t.is("textarea")||t.hasClass("cke_editable")},t}()}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Nlvx.DragAndDropEditor=function(){function n(){this.$moduleDragArea=$("[role='drag-drop-modules-list']"),this.$moduleArea=$("[role='module-area']"),this.$moduleDropArea=$("[role='module-drop-area']"),this.$preHeaderArea=$("[role='pre-header-area']"),this.$footerArea=$("[role='footer-area']"),this.$editingArea=$("[role='module-editing-area']"),this.$toolbar=$("[role='module-editor-toolbar']"),this.dndTemplateActive=!0,this.validModules=Nlvx.DragAndDropEditor.validModules,this.moduleDragtemplate=Handlebars.compile(e),this.finalHTMLTemplate=Handlebars.compile(t),this.styleTab=Nlvx.DragAndDropEditor.styleTab,$("<div/>").ckeditor(Nlvx.DragAndDropEditor.ckConfig),this.setupDropArea(),this.setupDragArea(),Nlvx.ImageLibraryStore.populate(),this.styleTab.init()}var r,o,a,s,l,u;return l=[{name:"Width",type:"NumberInput",unit:"PX",canBeBlank:!0,shouldUpdateOnKeyUp:!1,minimumValue:200,attributeName:"containerwidth"},{name:"Background Color",type:"ColorPicker",attributeName:"containerbackground"},{name:"Padding",type:"NumberInput",unit:"PX",inputs:4,attributeName:"containerpadding"}],a={containerwidth:600,containerbackground:"#FFFFFF",containerpadding:"0,0,0,0"},o=[{name:"Background Color",type:"ColorPicker",attributeName:"bodybackground"},{name:"Text Color",type:"ColorPicker",attributeName:"bodytextcolor"},{name:"Link Color",type:"ColorPicker",attributeName:"bodylinkcolor"},{name:"",type:"Divider"},{name:"Font Family",type:"Select",attributeName:"bodyfontname",options:[{name:"Helvetica",value:"helvetica,arial,sans-serif"},{name:"Arial",value:"arial,sans-serif"},{name:"Arial Black",value:'"Arial Black",arial,sans-serif'},{name:"Geneva",value:"geneva, arial, sans-serif"},{name:"Lucida Sans Unicode/Grande",value:'"Lucida Sans Unicode", "Lucida Grande", sans-serif'},{name:"Tahoma",value:"tahoma,sans-serif"},{name:"Trebuchet MS",value:"trebuchet ms,sans-serif"},{name:"Verdana",value:"verdana,arial,sans-serif"},{name:"Impact",value:"impact, charcoal, sans-serif"},{name:"Courier",value:"courier, serif"},{name:"Courier New",value:"courier new, serif"},{name:"Lucida Console",value:'"Lucida Console",courier, serif'},{name:"Georgia",value:"georgia, times new roman, serif"},{name:"Palatino",value:"Palatino, georgia, serif"},{name:"Times New Roman",value:"times new roman, serif"},{name:"Comic Sans",value:'"Comic Sans MS", "Marker Felt", sans-serif'}]},{name:"Font Size",type:"NumberInput",unit:"PX",inputs:1,attributeName:"bodyfontsize"}],r={bodybackground:"#FFFFFF",bodytextcolor:"#000000",bodylinkcolor:"#1188e6",bodyfontsize:"14px",bodyfontname:"arial,sans-serif"},u=function(){function t(t,e,n){this.displayName=null!=t?t:"",this.styles=null!=e?e:[],null==n&&(n={}),this.attributes=_.extend({dropped:!0},n),this.$html=$()}return t.prototype.getStyles=function(){return this.styles},t.prototype.isFake=!0,t.prototype.updateAttributes=function(t){return _.extend(this.attributes,t),$(this).trigger("update",{attributes:this.attributes})},t}(),s=function(t){function e(t,n,i){i.tableWidth=i.containerwidth,null!=i.tableWidth&&i.tableWidth>0||(i.tableWidth="100%"),e.__super__.constructor.call(this,t,n,i)}return i(e,t),e.prototype.updateAttributes=function(t){return t.tableWidth=t.containerwidth,null!=t.tableWidth&&t.tableWidth>0||(t.tableWidth="100%"),e.__super__.updateAttributes.call(this,t)},e}(u),n.prototype.onContainerSettingsUpdate=function(t,e){var n,i,r,o,a;return this.resetContainerStyles(),n=e.attributes,null!=n&&(a=n.containerwidth,i=n.containerbackground,r=n.containerpadding,null!=a&&this.$editingArea.width(a),null!=i&&this.$editingArea.css("background-color",i),null!=r&&(o=r.split(",").join("px ").concat("px"),this.$editingArea.css("padding",o))),$(this).trigger("change")},n.prototype.resetContainerStyles=function(){return this.$editingArea.css({width:"",backgroundColor:"",padding:""})},n.prototype.onBodySettingsUpdate=function(t,e){var n,i,r,o,a,s;return this.resetBodyStyles(),n=e.attributes,null!=n&&(i=n.bodybackground,r=n.bodyfontname,o=n.bodyfontsize,s=n.bodytextcolor,a=n.bodylinkcolor,null!=i&&i.length&&this.$moduleArea.css("background-color",i),null!=r&&r.length&&this.$moduleArea.css("font-family",r),null!=o&&this.$moduleArea.css("font-size",""+o+"px"),null!=s&&s.length&&this.$moduleArea.css("color",s),null!=a&&a.length&&(this.$style=$("<style>#module-editing-area a { color: "+a+"; }</style>"),this.$style.appendTo("body"))),$(this).trigger("change")},n.prototype.resetBodyStyles=function(){var t;return null!=(t=this.$style)&&t.remove(),this.$moduleArea.css({backgroundColor:"",fontFamily:"",fontSize:"",color:""})},n.prototype.redraw=function(){return this.dndTemplateActive=!0,this.teardownModules(),this.drawModules(),this.$toolbar.find(".cke:first-child").show()},n.prototype.deactivate=function(){return this.dndTemplateActive=!1},n.prototype.teardownModules=function(){var t,e,n,i,r;for(this.contractDropArea(),this.resetBodyStyles(),this.resetContainerStyles(),i=this.getAllModules(),r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.teardown());return r},n.prototype.drawModules=function(){var t,e,n,i,r,o;for(this.html=Nlvx.ContentEditor.contentCollection.getHTML(),this.parser=new Nlvx.DragAndDropEditor.Parser(this.html),this.createContainerModule(),this.createBodyModule(),n=this.parser.getModules(),i=_.find(n,function(t){return"preheader"===t.getType()}),i?n=_.reject(n,function(t){return"preheader"===t.getType()}):i=new Nlvx.DragAndDropEditor.modules.preheader,_.find(n,function(t){return"footer"===t.getType()})||n.push(new Nlvx.DragAndDropEditor.modules.footer),r=0,o=n.length;o>r;r++)e=n[r],t=e.build(this.$moduleDropArea),"footer"===e.getType()?this.$footerArea.append(t):this.$moduleDropArea.append(t),e.afterBuild(),this.bindModuleEvents(e);return i.build(),i.afterBuild(),this.bindModuleEvents(i),this.renderStyleTab(n)},n.prototype.createContainerModule=function(){var t,e;return e=this.parser.getContainerAttributes(),t=_.extend({},a,e),this.fakeContainerModule=new s("Content Container",l,t),$(this.fakeContainerModule).on("update",_.bind(this.onContainerSettingsUpdate,this)),this.onContainerSettingsUpdate($.Event(),{attributes:this.fakeContainerModule.attributes})},n.prototype.createBodyModule=function(){var t,e;return e=this.parser.getBodyAttributes(),t=_.extend({},r,e),this.fakeBodyModule=new u("Email Body",o,t),$(this.fakeBodyModule).on("update",_.bind(this.onBodySettingsUpdate,this)),this.onBodySettingsUpdate($.Event(),{attributes:this.fakeBodyModule.attributes})},n.prototype.duplicateModule=function(t){var e,n,i,r,o,a,s;return i=t.getHTML(),o=new Nlvx.DragAndDropEditor.Parser(i),r=o.getModules(),n=r[0],e=n.build(t.$parent),t.$html.after(e),n.afterBuild(),n.attributes.dropped=!0,this.$moduleDropArea.sortable("refresh"),this.bindModuleEvents(n),this.renderStyleTab(),null!=(s=n.styleGroup)&&s.openAccordion(),a=n.$html.position().top,null!=a&&this.$moduleArea.animate({scrollTop:a},400),$(this).trigger("change")},n.prototype.bindModuleEvents=function(t){return $(t).off("change remove duplicate renderstyletab renderstyletabandopen"),$(t).on({duplicate:function(e){return function(){return e.duplicateModule(t)}}(this),change:function(t){return function(){return $(t).trigger("change")}}(this),renderstyletab:function(t){return function(){return t.renderStyleTab()}}(this),renderstyletabandopen:function(e){return function(){var n;return e.renderStyleTab(),null!=(n=t.styleGroup)?n.openAccordion(!0):void 0}}(this)})},n.prototype.getModulesHTML=function(){var t,e,n,i,r;return e=this.fakeContainerModule.attributes,t=this.fakeBodyModule.attributes,i=this.getAllModules(),r=new Nlvx.DragAndDropEditor.modules.preheader,i.unshift(r),n=_.map(i,function(t){return t.getHTML()}).join(""),this.finalHTMLTemplate({html:n,active:this.dndTemplateActive,containerSettings:e,bodySettings:t})},n.prototype.setupDragArea=function(){return this.addDragModules(),this.$moduleDragArea.find("li").draggable({connectToSortable:this.$moduleDropArea,helper:"clone",start:_.bind(this.expandDropArea,this),stop:_.bind(this.contractDropArea,this)})},n.prototype.addDragModules=function(){var t,e,n,i,r,o;for(r=this.validModules,o=[],n=0,i=r.length;i>n;n++)e=r[n],e.draggable?(t=$(this.moduleDragtemplate(e)),o.push(this.$moduleDragArea.append(t))):o.push(void 0);return o},n.prototype.setupDropArea=function(){return this.$moduleDropArea.sortable({placeholder:"module-placeholder",handle:".module-controls__move",tolerance:"intersect",items:"> [role='module']",receive:_.bind(this.onDrop,this),stop:_.bind(this.onSortStop,this),start:_.bind(this.onSortStart,this),connectWith:".column-drop-area",helper:function(t,e){var n,i,r,o;return i=e.clone(),n=e.find(".module-controls").clone(),r=$("<div class='sorting-helper-overflow'></div>"),o=$("<div class='sorting-helper'/>"),r.append(i),o.append(r,n),o}})},n.prototype.removeSelectedModules=function(){var t,e,n,i,r;for(i=this.getAllModules(),r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.isSelected()?t.removeModule():void 0);return r},n.prototype.onSortStart=function(){return this.$moduleDropArea.addClass("sorting"),this.expandDropArea()},n.prototype.expandDropArea=function(){var t,e,n,i,r,o;return this.$moduleDropArea.addClass("expanded"),o=this.$moduleArea.outerHeight(),r=this.$toolbar.outerHeight(),i=this.$preHeaderArea.outerHeight(),n=this.$footerArea.outerHeight(),e=this.$moduleDropArea.outerHeight(),t=o-r-i-n,t>e?(this.$moduleDropArea.height(t),this.$moduleDropArea.sortable("refresh")):void 0},n.prototype.contractDropArea=function(){return this.$moduleDropArea.removeClass("expanded"),this.$moduleDropArea.height("auto")},n.prototype.isFromDraggable=function(t){return null!=t.item&&$(t.item).is("[role='drag-drop-module']")},n.prototype.isFromChildSortable=function(t){return null!=t.sender&&$(t.sender).is("[role*='column-']")},n.prototype.isChildSortable=function(t){return null!=t.item&&$(t.item).parent().is("[role*='column-']")},n.prototype.getTypeFromDraggable=function(t){return null!=t.item?$(t.item).data("type"):void 0},n.prototype.getAllModules=function(){var t;return t=this.$preHeaderArea.find("> [role='module']").add(this.$moduleDropArea.find("> [role='module']").add(this.$footerArea.find("> [role='module']"))),_.map(t,function(t){return $(t).data("module")})},n.prototype.onSortStop=function(t,e){var n,i,r,o,a;return o=this.getTypeFromDraggable(e),i=$(e.item),this.isFromDraggable(e)&&this.isValidModuleType(o)?(r=new Nlvx.DragAndDropEditor.modules[o],window.analytics.track("dd_editor",{module_name:r.displayName}),n=r.build(i.parent()),i.replaceWith(n),r.afterBuild(),r.attributes.dropped=!0,this.bindModuleEvents(r),this.$moduleDropArea.sortable("refresh")):r=i.data("module"),this.isFromChildSortable(e)||this.isChildSortable(e)||(this.renderStyleTab(),null!=(a=r.styleGroup)&&a.openAccordion(!this.isFromDraggable(e))),e.helper&&$(e.helper).remove(),this.contractDropArea(),this.$moduleDropArea.removeClass("sorting"),$(this).trigger("change")},n.prototype.isValidModuleType=function(t){var e;return e=_.pluck(this.validModules,"type"),_.contains(e,t)},n.prototype.onDrop=function(t,e){var n,i;return this.isFromChildSortable(e)?(n=$(e.item).data("module"),this.bindModuleEvents(n),this.renderStyleTab(),null!=(i=n.styleGroup)?i.openChildModule(n):void 0):void 0},n.prototype.renderStyleTab=function(t){var e;return null==t&&(t=this.getAllModules()),e={global:[this.fakeBodyModule,this.fakeContainerModule],modules:t},this.styleTab.render(e)},n}(),e='<li class="drag-module drag-module--{{type}}" data-type="{{type}}" role="drag-drop-module">\n  <p class="module-caption">{{displayName}}</p>\n</li>',t='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" {{#if active}}data-dnd="true"{{/if}}>\n<head>\n  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />\n  <!--[if !mso]><!-->\n  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />\n  <!--<![endif]-->\n\n  <!--[if (gte mso 9)|(IE)]><style type="text/css">\n  table {border-collapse: collapse;}\n  table, td {mso-table-lspace: 0pt;mso-table-rspace: 0pt;}\n  img {-ms-interpolation-mode: bicubic;}\n  </style>\n  <![endif]-->\n  <style type="text/css">\n  body {\n    color: {{bodySettings.bodytextcolor}};\n  }\n  body a {\n    color: {{bodySettings.bodylinkcolor}};\n    text-decoration: none;\n  }\n  p { margin: 0; padding: 0; }\n  table[class="wrapper"] {\n    width:100% !important;\n    table-layout: fixed;\n    -webkit-font-smoothing: antialiased;\n    -webkit-text-size-adjust: 100%;\n    -moz-text-size-adjust: 100%;\n    -ms-text-size-adjust: 100%;\n  }\n  img[class="max-width"] {\n    max-width: 100% !important;\n  }\n  @media screen and (max-width:480px) {\n    .preheader .rightColumnContent,\n    .footer .rightColumnContent {\n        text-align: left !important;\n    }\n    .preheader .rightColumnContent div,\n    .preheader .rightColumnContent span,\n    .footer .rightColumnContent div,\n    .footer .rightColumnContent span {\n      text-align: left !important;\n    }\n    .preheader .rightColumnContent,\n    .preheader .leftColumnContent {\n      font-size: 80% !important;\n      padding: 5px 0;\n    }\n    table[class="wrapper-mobile"] {\n      width: 100% !important;\n      table-layout: fixed;\n    }\n    img[class="max-width"] {\n      height: auto !important;\n    }\n    a[class="bulletproof-button"] {\n      display: block !important;\n      width: auto !important;\n      font-size: 80%;\n      padding-left: 0 !important;\n      padding-right: 0 !important;\n    }\n    // 2 columns\n    #templateColumns{\n        width:100% !important;\n    }\n\n    .templateColumnContainer{\n        display:block !important;\n        width:100% !important;\n        padding-left: 0 !important;\n        padding-right: 0 !important;\n    }\n  }\n  </style>\n  {{bodyfontname bodySettings}}\n  {{bodyfontsize bodySettings}}\n</head>\n<body yahoofix="true" style="min-width: 100%; margin: 0; padding: 0; font-size: {{bodySettings.bodyfontsize}}px; font-family: {{bodySettings.bodyfontname}}; color: {{bodySettings.bodytextcolor}}; background-color: {{bodySettings.bodybackground}}; color: {{bodySettings.bodytextcolor}};" data-attributes=\'{{bodysaveattributes bodySettings}}\'>\n  <center class="wrapper">\n    <div class="webkit">\n      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="wrapper" bgcolor="{{bodySettings.bodybackground}}">\n      <tr><td valign="top" bgcolor="{{bodySettings.bodybackground}}" width="100%">\n      <!--[if (gte mso 9)|(IE)]>\n      <table width="{{containerSettings.tableWidth}}" align="center" cellpadding="0" cellspacing="0" border="0">\n        <tr>\n          <td>\n          <![endif]-->\n            <table width="100%" role="content-container" class="outer" data-attributes=\'{{containersaveattributes containerSettings}}\' align="center" cellpadding="0" cellspacing="0" border="0">\n              <tr>\n                <td width="100%"><table width="100%" cellpadding="0" cellspacing="0" border="0">\n                  <tr>\n                    <td>\n                    <!--[if (gte mso 9)|(IE)]>\n                      <table width="{{containerSettings.tableWidth}}" align="center" cellpadding="0" cellspacing="0" border="0">\n                        <tr>\n                          <td>\n                            <![endif]-->\n                              <table width="100%" cellpadding="0" cellspacing="0" border="0" style="width: 100%; max-width:{{maxwidth containerSettings.tableWidth}};" align="center">\n                                <tr><td role="modules-container" style="{{containerpadding containerSettings}} color: {{bodySettings.bodytextcolor}}; text-align: left;" bgcolor="{{containerSettings.containerbackground}}" width="100%" align="left">\n                                  {{{html}}}\n                                </tr></td>\n                              </table>\n                            <!--[if (gte mso 9)|(IE)]>\n                          </td>\n                        </td>\n                      </table>\n                    <![endif]-->\n                    </td>\n                  </tr>\n                </table></td>\n              </tr>\n            </table>\n          <!--[if (gte mso 9)|(IE)]>\n          </td>\n        </tr>\n      </table>\n      <![endif]-->\n      </tr></td>\n      </table>\n    </div>\n  </center>\n</body>\n</html>',Handlebars.registerHelper("maxwidth",function(t){var e;return e=/%/.test(t)?t:""+t+"px",new Handlebars.SafeString(e)}),Handlebars.registerHelper("containersaveattributes",function(t){var e,n;return e={dropped:!0,containerpadding:t.containerpadding,containerwidth:t.containerwidth,containerbackground:t.containerbackground},n=escape(JSON.stringify(e)),new Handlebars.SafeString(n)}),Handlebars.registerHelper("containerpadding",function(t){var e;return e=t.containerpadding||"",0!==e&&(e=e.split(",").join("px ")),new Handlebars.SafeString("padding: "+e+"px;")}),Handlebars.registerHelper("bodysaveattributes",function(t){var e,n;return e={dropped:!0,bodybackground:t.bodybackground,bodyfontname:t.bodyfontname,bodytextcolor:t.bodytextcolor,bodylinkcolor:t.bodylinkcolor,bodyfontsize:t.bodyfontsize},n=escape(JSON.stringify(e)),new Handlebars.SafeString(n)}),Handlebars.registerHelper("bodyfontname",function(t){var e;return e=null!=t.bodyfontname&&t.bodyfontname.length?"<style>\n  body, p, div { font-family: "+t.bodyfontname+"; }\n</style>":"",new Handlebars.SafeString(e)}),Handlebars.registerHelper("bodyfontsize",function(t){var e;return e=null!=t.bodyfontsize&&t.bodyfontsize>0?"<style>\n  body, p, div { font-size: "+t.bodyfontsize+"px; }\n</style>":"",new Handlebars.SafeString(e)}),Nlvx.DragAndDropEditor.validModules=[{type:"image",displayName:"Image",draggable:!0},{type:"imagetext",displayName:"Image & Text",draggable:!0},{type:"text",displayName:"Text",draggable:!0},{type:"wysiwyg",displayName:"Wysiwyg",draggable:!0},{type:"button",displayName:"Button",draggable:!0},{type:"spacer",displayName:"Space",draggable:!0},{type:"divider",displayName:"Divider",draggable:!0},{type:"columns",displayName:"Columns",draggable:!0},{type:"preheader",displayName:"Pre-Header",draggable:!1},{type:"footer",displayName:"Footer",draggable:!1},{type:"social",displayName:"Social",draggable:!0}],Nlvx.DragAndDropEditor.ckConfig={startupFocus:!0,title:!1,sharedSpaces:{top:"module-editor__toolbar"},toolbar:[{name:"colors",items:["TextColor","BGColor"]},{name:"styles",items:["Format","Font","FontSize"]},{name:"basic styles",items:["Bold","Italic","Underline","RemoveFormat"]},{name:"paragraph",items:["JustifyLeft","JustifyCenter","JustifyRight"]},{name:"lists",items:["NumberedList","BulletedList"]},{name:"misc",items:["Table","Imagelibrary","Sglink","HorizontalRule"]}]}}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.DragAndDropEditor.ColumnsEditor=function(){function e(e,n,i){var r,o;this.$moduleDropArea=e,this.innerHTML=null!=n?n:"",this.columnModule=i,this.onModuleRenderStyleTabAndOpen=t(this.onModuleRenderStyleTabAndOpen,this),this.onModuleRemove=t(this.onModuleRemove,this),this.onModuleChange=t(this.onModuleChange,this),this.$moduleDragArea=$("[role='drag-drop-modules-list']"),this.$moduleParentDropArea=$("[role='module-drop-area']"),r=["columns","imagetext"],this.validModules=_.reject(Nlvx.DragAndDropEditor.validModules,function(t){return _.contains(r,t.type)}),this.styleTab=Nlvx.DragAndDropEditor.styleTab,this.setupDropArea(),this.setupDragArea(),(null!=(o=this.innerHTML)?o.length:void 0)&&this.drawModules()}return e.prototype.deactivate=function(){},e.prototype.drawModules=function(){var t,e,n,i,r;for(this.parser=new Nlvx.DragAndDropEditor.Parser(this.innerHTML),n=this.parser.getModules(),i=0,r=n.length;r>i;i++)e=n[i],t=e.build(this.$moduleDropArea),this.$moduleDropArea.append(t),e.afterBuild(),this.bindModuleEvents(e);return this.renderStyleTab(),this.setEmptyIfEmpty()},e.prototype.onModuleChange=function(){return $(this).trigger("change")},e.prototype.onModuleRemove=function(){return this.setEmptyIfEmpty(),$(this).trigger("removeChild")},e.prototype.onModuleRenderStyleTabAndOpen=function(){return $(this).trigger("renderstyletabandopen")},e.prototype.duplicateModule=function(t){var e,n,i,r,o,a;return i=t.getHTML(),o=new Nlvx.DragAndDropEditor.Parser(i),r=o.getModules(),n=r[0],e=n.build(t.$parent),t.$html.after(e),n.afterBuild(),n.attributes.dropped=!0,this.bindModuleEvents(n),this.$moduleDropArea.sortable("refresh"),this.renderStyleTab(),null!=(a=this.columnModule.styleGroup)&&a.openChildModule(n),this.$moduleParentDropArea.removeClass("expanded"),this.$moduleDropArea.removeClass("sorting"),$(this).trigger("change")},e.prototype.bindModuleEvents=function(t){return $(t).off("change remove renderstyletabandopen duplicate"),$(t).on({change:this.onModuleChange,remove:function(e){return function(){return e.onModuleRemove(t)}}(this),renderstyletabandopen:this.onModuleRenderStyleTabAndOpen,duplicate:function(e){return function(){return e.duplicateModule(t)}}(this)})},e.prototype.setupDragArea=function(){return this.$moduleDragArea.find("li").draggable("option","connectToSortable","[role='module-drop-area'],.column-drop-area")},e.prototype.setupDropArea=function(){return this.$moduleDropArea.sortable({placeholder:"module-placeholder",handle:".module-controls__move",tolerance:"pointer",items:"> [role='module']",receive:_.bind(this.onDrop,this),stop:_.bind(this.onSortStop,this),start:_.bind(this.onSortStart,this),connectWith:".column-drop-area,#module-drop-area",helper:function(t,e){var n,i,r;return n=e.clone(),i=$("<div class='sorting-helper-overflow'></div>"),r=$("<div class='sorting-helper'/>"),i.append(n),r.append(i),r}})},e.prototype.onSortStart=function(t,e){return e.item.is("[role='drag-drop-module']")?void 0:(this.$moduleDropArea.addClass("sorting"),this.$moduleParentDropArea.addClass("expanded"))},e.prototype.isFromDraggable=function(t){return null!=t.item&&$(t.item).is("[role='drag-drop-module']")},e.prototype.isFromChildSortable=function(t){return null!=t.sender&&$(t.sender).is("[role*='column-']")},e.prototype.isLeavingChildSortable=function(t){var e,n;return e=this.$moduleDropArea.closest("[role='module']"),null!=t.item&&(n=$(t.item).closest("[data-type='columns']")),!e.is(n)&&!this.isFromDraggable(t)},e.prototype.isFromParentSortable=function(t){return null!=t.sender&&$(t.sender).is("[role='module-drop-area']")},e.prototype.getTypeFromDraggable=function(t){return null!=t.item?$(t.item).data("type"):void 0},e.prototype.onSortStop=function(t,e){var n,i,r,o,a;return o=this.getTypeFromDraggable(e),i=$(e.item),r=null,this.isFromDraggable(e)&&this.isValidModuleType(o)?(r=new Nlvx.DragAndDropEditor.modules[o],n=r.build(i.parent()),i.replaceWith(n),r.afterBuild(),r.attributes.dropped=!0,this.bindModuleEvents(r),this.$moduleDropArea.sortable("refresh")):this.isFromDraggable(e)||(r=i.data("module")),null!=r?(this.isLeavingChildSortable(e)||(this.renderStyleTab(),null!=(a=this.columnModule.styleGroup)&&a.openChildModule(r,!this.isFromDraggable(e))),this.setEmptyIfEmpty(),e.helper&&$(e.helper).remove(),this.$moduleParentDropArea.removeClass("expanded"),this.$moduleDropArea.removeClass("sorting"),$(this).trigger("change")):$(e.item).remove()},e.prototype.isValidModuleType=function(t){var e;return e=_.pluck(this.validModules,"type"),_.contains(e,t)},e.prototype.setEmptyIfEmpty=function(){return this.$moduleDropArea.find("> [role='module']").length?this.$moduleDropArea.removeClass("empty"):this.$moduleDropArea.addClass("empty")},e.prototype.onDrop=function(t,e){var n,i;return(this.isFromParentSortable(e)||this.isFromChildSortable(e))&&(n=$(e.item).data("module"),this.bindModuleEvents(n),this.renderStyleTab(),null!=(i=this.columnModule.styleGroup)&&i.openChildModule(n),$(this).trigger("change")),this.setEmptyIfEmpty()},e.prototype.renderStyleTab=function(){return $(this).trigger("renderstyletab")},e}()}.call(this),function(){Nlvx.DragAndDropEditor.Parser=function(){function t(t){this.html=null!=t?t:"",this.validModules=Nlvx.DragAndDropEditor.validModules}return t.prototype.getModules=function(){return this.parseHTMLToModules()},t.prototype.getChildModules=function(){return this.parseHTMLToModules(!0)},t.prototype.parseHTMLToModules=function(t){var e,n,i,r,o,a,s,l,u,c,h,d,p,f;for(e=this.getHTMLBody(),o=e.find("[role='modules-container']"),n=t?e.find("[role='module']"):o.length?o.find("> *"):e.find("> *"),n.length<1&&(null!=(f=e.html())?f.length:void 0)&&(n=$("<div>"+e.html()+"</div>")),c=[],u=[],d=0,p=n.length;p>d;d++)s=n[d],i=$(s),this.isModule(i)?(c.length&&(u.push(this.createDefaultModuleFromGroup(c)),c=[]),h=i.data("type"),r=i.find("[role='module-content']"),l=r.html(),a=this.getAttributes(i),"preheader"===h?this.handleLegacyPreheader(l,a,u):u.push(this.createModule(h,l,a))):c.push(i.get(0));return c.length&&(u.push(this.createDefaultModuleFromGroup(c)),c=[]),u},t.prototype.handleLegacyPreheader=function(t,e,n){var i,r,o,a,s,l,u,c,h;return o=$(t),i=o.find("[role='column-one']"),r=o.find("[role='column-two']"),i.length?(h=$.trim(i.text()),n.push(new Nlvx.DragAndDropEditor.modules.preheader(h,_.extend(e,{dropped:!0}))),r.length?(s=r.find("[role='module']"),c="text",a=s.find("[role='module-content']"),u=a.html(),l=this.getAttributes(s),n.push(this.createModule(c,u,l))):void 0):(h=o.text(),n.push(new Nlvx.DragAndDropEditor.modules.preheader(h,_.extend(e,{dropped:!0}))))
},t.prototype.createDefaultModuleFromGroup=function(t){var e;return e=$(t).wrapAll("<div/>").parent().html(),this.createModule("wysiwyg",e,{})},t.prototype.getAttributes=function(t){var e,n;try{e=JSON.parse(unescape(t.data("attributes")))}catch(i){n=i,e={}}return e},t.prototype.getContainerAttributes=function(){var t,e,n,i;t=this.getHTMLBody(),e=t.find("[role='content-container']");try{n=JSON.parse(unescape(e.data("attributes")))}catch(r){i=r,n={}}return n},t.prototype.getBodyAttributes=function(){var t,e,n;t=this.getHTMLBody();try{e=JSON.parse(unescape(t.data("attributes")))}catch(i){n=i,e={}}return e},t.prototype.createModule=function(t,e,n){return null==e&&(e=""),null==n&&(n={}),t&&this.isValidType(t)?new Nlvx.DragAndDropEditor.modules[t](e,_.extend(n,{dropped:!0})):void 0},t.prototype.isModule=function(t){return"module"===t.attr("role")&&this.isValidType(t.data("type"))},t.prototype.isValidType=function(t){var e;return e=_.pluck(this.validModules,"type"),_.contains(e,t)},t.prototype.getHTMLBody=function(){var t,e;return e=$("<iframe/>"),$("body").append(e),e.get(0).contentDocument.write(this.html),t=e.contents().find("body").clone(),t.length||(t=e.contents().find("html")),e.remove(),t},t}()}.call(this),function(){Nlvx.DragAndDropEditor.styleTab=function(){function t(){}var e,n,i;return i=null,t.init=function(){return i||(i=new e)},t.render=function(t){return null==t&&(t=[]),i.render(t)},e=function(){function t(){this.openGroup=null,this.openChildGroup=null,this.$modulesPanel=$("[role='drag-modules-panel']"),this.$globalStylesPanel=$("[role='global-styles-panel']"),this.$moduleStylesPanel=$("[role='modules-styles-panel']"),this.$moduleStylesPH=$("[role='module-style-placeholder']"),this.modulesCollapsible=n(this.$modulesPanel.find("> h4"),this.$modulesPanel.find("> .collapsible")),this.globalStylesCollapsible=n(this.$globalStylesPanel.find("> h4"),this.$globalStylesPanel.find("> .collapsible")),this.moduleStylesCollapsible=n(this.$moduleStylesPanel.find("> h4"),this.$moduleStylesPanel.find("> .collapsible")),$(this.moduleStylesCollapsible).on("collapsible:beforeclose",function(t){return function(){return t.close()}}(this)),$("[role='module-editing-area']").on("click",function(t){return t.stopPropagation()}),$("[role='module-area']").on("click",function(t){return function(){return t.openGroup?t.close():void 0}}(this))}return t.prototype.render=function(t){var e,n,i,r,o,a,s,l,u,c;for(this.startTop=$(".tab-content").scrollTop(),r=t.global,a=t.modules,e=$("[role='global-style-groups']"),e.empty(),s=0,u=r.length;u>s;s++)i=r[s],this.renderModule(i,e,!0);for(n=$("[role='module-style-groups']"),n.empty(),l=0,c=a.length;c>l;l++)o=a[l],this.renderModule(o,n);return this.modulesCollapsible.open(!1)},t.prototype.maybeOpenChild=function(t,e){return null==e&&(e=!0),null!=t?e?window.setTimeout(function(e){return function(){return e.openChild(t)}}(this),300):this.openChild(t):(this.closeChildren(),this.openChildGroup=null)},t.prototype.bindStyleGroupEvents=function(t){return $(t).on("open",function(e){return function(n,i){var r,o,a,s;return null==i&&(i={}),r=i.withoutAnimation||!0,a=!0,(null!=(s=e.openGroup)?s.module:void 0)===t.module?r=!1:e._close(),null!=i.child&&(o=i.child,a=!1),e.$moduleStylesPH.slideUp({duration:300,easing:"linear"}),e.open(t,r,a,null!=i.child),e.maybeOpenChild(i.child,r)}}(this)),$(t).on("close",function(t){return function(){return t.close()}}(this)),$(t).on("updated:parent",function(e){return function(){return e.openChildGroup=null,e.closeChildren(),t.module.isFake!==!0?e.highlightModule(t.module):void 0}}(this)),$(t).on("updated:child",function(t){return function(e,n){var i;return null==n&&(n={}),i=n.child,null!=i?t.highlightModule(i):void 0}}(this)),$(t).on("removed:child",function(e){return function(n,i){var r,o;return null==i&&(i={}),r=i.child,o=i.parent,t.module===e.openGroup.module&&r===e.openChildGroup?e.closeChildren():void 0}}(this)),$(t).on("removed:parent",function(t){return function(e,n){var i,r;return null==n&&(n={}),i=n.parent,i===(null!=(r=t.openGroup)?r.module:void 0)?t.close():void 0}}(this))},t.prototype.createStyleGroupCollapsible=function(t,e){var n,i,r;return i=t.$html.find("> h4"),n=t.$html.find("> [role='style-attributes']"),r=new Collapsible(i,n),$(r).on("collapsible:beforeopen",function(){return e.find("[role='style-group'] > h4.open").trigger("click")})},t.prototype.renderModule=function(t,e,n){var i;return null==n&&(n=!1),i=new Nlvx.DragAndDropEditor.StyleGroup(t),t.styleGroup=i,this.bindStyleGroupEvents(i),e.append(i.build()),i.afterBuild(),n&&this.createStyleGroupCollapsible(i,e),t.attributes.dropped!==!0?i.openAccordion():void 0},t.prototype.closeChildren=function(){return $("[role='style-children-attributes'] > .module-style-group:visible").slideUp({duration:300,easing:"linear"})},t.prototype.scrollToChild=function(t){var e,n,i,r,o;return i=null!=(o=t.styleGroup)?o.parent:void 0,null!=i?(e=i.$html.find("> h4"),n=i.$html.find("[role='style-attributes']"),r=this.$moduleStylesPanel.find("> h4").outerHeight()+e.outerHeight()+n.outerHeight()+this.$globalStylesPanel.outerHeight()+this.$modulesPanel.outerHeight(),$(".tab-content").animate({scrollTop:r},400)):void 0},t.prototype.openChild=function(t,e){return null==e&&(e=300),t===this.openChildGroup?(t.styleGroup.$html.show(),this.startTop&&$(".tab-content").scrollTop(this.startTop),this.startTop=null):(this.closeChildren(),t.styleGroup.$html.slideDown({duration:e,easing:"linear",complete:function(e){return function(){return e.scrollToChild(t)}}(this)})),this.highlightModule(t),this.openChildGroup=t},t.prototype.open=function(t,e,n,i){return null==e&&(e=!0),null==n&&(n=!0),null==i&&(i=!1),$("a[href='#campaign-build']").trigger("click"),this.moduleStylesCollapsible.open(!0),n&&this.highlightModule(t.module),e?(this.startTop&&$(".tab-content").scrollTop(this.startTop),this.startTop=null,$(t.$html).slideDown({duration:300,easing:"linear",complete:function(t){return function(){var e;return e=t.$moduleStylesPanel.find("> h4").outerHeight()+t.$globalStylesPanel.outerHeight()+t.$modulesPanel.outerHeight(),$(".tab-content").animate({scrollTop:e},400)}}(this)})):($(t.$html).show(),i||(this.startTop&&$(".tab-content").scrollTop(this.startTop),this.closeChildren(),this.startTop=null)),this.openGroup=t},t.prototype.close=function(){return $(".style-group-selected[role='module']").removeClass("style-group-selected"),this._close(),this.$moduleStylesPH.slideDown({duration:300,easing:"linear"}),this.openGroup=null},t.prototype._close=function(){return null!=this.openGroup&&(this.removeHighlightModule(this.openGroup.module),$(this.openGroup.$html).slideUp({duration:300,easing:"linear"})),this.closeChildren()},t.prototype.highlightModule=function(t){return $(".style-group-selected[role='module']").removeClass("style-group-selected"),$(t.$html).addClass("style-group-selected")},t.prototype.removeHighlightModule=function(t){return $(t.$html).removeClass("style-group-selected")},t}(),n=function(t,e){var n;return n=new Collapsible(t,e),t.data("collapsible",n),n},t}()}.call(this),function(){var t;Nlvx.DragAndDropEditor.StyleGroup=function(){function e(e){this.module=e,this.styles=this.module.getStyles(),this.styleModules=this.createStyleModules(),this.attributes=this.module.attributes,this.template=Handlebars.compile(t)}return e.prototype.build=function(){return this.$html=$(this.template(this.module))},e.prototype.afterBuild=function(){var t,e,n,i,r;for(t=this.$html.find("[role='style-attributes']"),r=this.styleModules,n=0,i=r.length;i>n;n++)e=r[n],this.addStyleModule(e,t);return this.bindEvents(),this.buildChildModules()},e.prototype.bindEvents=function(){return $(this.module).off("select"),$(this.module).on("select",function(t){return function(){return t.openAccordion()}}(this)),$(this.module).off("remove:stylegroup"),$(this.module).on("remove:stylegroup",function(t){return function(){return $(t).trigger("removed:parent",{parent:t.module})}}(this))},e.prototype.buildChildModules=function(){var t;return this.module.hasChildren?(this.$childStyleArea=this.$html.find("[role='style-children-attributes']"),this.$childStyleArea.empty(),t=this.module.getChildModules(),_.each(t,function(t){return function(e){var n;return n=new Nlvx.DragAndDropEditor.StyleGroup.ChildGroup(e,t),e.styleGroup=n,t.$childStyleArea.append(n.build()),n.afterBuild(),$(e).off("select"),$(e).on("select",function(){return t.openChildModule(e)}),$(n).on("update",function(){return $(t).trigger("updated:child",{child:e})}),$(n).on("remove",function(){return $(t).trigger("removed:child",{child:e,parent:t.module})})}}(this))):void 0},e.prototype.addStyleModule=function(t,e){return e.append(t.build()),t.afterBuild(this.module),$(t).off("update"),$(t).on("update",_.bind(this.onUpdate,this)),t.setValue(this.attributes[t.styleObj.attributeName],!0)},e.prototype.onUpdate=function(){return this.module.updateAttributes(this.getAttributesObject()),$(this).trigger("updated:parent")},e.prototype.closeOpenChildren=function(){return this.$html.find("h5.open").trigger("click")},e.prototype.openChildModule=function(t,e){return null==e&&(e=!1),$(this).trigger("open",{child:t,withoutAnimation:e})},e.prototype.openAccordion=function(){return $(this).trigger("open")},e.prototype.closeAccordion=function(){return $(this).trigger("close")},e.prototype.getAttributesObject=function(){return this.getAttributesObjectForStyleModules()},e.prototype.getStylesWithCurrentValues=function(t){return null==t&&(t=this.styleModules),_.map(t,function(t){return _.extend(t.styleObj,{value:t.getValue()})})},e.prototype.getAttributesObjectForStyleModules=function(t){var e;return null==t&&(t=this.styleModules),e=this.getStylesWithCurrentValues(t),_.object(_.pluck(e,"attributeName"),_.pluck(e,"value"))},e.prototype.createStyleModules=function(t){return null==t&&(t=this.styles),_.map(t,function(t){return new Nlvx.DragAndDropEditor.attributes[t.type](t)})},e}(),t='<div role="style-group" class="module-style-group {{stylegroupclass styleType}}">\n  <h4>{{displayName}}</h4>\n  <div class="style-attributes" role="style-attributes"></div>\n  <div class="style-group-children" role="style-children-attributes"></div>\n</div>',Handlebars.registerHelper("stylegroupclass",function(t){var e;return e="",null!=t&&t.length&&(e="style-type-"+t),new Handlebars.SafeString(e)})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Nlvx.DragAndDropEditor.StyleGroup.ChildGroup=function(e){function i(e,n){this.module=e,this.parent=n,i.__super__.constructor.call(this,this.module),this.template=Handlebars.compile(t)}return n(i,e),i.prototype.afterBuild=function(){var t,e,n,i;for(this.$childStyleAttributesArea=this.$html.find("[role='child-attributes']"),i=this.styleModules,e=0,n=i.length;n>e;e++)t=i[e],this.addStyleModule(t,this.$childStyleAttributesArea);return $(this.module).off("remove:stylegroup"),$(this.module).on("remove:stylegroup",function(t){return function(){return $(t).trigger("remove",{child:t.module})}}(this))},i.prototype.openAccordion=function(t){return null==t&&(t=!1),this.parent.openAccordion(t),this.collapsible.open(t)},i.prototype.onUpdate=function(){return this.module.updateAttributes(this.getAttributesObject()),$(this).trigger("update")},i}(Nlvx.DragAndDropEditor.StyleGroup),t='<div class="module-style-group">\n  <h5>{{displayName}}</h5>\n  <div class="style-group-children-attributes" role="child-attributes"></div>\n</div>'}.call(this),function(){Nlvx.DragAndDropEditor.modules={},Nlvx.DragAndDropEditor.Module=function(){function t(t,e){null==t&&(t=""),null==e&&(e={}),this.$toolbar=$("[role='module-editor-toolbar']"),this.$html=$()}var e,n,i;return n=[],i="",e={},t.prototype.displayName="Module",t.prototype.styleType="module",t.prototype.build=function(t){return this.$parent=t,this.$parent.addClass("module-parent-container"),this.$html=$()},t.prototype.afterBuild=function(){return this.$html.data("module",this),this.bindEvents()},t.prototype.bindEvents=function(){var t,e;return this.$delete=this.$html.find("[role='module-delete']"),this.$delete.on("click",_.bind(this.removeModule,this)),this.$duplicate=this.$html.find("[role='module-duplicate']"),this.$duplicate.on("click",_.bind(this.duplicateModule,this)),e=null,t=null,this.$html.on("mouseover",function(n){return function(){return window.clearTimeout(t),e=window.setTimeout(function(){return n.$html.addClass("module-hover")},75)}}(this)),this.$html.on("mouseout",function(n){return function(){return window.clearTimeout(e),t=window.setTimeout(function(){return n.$html.removeClass("module-hover")},150)}}(this))},t.prototype.getHTML=function(){return""},t.prototype.isSelected=function(){return this.$html.hasClass("style-group-selected")},t.prototype.removeModule=function(){return this.teardown(),$(this).trigger("remove",{module:this}),$(this).trigger("remove:stylegroup"),$(this).trigger("change")},t.prototype.duplicateModule=function(t){return t.stopPropagation(),$(this).trigger("duplicate")},t.prototype.teardown=function(){return this.$html.remove()},t.prototype.rerender=function(t,e){var n;return null==t&&(t=this.attributes),null==e&&(e=this.innerHTML),this.designTemplate?(n=$(this.designTemplate({html:e,attributes:_.extend({},this.attributes,t)})),this.$html.replaceWith(n),this.$html=n,this.afterBuild()):void 0},t.prototype.updateAttributes=function(t){return null==t&&(t={}),_.extend(this.attributes,t),this.rerender(),$(this).trigger("change")},t.prototype.getStyles=function(){return n},t.prototype.getType=function(){return i},t}()}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Nlvx.DragAndDropEditor.modules.button=function(n){function r(n,i){this.innerHTML=null!=n?n:"",this.attributes=null!=i?i:{},r.__super__.constructor.call(this,this.innerHTML,this.attributes),this.attributes=_.extend({},o,this.attributes),this.designTemplate=Handlebars.compile(e),this.codeTemplate=Handlebars.compile(t)}var o,a;return i(r,n),a=[{name:"Button Color",type:"ColorPicker",attributeName:"buttoncolor"},{name:"Border Color",type:"ColorPicker",attributeName:"bordercolor"},{name:"Font Color",type:"ColorPicker",attributeName:"textcolor"},{name:"",type:"Divider"},{name:"Width",type:"NumberInput",unit:"PX",attributeName:"width",canBeBlank:!0},{name:"Height",type:"NumberInput",unit:"PX",attributeName:"height",canBeBlank:!0},{name:"Padding",type:"NumberInput",inputs:4,unit:"PX",attributeName:"buttonpadding"},{name:"Border Radius",type:"NumberInput",inputs:1,unit:"PX",attributeName:"borderradius"},{name:"Font Size",type:"NumberInput",attributeName:"fontsize",unit:"PX",inputs:1},{name:"",type:"Divider"},{name:"Button Text",type:"TextInput",attributeName:"text"},{name:"Button URL",type:"TextInput",attributeName:"url"},{name:"Alignment",type:"Alignment",attributeName:"alignment"},{name:"",type:"Divider"},{name:"Container Background",type:"ColorPicker",attributeName:"containerbackground"},{name:"Container Padding",type:"NumberInput",inputs:4,unit:"PX",attributeName:"padding"}],o={borderradius:6,buttonpadding:"12,18,12,18",fontsize:16,alignment:"center",text:"Your Bulletproof Button",buttoncolor:"#1188e6",textcolor:"#ffffff",bordercolor:"#1288e5",height:"",width:"",url:"",padding:"0,0,0,0",containerbackground:"#ffffff"},r.prototype.displayName="Button",r.prototype.build=function(){return this.$html=$(this.designTemplate({attributes:this.attributes}))},r.prototype.afterBuild=function(){return this.$html.on("click",function(t){return function(){return $(t.$html).hasClass("style-group-selected")?void 0:$(t).trigger("select")}}(this)),this.$html.find("a").on("click",function(t){return t.preventDefault()}),r.__super__.afterBuild.apply(this,arguments)},r.prototype.getHTML=function(){return this.codeTemplate({attributes:this.attributes})},r.prototype.getStyles=function(){return a},r.prototype.getType=function(){return"button"},r}(Nlvx.DragAndDropEditor.Module),e='<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" class="module" role="module" data-type="button">\n  <tr><td style="{{buttonpadding attributes.padding}}" align="{{attributes.alignment}}" bgcolor="{{attributes.containerbackground}}">\n    <table border="0" cellpadding="0" cellspacing="0" class="wrapper-mobile">\n      <tr>\n        <td align="center" style="{{buttonborderradius attributes}} font-size: {{attributes.fontsize}}px;" bgcolor="{{attributes.buttoncolor}}">\n          <a href="{{unescapetext attributes.url}}" class="bulletproof-button" target="_blank" style="height: {{attributes.height}}px; width: {{attributes.width}}px; font-size: {{attributes.fontsize}}px; line-height: {{attributes.height}}px; font-family: Helvetica, Arial, sans-serif; color: {{attributes.textcolor}}; {{buttonpadding attributes.buttonpadding}} text-decoration: none; color: {{attributes.textcolor}}; text-decoration: none; {{buttonborderradius attributes}} border: 1px solid {{attributes.bordercolor}}; display: inline-block;">{{unescapetext attributes.text}}</a>\n        </td>\n      </tr>\n    </table>\n    <div class="module-controls" role="module-controls">\n      <span class="module-controls__move"></span>\n      <span class="module-controls__delete" role="module-delete"></span>\n      <span class="module-controls__duplicate" role="module-duplicate"></span>\n    </div>\n  </td></tr>\n</table>',t='<table class="module" role="module" data-type="button" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed;" data-attributes=\'{{{buttonsaveattributes attributes}}}\'>\n<tr>\n  <td style="{{buttonpadding attributes.padding}}" align="{{attributes.alignment}}" bgcolor="{{attributes.containerbackground}}">\n    <table border="0" cellpadding="0" cellspacing="0" class="wrapper-mobile">\n      <tr>\n        <td align="center" style="{{buttonborderradius attributes}} font-size: {{attributes.fontsize}}px;" bgcolor="{{attributes.buttoncolor}}">\n          <a href="{{unescapetext attributes.url}}" class="bulletproof-button" target="_blank" style="height: {{attributes.height}}px; width: {{attributes.width}}px; font-size: {{attributes.fontsize}}px; line-height: {{attributes.height}}px; font-family: Helvetica, Arial, sans-serif; color: {{attributes.textcolor}}; {{buttonpadding attributes.buttonpadding}} text-decoration: none; color: {{attributes.textcolor}}; text-decoration: none; {{buttonborderradius attributes}} border: 1px solid {{attributes.bordercolor}}; display: inline-block;">{{unescapetext attributes.text}}</a>\n        </td>\n      </tr>\n    </table>\n  </td>\n</tr>\n</table>\n',Handlebars.registerHelper("buttonsaveattributes",function(t){var e,n;return e={dropped:!0,borderradius:t.borderradius,buttonpadding:t.buttonpadding,text:t.text,alignment:t.alignment,fontsize:t.fontsize,url:t.url,height:t.height||"",width:t.width||"",containerbackground:t.containerbackground,padding:t.padding,buttoncolor:t.buttoncolor,textcolor:t.textcolor,bordercolor:t.bordercolor},n=escape(JSON.stringify(e)),new Handlebars.SafeString(n)}),Handlebars.registerHelper("unescapetext",function(t){return new Handlebars.SafeString(unescape(t))}),Handlebars.registerHelper("buttonpadding",function(t){return new Handlebars.SafeString("padding: "+t.split(",").join("px ")+"px;")}),Handlebars.registerHelper("buttonborderradius",function(t){var e;return e=t.borderradius,new Handlebars.SafeString("-webkit-border-radius: "+e+"px; -moz-border-radius: "+e+"px; border-radius: "+e+"px;")})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Nlvx.DragAndDropEditor.modules.columns=function(n){function r(n,i){this.innerHTML=null!=n?n:"",null==i&&(i={}),r.__super__.constructor.call(this,this.innerHTML,i),this.attributes=_.extend({},o,i),this.designTemplate=Handlebars.compile(e),this.codeTemplate=Handlebars.compile(t)}var o,a;return i(r,n),a=[{name:"Container Background",type:"ColorPicker",attributeName:"containerbackground"},{name:"Container Padding",type:"NumberInput",unit:"PX",inputs:4,attributeName:"padding"},{name:"Cell Padding",type:"NumberInput",unit:"PX",inputs:1,attributeName:"cellpadding"},{name:"Columns",type:"Range",min:1,max:4,unit:"/4",attributeName:"columns"}],o={containerbackground:"",padding:"0,0,0,0",cellpadding:0,columns:2},r.prototype.displayName="Columns",r.prototype.hasChildren=!0,r.prototype.build=function(){return r.__super__.build.apply(this,arguments),this.$html=$(this.designTemplate({attributes:this.attributes}))},r.prototype.afterBuild=function(t){var e;return null==t&&(t=!1),this.attributes.dropped?this.createFromExisting():(this.createNew(),this.attributes.dropped=!0),this.$html.on("click",".column-drop-area.empty",function(t){return function(){var e;return $(t.$html).hasClass("style-group-selected")?void 0:(null!=(e=t.styleGroup)&&e.closeOpenChildren(),$(t).trigger("select"))}}(this)),null!=(e=this.styleGroup)&&e.buildChildModules(),r.__super__.afterBuild.apply(this,arguments)},r.prototype.bindEvents=function(){var t,e;return this.$delete=this.$html.find(".columns--container-table").next("[role='module-controls']").find("[role='module-delete']"),this.$delete.on("click",_.bind(this.removeModule,this)),this.$duplicate=this.$html.find(".columns--container-table").next("[role='module-controls']").find("[role='module-duplicate']"),this.$duplicate.on("click",_.bind(this.duplicateModule,this)),e=null,t=null,this.$html.on("mouseover",function(n){return function(){return window.clearTimeout(t),e=window.setTimeout(function(){return n.$html.addClass("module-hover")},75)}}(this)),this.$html.on("mouseout",function(n){return function(){return window.clearTimeout(e),t=window.setTimeout(function(){return n.$html.removeClass("module-hover")},150)}}(this))},r.prototype.getChildModules=function(){return _.map(this.$html.find(".column-drop-area > [role='module']"),function(t){return $(t).data("module")})},r.prototype.getColumnsHTML=function(){return _.map(this.$html.find(".column-drop-area"),function(t){var e;return e=_.map($(t).find("> [role='module']"),function(t){return $(t).data("module")}),_.map(e,function(t){return(null!=t?t.getHTML():void 0)||""}).join("")})},r.prototype.getHTML=function(){var t;return t=this.getColumnsHTML(),this.codeTemplate({attributes:this.attributes,columnsHTML:t})},r.prototype.createFromExisting=function(){var t;return t=$("<tr>"+this.innerHTML+"</tr>"),_(this.attributes.columns).times(function(e){return function(n){var i,r;return i=e.$html.find("[role='column-"+n+"']"),r=t.find("[role='column-"+n+"']").html(),e.createColumn(i,r)}}(this))},r.prototype.createColumn=function(t,e){var n;return n=new Nlvx.DragAndDropEditor.ColumnsEditor(t,e,this),this.bindEditorEvents(n)},r.prototype.bindEditorEvents=function(t){return $(t).on({change:function(t){return function(){return t.innerHTML=$(t.getHTML()).find("[role='module-content']").html(),$(t).trigger("change")}}(this),renderstyletab:function(t){return function(){return $(t).trigger("renderstyletab")}}(this),renderstyletabandopen:function(t){return function(){return $(t).trigger("renderstyletabandopen")}}(this),removeChild:function(t){return function(){return t.innerHTML=$(t.getHTML()).find("[role='module-content']").html()}}(this)})},r.prototype.createNew=function(){return _(this.attributes.columns).times(function(t){return function(e){var n;return n=t.$html.find("[role='column-"+e+"']"),t.createColumn(n,null)}}(this))},r.prototype.getStyles=function(){return a},r.prototype.updateAttributes=function(t){var e;return e=this.attributes.columns,t.columns=parseInt(t.columns),r.__super__.updateAttributes.call(this,t),e!==t.columns?$(this).trigger("renderstyletabandopen"):void 0},r.prototype.rerender=function(t,e){var n;return null==t&&(t=this.attributes),null==e&&(e=this.innerHTML),this.designTemplate?(n=$(this.designTemplate({html:e,attributes:_.extend({},this.attributes,t)})),this.$html.replaceWith(n),this.$html=n,this.afterBuild(!0)):void 0},r.prototype.teardown=function(){return _.each(this.getChildModules(),function(t){return t.teardown()}),r.__super__.teardown.apply(this,arguments)},r.prototype.getType=function(){return"columns"},r}(Nlvx.DragAndDropEditor.Module),e='<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" class="module columns" role="module" data-type="columns">\n  <tr><td style="{{columnspadding attributes}}" bgcolor="{{attributes.containerbackground}}">\n    <table class="columns--container-table" border="0" cellpadding="0" cellspacing="0" align="center" width="100%">\n      <tr role="module-content">\n        {{columns attributes}}\n      </tr>\n    </table>\n    <div class="module-controls" role="module-controls">\n      <span class="module-controls__move"></span>\n      <span class="module-controls__delete" role="module-delete"></span>\n      <span class="module-controls__duplicate" role="module-duplicate"></span>\n    </div>\n  </td></tr>\n</table>',t='<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" role="module" data-type="columns" data-attributes=\'{{{columnssaveattributes attributes}}}\'>\n  <tr><td style="{{columnspadding attributes}}" bgcolor="{{attributes.containerbackground}}">\n    <table class="columns--container-table" border="0" cellpadding="0" cellspacing="0" align="center" width="100%">\n      <tr role="module-content">\n        {{columns attributes columnsHTML}}\n      </tr>\n    </table>\n  </td></tr>\n</table>',Handlebars.registerHelper("columns",function(t,e){var n,i,r,o,a,s;return null==e&&(e=[""]),i=t.columns||2,a=100/i,s=[t.cellpadding,t.cellpadding],r=s[0],o=s[1],n=_.map(Array(i),function(n,s){var l,u,c,h;return(null!=(c=e[s])?c.length:void 0)?(u=e[s],l=""):(u="",l="empty"),i>1&&(h=[t.cellpadding/2,t.cellpadding/2],r=h[0],o=h[1],0===s?r=0:s%(i-1)===0&&(o=0)),'<td style="padding: 0px '+o+"px 0px "+r+'px" role="column-'+s+'" align="center" valign="top" width="'+a+'%" height="100%" class="templateColumnContainer column-drop-area '+l+'">\n  '+u+"\n</td>"}).join(""),new Handlebars.SafeString(n)}),Handlebars.registerHelper("columnssaveattributes",function(t){var e,n;return e={dropped:!0,columns:t.columns||2,padding:t.padding||"",cellpadding:t.cellpadding||0,containerbackground:t.containerbackground||""},n=escape(JSON.stringify(e)),new Handlebars.SafeString(n)}),Handlebars.registerHelper("columnspadding",function(t){var e;return e=t.padding,0!==e&&(e=e.split(",").join("px ")),new Handlebars.SafeString("padding: "+e+"px;")})}.call(this),function(){var t,e,n,i,r,o={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Nlvx.DragAndDropEditor.modules.footer=function(t){function o(t,n){this.innerHTML=null!=t?t:"",null==n&&(n={}),o.__super__.constructor.call(this,this.innerHTML,n),this.attributes=_.extend({},s,n),this.designTemplate=Handlebars.compile(r),this.codeTemplate=Handlebars.compile(e)}var s,l;return a(o,t),l=[{name:"Container Background",type:"ColorPicker",attributeName:"containerbackground"},{name:"Padding",type:"NumberInput",unit:"PX",inputs:4,attributeName:"padding"},{name:"Columns",type:"Range",min:1,max:2,unit:"/2",attributeName:"columns"}],s={containerbackground:"#ffffff",padding:"10,5,10,5",columns:1},o.prototype.displayName="Footer",o.prototype.build=function(){return this.$html=$(this.designTemplate({attributes:this.attributes}))},o.prototype.afterBuild=function(){return this.attributes.dropped?this.parseChildren():this.createNew(),this.attributes.dropped=!0,o.__super__.afterBuild.apply(this,arguments)},o.prototype.getHTML=function(){var t,e,n,i;return t=(null!=(n=this.module1)?n.getHTML():void 0)||"",e=(null!=(i=this.module2)?i.getHTML():void 0)||"",this.codeTemplate({attributes:this.attributes,module1:t,module2:e})},o.prototype.parseChildren=function(){var t,e;return null!=this.module1&&(this.innerHTML=$(this.getHTML()).find("[role='module-content']").first().html()),e=new Nlvx.DragAndDropEditor.Parser(this.innerHTML),t=e.getChildModules(),t.length?(this.module1=t[0],this.buildModule(this.module1,this.$html.find("[role='column-one']")),this.attributes.columns>1&&(this.module2=t[1]||new Nlvx.DragAndDropEditor.modules.text(i,{dropped:!0}),this.module2)?this.buildModule(this.module2,this.$html.find("[role='column-two']")):void 0):this.createNew()},o.prototype.createNew=function(){return this.module1=new Nlvx.DragAndDropEditor.modules.text(n,{dropped:!0}),this.buildModule(this.module1,this.$html.find("[role='column-one']")),this.attributes.columns>1?(this.module2=new Nlvx.DragAndDropEditor.modules.text(i,{dropped:!0}),this.buildModule(this.module2,this.$html.find("[role='column-two']"))):void 0},o.prototype.buildModule=function(t,e){return e.append(t.build()),t.afterBuild(),this.bindModuleEvents(t)},o.prototype.bindModuleEvents=function(t){return $(t).on({change:function(t){return function(){return $(t).trigger("change")}}(this),select:function(t){return function(){return $(t).trigger("select")}}(this)})},o.prototype.getStyles=function(){return l},o.prototype.rerender=function(t,e){return null==t&&(t=this.attributes),null==e&&(e=this.innerHTML),o.__super__.rerender.call(this,t,e),this.updateChildColumnsBGs()},o.prototype.updateAttributes=function(t){return t.columns<2&&(this.module2=null),o.__super__.updateAttributes.call(this,t),this.updateChildColumnsBGs()},o.prototype.updateChildColumnsBGs=function(){var t,e;return null!=(t=this.module1)&&t.updateAttributes({containerbackground:this.attributes.containerbackground}),null!=(e=this.module2)?e.updateAttributes({containerbackground:this.attributes.containerbackground}):void 0},o.prototype.teardown=function(){var t,e;return null!=(t=this.module1)&&t.teardown(),null!=(e=this.module2)&&e.teardown(),o.__super__.teardown.apply(this,arguments)},o.prototype.getType=function(){return"footer"},o}(Nlvx.DragAndDropEditor.Module),r='<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" class="module footer" role="module" data-type="footer">\n  <tr><td style="{{footerpadding attributes}}"  bgcolor="{{attributes.containerbackground}}">\n    <table border="0" cellpadding="0" cellspacing="0" align="center" width="100%">\n      <tr>{{footercolumns attributes}}</tr>\n    </table>\n  </td></tr>\n</table>',e='<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" class="module footer" role="module" data-type="footer" data-attributes=\'{{{footersaveattributes attributes}}}\'>\n  <tr><td style="{{footerpadding attributes}}" bgcolor="{{attributes.containerbackground}}">\n    <table border="0" cellpadding="0" cellspacing="0" align="center" width="100%">\n      <tr role="module-content">\n        {{#if module2.length}}\n        <td align="center" valign="top" width="50%" height="100%" class="templateColumnContainer">\n          <table border="0" cellpadding="0" cellspacing="0" width="100%" height="100%">\n            <tr>\n              <td class="leftColumnContent" role="column-one" height="100%" style="height:100%;">{{{module1}}}</td>\n            </tr>\n          </table>\n        </td>\n        <td align="center" valign="top" width="50%" height="100%" class="templateColumnContainer">\n          <table border="0" cellpadding="0" cellspacing="0" width="100%" height="100%">\n            <tr>\n              <td class="rightColumnContent" role="column-two" height="100%" style="height:100%;">{{{module2}}}</td>\n            </tr>\n          </table>\n        </td>\n        {{else}}\n        <td align="center" valign="top" width="100%" height="100%" class="templateColumnContainer">\n          <table border="0" cellpadding="0" cellspacing="0" width="100%" height="100%">\n            <tr>\n              <td class="leftColumnContent" role="column-one" height="100%" style="height:100%;">{{{module1}}}</td>\n            </tr>\n          </table>\n        </td>\n        {{/if}}\n      </tr>\n    </table>\n  </td></tr>\n</table>\n',n='<div style="font-size:12px;line-height:150%;margin:0;text-align:center;">\n  This email was sent by: [Sender_Name] [Sender_Address], [Sender_City] [Sender_State] [Sender_Zip]\n</div>\n<div style="font-size:12px;line-height:150%;margin:0;text-align:center;">\n  To unsubscribe click: <a href="[Unsubscribe]">here</a>\n</div>',i='<p style="font-size:12px;line-height:150%;margin:0;text-align:center;">For more information, check out our website or contact our support team.</p>',Handlebars.registerHelper("footersaveattributes",function(t){var e,n;
return e={dropped:!0,columns:t.columns,padding:t.padding,containerbackground:t.containerbackground},n=escape(JSON.stringify(e)),new Handlebars.SafeString(n)}),Handlebars.registerHelper("footercolumns",function(t){var e;return e="",t.columns>1?_(t.columns).times(function(t){var n,i;return 1>t?(n="left",i="one"):(n="right",i="two"),e+='<td align="center" valign="top" width="50%" height="100%" class="templateColumnContainer">\n  <table border="0" cellpadding="0" cellspacing="0" width="100%" height="100%">\n    <tr>\n      <td class="'+n+'ColumnContent" role="column-'+i+'" height="100%" style="height:100%;"></td>\n    </tr>\n  </table>\n</td>'}):e='<td align="center" valign="top" width="100%" height="100%" class="templateColumnContainer">\n    <table border="0" cellpadding="0" cellspacing="0" width="100%" height="100%">\n      <tr>\n        <td class="leftColumnContent" role="column-one" height="100%" style="height:100%;"></td>\n      </tr>\n    </table>\n  </td>',new Handlebars.SafeString(e)}),Handlebars.registerHelper("footerpadding",function(t){var e;return e=t.padding,0!==e&&(e=e.split(",").join("px ")),new Handlebars.SafeString("padding: "+e+"px;")}),t={startupFocus:!1,title:!1,sharedSpaces:{top:"module-editor__toolbar"},toolbar:[{name:"colors",items:["TextColor","BGColor"]},{name:"styles",items:["Format","Font","FontSize"]},{name:"basic styles",items:["Bold","Italic","Underline","RemoveFormat"]},{name:"paragraph",items:["JustifyLeft","JustifyCenter","JustifyRight"]},{name:"lists",items:["NumberedList","BulletedList"]},{name:"misc",items:["Table","Sglink","HorizontalRule"]}]}}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Nlvx.DragAndDropEditor.modules.image=function(n){function r(n,i){this.innerHTML=null!=n?n:"",null==i&&(i={}),this.attributes=_.extend({},o,i),r.__super__.constructor.call(this,this.innerHTML,this.attributes),this.designTemplate=Handlebars.compile(e),this.codeTemplate=Handlebars.compile(t)}var o,a;return i(r,n),a=[{name:"Edit",type:"Button",label:"Image Properties",callback:function(t){return t.openImageManager()},altText:"You can also double click an image to open the image manager.",cssClasses:"btn btn-secondary btn-small",attributeName:"open_image_manager"},{name:"",type:"Divider"},{name:"Image Background",type:"ColorPicker",attributeName:"imagebackground"},{name:"Image Margin",type:"NumberInput",attributeName:"imagemargin",inputs:4,unit:"PX"}],o={link:"",alt_text:"",padding:"0,0,0,0",alignment:"left",imagebackground:"#FFFFFF",imagemargin:"0,0,0,0",responsive:!1},r.prototype.displayName="Image",r.prototype.build=function(){return r.__super__.build.apply(this,arguments),this.$html=$(this.designTemplate({attributes:this.attributes})),this.attributes.dropped||this.openImageManager(),this.$html},r.prototype.afterBuild=function(){return this.$html.data("module",this),this.$html.on("dblclick",function(t){return function(){return t.openImageManager()}}(this)),this.$html.on("click",function(t){return function(){return $(t).trigger("select")}}(this)),this.$html.find("a").on("click",function(t){return t.preventDefault()}),r.__super__.afterBuild.apply(this,arguments)},r.prototype.getHTML=function(){return this.codeTemplate({attributes:this.attributes})},r.prototype.teardown=function(){return null!=this.imageManager&&this.imageManager.teardown(),this.imageManager=null,r.__super__.teardown.apply(this,arguments)},r.prototype.updateHTML=function(){return this.rerender(),$(this).trigger("change")},r.prototype.openImageManager=function(){return this.imageManager=new Nlvx.ImageManager($("body")),null!=this.attributes.url&&this.imageManager.setImage(this.attributes),this.bindImageManagerEvents()},r.prototype.bindImageManagerEvents=function(){return $(this.imageManager).on({insert:function(t){return function(e,n){return t.attributes=_.extend(t.attributes,n),t.attributes.dropped=!0,t.updateHTML(),$(t).trigger("renderstyletabandopen")}}(this)})},r.prototype.getStyles=function(){return a},r.prototype.getType=function(){return"image"},r}(Nlvx.DragAndDropEditor.Module),Handlebars.registerHelper("image",function(t){var e,n,i,r,o,a,s,l,u,c;return l=t.url,e=Handlebars.Utils.escapeExpression(t.alt_text),r="",i="",a="",o="",s="",(null!=(c=t.link)?c.length:void 0)&&(r='<a href="'+t.link+'" target="_blank">',i="</a>"),u=' width="'+t.width+'" ',n=' height="'+t.height+'" ',t.responsive&&(a='<!--[if mso]>\n<center>\n<table width="'+t.width+'" border="0" cellpadding="0" cellspacing="0" style="table-layout: fixed;">\n  <tr>\n    <td width="'+t.width+'" valign="top">\n<![endif]-->',o="<!--[if mso]>\n</td></tr></table>\n</center>\n<![endif]-->",n=' height="" ',u=' width="'+t.width+'" ',s=" max-width: "+t.width+"px !important; width: 100% !important; height: auto !important; "),new Handlebars.SafeString(t=""+a+"\n"+r+'\n  <img class="max-width" '+u+" "+n+' src="'+l+'" alt="'+e+'" border="0" style="display: block; color: #000; text-decoration: none; font-family: Helvetica, arial, sans-serif; font-size: 16px; '+s+'" />\n'+i+"\n"+o)}),Handlebars.registerHelper("imagesaveattributes",function(t){var e,n;return e={child:t.child||!1,link:t.link,width:t.width,height:t.height,imagebackground:t.imagebackground,url:t.url,alt_text:t.alt_text,dropped:!0,imagemargin:t.imagemargin,alignment:t.alignment,responsive:t.responsive},n=escape(JSON.stringify(e)),new Handlebars.SafeString(n)}),Handlebars.registerHelper("imagemargin",function(t){var e;return e=t.imagemargin,0!==e&&(e=e.split(",").join("px ")),new Handlebars.SafeString("padding: "+e+"px;")}),e='<table role="module" data-type="image" border="0" cellpadding="0" cellspacing="0" width="100%" {{#attributes.child}}height="100%"{{/attributes.child}} class="wrapper module">\n  <tr><td align="{{attributes.alignment}}" valign="top" style="{{#attributes.child}}height:100%;{{/attributes.child}};background-color:{{attributes.imagebackground}}; {{imagemargin attributes}}">\n  {{#attributes.url}}\n    {{{image ../attributes}}}\n  {{else}}\n    <div class="module-image--placeholder">\n      <span class="module-image--placeholder__icon"></span>\n      <p class="module-image--placeholder__text">Add Image</p>\n    </div>\n  {{/attributes.url}}\n  <div class="module-controls">\n    <span class="module-controls__move"></span>\n    <span class="module-controls__delete" role="module-delete"></span>\n    <span class="module-controls__duplicate" role="module-duplicate"></span>\n  </div>\n  </td></tr>\n</table>',t='<table role="module" data-type="image" border="0" align="center" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed;" class="wrapper" data-attributes=\'{{imagesaveattributes attributes}}\'>\n<tr>\n  <td style="font-size:6px;line-height:10px;background-color:{{attributes.imagebackground}};{{imagemargin attributes}}" valign="top" align="{{attributes.alignment}}" role="module-content">{{{image attributes}}}</td>\n</tr>\n</table>'}.call(this),function(){var t,e,n,i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Nlvx.DragAndDropEditor.modules.imagetext=function(n){function i(n,r){this.innerHTML=null!=n?n:"",null==r&&(r={}),this.attributes=_.extend({},o,r),this.designTemplate=Handlebars.compile(e),this.codeTemplate=Handlebars.compile(t),i.__super__.constructor.apply(this,arguments)}var o,a;return r(i,n),a=[{name:"Edit",type:"Button",label:"Image Properties",callback:function(t){return t.getImageModule().openImageManager()},altText:"You can also double click an image to open the image manager.",cssClasses:"btn btn-secondary btn-small",attributeName:"open_image_manager"},{name:"",type:"Divider"},{name:"Image Position",type:"Alignment",attributeName:"imagealignment",center:!1},{name:"Image Background",type:"ColorPicker",attributeName:"imagebackground"},{name:"Image Margin",type:"NumberInput",attributeName:"imagemargin",inputs:4,unit:"PX"},{name:"",type:"Divider"},{name:"Text Background",type:"ColorPicker",attributeName:"textbackground"},{name:"Text Margin",type:"NumberInput",attributeName:"textmargin",inputs:4,unit:"PX"}],o={imagebackground:"#ffffff",textbackground:"#ffffff",imagealignment:"left",imagemargin:"0,0,0,0",textmargin:"0,0,0,0"},i.prototype.displayName="Image + Text",i.prototype.build=function(){return i.__super__.build.apply(this,arguments),this.$html=$(this.designTemplate({html:this.innerHTML,attributes:this.attributes}))},i.prototype.afterBuild=function(){return this.attributes.dropped?this.parseChildren():this.createNew(),i.__super__.afterBuild.apply(this,arguments)},i.prototype.getHTML=function(){var t,e,n,i;return t=(null!=(n=this.module1)?n.getHTML():void 0)||"",e=(null!=(i=this.module2)?i.getHTML():void 0)||"",this.codeTemplate({attributes:this.attributes,module1:t,module2:e})},i.prototype.teardown=function(){var t,e;return null!=(t=this.module1)&&t.teardown(),null!=(e=this.module2)&&e.teardown(),i.__super__.teardown.apply(this,arguments)},i.prototype.getStyles=function(){return a},i.prototype.getType=function(){return"imagetext"},i.prototype.parseChildren=function(){var t,e,n,i;return null!=this.module1&&null!=this.module2&&(this.innerHTML=$(this.getHTML()).find("[role='module-content']").first().html()),n=new Nlvx.DragAndDropEditor.Parser(this.innerHTML),e=n.getChildModules(),t=this.attributes.imagebackground,i=this.attributes.textbackground,"left"===this.attributes.imagealignment?(this.module1="image"===e[0].getType()?e[0]:e[1],this.module2="text"===e[0].getType()?e[0]:e[1]):(this.module1="text"===e[0].getType()?e[0]:e[1],this.module2="image"===e[0].getType()?e[0]:e[1]),this.module1&&this.buildModule(this.module1,this.$html.find("[role='column-one']")),this.module2?this.buildModule(this.module2,this.$html.find("[role='column-two']")):void 0},i.prototype.createNew=function(){var t,e;return t=this.attributes.imagebackground,e=this.attributes.textbackground,"left"===this.attributes.imagealignment?(this.module1=new Nlvx.DragAndDropEditor.modules.image(null,{dropped:!0,child:!0,imagebackground:t}),this.module2=new Nlvx.DragAndDropEditor.modules.text(null,{dropped:!0,child:!0,containerbackground:e})):(this.module1=new Nlvx.DragAndDropEditor.modules.text(null,{dropped:!0,child:!0,containerbackground:e}),this.module2=new Nlvx.DragAndDropEditor.modules.image(null,{dropped:!0,child:!0,imagebackground:t})),this.buildModule(this.module1,this.$html.find("[role='column-one']")),this.buildModule(this.module2,this.$html.find("[role='column-two']"))},i.prototype.buildModule=function(t,e){return e.append(t.build(e)),t.afterBuild(),this.bindModuleEvents(t)},i.prototype.bindModuleEvents=function(t){return $(t).on({change:function(t){return function(){return $(t).trigger("change")}}(this),select:function(t){return function(){return $(t).trigger("select")}}(this)})},i.prototype.getImageModule=function(){return null!=this.module1&&null!=this.module2?"image"===this.module1.getType()?this.module1:this.module2:void 0},i.prototype.getTextModule=function(){return null!=this.module1&&null!=this.module2?"text"===this.module1.getType()?this.module1:this.module2:void 0},i.prototype.updateAttributes=function(t){return null==t&&(t={}),i.__super__.updateAttributes.call(this,t),this.getImageModule().updateAttributes({imagebackground:this.attributes.imagebackground}),this.getTextModule().updateAttributes({containerbackground:this.attributes.textbackground})},i}(Nlvx.DragAndDropEditor.Module),e='<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" class="module wrapper" role="module" data-type="imagetext">\n  <tr>\n    <td>\n      <table border="0" cellpadding="0" cellspacing="0" width="100%">\n        <tr role="module-content">\n          <td align="center" valign="top" width="50%" height="100%" class="templateColumnContainer" {{imagetextbackgroundcolor attributes 1}}>\n            <table border="0" cellpadding="0" cellspacing="0" width="100%" height="100%">\n              <tr>\n                <td class="leftColumnContent" role="column-one" height="100%" style="height:100%;width:50%; {{imagetextpadding attributes 1}}"></td>\n              </tr>\n            </table>\n          </td>\n          <td align="center" valign="top" width="50%" height="100%" class="templateColumnContainer" {{imagetextbackgroundcolor attributes 2}}>\n            <table border="0" cellpadding="0" cellspacing="0" width="100%" height="100%">\n              <tr>\n                <td class="rightColumnContent" role="column-two" height="100%" style="height:100%;width:50%; {{imagetextpadding attributes 2}}"></td>\n              </tr>\n            </table>\n          </td>\n        </tr>\n      </table>\n      <div class="module-controls">\n        <span class="module-controls__move"></span>\n        <span class="module-controls__delete" role="module-delete"></span>\n        <span class="module-controls__duplicate" role="module-duplicate"></span>\n      </div>\n    </td>\n  </tr>\n</table>',t='<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" class="module wrapper" role="module" data-type="imagetext" data-attributes=\'{{imagetextsaveattributes attributes}}\'>\n  <tr>\n    <td>\n      <table border="0" cellpadding="0" cellspacing="0" width="100%">\n        <tr role="module-content">\n          <td align="center" valign="top" width="50%" height="100%" class="templateColumnContainer" {{imagetextbackgroundcolor attributes 1}}>\n            <table border="0" cellpadding="0" cellspacing="0" width="100%" height="100%">\n              <tr>\n                <td class="leftColumnContent" role="column-one" height="100%" style="height:100%;width:50%; {{imagetextpadding attributes 1}}">{{{module1}}}</td>\n              </tr>\n            </table>\n          </td>\n          <td align="center" valign="top" width="50%" height="100%" class="templateColumnContainer" {{imagetextbackgroundcolor attributes 2}}>\n            <table border="0" cellpadding="0" cellspacing="0" width="100%" height="100%">\n              <tr>\n                <td class="rightColumnContent" role="column-two" height="100%" style="height:100%;width:50%; {{imagetextpadding attributes 2}}">{{{module2}}}</td>\n              </tr>\n            </table>\n          </td>\n        </tr>\n      </table>\n    </td>\n  </tr>\n</table>\n',Handlebars.registerHelper("imagetextbackgroundcolor",function(t,e){var i,r;return r=n(t,e),"image"===r?i=t.imagebackground:"text"===r&&(i=t.textbackground),new Handlebars.SafeString(' bgcolor="'+i+'" ')}),Handlebars.registerHelper("imagetextpadding",function(t,e){var i,r;return i=n(t,e),"image"===i?r=t.imagemargin:"text"===i&&(r=t.textmargin),new Handlebars.SafeString("padding: "+r.split(",").join("px ")+"px;")}),n=function(t,e){return"left"===t.imagealignment?1===e?"image":"text":1===e?"text":"image"},Handlebars.registerHelper("imagetextsaveattributes",function(t){var e,n;return e={dropped:!0,imagebackground:t.imagebackground,imagemargin:t.imagemargin,textbackground:t.textbackground,textmargin:t.textmargin,imagealignment:t.imagealignment},n=escape(JSON.stringify(e)),new Handlebars.SafeString(n)})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Nlvx.DragAndDropEditor.modules.preheader=function(n){function r(n,i){this.innerHTML=null!=n?n:"",null==i&&(i={}),r.__super__.constructor.call(this,this.innerHTML,i),this.designTemplate=Handlebars.compile(e),this.codeTemplate=Handlebars.compile(t)}var o,a;return i(r,n),a=[],o={},r.prototype.displayName="Preheader",r.prototype.build=function(){return this.$html=$(),$("#campaign_campaign_content_preheader").val(this.designTemplate({html:this.innerHTML}))},r.prototype.bindEvents=function(){return $("#campaign_campaign_content_preheader").on("change blur",function(t){return function(){return t.innerHTML=t.getInputValue(),$(t).trigger("change")}}(this))},r.prototype.getHTML=function(){return this.codeTemplate({html:this.getInputValue()})},r.prototype.getInputValue=function(){return Nlvx.Sanitizers.removeJavascript($("#campaign_campaign_content_preheader").val())},r.prototype.buildModule=function(t,e){return e.append(t.build()),t.afterBuild(),this.bindModuleEvents(t)},r.prototype.getStyles=function(){return a},r.prototype.rerender=function(t,e){return null==t&&(t=this.attributes),null==e&&(e=this.innerHTML),$("#campaign_campaign_content_preheader").val(this.innerHTML)},r.prototype.updateAttributes=$.noop,r.prototype.teardown=$.noop,r.prototype.getType=function(){return"preheader"},r}(Nlvx.DragAndDropEditor.Module),e="{{{sanitize html}}}",t='<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" style="{{hidestyle}}" class="module preheader preheader-hide" role="module" data-type="preheader">\n  <tr><td role="module-content"><p>{{{sanitize html}}}</p></td></tr>\n</table>\n',Handlebars.registerHelper("sanitize",function(t){return Nlvx.Sanitizers.removeJavascript(t)}),Handlebars.registerHelper("hidestyle",function(){var t;return t=["display:none !important;","visibility:hidden;","opacity:0;","color:transparent;","height:0;","width:0;"].join(" "),new Handlebars.SafeString(t)})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Nlvx.DragAndDropEditor.modules.spacer=function(n){function r(n,i){this.innerHTML=null!=n?n:"",this.attributes=null!=i?i:{},r.__super__.constructor.call(this,this.innerHTML,this.attributes),this.attributes=_.extend({},o,this.attributes),this.designTemplate=Handlebars.compile(e),this.codeTemplate=Handlebars.compile(t)}var o,a;return i(r,n),a=[{name:"Background Color",type:"ColorPicker",attributeName:"containerbackground"},{name:"Spacing",type:"NumberInput",unit:"PX",attributeName:"spacing"}],o={containerbackground:"#ffffff",spacing:30},r.prototype.displayName="Spacer",r.prototype.build=function(){return this.$html=$(this.designTemplate({attributes:this.attributes}))},r.prototype.afterBuild=function(){return this.$html.on("click",function(t){return function(){return $(t.$html).hasClass("style-group-selected")?void 0:$(t).trigger("select")}}(this)),r.__super__.afterBuild.apply(this,arguments)},r.prototype.getHTML=function(){return this.codeTemplate({attributes:this.attributes})},r.prototype.getStyles=function(){return a},r.prototype.getType=function(){return"spacer"},r}(Nlvx.DragAndDropEditor.Module),e='<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" class="module" role="module" data-type="spacer">\n  <tr><td style="{{spacerpadding attributes}}" bgcolor="{{attributes.containerbackground}}">\n    <div class="module-controls" role="module-controls">\n      <span class="module-controls__move"></span>\n      <span class="module-controls__delete" role="module-delete"></span>\n      <span class="module-controls__duplicate" role="module-duplicate"></span>\n    </div>\n  </td></tr>\n</table>',t='<table class="module" role="module" data-type="spacer" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed;" data-attributes=\'{{{spacersaveattributes attributes}}}\'>\n<tr><td role="module-content" style="{{spacerpadding attributes}}" bgcolor="{{attributes.containerbackground}}"></td></tr></table>\n',Handlebars.registerHelper("spacersaveattributes",function(t){var e,n;return e={dropped:!0,spacing:t.spacing||0,containerbackground:t.containerbackground},n=escape(JSON.stringify(e)),new Handlebars.SafeString(n)}),Handlebars.registerHelper("spacerpadding",function(t){return new Handlebars.SafeString("padding: 0px 0px "+t.spacing+"px 0px;")})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Nlvx.DragAndDropEditor.modules.wysiwyg=function(n){function r(n,i){this.innerHTML=null!=n?n:"<div>Type Something</div>",this.attributes=null!=i?i:{},this.attributes=_.extend({},o,this.attributes),this.designTemplate=Handlebars.compile(e),this.codeTemplate=Handlebars.compile(t),this.scopedDocClick=_.bind(this.onDocumentClick,this),r.__super__.constructor.apply(this,arguments)}var o,a;return i(r,n),a=[{name:"Background Color",type:"ColorPicker",attributeName:"containerbackground"},{name:"Padding",type:"NumberInput",unit:"PX",inputs:4,attributeName:"padding"}],o={containerbackground:"#ffffff",padding:"0,0,0,0"},r.prototype.displayName="Wysiwyg",r.prototype.build=function(){return this.$html=$(this.designTemplate({html:this.innerHTML,attributes:this.attributes}))},r.prototype.afterBuild=function(){return this.$html.data("module",this),this.$editor=this.$html.find("[role='module-editor']"),r.__super__.afterBuild.apply(this,arguments)},r.prototype.bindEvents=function(){return this.$editor.on({focus:function(t){return function(){return t.$toolbar.addClass("active"),t.editor?void 0:($("[role='main']").trigger("click"),$(t).trigger("select"),t.createEditor())}}(this),blur:function(t){return function(){return t.innerHTML=t.getEditorData()||t.innerHTML,t.$toolbar.removeClass("active"),$(t).trigger("change")}}(this)}),this.$html.on("click",function(t){return function(){return t.$editor.trigger("focus")}}(this)),r.__super__.bindEvents.apply(this,arguments)},r.prototype.bindCloseEditorEvents=function(){return $("[role='main']").on("click",this.scopedDocClick),this.$html.on("click",this.stopPropClicks),$("#drag_and_drop_editor").on("click","*",this.stopPropClicks)},r.prototype.unbindCloseEditorEvents=function(){return $("[role='main']").off("click",this.scopedDocClick),this.$html.off("click",this.stopPropClicks),$("#drag_and_drop_editor").off("click","*",this.stopPropClicks)},r.prototype.getHTML=function(){var t;return t=this.getEditorData()||this.innerHTML,this.codeTemplate({html:t,attributes:this.attributes})},r.prototype.teardown=function(){return this.onDocumentClick(),r.__super__.teardown.apply(this,arguments)},r.prototype.getStyles=function(){return a},r.prototype.getType=function(){return"wysiwyg"},r.prototype.createEditor=function(t){var e;return null==t&&(t=Nlvx.DragAndDropEditor.ckConfig),e=_.extend({change:_.bind(this.onEditorChange,this)},t),this.$editor.ckeditor(e),this.editor=this.$editor.ckeditor().editor,this.editor.on("change",_.bind(this.onEditorChange,this)),this.$toolbar.addClass("active"),this.bindCloseEditorEvents()},r.prototype.onDocumentClick=function(){return this.editor?(this.editor.destroy(!0),this.editor=null,this.unbindCloseEditorEvents()):void 0},r.prototype.getEditorData=function(){var t;return null!=(null!=(t=this.editor)?t.getData:void 0)?this.editor.getData().replace(/(\r\n|\n|\r)/gm," "):void 0},r.prototype.onEditorChange=function(){return this.innerHTML=this.getEditorData()||this.innerHTML,$(this).trigger("change")},r.prototype.stopPropClicks=function(t){return t.stopPropagation()},r}(Nlvx.DragAndDropEditor.Module),e='<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" class="module" role="module" data-type="wysiwyg">\n  <tr><td style="{{wysiwygpadding attributes}}" bgcolor="{{attributes.containerbackground}}">\n  <div role="module-editor" contenteditable="true">{{{html}}}</div>\n  <div class="module-controls">\n    <span class="module-controls__move"></span>\n    <span class="module-controls__delete" role="module-delete"></span>\n    <span class="module-controls__duplicate" role="module-duplicate"></span>\n  </div>\n  </td></tr>\n</table>',t='<table class="module" role="module" data-type="wysiwyg" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed;" data-attributes=\'{{{wysiwygsaveattributes attributes}}}\'>\n<tr><td role="module-content" style="{{wysiwygpadding attributes}}" bgcolor="{{attributes.containerbackground}}">{{{html}}}</td></tr></table>\n',Handlebars.registerHelper("wysiwygpadding",function(t){var e;return e=t.padding,0!==e&&(e=e.split(",").join("px ")),new Handlebars.SafeString("padding: "+e+"px;")}),Handlebars.registerHelper("wysiwygsaveattributes",function(t){var e,n;return e={dropped:!0,padding:t.padding,containerbackground:t.containerbackground},n=escape(JSON.stringify(e)),new Handlebars.SafeString(n)})}.call(this),function(){var t,e,n,i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Nlvx.DragAndDropEditor.modules.text=function(i){function o(t,i){this.innerHTML=null!=t?t:"<div>Type Something</div>",this.attributes=null!=i?i:{},o.__super__.constructor.call(this,this.innerHTML,this.attributes),this.designTemplate=Handlebars.compile(n),this.codeTemplate=Handlebars.compile(e)}return r(o,i),o.prototype.displayName="Text",o.prototype.createEditor=function(){return o.__super__.createEditor.call(this,t)},o.prototype.getType=function(){return"text"},o}(Nlvx.DragAndDropEditor.modules.wysiwyg),n='<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" {{#attributes.child}}height="100%"{{/attributes.child}} class="module" role="module" data-type="text">\n  <tr><td valign="top" {{#attributes.child}}height="100%"{{/attributes.child}} style="{{wysiwygpadding attributes}}" bgcolor="{{attributes.containerbackground}}">\n  <div role="module-editor" contenteditable="true">{{{html}}}</div>\n  <div class="module-controls" role="module-controls">\n    <span class="module-controls__move"></span>\n    <span class="module-controls__delete" role="module-delete"></span>\n    <span class="module-controls__duplicate" role="module-duplicate"></span>\n  </div>\n  </td></tr>\n</table>',e='<table class="module" role="module" data-type="text" border="0" cellpadding="0" cellspacing="0" {{#attributes.child}}height="100%"{{/attributes.child}} width="100%" style="table-layout: fixed;" data-attributes=\'{{{textsaveattributes attributes}}}\'>\n<tr>\n  <td role="module-content"  valign="top" height="100%" style="{{wysiwygpadding attributes}}" bgcolor="{{attributes.containerbackground}}">{{{html}}}</td>\n</tr>\n</table>\n',Handlebars.registerHelper("textsaveattributes",function(t){var e,n;return e={dropped:!0,child:t.child||!1,padding:t.padding,containerbackground:t.containerbackground},n=escape(JSON.stringify(e)),new Handlebars.SafeString(n)}),t={startupFocus:!1,title:!1,sharedSpaces:{top:"module-editor__toolbar"},toolbar:[{name:"colors",items:["TextColor","BGColor"]},{name:"styles",items:["Format","Font","FontSize"]},{name:"basic styles",items:["Bold","Italic","Underline","RemoveFormat"]},{name:"paragraph",items:["JustifyLeft","JustifyCenter","JustifyRight"]},{name:"lists",items:["NumberedList","BulletedList"]},{name:"misc",items:["Table","Sglink","HorizontalRule"]}]}}.call(this),function(){var t,e;null==(e=Nlvx.DragAndDropEditor).attributes&&(e.attributes={}),Nlvx.DragAndDropEditor.attributes.Alignment=function(){function e(e){this.styleObj=_.extend({},n,e),this.template=Handlebars.compile(t),this.$html=$(),this.value=""}var n;return n={left:!0,center:!0,right:!0},e.prototype.build=function(){return this.$html=$(this.template(this.styleObj))},e.prototype.afterBuild=function(){return this.$html.find("a").on("click",_.bind(this.onClick,this))},e.prototype.onClick=function(t){var e,n;return t.preventDefault(),e=$(t.currentTarget),n=e.data("alignment"),this.setValue(n),$(this).trigger("update")},e.prototype.setValue=function(t){return this.$html.find(".active").removeClass("active"),this.$html.find("[data-alignment='"+t+"']").addClass("active"),this.value=t},e.prototype.getValue=function(){return this.value},e}(),t='<div class="module-style--attribute module-attribute--alignment">\n  <h5>{{name}}</h5>\n  <div class="module-attribute--alignment__controls">\n    {{#if left}}\n    <a href="#" class="left" data-alignment="left">left</a>\n    {{/if}}\n    {{#if center}}\n    <a href="#" class="center" data-alignment="center">center</a>\n    {{/if}}\n    {{#if right}}\n    <a href="#" class="right" data-alignment="right">right</a>\n    {{/if}}\n  </div>\n  <span class="clearfix"></span>\n</div>'}.call(this),function(){var t,e;null==(e=Nlvx.DragAndDropEditor).attributes&&(e.attributes={}),Nlvx.DragAndDropEditor.attributes.Checkbox=function(){function e(e){this.styleObj=e,this.template=Handlebars.compile(t),this.$html=$(),this.value=""}return e.prototype.build=function(){return this.$html=$(this.template(this.styleObj))},e.prototype.afterBuild=function(){return this.$value=this.$html.find("[role='value']"),this.$value.on("change",_.bind(this.onChange,this))},e.prototype.onChange=function(){var t;return t=this.$value.is(":checked"),this.value=t,$(this).trigger("update")},e.prototype.setValue=function(t){return t===!0?this.$value.attr("checked","checked"):this.$value.removeAttr("checked"),this.value=t},e.prototype.getValue=function(){return this.value},e}(),t='<div class="module-style--attribute module-attribute--checkbox">\n  <h5>{{name}}</h5>\n  <div class="module-attribute--checkbox__input">\n    <input type="checkbox" role="value">\n  </div>\n</div>'}.call(this),function(){var t,e;null==(e=Nlvx.DragAndDropEditor).attributes&&(e.attributes={}),Nlvx.DragAndDropEditor.attributes.ColorPicker=function(){function e(e){this.styleObj=e,this.template=Handlebars.compile(t),this.$html=$(),this.$value=$()}return e.prototype.build=function(){return this.$html=$(this.template(this.styleObj))},e.prototype.afterBuild=function(){return this.$value=this.$html.find("[role='value']"),this.$colorPicker=this.$html.find("[role='color-picker-trigger']"),this.$colorPicker.spectrum({preferredFormat:"hex",showInput:!0,showPalette:!1,showInitial:!0,chooseText:"Save",cancelText:"Cancel",clickoutFiresChange:!1,change:_.bind(this.onColorChange,this),color:"#FFFFFF"}),this.$html.find("[data-role=reset-button]").on("click",_.bind(this.onReset,this)),this.$colorPicker.on("reflow.spectrum",_.bind(this.onSpectrumReflow,this)),this.$colorPicker.on("beforereflow.spectrum",function(){return $(".sp-container").removeClass("reposition-below reposition-above")}),this.$colorPicker.on("dragstop.spectrum",function(t){return function(e,n){return t.onColorChange(n)}}(this)),this.$colorPicker.spectrum("set","#FFFFFF"),this.$value.on("blur",function(t){return function(){var e;return e=$(t.$value).val(),t.$colorPicker.css("backgroundColor",e),t.$colorPicker.spectrum("set",e),t.triggerUpdate()}}(this))},e.prototype.triggerUpdate=function(){return $(this).trigger("update")},e.prototype.onReset=function(t){return t.preventDefault(),this.setValue(this.styleObj.resetValue)},e.prototype.onColorChange=function(t){var e;return e=t.toHexString(),this.setValue(e)},e.prototype.onSpectrumReflow=function(t,e){var n,i;return e.addClass((null!=(n=e.offset())?n.top:void 0)<(null!=(i=$(t.currentTarget).offset())?i.top:void 0)?"reposition-above":"reposition-below")},e.prototype.setValue=function(t,e){return null==t&&(t=""),null==e&&(e=!1),$.trim(t).length&&(this.$colorPicker.css("backgroundColor",t),this.$value.val(t),this.$colorPicker.spectrum("set",t),!e)?this.triggerUpdate():void 0},e.prototype.getValue=function(){return this.$value.val()},e}(),t='<div class="module-style--attribute module-attribute--colorpicker">\n  <h5>{{name}}</h5>\n  <div class="module-attribute--colorpicker__picker">\n    {{#if resetValue}}\n      <a data-role="reset-button" href="#" alt="Reset to default color." title="Reset to default color.">reset</a>\n    {{/if}}\n    <a href="#" class="module-attribute--colorpicker__trigger" role="color-picker-trigger"></a>\n    <div class="module-attribute--input module-attribute--colorpicker__input module-attribute--input__small">\n      <input type="text" role="value" maxlength="7">\n    </div>\n  </div>\n  <div class="cp-default" role="color-picker-container">\n  </div>\n</div>'}.call(this),function(){var t,e;null==(e=Nlvx.DragAndDropEditor).attributes&&(e.attributes={}),Nlvx.DragAndDropEditor.attributes.NumberInput=function(){function e(e){this.template=Handlebars.compile(t),this.$html=$(),this.$value=$(),this.styleObj=_.extend({},n,e),this.canBeBlank=this.styleObj.canBeBlank||!1,this.shouldUpdateOnKeyUp=this.styleObj.shouldUpdateOnKeyUp!==!1}var n;return n={inputs:1},e.prototype.build=function(){return this.$html=$(this.template(this.styleObj))},e.prototype.afterBuild=function(){return this.$value=this.$html.find("[role='value']"),this.$value.on({change:_.bind(this.onChange,this),keyup:_.bind(this.onKeyUp,this),blur:this.shouldUpdateOnKeyUp?void 0:_.bind(this.onChange,this)})
},e.prototype.onKeyUp=function(t){var e,n,i;return n=t.which,e=$(t.currentTarget),i=parseInt(e.val())||0,38===n?e.val(i+1):40===n&&e.val(this.validate(i-1)?i-1:0),this.shouldUpdateOnKeyUp?$(this).trigger("update"):void 0},e.prototype.onChange=function(t){var e;return e=$(t.currentTarget),this.isMinimumValueMet(e.val())||e.val(this.styleObj.minimumValue),$(this).trigger("update")},e.prototype.isMinimumValueMet=function(t){var e;return parseInt(this.styleObj.minimumValue)?(e=parseInt(t)||0,e>=this.styleObj.minimumValue):!0},e.prototype.setValue=function(t){var e,n,i,r,o,a,s;for(null==t&&(t=""),t=String(t).split(","),e=this.$html.find("input[type='text']"),s=[],n=o=0,a=e.length;a>o;n=++o)r=e[n],null!=t[n]&&(i=t[n]),s.push($(r).val(this.parseInt(i)));return s},e.prototype.getValue=function(){var t;return this.styleObj.inputs<2?this.parseInt(this.$value.val()):(t=_.map(this.$value,function(t){return function(e){return t.parseInt($(e).val())}}(this)),t.join(","))},e.prototype.validate=function(t){return null==t&&(t=null),!_.isNaN(parseInt(t))&&parseInt(t)>0},e.prototype.parseInt=function(t){return this.validate(t)?parseInt(t):this.canBeBlank?"":0},e}(),t='<div class="module-style--attribute module-attribute--numberinput">\n  <h5>{{name}}</h5>\n  {{#times .}}\n    <div class="module-attribute--input module-attribute--numberinput__input module-attribute--input__small">\n      <input type="text" role="value">\n      <span class="module-attribute--numberinput__unit">{{../unit}}</span>\n    </div>\n  {{/times}}\n</div>',Handlebars.registerHelper("times",function(t,e){var n;return n="",_(t.inputs).times(function(){return n+=e.fn(t)}),n})}.call(this),function(){var t,e;null==(e=Nlvx.DragAndDropEditor).attributes&&(e.attributes={}),Nlvx.DragAndDropEditor.attributes.Range=function(){function e(e){this.styleObj=e,this.template=Handlebars.compile(t),this.$html=$(),this.value=""}return e.prototype.build=function(){return this.$html=$(this.template(this.styleObj))},e.prototype.afterBuild=function(){return this.$value=this.$html.find("[role='value']"),this.$output=this.$html.find("output"),this.$value.on("input",_.bind(this.onInput,this))},e.prototype.onInput=function(){var t;return t=this.$value.val(),this.value=t,this.$output.text(t),$(this).trigger("update")},e.prototype.setValue=function(t){return this.$value.val(t),this.$output.text(t),this.value=t},e.prototype.getValue=function(){return this.value},e}(),t='<div class="module-style--attribute module-attribute--range">\n  <h5>{{name}}</h5>\n  <form>\n    <input name="range" type="range" role="value" min="{{min}}" max="{{max}}">\n    <div class="module-attribute--range__output">\n      <output for="range"></output>\n      <span>{{unit}}</span>\n    </div>\n  </form>\n</div>'}.call(this),function(){var t,e;null==(e=Nlvx.DragAndDropEditor).attributes&&(e.attributes={}),Nlvx.DragAndDropEditor.attributes.Select=function(){function e(e){this.styleObj=e,this.template=Handlebars.compile(t),this.$html=$(),this.value="",this.options=this.styleObj.options}return e.prototype.build=function(){return this.$html=$(this.template(this.styleObj))},e.prototype.afterBuild=function(){return this.$value=this.$html.find("[role='value']"),this.$value.select2(),this.$value.on("change",_.bind(this.onChange,this))},e.prototype.onChange=function(){return this.value=this.$value.val(),$(this).trigger("update")},e.prototype.setValue=function(t){return this.$value.select2("val",t),this.value=t},e.prototype.getValue=function(){return this.value},e}(),t='<div class="module-style--attribute module-attribute--select">\n  <h5>{{name}}</h5>\n  <form>\n    <select role="value">\n      {{#options}}\n        <option value="{{value}}">{{name}}</option>\n      {{/options}}\n    </select>\n  </form>\n</div>'}.call(this),function(){var t,e;null==(e=Nlvx.DragAndDropEditor).attributes&&(e.attributes={}),Nlvx.DragAndDropEditor.attributes.TextInput=function(){function e(e){this.styleObj=e,this.template=Handlebars.compile(t),this.$html=$(),this.$value=$(),this.value=""}return e.prototype.build=function(){return this.$html=$(this.template(this.styleObj))},e.prototype.afterBuild=function(){return this.$value=this.$html.find("[role='value']"),this.$value.on("change",_.bind(this.onChange,this))},e.prototype.onChange=function(){var t;return t=this.$value.val(),this.setValue(t),$(this).trigger("update")},e.prototype.setValue=function(t){return this.$value.val(unescape(t))},e.prototype.getValue=function(){return escape(this.$value.val())},e}(),t='<div class="module-style--attribute module-attribute--textinput">\n  <h5>{{name}}</h5>\n  <div class="module-attribute--input module-attribute--textinput__input module-attribute--input__large">\n    <input type="text" role="value">\n  </div>\n</div>'}.call(this),function(){Nlvx.Routers.ContentEditor=function(){function t(){}var e;return t.init=function(t,n,i){var r;return null==n&&(n={}),null==i&&(i={}),r={previewEl:"#content_preview",htmlContentEl:"#html_content",plainTextContentEl:"#plain_text_content"},this.contents=Nlvx.ContentEditor.contentCollection.getContents(),this.router?void 0:this.router=new e($(t),$.extend(r,n),i)},e=function(){function t(t,e,n){this.$el=t,null==e&&(e={}),this.validation=null!=n?n:{},this.previewEl=e.previewEl,this.htmlContentEl=e.htmlContentEl,this.plainTextContentEl=e.plainTextContentEl,this.toggleButton=$(".toggle-slider"),this.toggleButton.on("click",function(t){return function(){return t.toggleSwitchView()}}(this)),this.dndSwitch=new Nlvx.OnOffSwitch($("#dnd-toggle"),$("#editor_mode_warning_modal")),this.setDndSwitch(),$(this.dndSwitch).on({off:function(t){return function(){var e;return null!=(e=t.dragAndDropEditorView)&&e.deactivate(),t.navigationView.showPage("visual-editor"),t.forceVisualEditor()}}(this),on:function(t){return function(){return t.navigationView.showPage("visual-editor"),t.forceVisualEditor(!0)}}(this)}),this.routes={"/":_.bind(this.visualEditor,this),"/visual-editor":_.bind(this.visualEditor,this),"/visual-editor/:version":_.bind(this.visualEditor,this),"/html-editor":_.bind(this.htmlEditor,this),"/html-editor/:version":_.bind(this.htmlEditor,this),"/drag-and-drop-editor":_.bind(this.dragAndDropEditor,this),"/plain-text-editor":_.bind(this.plainTextEditor,this),"/desktop-preview":_.bind(this.desktopPreview,this),"/mobile-preview":_.bind(this.mobilePreview,this)},this.router=Router(this.routes),this.router.configure({before:_.bind(this.beforeRouteTo,this),after:_.bind(this.beforeLeavingRoute,this),async:!0}),this.router.init(),this.instantiateEditView(),window.location.hash.length||this.router.setRoute("visual-editor"),Nlvx.ContentEditor.History.init(),Nlvx.ContentEditor.History.onRewind(function(t){return function(){return t.routeIsVisual()&&Nlvx.ContentEditor.contentCollection.canRewindHTML()?(Nlvx.ContentEditor.contentCollection.rewindHTML(),t.getVisualEditorView().updateContent()):void 0}}(this)),Nlvx.ContentEditor.History.onForward(function(t){return function(){return t.routeIsVisual()&&Nlvx.ContentEditor.contentCollection.canForwardHTML()?(Nlvx.ContentEditor.contentCollection.forwardHTML(),t.getVisualEditorView().updateContent()):void 0}}(this))}return t.prototype.createModeToggleModal=function(t,e){return this.modal=new Nlvx.HtmlModeToggleModal($(".code-mode"),$("#html_mode_warning_modal"),$("#continue_mode_switch"),$("#stay_in_current_mode"),function(){return function(){return"function"==typeof t?t():void 0}}(this),function(){return function(){return"function"==typeof e?e():void 0}}(this))},t.prototype.setDndSwitch=function(){return this.dndSwitch.set(Nlvx.ContentEditor.contentCollection.isDNDTemplate()?!0:!1)},t.prototype.beforeRouteTo=function(){var t,e;return t=_.last(arguments),e=this.router.getRoute(0)||"",this.router.currentHash=e,this.router.currentVersion=this.router.getRoute(1),this.router.currentVersion&&Nlvx.ContentEditor.contentCollection.setVersion(this.router.currentVersion),null==this.navigationView&&(this.navigationView=new Nlvx.ContentEditor.NavigationView(this.$el)),this.navigationView.showPage(e),t()},t.prototype.routeIsVisual=function(){return"visual-editor"===this.router.currentHash||""},t.prototype.routeIsPlaintext=function(){return"plain-text-editor"===this.router.currentHash},t.prototype.routeIsHtml=function(){return"html-editor"===this.router.currentHash},t.prototype.beforeLeavingRoute=function(){var t,e,n,i;return e=_.last(arguments),n=this.router.getRoute(0)||"","html-editor"===n&&Nlvx.ContentEditor.contentCollection.isDNDTemplate()?(this.createModeToggleModal(function(t){return function(){var n;return t.routeIsVisual()?(n=t.getVisualEditorView(),n.teardown()):t.routeIsHtml()?t.htmlEditorView.teardown():t.routeIsPlaintext()&&t.plainTextEditorView.teardown(),e()}}(this),function(t){return function(){return t.router.setRoute(t.router.currentHash||"")}}(this)),this.modal.show()):(null!=(i=this.modal)&&i.destroy(),this.modal=null,this.routeIsVisual()?(t=this.getVisualEditorView(),t.teardown()):this.routeIsHtml()?this.htmlEditorView.teardown():this.routeIsPlaintext()&&this.plainTextEditorView.teardown(),e())},t.prototype.dragAndDropEditor=function(){return null==this.dragAndDropEditorView&&(this.dragAndDropEditorView=new Nlvx.ContentEditor.DragAndDropEditorView(this.$el,this.validation)),this.dragAndDropEditorView.render()},t.prototype.forceVisualEditor=function(t){var e;return null==t&&(t=!1),this.setDndSwitch(),e=this.getVisualEditorView(t),e.render(),Nlvx.ContentEditor.contentCollection.resetHistory()},t.prototype.visualEditor=function(){var t;return this.setDndSwitch(),t=this.getVisualEditorView(),t.render(),Nlvx.ContentEditor.contentCollection.resetHistory()},t.prototype.getVisualEditorView=function(t){return null==t&&(t=!1),t===!0||Nlvx.ContentEditor.contentCollection.isDNDTemplate()?null!=this.dragAndDropEditorView?this.dragAndDropEditorView:this.dragAndDropEditorView=new Nlvx.ContentEditor.DragAndDropEditorView(this.$el,this.validation):null!=this.visualEditorView?this.visualEditorView:this.visualEditorView=new Nlvx.ContentEditor.VisualEditorView(this.$el,this.validation)},t.prototype.htmlEditor=function(){return $(document).ready(function(){return window.analytics.track("code_editor",{origin_editor:Nlvx.ContentEditor.contentCollection.isDNDTemplate()?"dd":"advanced"})}),null==this.htmlEditorView&&(this.htmlEditorView=new Nlvx.ContentEditor.HtmlEditorView(this.$el,this.validation)),this.htmlEditorView.render()},t.prototype.plainTextEditor=function(){return null==this.plainTextEditorView&&(this.plainTextEditorView=new Nlvx.ContentEditor.PlainTextEditorView(this.$el,this.validation)),this.plainTextEditorView.render()},t.prototype.desktopPreview=function(){return this.renderPreview(!1)},t.prototype.mobilePreview=function(){return this.renderPreview(!0)},t.prototype.renderPreview=function(t){return null==this.desktopPreviewView&&(this.desktopPreviewView=new Nlvx.ContentEditor.PreviewView(this.$el,this.previewEl)),this.desktopPreviewView.render(t)},t.prototype.instantiateEditView=function(){return this.editView?void 0:(this.editView=new Nlvx.ContentEditor.EditView(this.$el,this.htmlContentEl,this.plainTextContentEl),this.editView.bindEvents())},t.prototype.reRecordFormData=function(){return this.editView.reRecordFormData()},t.prototype.toggleSwitchView=function(){var t,e;return t=this.router.getRoute(1)||"",e=""===t?""+t:"/"+t,this.router.setRoute(this.routeIsVisual()?"html-editor"+e:"visual-editor"+e)},t.prototype.switchToVersion=function(t){return null==t&&(t="a"),this.routeIsHtml()?(this.router.setRoute("html-editor/"+t),this.htmlEditor()):(this.router.setRoute("visual-editor/"+t),this.visualEditor())},t}(),t}()}.call(this),function(){Nlvx.ConversionWarningModal=function(){function t(t,e){this.$target=$(t),this.modal=this.$target.find(e)}return t.prototype.render=function(t,e){var n,i,r;return i=this.modal.modal({show:!0,backdrop:!1}),n=i.find(".modal-content").width(),r=0>=t-n?t:t-n,i.css({top:e,left:r,right:"initial"})},t}()}.call(this),function(){var t,e;null==(e=Nlvx.DragAndDropEditor).attributes&&(e.attributes={}),Nlvx.DragAndDropEditor.attributes.Button=function(){function e(e){this.styleObj=e,this.template=Handlebars.compile(t),this.$html=$()}return e.prototype.build=function(){return this.$html=$(this.template(this.styleObj))},e.prototype.afterBuild=function(t){return this.$html.on("click",_.bind(this.onClick,this,t))},e.prototype.onClick=function(t,e){return e.preventDefault(),this.styleObj.callback(t)},e.prototype.setValue=function(){return void 0},e.prototype.getValue=function(){return void 0},e}(),t='<div class="module-style--attribute module-attribute--button">\n  {{#label}}<h5>{{.}}</h5>{{/label}}\n  <a href="#" class="{{cssClasses}}" title="{{altText}}">{{name}}</a>\n</div>'}.call(this),function(){var t,e;null==(e=Nlvx.DragAndDropEditor).attributes&&(e.attributes={}),Nlvx.DragAndDropEditor.attributes.CheckboxInput=function(){function e(e){this.styleObj=e,this.template=Handlebars.compile(t),this.$html=$(),this.$checkboxValue=$(),this.$textinputValue=$()}return e.prototype.build=function(){return this.$html=$(this.template(this.styleObj))},e.prototype.afterBuild=function(){return this.$checkboxValue=this.$html.find("[type='checkbox'][role='value']"),this.$textinputValue=this.$html.find("[type='text'][role='value']"),this.$checkboxValue.on("change",_.bind(this.onChange,this)),this.$textinputValue.on("change",_.bind(this.onChange,this))},e.prototype.onChange=function(){return this.value={checked:this.$checkboxValue.is(":checked"),text:this.$textinputValue.val()},this.setValue(this.value),$(this).trigger("update")},e.prototype.setValue=function(t){return this.$checkboxValue.prop("checked",t.checked),this.$textinputValue.val(unescape(t.text))},e.prototype.getValue=function(){return this.value},e}(),t='<div class="module-style--attribute module-attribute--checkboxinput">\n  <div class="row">\n    <div class="col-md-3">\n      <h5>{{name}}</h5>\n    </div>\n    <div class="col-md-2">\n      <div class="module-attribute--checkbox__input">\n        <input type="checkbox" role="value" />\n      </div>\n    </div>\n    <div class="col-md-7">\n      <div class="module-attribute--input module-attribute--textinput__input module-attribute--input__large">\n        <input type="text" role="value" placeholder="{{placeholder}}"/>\n      </div>\n    </div>\n  </div>\n</div>'}.call(this),function(){var t,e;null==(e=Nlvx.DragAndDropEditor).attributes&&(e.attributes={}),Nlvx.DragAndDropEditor.attributes.Divider=function(){function e(e){this.styleObj=e,this.template=Handlebars.compile(t),this.$html=$()}return e.prototype.build=function(){return this.$html=$(this.template(this.styleObj))},e.prototype.afterBuild=function(){},e.prototype.setValue=function(){},e.prototype.getValue=function(){return""},e}(),t='<div class="module-style--attribute module-attribute--divider"></div>'}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Nlvx.DragAndDropEditor.modules.divider=function(n){function r(n,i){this.innerHTML=null!=n?n:"",this.attributes=null!=i?i:{},r.__super__.constructor.call(this,this.innerHTML,this.attributes),this.attributes=_.extend({},o,this.attributes),this.designTemplate=Handlebars.compile(e),this.codeTemplate=Handlebars.compile(t)}var o,a;return i(r,n),a=[{name:"Background Color",type:"ColorPicker",attributeName:"containerbackground"},{name:"Line Color",type:"ColorPicker",attributeName:"linecolor"},{name:"Height",type:"NumberInput",unit:"PX",attributeName:"height"},{name:"Padding",type:"NumberInput",unit:"PX",inputs:4,attributeName:"padding"}],o={containerbackground:"#ffffff",linecolor:"#000000",padding:"0,0,0,0",height:5},r.prototype.displayName="Divider",r.prototype.build=function(){return this.$html=$(this.designTemplate({attributes:this.attributes}))},r.prototype.afterBuild=function(){return this.$html.on("click",function(t){return function(){return $(t.$html).hasClass("style-group-selected")?void 0:$(t).trigger("select")}}(this)),r.__super__.afterBuild.apply(this,arguments)},r.prototype.getHTML=function(){return this.codeTemplate({attributes:this.attributes})},r.prototype.getStyles=function(){return a},r.prototype.getType=function(){return"divider"},r}(Nlvx.DragAndDropEditor.Module),e='<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" class="module" role="module" data-type="divider">\n  <tr><td style="{{dividerpadding attributes}}" bgcolor="{{attributes.containerbackground}}">\n    <table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" height="{{attributes.height}}"  style="font-size: {{attributes.height}}px; line-height: {{attributes.height}}px;">\n      <tr><td bgcolor="{{attributes.linecolor}}">&nbsp;</td></tr>\n    </table>\n    <div class="module-controls" role="module-controls">\n      <span class="module-controls__move"></span>\n      <span class="module-controls__delete" role="module-delete"></span>\n      <span class="module-controls__duplicate" role="module-duplicate"></span>\n    </div>\n  </td></tr>\n</table>',t='<table class="module" role="module" data-type="divider" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed;" data-attributes=\'{{{divideraveattributes attributes}}}\'>\n<tr><td role="module-content" style="{{dividerpadding attributes}}" bgcolor="{{attributes.containerbackground}}">\n  <table border="0" cellpadding="0" cellspacing="0" align="center" width="100%" height="{{attributes.height}}"  style="font-size: {{attributes.height}}px; line-height: {{attributes.height}}px;">\n    <tr><td bgcolor="{{attributes.linecolor}}">&nbsp;</td></tr>\n  </table>\n</td></tr></table>\n',Handlebars.registerHelper("divideraveattributes",function(t){var e,n;return e={dropped:!0,padding:t.padding,containerbackground:t.containerbackground,linecolor:t.linecolor,height:t.height},n=escape(JSON.stringify(e)),new Handlebars.SafeString(n)}),Handlebars.registerHelper("dividerpadding",function(t){var e;return e=t.padding,0!==e&&(e=e.split(",").join("px ")),new Handlebars.SafeString("padding: "+e+"px;")})}.call(this),function(){var t,e,n,i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Nlvx.DragAndDropEditor.modules.social=function(n){function i(n,r){this.innerHTML=null!=n?n:"",null==r&&(r={}),this.attributes=$.extend(!0,{},o,r),i.__super__.constructor.call(this,this.innerHTML,this.attributes),this.designTemplate=Handlebars.compile(e),this.codeTemplate=Handlebars.compile(t)}var o,a;return r(i,n),a=[{name:"Background Color",type:"ColorPicker",attributeName:"backgroundcolor"},{name:"Icon Color",type:"ColorPicker",attributeName:"iconcolor",resetValue:"AUTO"},{name:"Icon Size",type:"Range",attributeName:"iconsize",min:30,max:60,unit:"px"},{name:"Border Radius",type:"Range",attributeName:"borderradius",min:0,max:30,unit:"px"},{name:"Padding",type:"NumberInput",unit:"PX",inputs:4,attributeName:"padding"},{name:"Alignment",type:"Alignment",attributeName:"alignment"},{name:"Facebook",type:"CheckboxInput",placeholder:"Facebook Link",attributeName:"option_facebook"},{name:"Twitter",type:"CheckboxInput",placeholder:"Twitter Link",attributeName:"option_twitter"},{name:"Instagram",type:"CheckboxInput",placeholder:"Instagram Link",attributeName:"option_instagram"},{name:"Google+",type:"CheckboxInput",placeholder:"Google+ Link",attributeName:"option_googleplus"},{name:"Pinterest",type:"CheckboxInput",placeholder:"Pinterest Link",attributeName:"option_pinterest"},{name:"LinkedIn",type:"CheckboxInput",placeholder:"LinkedIn Link",attributeName:"option_linkedin"}],o={backgroundcolor:"#FFFFFF",iconcolor:"AUTO",iconsize:30,borderradius:2,padding:"0,0,0,0",alignment:"center",imageurl:{white:"https://marketing-image-production.s3.amazonaws.com/social/white/"},option_facebook:{checked:!0,text:"",filename:"facebook.png",title:"Facebook",backgroundcolor:"#3B579D"},option_twitter:{checked:!0,text:"",filename:"twitter.png",title:"Twitter",backgroundcolor:"#7AC4F7"},option_instagram:{checked:!0,text:"",filename:"instagram.png",title:"Instagram",backgroundcolor:"#7F4B30"},option_googleplus:{checked:!0,text:"",filename:"google-plus.png",title:"Google+",backgroundcolor:"#D44132"},option_pinterest:{checked:!0,text:"",filename:"pinterest.png",title:"Pinterest",backgroundcolor:"#CB2027"},option_linkedin:{checked:!0,text:"",filename:"linkedin.png",backgroundcolor:"#0077B5"}},i.prototype.displayName="Social",i.prototype.build=function(){return i.__super__.build.apply(this,arguments),this.$html=$(this.designTemplate({attributes:this.attributes}))},i.prototype.afterBuild=function(){return i.__super__.afterBuild.apply(this,arguments),this.$html.on("click",function(t){return function(){return $(t.$html).hasClass("style-group-selected")?void 0:$(t).trigger("select")}}(this)),this.$html.find("a").on("click",function(t){return t.preventDefault()})},i.prototype.getHTML=function(){return this.codeTemplate({attributes:this.attributes})},i.prototype.teardown=function(){return i.__super__.teardown.apply(this,arguments),this.$html.off("click"),this.$html.find("a").off("click")},i.prototype.updateHTML=function(){return this.rerender(),$(this).trigger("change")},i.prototype.updateAttributes=function(t){return null==t&&(t={}),$.extend(!0,this.attributes,t),this.updateHTML()},i.prototype.getStyles=function(){return a},i.prototype.getType=function(){return"social"},i}(Nlvx.DragAndDropEditor.Module),n=function(t,e){var n,i,r,o;return null==e&&(e=!1),r="",i=["-webkit","-moz","-ms","-o"],o=_.filter(Object.keys(t),function(t){return t.indexOf("option_")>-1}),n=t.imageurl.white,_.each(o,function(o){var a,s,l,u,c,h,d;return s=t[o].backgroundcolor,"AUTO"!==t.iconcolor&&(s=t.iconcolor),a="background-color: "+s+";",l="border-radius: "+t.borderradius+"px; "+_.map(i,function(e){return""+e+"-border-radius:"+t.borderradius+"px;"}).join(" "),h="height: "+t.iconsize+"px; width: "+t.iconsize+"px;",t[o].checked&&t[o].text.length||t[o].checked&&!t[o].text.length&&!e?(d=t[o].title,t[o].text.length||(d+=" [Missing Link]"),c='<td style="padding: 0px 5px;"><a\nrole="social-icon-link"\nhref="'+unescape(t[o].text)+'"\ntarget="_blank"\nborder="0"\nalt="'+t[o].title+'"\ntitle="'+d+'"\nstyle="'+a+" "+l+' color: white; display: inline-block; outline: none; text-decoration:none; border: none; font-family: Helvetica, arial, sans-serif;">',u="</a></td>",r+=new Handlebars.SafeString(""+c+'\n  <img\n    role="social-icon"\n    alt="'+t[o].title+'"\n    title="'+d+'"\n    border="0"\n    height="'+t.iconsize+'"\n    width="'+t.iconsize+'"\n    style="'+h+' border:none; color: white; font-family: Helvetica, arial, sans-serif;"\n    src="'+(n+t[o].filename)+'"\n  />\n'+u)):void 0}),r},Handlebars.registerHelper("socialicons",function(t){return n(t)}),Handlebars.registerHelper("socialiconscodeview",function(t){return n(t,!0)}),Handlebars.registerHelper("socialsaveattributes",function(t){var e,n,i,r;return i=_.filter(Object.keys(t),function(t){return t.indexOf("option_")>-1}),e={backgroundcolor:t.backgroundcolor,iconsize:t.iconsize,iconcolor:t.iconcolor,borderradius:t.borderradius,padding:t.padding,alignment:t.alignment},r=_.pick(t,i),e=_.extend({},e,r),n=escape(JSON.stringify(e)),new Handlebars.SafeString(n)}),Handlebars.registerHelper("padding",function(t){var e;return e=t.padding,0!==e&&(e=e.split(",").join("px ")),new Handlebars.SafeString("padding: "+e+"px;")}),e='<table role="module" data-type="social" border="0" cellpadding="0" cellspacing="0" width="100%" class="wrapper module">\n  <tr>\n    <td align="{{attributes.alignment}}" valign="top" style="background-color:{{attributes.backgroundcolor}}; {{padding attributes}}">\n      <div class="module-content"><table cellpadding="0" cellspacing="0" border="0" style="" align="{{attributes.alignment}}">\n        <tr>\n          {{{socialicons attributes}}}\n        </tr>\n      </table></div>\n      <div class="module-controls">\n        <span class="module-controls__move"></span>\n        <span class="module-controls__delete" role="module-delete"></span>\n        <span class="module-controls__duplicate" role="module-duplicate"></span>\n      </div>\n    </td>\n  </tr>\n</table>',t='<table role="module" data-type="social" border="0" align="center" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed;" class="wrapper" data-attributes=\'{{socialsaveattributes attributes}}\'>\n<tr>\n  <td style="font-size:6px;line-height:10px;background-color:{{attributes.imagebackground}};{{padding attributes}}" valign="top" align="{{attributes.alignment}}" role="module-content">\n      <table cellpadding="0" cellspacing="0" border="0" style="" align="{{attributes.alignment}}">\n        <tr>{{{socialiconscodeview attributes}}}</tr>\n      </table>\n  </td>\n</tr>\n</table>'}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Nlvx.ContentEditor.DragAndDropEditorView=function(n){function r(t,n){this.validation=null!=n?n:{},this.validateContent=e(this.validateContent,this),this.onDeleteKeydownHandler=e(this.onDeleteKeydownHandler,this),this.$target=$(t),this.editor=new Nlvx.DragAndDropEditor,$(this.editor).on("change",_.bind(this.handleEditorChange,this)),this.validation.validator&&(this.$contentNotice=$("#dnd_content_notice"),this.$contentNotice.errorNotice({message:this.validation.message,validator:this.validateContent,noticeEl:this.$contentNotice}))}return i(r,n),r.prototype.render=function(){return this.setupABTabs(),Nlvx.ContentEditor.ScreenBehaviors.overrideDeleteKey(!0,this.onDeleteKeydownHandler),this.appear(),this.editor.redraw(),this.handleEditorChange()},r.prototype.setupABTabs=function(){var t,e;return e=Nlvx.ContentEditor.contentCollection.getVersion(),$("ul.contentabtest--tabs").remove(),Nlvx.ContentEditor.contentCollection.hasMultiple()?(t=Nlvx.ContentEditor.contentCollection.getVersions(),this.$tabs=$(this.buildTabs({tabs:t,size:t.length})),$("#drag_and_drop_editor").before(this.$tabs),this.$tabs.find("li.active").removeClass("active"),this.$tabs.find("li[data-version='"+e+"']").addClass("active")):void 0},r.prototype.updateContent=function(){return this.editor.redraw()},r.prototype.onDeleteKeydownHandler=function(t){return this.isInputFocused()?!0:(this.editor.removeSelectedModules(),t.preventDefault(),!1)},r.prototype.buildTabs=function(e){var n;return(n=Handlebars.compile(t))(e)},r.prototype.appear=function(){return this.$target.find(".template-editors, #drag_and_drop_editor").show(),this.$target.find(".toggle-slider .select").removeClass("right").addClass("left"),$("body").addClass("with-style-tab"),$(".drag-modules").show(),$("#email-preheader-setting").show(),$("#dnd-toggle-group").show()},r.prototype.teardown=function(){return $("#email-preheader-setting").hide(),$("#dnd-toggle-group").hide(),$("body").removeClass("with-style-tab"),this.handleEditorChange(),this.editor.teardownModules(),Nlvx.ContentEditor.ScreenBehaviors.overrideDeleteKey(!1)},r.prototype.handleEditorChange=function(){var t,e,n;return(null!=(e=this.editor.getAllModules())?e.length:void 0)?(t=this.editor.getModulesHTML(),Nlvx.ContentEditor.contentCollection.setHTML(t),null!=(n=this.$contentNotice)&&n.errorNotice("check"),this.$target.trigger("contentChange")):void 0},r.prototype.deactivate=function(){return this.editor.deactivate(),this.teardown()},r.prototype.validateContent=function(){return this.validation.validator?this.validation.validator(Nlvx.Sanitizers.removeJavascript(this.editor.getModulesHTML())):!0},r}(Nlvx.ContentEditor.EditorViewBase),t='<ul class="contentabtest--tabs contentabtest--tabs__{{size}}">\n  {{#tabs}}\n    <li data-version="{{.}}"><a href="#visual-editor/{{.}}">{{.}}</a></li>\n  {{/tabs}}\n</ul>'}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.ContentEditor.EditView=function(){function e(e,n,i){this.htmlContentEl=n,this.plainTextContentEL=i,this.submitSendTestForm=t(this.submitSendTestForm,this),this.submitSaveForm=t(this.submitSaveForm,this),this.sendSaveAjaxRequest=t(this.sendSaveAjaxRequest,this),this.submitSendForm=t(this.submitSendForm,this),this.trySubmitSendForm=t(this.trySubmitSendForm,this),this.displayErrorMessages=t(this.displayErrorMessages,this),this.validateAndPerform=t(this.validateAndPerform,this),this.reRecordFormData=t(this.reRecordFormData,this),this.disableSaveSend=t(this.disableSaveSend,this),this.enableSaveSend=t(this.enableSaveSend,this),this.$target=$(e),this.redirect_url=null,this.allowAutoSave=!1,this.skipSaveFlash=!1,this.editor_form="#"+this.$target.find("form.edit_content").attr("id"),this.formData=this.getFormData(!1),Nlvx.ContentEditor.SaveUtility.setSaveFunction(function(t){return function(e){return t.validateAndPerform(t.submitSaveForm,e)}}(this)),Nlvx.ContentEditor.autoConvertToPlain=!0,this.sendOrSave=function(){},this.$target.find("form.auto_save").length&&(setInterval(_.bind(this.autoSaveIfEnabled,this),12e4),this.enableSaveSend())}return e.prototype.plaintextIsLocked=function(){return"1"===this.$target.find("#campaign_has_plain_text_lock").val()},e.prototype.bindEvents=function(){return this.$target.on("keypress",".campaign-form",function(t){return 13!==t.which||$(t.target).is("textarea")?void 0:t.preventDefault()}),this.$target.on("click","#exit_modal",function(t){return function(){return t.enableSaveSend()}}(this)),this.$target.on("click",".save-content",function(t){return function(e){return t.saveCampaign(e)}}(this)),this.$target.on("click","#htmlplain_modal .confirm",function(t){return function(){return t.submitSaveForm()}}(this)),this.$target.on("click","#sendOrSave_conversion_warning_modal .confirm",function(t){return function(){return t.copyContentToFormAndSubmit()}}(this)),this.$target.on("click","#sendOrSave_ignore_import_html_warning",function(t){return function(){return t.ignorePlainContentAndSubmit()}}(this)),this.$target.on("click","#send_campaign",function(t){return function(e){return t.sendCampaign(e)}}(this)),this.$target.on("click","#send_test_campaign",function(t){return function(e){return t.sendTestCampaign(e)}}(this)),this.$target.on("click","#back-button",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.checkForm()}}(this)),this.$target.on("click","#exit_warning_modal .confirm",function(){return function(){return Nlvx.WindowHandler.redirect($("#back-button").attr("href"))}}(this)),this.$target.on("click","#exit_modal",function(t){return function(){return t.sendOrSave=function(){}}}(this))},e.prototype.enableSaveSend=function(){return this.allowAutoSave=!0,$(".save-content").prop("disabled",!1),$("#send_campaign").add(".save-content").removeClass("disabled")},e.prototype.disableSaveSend=function(){return this.allowAutoSave=!1,$(".save-content").prop("disabled",!0),$("#send_campaign").add(".save-content").addClass("disabled")},e.prototype.reRecordFormData=function(){return this.formData=this.getFormData(!1)},e.prototype.checkForm=function(){var t,e;return e=this.formData,t=this.getFormData(!1),e!==t?$("#exit_warning_modal").modal({show:!0,backdrop:!1}):Nlvx.WindowHandler.redirect($("#back-button").attr("href"))},e.prototype.getTransactionalTemplateVersionDataAsJSON=function(){var t,e;return e=$(this.editor_form).serializeArray(),t={},_.each(e,function(e){var n;if(e.name.match(/version/))return n=e.name.match(/\[(.*)\]/)[1],t[n]=e.value}),t},e.prototype.getFormData=function(t){var e,n,i;return t?$("select, input",$(this.editor_form)).serialize():(e=Nlvx.ContentEditor.contentCollection.getContents(),n=_.map(e,function(t){return t.getHTML()}),i=_.map(e,function(t){return t.getPlaintext()}),$("select, input[name!=authenticity_token]",$(this.editor_form)).serialize()+n.join("").replace(/\s/g,"")+i.join("").replace(/\s/g,""))},e.prototype.saveCampaign=function(t){return this.redirect_url=$(t.target).data("url"),this.validateAndPerform(this.submitSaveForm,t),!1},e.prototype.sendCampaign=function(t){return $(t.target).hasClass("disabled")?!1:(this.validateAndPerform(this.trySubmitSendForm,t),!1)},e.prototype.sendTestCampaign=function(t){var e;return this.skipSaveFlash=!0,e=this.validateAndPerform(this.submitSaveForm,t),e.done(function(e){return function(){return e.validateAndPerform(e.submitSendTestForm,t)}}(this)),e.always(function(t){return function(){return t.skipSaveFlash=!1}}(this)),!1},e.prototype.validateAndPerform=function(t,e){return this.copyContentToForm(),this.extractListsAndSegmentsFromQueries(),this.plaintextIsLocked()?(this.sendOrSave=t,this.ignorePlainContentAndSubmit()):Nlvx.ContentEditor.autoConvertToPlain?(this.sendOrSave=t,this.copyContentToFormAndSubmit()):Nlvx.ContentEditor.contentCollection.hasContentsThatDontMatch()?(this.sendOrSave=t,this.showConversionWarningModal(e)):t()
},e.prototype.displayErrorMessages=function(t){var e;return e=_.reduce(t,function(t,e,n){return t+(""+(n+1)+". "+e+" <br/>")},""),Nlvx.FlashMessageHandler.add("danger",e)},e.prototype.alertInsufficientCredits=function(){return Nlvx.FlashMessageHandler.add("danger",'You don\'t have enough emails remaining to send this campaign. Please <a target="_blank" href="https://sendgrid.com/billing/change-package">upgrade your plan to send more</a>.')},e.prototype.alertUnverified=function(){return Nlvx.FlashMessageHandler.add("danger",'In order to send more than 100 emails per day you must <a target="_blank" href="https://app.sendgrid.com/guide">verify your account</a>.')},e.prototype.trySubmitSendForm=function(){return Nlvx.SendCreditsValidator.validate(this.getSelectedQueryCountSum(),{canSend:this.submitSendForm,insufficientCredits:this.alertInsufficientCredits,unverified:this.alertUnverified})},e.prototype.submitSendForm=function(){var t,e;return $(".disabling-div").show(),e=this.$target.find("form.edit_content"),this.disableSaveSend(),t=$.ajax({url:e.attr("action"),method:"PUT",dataType:"json",data:$.param(e.serializeArray().concat({name:"validate_for_send",value:!0}))}),t.done(function(t){return function(){return t.$target.off("click","#send_campaign"),t.$target.find("#send_campaign").click()}}(this)),t.fail(function(t){return function(e){switch($(".disabling-div").hide(),t.enableSaveSend(),e.status){case 400:return t.displayErrorMessages(e.responseJSON.errors);case 403:return t.displayErrorMessages(e.responseJSON.errors),setTimeout(function(){return Nlvx.WindowHandler.redirect(e.responseJSON.redirect)},3e3);default:return Nlvx.FlashMessageHandler.add("danger","An Error has occurred")}}}(this)),t.always(function(t){return function(){return t.enableSaveSend()}}(this))},e.prototype.sendSaveAjaxRequest=function(t,e){var n,i,r,o,a;return r=t.indexOf(window.nlvxEnvironment.makoApiHost)>=0,n=r?JSON.stringify(this.getTransactionalTemplateVersionDataAsJSON()):e,o=r?"PATCH":"POST",a=r?t:t+".json",i=r?{}:{"X-Auto-Save":!1},$.ajax({headers:i,url:a,type:o,datatype:"json",data:n})},e.prototype.submitSaveForm=function(){var t,e,n,i;return $(".btn.save-content").html('<svg class="sg-loader loader-on-dark is-small"> <rect class="logo-square bottom-left" /> <rect class="logo-square bottom-middle" /> <rect class="logo-square middle" /> <rect class="logo-square top-middle" /> <rect class="logo-square top-right" /> <rect class="logo-square middle-left" /> <rect class="logo-square middle-right" /> </svg>Saving...'),t=this.$target.find("form.edit_content"),n=t.attr("action"),i=this.getFormData(!0),this.disableSaveSend(),e=this.sendSaveAjaxRequest(n,i),e.done(function(t){return function(e){var n;return t.formData=t.getFormData(!1),n=e.redirect_url||t.redirect_url,n?Nlvx.WindowHandler.redirect(n):($(".disabling-div").hide(),t.skipSaveFlash!==!0?Nlvx.FlashMessageHandler.add("success",e.flash_msg||"You've successfully saved this version."):void 0)}}(this)),e.fail(function(t){return function(e){switch($(".disabling-div").hide(),e.status){case 400:return t.displayErrorMessages(e.responseJSON.errors);case 401:return Nlvx.FlashMessageHandler.add("danger","Your session has expired. As a precaution we recommend you back up any changes before reloading or navigating away from this page.");case 403:return t.displayErrorMessages(e.responseJSON.errors),setTimeout(function(){return Nlvx.WindowHandler.redirect(e.responseJSON.redirect)},3e3);default:return Nlvx.FlashMessageHandler.add("danger","Failed to save changes.")}}}(this)),e.always(function(t){return function(){var e;return e=$(".btn.save-content").data("text"),$(".btn.save-content").html('<i class="sg-icon sg-icon-check"></i>Saved'),setTimeout(function(){return $(".btn.save-content").html('<i class="sg-icon sg-icon-save-draft"></i>'+e)},2e3),t.enableSaveSend()}}(this)),e},e.prototype.submitSendTestForm=function(){var t,e;return this.disableSaveSend(),t=_.reject($("#campaign-testing input[name='test_to_addresses']").val().split(/[,; ]/),function(t){return""===t}),e=$.ajax({url:$("#send_test_campaign").data("path"),type:"POST",headers:{"X-CSRF-Token":$("meta[name=csrf-token]").attr("content")},data:{to:t}}),e.done(function(){return function(){return Nlvx.FlashMessageHandler.add("success","Your test email has been sent."),window.analytics.track("test_email",{recipients_count:t.length,source:"ui"})}}(this)),e.fail(function(t){return function(e){var n,i;return null!=(null!=e&&null!=(i=e.responseJSON)?i.errors:void 0)&&(n=_.map(e.responseJSON.errors,function(t){return t.message})),(null!=n?n.length:void 0)?t.displayErrorMessages(n):void 0}}(this)),e.always(function(t){return function(){return t.enableSaveSend()}}(this))},e.prototype.showConversionWarningModal=function(t){return new Nlvx.ConversionWarningModal(this.$target,"#sendOrSave_conversion_warning_modal").render(t.pageX,t.pageY)},e.prototype.copyContentToFormAndSubmit=function(){return Nlvx.ContentEditor.contentCollection.copyHTMLToPlain(),this.copyContentToForm(),this.sendOrSave()},e.prototype.ignorePlainContentAndSubmit=function(){return this.copyContentToForm(),this.sendOrSave()},e.prototype.copyContentToForm=function(){var t;return t=Nlvx.ContentEditor.contentCollection.getContents(),$('[name*="campaign[campaign_content][content_"]').val(null),$('[name*="campaign[campaign_content][plain_content_"]').val(null),_.each(t,function(t){return function(e,n){var i,r,o;return o="a"===n?"":"_"+n,r=e.getPlaintext(),i=e.getUnescapedHTML(),t.$target.find(""+t.htmlContentEl+o).val(i),t.$target.find(""+t.plainTextContentEL+o).val(r)}}(this))},e.prototype.extractListsAndSegmentsFromQueries=function(){var t;return t={list:[],segment:[]},_.each(this.getQueryIds(),function(e){var n,i,r,o;return i=e.match(/^(\w+)\-(.*)/),o=i[0],n=i[1],r=i[2],t[n].push(r)}),this.setQueryCollectionOfTypeTo("list",t.list),this.setQueryCollectionOfTypeTo("segment",t.segment)},e.prototype.setQueryCollectionOfTypeTo=function(t,e){return this.$target.find("select[name='campaign[campaign_"+t+"_ids][]']").val(e)},e.prototype.getQueryIds=function(){return this.$target.find("#campaign_campaign_query_ids").val()},e.prototype.getSelectedQueryCountSum=function(){var t,e;return e=0,t=this.getQueryIds(),_.each(t,function(t){return function(n){var i;return i=parseInt(t.$target.find("#campaign_campaign_query_ids").find("[value="+n+"]").data("count")),i?e+=i:void 0}}(this)),e},e.prototype.formatSaveTime=function(t){return $.format.toBrowserTimeZone(t,"E MMM d hh:mm:ss yyyy")},e.prototype.showLastSaveTime=function(){var t;return t=$(".last-saved-at-wrapper"),t.removeClass("fade-out").addClass("visible").one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(t){var e;return e=$(t.currentTarget),e.removeClass("visible").addClass("fade-out")})},e.prototype.autoSaveIfEnabled=function(){return this.allowAutoSave?this.autoSave():void 0},e.prototype.autoSave=function(){var t,e,n,i,r;if(!Nlvx.DocumentHelper.isHidden())return $(".btn.save-content").html('<svg class="sg-loader loader-on-dark is-small"> <rect class="logo-square bottom-left" /> <rect class="logo-square bottom-middle" /> <rect class="logo-square middle" /> <rect class="logo-square top-middle" /> <rect class="logo-square top-right" /> <rect class="logo-square middle-left" /> <rect class="logo-square middle-right" /> </svg>Saving...'),this.copyContentToForm(),this.extractListsAndSegmentsFromQueries(),t=$(".last-saved-at-content"),e=this.$target.find("form.auto_save"),i=e.attr("action"),r=$("select, input",e).serialize(),this.disableSaveSend(),n=this.sendSaveAjaxRequest(i,r),n.done(function(e){return function(n){var i;return e.updateABTestID(n.abTestID),e.formData=e.getFormData(!1),null!=n.updatedAt?(i=e.formatSaveTime(n.updatedAt),t.text("All changes saved."),t.attr("data-original-title","Last saved "+i)):void 0}}(this)),n.fail(function(e){return function(n){switch(n.status){case 400:return t.text("Failed to save changes. "+n.responseJSON.errors.join(", "));case 401:return t.text("Failed to save changes."),Nlvx.FlashMessageHandler.add("danger","Your session has expired. As a precaution we recommend you back up any changes before reloading or navigating away from this page.");case 403:return t.text("Failed to save changes."),e.displayErrorMessages(n.responseJSON.errors),setTimeout(function(){return Nlvx.WindowHandler.redirect(n.responseJSON.redirect)},1e4);default:return t.text("Failed to save changes.")}}}(this)),n.always(function(t){return function(){var e;return e=$(".btn.save-content").data("text"),$(".btn.save-content").html('<i class="sg-icon sg-icon-check"></i>Saved'),setTimeout(function(){return $(".btn.save-content").html('<i class="sg-icon sg-icon-save-draft"></i>'+e)},2e3),t.showLastSaveTime(),t.enableSaveSend()}}(this))},e.prototype.updateABTestID=function(t){var e;return e="",null!=t&&(e=t.toString()),$("input[name='campaign[campaign_ab_test][id]']").val(e)},e}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.ContentEditor.HtmlEditorView=function(){function n(t,n){this.validation=null!=n?n:{},this.validateContent=e(this.validateContent,this),this.handleHtmlEditorChange=e(this.handleHtmlEditorChange,this),this.$target=$(t),this.validation.validator&&(this.$contentNotice=this.$target.find("#html_content_notice"),this.$contentNotice.errorNotice({message:this.validation.message,validator:this.validateContent,noticeEl:this.$contentNotice}))}return n.prototype.render=function(){return null==this.aceEditor&&(this.aceEditor=this.loadAceEditor()),this.aceEditor.setValue(Nlvx.ContentEditor.contentCollection.getHTML()),this.renderTabs(),this.appear(),this.bindEvents(),this.validateContent()},n.prototype.bindEvents=function(){return this.aceEditor.on("change",this.handleHtmlEditorChange)},n.prototype.handleHtmlEditorChange=function(){var t;return Nlvx.ContentEditor.contentCollection.setHTML(this.aceEditor.getValue()),null!=(t=this.$contentNotice)&&t.errorNotice("check"),this.$target.trigger("contentChange")},n.prototype.appear=function(){var t;return this.$target.find(".template-editors, .content_editor, .content_html_editor, .content-html-wrapper").show(),this.$target.find(".toggle-slider .select").addClass("right").removeClass("left"),null!=(t=this.$contentNotice)?t.show().errorNotice("check"):void 0},n.prototype.teardown=function(){return this.handleHtmlEditorChange()},n.prototype.loadAceEditor=function(){var t,e;return t=ace.edit($(".content_html_editor")[0]),t.setHighlightActiveLine(!0),t.setHighlightSelectedWord(!0),t.setShowFoldWidgets(!0),t.setTheme("ace/theme/tomorrow_night"),e=t.getSession(),e.setMode("ace/mode/html"),e.setUseWrapMode(!0),t},n.prototype.validateContent=function(){return this.aceEditor?this.validation.validator?this.validation.validator(this.aceEditor.getValue()):void 0:!0},n.prototype.buildTabs=function(e){var n;return(n=Handlebars.compile(t))(e)},n.prototype.renderTabs=function(){var t,e;return Nlvx.ContentEditor.contentCollection.hasMultiple()?($("ul.contentabtest--tabs").remove(),t=Nlvx.ContentEditor.contentCollection.getVersions(),this.$tabs=$(this.buildTabs({tabs:t,size:t.length})),$(".content-html-wrapper").prepend(this.$tabs),e=Nlvx.ContentEditor.contentCollection.getVersion(),this.$tabs.find("li.active").removeClass("active"),this.$tabs.find("li[data-version='"+e+"']").addClass("active")):void 0},n}(),t='<ul class="contentabtest--tabs contentabtest--tabs__{{size}}">\n  {{#tabs}}\n    <li data-version="{{.}}"><a href="#html-editor/{{.}}">{{.}}</a></li>\n  {{/tabs}}\n</ul>'}.call(this),function(){Nlvx.ContentEditor.NavigationView=function(){function t(t){this.$target=$(t)}return t.prototype.showPage=function(t){return this.hideAllPages(),this.toggleNavigation(t)},t.prototype.hideAllPages=function(){return this.$target.find("#visual_editor, .template-editors, .content_plain_editor, .content-html-wrapper, .content_html_editor, .content-previews, .content_editor, #visual_content_notice, #html_content_notice, #plain_content_notice, #drag_and_drop_editor").hide()},t.prototype.toggleNavigation=function(t){return this.$target.find(".toggle-preview").removeClass("active"),this.$target.find('[href="#'+t+'"]').addClass("active")},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.ContentEditor.PlainTextEditorView=function(){function e(e,n){this.validation=null!=n?n:{},this.validateContent=t(this.validateContent,this),this.handlePlainEditorChange=t(this.handlePlainEditorChange,this),this.$target=$(e),this.acePlainEditor=null,this.validation.validator&&(this.$contentNotice=this.$target.find("#plain_content_notice"),this.$contentNotice.errorNotice({validator:this.validateContent,noticeEl:this.$contentNotice,message:this.validation.message}))}return e.prototype.render=function(){return Nlvx.ContentEditor.autoConvertToPlain=!1,null==this.acePlainEditor&&(this.acePlainEditor=this.loadAceEditor()),this.acePlainEditor.setValue(Nlvx.ContentEditor.contentCollection.getPlaintext()),Nlvx.ContentEditor.contentCollection.contentMatches()||this.showConversionWarningModal(),this.appear(),this.bindEvents(),this.handlePlainEditorChange()},e.prototype.bindEvents=function(){return this.$target.on("click","#import_from_html",function(t){return function(){return t.importFromHtml()}}(this)),this.acePlainEditor.on("change",function(t){return function(){return t.updatePlaintextLock(1),t.handlePlainEditorChange()}}(this))},e.prototype.appear=function(){var t;return this.$target.find(".template-editors, .content_editor, .content_plain_editor").show(),this.$target.find(".contentabtest--tabs").hide(),null!=(t=this.$contentNotice)?t.show().errorNotice("check"):void 0},e.prototype.updatePlaintextLock=function(t){return null==t&&(t=0),this.$target.find("#campaign_has_plain_text_lock").val(t)},e.prototype.handlePlainEditorChange=function(){var t;return Nlvx.ContentEditor.contentCollection.setPlaintext(this.acePlainEditor.getValue()),null!=(t=this.$contentNotice)&&t.errorNotice("check"),this.$target.trigger("contentChange")},e.prototype.loadAceEditor=function(){var t;return t=ace.edit($(".content_plain_editor")[0]),t.setTheme("ace/theme/chrome"),t.setHighlightActiveLine(!1),t.setShowPrintMargin(!1),t.renderer.setShowGutter(!1),t.getSession().setMode("ace/mode/text"),t},e.prototype.showConversionWarningModal=function(){return this.$target.find("#conversion_warning_modal").modal({show:!0,backdrop:!1})},e.prototype.importFromHtml=function(){return Nlvx.ContentEditor.contentCollection.copyHTMLToPlain(),this.acePlainEditor.setValue(Nlvx.ContentEditor.contentCollection.getPlaintext()),this.updatePlaintextLock(0)},e.prototype.validateContent=function(){return this.acePlainEditor?this.validation.validator?this.validation.validator(Nlvx.Sanitizers.removeJavascript(this.acePlainEditor.getValue())):void 0:!0},e.prototype.teardown=function(){return this.handlePlainEditorChange()},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.ContentEditor.PreviewView=function(){function e(e,n){this.previewEl=n,this.replaceSenderIdentityTags=t(this.replaceSenderIdentityTags,this),this.$target=$(e)}return e.prototype.render=function(t){var e;return null==t&&(t=!1),this.appear(t),e=this.$target.find("#campaign_campaign_split_sender_identity_id").val(),e?$.ajax({url:"/marketing_campaigns/senders/"+e+".json",method:"GET"}).done(this.replaceSenderIdentityTags).error(this.updatePreviewContent(Nlvx.ContentEditor.contentCollection.getHTML())):this.updatePreviewContent(Nlvx.ContentEditor.contentCollection.getHTML())},e.prototype.replaceSenderIdentityTags=function(t){var e,n;return n=t.address,t.address_2&&(n=n+", "+t.address_2),e=Nlvx.ContentEditor.contentCollection.getHTML().replace(/\[Sender_Name\]/g,t.from_name).replace(/\[Sender_Address\]/g,n).replace(/\[Sender_City\]/g,t.city).replace(/\[Sender_State\]/g,t.state).replace(/\[Sender_Zip\]/g,t.zip).replace(/\[Sender_Country\]/g,t.country),this.updatePreviewContent(e)},e.prototype.updatePreviewContent=function(t){var e,n;return e=this.$target.find(this.previewEl).get(0),n=e.contentWindow?e.contentWindow:e.contentDocument.document?e.contentDocument.document:e.contentDocument,n.document.open(),n.document.write(Nlvx.Sanitizers.removeJavascript(t)),$(n.document).find("a").attr("href","javascript:void(0)"),n.document.close()},e.prototype.appear=function(t){return this.$target.find(".content-previews").show(),t?(this.$target.find(".desktop-view").addClass("mobile-view").removeClass("desktop-view"),$(".content-previews").parent().addClass("scrollable")):(this.$target.find(".mobile-view").addClass("desktop-view").removeClass("mobile-view"),$(".content-previews").parent().removeClass("scrollable"))},e}()}.call(this),function(){Nlvx.ContentEditor.SaveUtility=function(){function t(){}return t.getSaveFunction=function(){return t.saveFunction},t.setSaveFunction=function(e){return t.saveFunction=e},t}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Nlvx.ContentEditor.VisualEditorView=function(n){function r(t,n){this.validation=null!=n?n:{},this.validateContent=e(this.validateContent,this),this.handleEditorChange=e(this.handleEditorChange,this),this.onDeleteKeydownHandler=e(this.onDeleteKeydownHandler,this),this.$target=$(t),this.validation.validator&&(this.$contentNotice=this.$target.find("#visual_content_notice"),this.$contentNotice.errorNotice({message:this.validation.message,validator:this.validateContent,noticeEl:this.$contentNotice}))}return i(r,n),r.prototype.bindEvents=function(){return Nlvx.ContentEditor.ScreenBehaviors.overrideDeleteKey(!0,this.onDeleteKeydownHandler),this.visualEditor.on("change",this.handleEditorChange),this.visualEditor.on("blur",this.handleEditorChange),this.visualEditor.on("instanceReady",function(){return $(".cke_button").each(function(){return $(this).tooltip({container:"#tooltip",delay:{show:0,hide:200}}),$(this).on("show.bs.tooltip",function(){return $("#tooltip").html("")})})}),$(window).on("resize",function(t){return function(){var e;return null!=(null!=(e=t.visualEditor)?e.resize:void 0)?t.visualEditor.resize("100%",$("#visual_editor_wrap").height()):void 0}}(this))},r.prototype.unbindEvents=function(){return Nlvx.ContentEditor.ScreenBehaviors.overrideDeleteKey(!1)},r.prototype.onDeleteKeydownHandler=function(t){return this.isInputFocused()?!0:(t.preventDefault(),!1)},r.prototype.buildTabs=function(e){var n;return(n=Handlebars.compile(t))(e)},r.prototype.render=function(){var t,e;return e=Nlvx.ContentEditor.contentCollection.getVersion(),$("ul.contentabtest--tabs").remove(),Nlvx.ContentEditor.contentCollection.hasMultiple()&&(t=Nlvx.ContentEditor.contentCollection.getVersions(),this.$tabs=$(this.buildTabs({tabs:t,size:t.length})),$("#visual_editor").prepend(this.$tabs),this.$tabs.find("li.active").removeClass("active"),this.$tabs.find("li[data-version='"+e+"']").addClass("active")),this.appear(),this.visualEditor||(this.visualEditor=CKEDITOR.replace("editor_instance",{height:$("#visual_editor_wrap").height()-90,toolbar:[{name:"colors",items:["TextColor","BGColor"]},{name:"styles",items:["Format","Font","FontSize"]},{name:"basicstyles",items:["Bold","Italic","Underline","RemoveFormat"]},{name:"paragraph",items:["JustifyLeft","JustifyCenter","JustifyRight"]},{name:"lists",items:["NumberedList","BulletedList"]},{name:"misc",items:["Table","Imagelibrary","Sglink","HorizontalRule"]}]}),this.bindEvents()),this.visualEditor.setData(Nlvx.ContentEditor.contentCollection.getHTML()),this.handleEditorChange()},r.prototype.updateContent=function(){return this.visualEditor.setData(Nlvx.ContentEditor.contentCollection.getHTML())},r.prototype.teardown=function(t){return this.handleEditorChange(t),this.unbindEvents(),$("#dnd-toggle-group").hide()},r.prototype.appear=function(){var t;return this.$target.find(".template-editors, #visual_editor").show(),this.$target.find(".toggle-slider .select").removeClass("right").addClass("left"),$("body").removeClass("with-style-tab"),$(".drag-modules").hide(),$(".dnd-build-tab").hasClass("active")&&$(".nav-tabs a[href='#campaign-sending']").trigger("click"),null!=(t=this.$contentNotice)&&t.show().errorNotice("check"),$("#dnd-toggle-group").show()},r.prototype.handleEditorChange=function(){var t;return Nlvx.ContentEditor.contentCollection.setHTML(this.visualEditor.getData()),null!=(t=this.$contentNotice)&&t.errorNotice("check"),this.$target.trigger("contentChange")},r.prototype.validateContent=function(){return this.visualEditor?this.validation.validator?this.validation.validator(Nlvx.Sanitizers.removeJavascript(this.visualEditor.getData())):void 0:!0},r}(Nlvx.ContentEditor.EditorViewBase),t='<ul class="contentabtest--tabs contentabtest--tabs__{{size}}">\n  {{#tabs}}\n    <li data-version="{{.}}"><a href="#visual-editor/{{.}}">{{.}}</a></li>\n  {{/tabs}}\n</ul>'}.call(this),function(){}.call(this),"undefined"!=typeof module&&module.exports&&(this["encoding-indexes"]=require("./encoding-indexes.js")["encoding-indexes"]),function(t){"use strict";function e(t,e,n){return t>=e&&n>=t}function n(t,e){return Math.floor(t/e)}function i(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function r(t){for(var e=String(t),n=e.length,i=0,r=[];n>i;){var o=e.charCodeAt(i);if(55296>o||o>57343)r.push(o);else if(o>=56320&&57343>=o)r.push(65533);else if(o>=55296&&56319>=o)if(i===n-1)r.push(65533);else{var a=t.charCodeAt(i+1);if(a>=56320&&57343>=a){var s=1023&o,l=1023&a;r.push(65536+(s<<10)+l),i+=1}else r.push(65533)}i+=1}return r}function o(t){for(var e="",n=0;n<t.length;++n){var i=t[n];65535>=i?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode((i>>10)+55296,(1023&i)+56320))}return e}function a(t){this.tokens=[].slice.call(t)}function s(t,e){if(t)throw TypeError("Decoder error");return e||65533}function l(t){throw TypeError("The code point "+t+" could not be encoded.")}function u(){}function c(){}function h(t){return t=String(t).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(q,t)?q[t]:null}function d(t,e){return e?e[t]||null:null}function p(t,e){var n=e.indexOf(t);return-1===n?null:n}function f(e){if(!("encoding-indexes"in t))throw Error("Indexes missing. Did you forget to include encoding-indexes.js?");return t["encoding-indexes"][e]}function g(t){if(t>39419&&189e3>t||t>1237575)return null;var e,n=0,i=0,r=f("gb18030");for(e=0;e<r.length;++e){var o=r[e];if(!(o[0]<=t))break;n=o[0],i=o[1]}return i+t-n}function m(t){var e,n=0,i=0,r=f("gb18030");for(e=0;e<r.length;++e){var o=r[e];if(!(o[1]<=t))break;n=o[1],i=o[0]}return i+t-n}function v(t){var n=p(t,f("jis0208"));return null===n||e(n,8272,8835)?null:n}function y(t,e){if(!(this instanceof y))return new y(t,e);if(t=void 0!==t?String(t):Y,e=i(e),this._encoding=h(t),null===this._encoding||"replacement"===this._encoding.name)throw RangeError("Unknown encoding: "+t);if(!V[this._encoding.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js?");return this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty?(Object.defineProperty(this,"encoding",{value:this._encoding.name}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})):(this.encoding=this._encoding.name,this.fatal=this._fatal,this.ignoreBOM=this._ignoreBOM),this}function b(t,e){if(!(this instanceof b))return new b(t,e);if(t=void 0!==t?String(t):Y,e=i(e),this._encoding=h(t),null===this._encoding||"replacement"===this._encoding.name)throw RangeError("Unknown encoding: "+t);var n=Boolean(e.NONSTANDARD_allowLegacyEncoding),r="utf-8"!==this._encoding.name&&"utf-16le"!==this._encoding.name&&"utf-16be"!==this._encoding.name;if(null===this._encoding||r&&!n)throw RangeError("Unknown encoding: "+t);if(!W[this._encoding.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js?");return this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty?Object.defineProperty(this,"encoding",{value:this._encoding.name}):this.encoding=this._encoding.name,this}function w(t){var n=t.fatal,i=0,r=0,o=0,a=128,l=191;this.handler=function(t,u){if(u===z&&0!==o)return o=0,s(n);if(u===z)return B;if(0===o){if(e(u,0,127))return u;if(e(u,194,223))o=1,i=u-192;else if(e(u,224,239))224===u&&(a=160),237===u&&(l=159),o=2,i=u-224;else{if(!e(u,240,244))return s(n);240===u&&(a=144),244===u&&(l=143),o=3,i=u-240}return i<<=6*o,null}if(!e(u,a,l))return i=o=r=0,a=128,l=191,t.prepend(u),s(n);if(a=128,l=191,r+=1,i+=u-128<<6*(o-r),r!==o)return null;var c=i;return i=o=r=0,c}}function _(t){t.fatal;this.handler=function(t,n){if(n===z)return B;if(e(n,0,127))return n;var i,r;e(n,128,2047)?(i=1,r=192):e(n,2048,65535)?(i=2,r=224):e(n,65536,1114111)&&(i=3,r=240);for(var o=[(n>>6*i)+r];i>0;){var a=n>>6*(i-1);o.push(128|63&a),i-=1}return o}}function x(t,n){var i=n.fatal;this.handler=function(n,r){if(r===z)return B;if(e(r,0,127))return r;var o=t[r-128];return null===o?s(i):o}}function k(t,n){n.fatal;this.handler=function(n,i){if(i===z)return B;if(e(i,0,127))return i;var r=p(i,t);return null===r&&l(i),r+128}}function C(t){var n=t.fatal,i=0,r=0,o=0;this.handler=function(t,a){if(a===z&&0===i&&0===r&&0===o)return B;a!==z||0===i&&0===r&&0===o||(i=0,r=0,o=0,s(n));var l;if(0!==o){l=null,e(a,48,57)&&(l=g(10*(126*(10*(i-129)+(r-48))+(o-129))+a-48));var u=[r,o,a];return i=0,r=0,o=0,null===l?(t.prepend(u),s(n)):l}if(0!==r)return e(a,129,254)?(o=a,null):(t.prepend([r,a]),i=0,r=0,s(n));if(0!==i){if(e(a,48,57))return r=a,null;var c=i,h=null;i=0;var p=127>a?64:65;return(e(a,64,126)||e(a,128,254))&&(h=190*(c-129)+(a-p)),l=null===h?null:d(h,f("gb18030")),null===h&&t.prepend(a),null===l?s(n):l}return e(a,0,127)?a:128===a?8364:e(a,129,254)?(i=a,null):s(n)}}function $(t,i){t.fatal;this.handler=function(t,r){if(r===z)return B;if(e(r,0,127))return r;if(i&&8364===r)return 128;var o=p(r,f("gb18030"));if(null!==o){var a=n(o,190)+129,s=o%190,u=63>s?64:65;return[a,s+u]}if(i)return l(r);o=m(r);var c=n(n(n(o,10),126),10);o-=10*c*126*10;var h=n(n(o,10),126);o-=10*h*126;var d=n(o,10),g=o-10*d;return[c+129,h+48,d+129,g+48]}}function S(t){var n=t.fatal,i=0;this.handler=function(t,r){if(r===z&&0!==i)return i=0,s(n);if(r===z&&0===i)return B;if(0!==i){var o=i,a=null;i=0;var l=127>r?64:98;switch((e(r,64,126)||e(r,161,254))&&(a=157*(o-129)+(r-l)),a){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var u=null===a?null:d(a,f("big5"));return null===a&&t.prepend(r),null===u?s(n):u}return e(r,0,127)?r:e(r,129,254)?(i=r,null):s(n)}}function M(t){t.fatal;this.handler=function(t,i){if(i===z)return B;if(e(i,0,127))return i;var r=p(i,f("big5"));if(null===r)return l(i);var o=n(r,157)+129;if(161>o)return l(i);var a=r%157,s=63>a?64:98;return[o,a+s]}}function T(t){var n=t.fatal,i=!1,r=0;this.handler=function(t,o){if(o===z&&0!==r)return r=0,s(n);if(o===z&&0===r)return B;if(142===r&&e(o,161,223))return r=0,65377+o-161;if(143===r&&e(o,161,254))return i=!0,r=o,null;if(0!==r){var a=r;r=0;var l=null;return e(a,161,254)&&e(o,161,254)&&(l=d(94*(a-161)+(o-161),f(i?"jis0212":"jis0208"))),i=!1,e(o,161,254)||t.prepend(o),null===l?s(n):l}return e(o,0,127)?o:142===o||143===o||e(o,161,254)?(r=o,null):s(n)}}function E(t){t.fatal;this.handler=function(t,i){if(i===z)return B;if(e(i,0,127))return i;if(165===i)return 92;if(8254===i)return 126;if(e(i,65377,65439))return[142,i-65377+161];var r=p(i,f("jis0208"));if(null===r)return l(i);var o=n(r,94)+161,a=r%94+161;return[o,a]}}function D(t){var n=t.fatal,i={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6},r=i.ASCII,o=i.ASCII,a=0,l=!1;this.handler=function(t,u){switch(r){default:case i.ASCII:return 27===u?(r=i.EscapeStart,null):e(u,0,127)&&14!==u&&15!==u&&27!==u?(l=!1,u):u===z?B:(l=!1,s(n));case i.Roman:return 27===u?(r=i.EscapeStart,null):92===u?(l=!1,165):126===u?(l=!1,8254):e(u,0,127)&&14!==u&&15!==u&&27!==u&&92!==u&&126!==u?(l=!1,u):u===z?B:(l=!1,s(n));case i.Katakana:return 27===u?(r=i.EscapeStart,null):e(u,33,95)?(l=!1,65377+u-33):u===z?B:(l=!1,s(n));case i.LeadByte:return 27===u?(r=i.EscapeStart,null):e(u,33,126)?(l=!1,a=u,r=i.TrailByte,null):u===z?B:(l=!1,s(n));case i.TrailByte:if(27===u)return r=i.EscapeStart,s(n);if(e(u,33,126)){r=i.LeadByte;var c=94*(a-33)+u-33,h=d(c,f("jis0208"));return null===h?s(n):h}return u===z?(r=i.LeadByte,t.prepend(u),s(n)):(r=i.LeadByte,s(n));case i.EscapeStart:return 36===u||40===u?(a=u,r=i.Escape,null):(t.prepend(u),l=!1,r=o,s(n));case i.Escape:var p=a;a=0;var g=null;if(40===p&&66===u&&(g=i.ASCII),40===p&&74===u&&(g=i.Roman),40===p&&73===u&&(g=i.Katakana),36!==p||64!==u&&66!==u||(g=i.LeadByte),null!==g){r=r=g;var m=l;return l=!0,m?s(n):null}return t.prepend([p,u]),l=!1,r=o,s(n)}}}function N(t){var i=(t.fatal,{ASCII:0,Roman:1,jis0208:2}),r=i.ASCII;this.handler=function(t,o){if(o===z&&r!==i.ASCII)return t.prepend(o),[27,40,66];if(o===z&&r===i.ASCII)return B;if(r===i.ASCII&&e(o,0,127))return o;if(r===i.Roman&&e(o,0,127)&&92!==o&&126!==o){if(e(o,0,127))return o;if(165===o)return 92;if(8254===o)return 126}if(e(o,0,127)&&r!==i.ASCII)return t.prepend(o),r=i.ASCII,[27,40,66];if((165===o||8254===o)&&r!==i.Roman)return t.prepend(o),r=i.Roman,[27,40,74];var a=p(o,f("jis0208"));if(null===a)return l(o);if(r!==i.jis0208)return t.prepend(o),r=i.jis0208,[27,36,66];var s=n(a,94)+33,u=a%94+33;return[s,u]}}function F(t){var n=t.fatal,i=0;this.handler=function(t,r){if(r===z&&0!==i)return i=0,s(n);if(r===z&&0===i)return B;if(0!==i){var o=i,a=null;i=0;var l=127>r?64:65,u=160>o?129:193;(e(r,64,126)||e(r,128,252))&&(a=188*(o-u)+r-l);var c=null===a?null:d(a,f("jis0208"));return null===c&&null!==a&&e(a,8836,10528)?57344+a-8836:(null===a&&t.prepend(r),null===c?s(n):c)}return e(r,0,128)?r:e(r,161,223)?65377+r-161:e(r,129,159)||e(r,224,252)?(i=r,null):s(n)}}function A(t){t.fatal;this.handler=function(t,i){if(i===z)return B;if(e(i,0,128))return i;if(165===i)return 92;if(8254===i)return 126;if(e(i,65377,65439))return i-65377+161;var r=v(i);if(null===r)return l(i);var o=n(r,188),a=31>o?129:193,s=r%188,u=63>s?64:65;return[o+a,s+u]}}function H(t){var n=t.fatal,i=0;this.handler=function(t,r){if(r===z&&0!==i)return i=0,s(n);if(r===z&&0===i)return B;if(0!==i){var o=i,a=null;i=0,e(r,65,254)&&(a=190*(o-129)+(r-65));var l=null===a?null:d(a,f("euc-kr"));return null===a&&e(r,0,127)&&t.prepend(r),null===l?s(n):l}return e(r,0,127)?r:e(r,129,254)?(i=r,null):s(n)}}function P(t){t.fatal;this.handler=function(t,i){if(i===z)return B;if(e(i,0,127))return i;var r=p(i,f("euc-kr"));if(null===r)return l(i);var o=n(r,190)+129,a=r%190+65;return[o,a]}}function L(t,e){var n=t>>8,i=255&t;return e?[n,i]:[i,n]}function O(t,n){var i=n.fatal,r=null,o=null;this.handler=function(n,a){if(a===z&&(null!==r||null!==o))return s(i);if(a===z&&null===r&&null===o)return B;if(null===r)return r=a,null;var l;if(l=t?(r<<8)+a:(a<<8)+r,r=null,null!==o){var u=o;return o=null,e(l,56320,57343)?65536+1024*(u-55296)+(l-56320):(n.prepend(L(l,t)),s(i))}return e(l,55296,56319)?(o=l,null):e(l,56320,57343)?s(i):l}}function I(t,n){n.fatal;this.handler=function(n,i){if(i===z)return B;if(e(i,0,65535))return L(i,t);var r=L((i-65536>>10)+55296,t),o=L((i-65536&1023)+56320,t);return r.concat(o)}}function j(t){t.fatal;this.handler=function(t,n){return n===z?B:e(n,0,127)?n:63360+n-128}}function R(t){t.fatal;this.handler=function(t,n){return n===z?B:e(n,0,127)?n:e(n,63360,63487)?n-63360+128:l(n)}}var z=-1;a.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():z},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var B=-1;u.prototype={handler:function(){}},c.prototype={handler:function(){}};var U=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"utf-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"ibm866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"iso-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"iso-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"iso-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"iso-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"iso-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"iso-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"iso-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"iso-8859-8-i"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"iso-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"iso-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"iso-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"iso-8859-15"},{labels:["iso-8859-16"],name:"iso-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"koi8-r"},{labels:["koi8-u"],name:"koi8-u"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"gbk"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"euc-jp"},{labels:["csiso2022jp","iso-2022-jp"],name:"iso-2022-jp"},{labels:["csshiftjis","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"shift_jis"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"euc-kr"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"utf-16be"},{labels:["utf-16","utf-16le"],name:"utf-16le"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],q={};
U.forEach(function(t){t.encodings.forEach(function(t){t.labels.forEach(function(e){q[e]=t})})});var W={},V={},Y="utf-8";y.prototype={decode:function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=i(e),this._streaming||(this._decoder=V[this._encoding.name]({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var r,s=new a(n),l=[];!s.endOfStream()&&(r=this._decoder.handler(s,s.read()),r!==B);)null!==r&&(Array.isArray(r)?l.push.apply(l,r):l.push(r));if(!this._streaming){do{if(r=this._decoder.handler(s,s.read()),r===B)break;null!==r&&(Array.isArray(r)?l.push.apply(l,r):l.push(r))}while(!s.endOfStream());this._decoder=null}return l.length&&(-1===["utf-8","utf-16le","utf-16be"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===l[0]?(this._BOMseen=!0,l.shift()):this._BOMseen=!0)),o(l)}},b.prototype={encode:function(t,e){t=t?String(t):"",e=i(e),this._streaming||(this._encoder=W[this._encoding.name](this._options)),this._streaming=Boolean(e.stream);for(var n,o=[],s=new a(r(t));!s.endOfStream()&&(n=this._encoder.handler(s,s.read()),n!==B);)Array.isArray(n)?o.push.apply(o,n):o.push(n);if(!this._streaming){for(;;){if(n=this._encoder.handler(s,s.read()),n===B)break;Array.isArray(n)?o.push.apply(o,n):o.push(n)}this._encoder=null}return new Uint8Array(o)}},W["utf-8"]=function(t){return new _(t)},V["utf-8"]=function(t){return new w(t)},function(){"encoding-indexes"in t&&U.forEach(function(t){"Legacy single-byte encodings"===t.heading&&t.encodings.forEach(function(t){var e=t.name,n=f(e);V[e]=function(t){return new x(n,t)},W[e]=function(t){return new k(n,t)}})})}(),V.gbk=function(t){return new C(t)},W.gbk=function(t){return new $(t,!0)},W.gb18030=function(t){return new $(t)},V.gb18030=function(t){return new C(t)},W.big5=function(t){return new M(t)},V.big5=function(t){return new S(t)},W["euc-jp"]=function(t){return new E(t)},V["euc-jp"]=function(t){return new T(t)},W["iso-2022-jp"]=function(t){return new N(t)},V["iso-2022-jp"]=function(t){return new D(t)},W.shift_jis=function(t){return new A(t)},V.shift_jis=function(t){return new F(t)},W["euc-kr"]=function(t){return new P(t)},V["euc-kr"]=function(t){return new H(t)},W["utf-16be"]=function(t){return new I(!0,t)},V["utf-16be"]=function(t){return new O(!0,t)},W["utf-16le"]=function(t){return new I(!1,t)},V["utf-16le"]=function(t){return new O(!1,t)},W["x-user-defined"]=function(t){return new R(t)},V["x-user-defined"]=function(t){return new j(t)},"TextEncoder"in t||(t.TextEncoder=b),"TextDecoder"in t||(t.TextDecoder=y)}(this),!function(t){"use strict";function e(e,n){if(n=n||{},n.worker&&Papa.WORKERS_SUPPORTED){var i=c();return i.userStep=n.step,i.userChunk=n.chunk,i.userComplete=n.complete,i.userError=n.error,n.step=v(n.step),n.chunk=v(n.chunk),n.complete=v(n.complete),n.error=v(n.error),delete n.worker,void i.postMessage({input:e,config:n,workerId:i.id})}var s=null;return"string"==typeof e?s=n.download?new r(n):new a(n):(t.File&&e instanceof File||e instanceof Object)&&(s=new o(n)),s.stream(e)}function n(e,n){function i(){"object"==typeof n&&("string"==typeof n.delimiter&&1==n.delimiter.length&&-1==t.Papa.BAD_DELIMITERS.indexOf(n.delimiter)&&(u=n.delimiter),("boolean"==typeof n.quotes||n.quotes instanceof Array)&&(l=n.quotes),"string"==typeof n.newline&&(c=n.newline))}function r(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function o(t,e){var n="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var i=t instanceof Array&&t.length>0,r=!(e[0]instanceof Array);if(i){for(var o=0;o<t.length;o++)o>0&&(n+=u),n+=a(t[o],o);e.length>0&&(n+=c)}for(var s=0;s<e.length;s++){for(var l=i?t.length:e[s].length,h=0;l>h;h++){h>0&&(n+=u);var d=i&&r?t[h]:h;n+=a(e[s][d],h)}s<e.length-1&&(n+=c)}return n}function a(e,n){if("undefined"==typeof e||null===e)return"";e=e.toString().replace(/"/g,'""');var i="boolean"==typeof l&&l||l instanceof Array&&l[n]||s(e,t.Papa.BAD_DELIMITERS)||e.indexOf(u)>-1||" "==e.charAt(0)||" "==e.charAt(e.length-1);return i?'"'+e+'"':e}function s(t,e){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return!0;return!1}var l=!1,u=",",c="\r\n";if(i(),"string"==typeof e&&(e=JSON.parse(e)),e instanceof Array){if(!e.length||e[0]instanceof Array)return o(null,e);if("object"==typeof e[0])return o(r(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.data[0]instanceof Array?e.fields:r(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),o(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input"}function i(e){function n(t){var e=g(t);e.chunkSize=parseInt(e.chunkSize),this._handle=new s(e),this._handle.streamer=this,this._config=e}this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,n.call(this,e),this.parseChunk=function(e){var n=this._partialLine+e;this._partialLine="";var i=this._handle.parse(n,this._baseIndex,!this._finished);if(!this._handle.paused()){var r=i.meta.cursor;this._finished||(this._partialLine=n.substring(r-this._baseIndex),this._baseIndex=r),i&&i.data&&(this._rowCount+=i.data.length);var o=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(b)t.postMessage({results:i,workerId:Papa.WORKER_ID,finished:o});else if(v(this._config.chunk)){if(this._config.chunk(i,this._handle),this._paused)return;i=void 0}return!o||!v(this._config.complete)||i&&i.meta.aborted||this._config.complete(i),o||i&&i.meta.paused||this._nextChunk(),i}},this._sendError=function(e){v(this._config.error)?this._config.error(e):b&&this._config.error&&t.postMessage({workerId:Papa.WORKER_ID,error:e,finished:!1})}}function r(t){function e(t){var e=t.getResponseHeader("Content-Range");return parseInt(e.substr(e.lastIndexOf("/")+1))}t=t||{},t.chunkSize||(t.chunkSize=Papa.RemoteChunkSize),i.call(this,t);var n;this._nextChunk=b?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)return void this._chunkLoaded();if(n=new XMLHttpRequest,b||(n.onload=m(this._chunkLoaded,this),n.onerror=m(this._chunkError,this)),n.open("GET",this._input,!b),this._config.step||this._config.chunk){var t=this._start+this._config.chunkSize-1;n.setRequestHeader("Range","bytes="+this._start+"-"+t),n.setRequestHeader("If-None-Match","webkit-no-cache")}try{n.send()}catch(e){this._chunkError(e.message)}b&&0==n.status?this._chunkError():this._start+=this._config.chunkSize},this._chunkLoaded=function(){if(4==n.readyState){if(n.status<200||n.status>=400)return void this._chunkError();this._finished=!this._config.step&&!this._config.chunk||this._start>e(n),this.parseChunk(n.responseText)}},this._chunkError=function(t){var e=n.statusText||t;this._sendError(e)}}function o(t){t=t||{},t.chunkSize||(t.chunkSize=Papa.LocalChunkSize),i.call(this,t);var e,n,r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,r?(e=new FileReader,e.onload=m(this._chunkLoaded,this),e.onerror=m(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=Math.min(this._start+this._config.chunkSize,this._input.size),i=e.readAsText(n.call(this._input,this._start,t),this._config.encoding);r||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function a(t){t=t||{},i.call(this,t);var e,n;this.stream=function(t){return e=t,n=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,e=t?n.substr(0,t):n;return n=t?n.substr(t):"",this._finished=!n,this.parseChunk(e)}}}function s(t){function e(){if(w&&d&&(u("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+Papa.DefaultDelimiter+"'"),d=!1),t.skipEmptyLines)for(var e=0;e<w.data.length;e++)1==w.data[e].length&&""==w.data[e][0]&&w.data.splice(e--,1);return n()&&i(),r()}function n(){return t.header&&0==b.length}function i(){if(w){for(var t=0;n()&&t<w.data.length;t++)for(var e=0;e<w.data[t].length;e++)b.push(w.data[t][e]);w.data.splice(0,1)}}function r(){if(!w||!t.header&&!t.dynamicTyping)return w;for(var e=0;e<w.data.length;e++){for(var n={},i=0;i<w.data[e].length;i++){if(t.dynamicTyping){var r=w.data[e][i];w.data[e][i]="true"==r?!0:"false"==r?!1:s(r)}t.header&&(i>=b.length?(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(w.data[e][i])):n[b[i]]=w.data[e][i])}t.header&&(w.data[e]=n,i>b.length?u("FieldMismatch","TooManyFields","Too many fields: expected "+b.length+" fields but parsed "+i,e):i<b.length&&u("FieldMismatch","TooFewFields","Too few fields: expected "+b.length+" fields but parsed "+i,e))}return t.header&&w.meta&&(w.meta.fields=b),w}function o(e){for(var n,i,r,o=[",","	","|",";",Papa.RECORD_SEP,Papa.UNIT_SEP],a=0;a<o.length;a++){var s=o[a],u=0,c=0;r=void 0;for(var h=new l({delimiter:s,preview:10}).parse(e),d=0;d<h.data.length;d++){var p=h.data[d].length;c+=p,"undefined"!=typeof r?p>1&&(u+=Math.abs(p-r),r=p):r=p}c/=h.data.length,("undefined"==typeof i||i>u)&&c>1.99&&(i=u,n=s)}return t.delimiter=n,{successful:!!n,bestDelimiter:n}}function a(t){t=t.substr(0,1048576);var e=t.split("\r");if(1==e.length)return"\n";for(var n=0,i=0;i<e.length;i++)"\n"==e[i][0]&&n++;return n>=e.length/2?"\r\n":"\r"}function s(t){var e=p.test(t);return e?parseFloat(t):t}function u(t,e,n,i){w.errors.push({type:t,code:e,message:n,row:i})}var c,h,d,p=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,f=this,m=0,y=!1,b=[],w={data:[],errors:[],meta:{}};if(v(t.step)){var _=t.step;t.step=function(i){if(w=i,n())e();else{if(e(),0==w.data.length)return;m+=i.data.length,t.preview&&m>t.preview?h.abort():_(w,f)}}}this.parse=function(n,i,r){if(t.newline||(t.newline=a(n)),d=!1,!t.delimiter){var s=o(n);s.successful?t.delimiter=s.bestDelimiter:(d=!0,t.delimiter=Papa.DefaultDelimiter),w.meta.delimiter=t.delimiter}var u=g(t);return t.preview&&t.header&&u.preview++,c=n,h=new l(u),w=h.parse(c,i,r),e(),y?{meta:{paused:!0}}:w||{meta:{paused:!1}}},this.paused=function(){return y},this.pause=function(){y=!0,h.abort(),c=c.substr(h.getCharIndex())},this.resume=function(){y=!1,f.streamer.parseChunk(c)},this.abort=function(){h.abort(),v(t.complete)&&t.complete(w),c=""}}function l(t){t=t||{};var e=t.delimiter,n=t.newline,i=t.comments,r=t.step,o=t.preview,a=t.fastMode;if(("string"!=typeof e||1!=e.length||Papa.BAD_DELIMITERS.indexOf(e)>-1)&&(e=","),i===e)throw"Comment character same as delimiter";i===!0?i="#":("string"!=typeof i||Papa.BAD_DELIMITERS.indexOf(i)>-1)&&(i=!1),"\n"!=n&&"\r"!=n&&"\r\n"!=n&&(n="\n");var s=0,l=!1;this.parse=function(t,u,c){function h(t){_.push(t),C=s}function d(e){return c?f():(e||(e=t.substr(s)),k.push(e),s=m,h(k),w&&g(),f())}function p(e){s=e,h(k),k=[],T=t.indexOf(n,s)}function f(t){return{data:_,errors:x,meta:{delimiter:e,linebreak:n,aborted:l,truncated:!!t,cursor:C+(u||0)}}}function g(){r(f()),_=[],x=[]}if("string"!=typeof t)throw"Input must be a string";var m=t.length,v=e.length,y=n.length,b=i.length,w="function"==typeof r;s=0;var _=[],x=[],k=[],C=0;if(!t)return f();if(a||a!==!1&&-1===t.indexOf('"')){for(var $=t.split(n),S=0;S<$.length;S++){var k=$[S];if(s+=k.length,S!==$.length-1)s+=n.length;else if(c)return f();if(!i||k.substr(0,b)!=i){if(w){if(_=[],h(k.split(e)),g(),l)return f()}else h(k.split(e));if(o&&S>=o)return _=_.slice(0,o),f(!0)}}return f()}for(var M=t.indexOf(e,s),T=t.indexOf(n,s);;)if('"'!=t[s])if(i&&0===k.length&&t.substr(s,b)===i){if(-1==T)return f();s=T+y,T=t.indexOf(n,s),M=t.indexOf(e,s)}else if(-1!==M&&(T>M||-1===T))k.push(t.substring(s,M)),s=M+v,M=t.indexOf(e,s);else{if(-1===T)break;if(k.push(t.substring(s,T)),p(T+y),w&&(g(),l))return f();if(o&&_.length>=o)return f(!0)}else{var E=s;for(s++;;){var E=t.indexOf('"',E+1);if(-1===E)return c||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:s}),d();if(E===m-1){var D=t.substring(s,E).replace(/""/g,'"');return d(D)}if('"'!=t[E+1]){if(t[E+1]==e){k.push(t.substring(s,E).replace(/""/g,'"')),s=E+1+v,M=t.indexOf(e,s),T=t.indexOf(n,s);break}if(t.substr(E+1,y)===n){if(k.push(t.substring(s,E).replace(/""/g,'"')),p(E+1+y),M=t.indexOf(e,s),w&&(g(),l))return f();if(o&&_.length>=o)return f(!0);break}}else E++}}return d()},this.abort=function(){l=!0},this.getCharIndex=function(){return s}}function u(){var t=document.getElementsByTagName("script");return t.length?t[t.length-1].src:""}function c(){if(!Papa.WORKERS_SUPPORTED)return!1;if(!w&&null===Papa.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var e=new t.Worker(Papa.SCRIPT_PATH||y);return e.onmessage=h,e.id=x++,_[e.id]=e,e}function h(t){var e=t.data,n=_[e.workerId],i=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var r=function(){i=!0,d(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},o={abort:r,pause:p,resume:p};if(v(n.userStep)){for(var a=0;a<e.results.data.length&&(n.userStep({data:[e.results.data[a]],errors:e.results.errors,meta:e.results.meta},o),!i);a++);delete e.results}else v(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!i&&d(e.workerId,e.results)}function d(t,e){var n=_[t];v(n.userComplete)&&n.userComplete(e),n.terminate(),delete _[t]}function p(){throw"Not implemented."}function f(e){var n=e.data;if("undefined"==typeof Papa.WORKER_ID&&n&&(Papa.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:Papa.WORKER_ID,results:Papa.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var i=Papa.parse(n.input,n.config);i&&t.postMessage({workerId:Papa.WORKER_ID,results:i,finished:!0})}}function g(t){if("object"!=typeof t)return t;var e=t instanceof Array?[]:{};for(var n in t)e[n]=g(t[n]);return e}function m(t,e){return function(){t.apply(e,arguments)}}function v(t){return"function"==typeof t}var y,b=!t.document,w=!1,_={},x=0;if(t.Papa={},t.Papa.parse=e,t.Papa.unparse=n,t.Papa.RECORD_SEP=String.fromCharCode(30),t.Papa.UNIT_SEP=String.fromCharCode(31),t.Papa.BYTE_ORDER_MARK="",t.Papa.BAD_DELIMITERS=["\r","\n",'"',t.Papa.BYTE_ORDER_MARK],t.Papa.WORKERS_SUPPORTED=!!t.Worker,t.Papa.SCRIPT_PATH=null,t.Papa.LocalChunkSize=10485760,t.Papa.RemoteChunkSize=5242880,t.Papa.DefaultDelimiter=",",t.Papa.Parser=l,t.Papa.ParserHandle=s,t.Papa.NetworkStreamer=r,t.Papa.FileStreamer=o,t.Papa.StringStreamer=a,t.jQuery){var k=t.jQuery;k.fn.parse=function(e){function n(){if(0==a.length)return void(v(e.complete)&&e.complete());var t=a[0];if(v(e.before)){var n=e.before(t.file,t.inputElem);if("object"==typeof n){if("abort"==n.action)return void i("AbortError",t.file,t.inputElem,n.reason);if("skip"==n.action)return void r();"object"==typeof n.config&&(t.instanceConfig=k.extend(t.instanceConfig,n.config))}else if("skip"==n)return void r()}var o=t.instanceConfig.complete;t.instanceConfig.complete=function(e){v(o)&&o(e,t.file,t.inputElem),r()},Papa.parse(t.file,t.instanceConfig)}function i(t,n,i,r){v(e.error)&&e.error({name:t},n,i,r)}function r(){a.splice(0,1),n()}var o=e.config||{},a=[];return this.each(function(){var e="INPUT"==k(this).prop("tagName").toUpperCase()&&"file"==k(this).attr("type").toLowerCase()&&t.FileReader;if(!e||!this.files||0==this.files.length)return!0;for(var n=0;n<this.files.length;n++)a.push({file:this.files[n],inputElem:this,instanceConfig:k.extend({},o)})}),n(),this}}b?t.onmessage=f:Papa.WORKERS_SUPPORTED&&(y=u(),document.body?document.addEventListener("DOMContentLoaded",function(){w=!0},!0):w=!0),r.prototype=Object.create(i.prototype),r.prototype.constructor=r,o.prototype=Object.create(i.prototype),o.prototype.constructor=o,a.prototype=Object.create(a.prototype),a.prototype.constructor=a}(this),window.Modernizr=function(t,e,n){function i(t){y.cssText=t}function r(t,e){return typeof t===e}function o(t,e){return!!~(""+t).indexOf(e)}function a(t,e){for(var i in t){var r=t[i];if(!o(r,"-")&&y[r]!==n)return"pfx"==e?r:!0}return!1}function s(t,e,i){for(var o in t){var a=e[t[o]];if(a!==n)return i===!1?t[o]:r(a,"function")?a.bind(i||e):a}return!1}function l(t,e,n){var i=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+k.join(i+" ")+i).split(" ");return r(e,"string")||r(e,"undefined")?a(o,e):(o=(t+" "+C.join(i+" ")+i).split(" "),s(o,e,n))}function u(){p.input=function(n){for(var i=0,r=n.length;r>i;i++)M[n[i]]=n[i]in b;return M.list&&(M.list=!!e.createElement("datalist")&&!!t.HTMLDataListElement),M}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),p.inputtypes=function(t){for(var i,r,o,a=0,s=t.length;s>a;a++)b.setAttribute("type",r=t[a]),i="text"!==b.type,i&&(b.value=w,b.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&b.style.WebkitAppearance!==n?(g.appendChild(b),o=e.defaultView,i=o.getComputedStyle&&"textfield"!==o.getComputedStyle(b,null).WebkitAppearance&&0!==b.offsetHeight,g.removeChild(b)):/^(search|tel)$/.test(r)||(i=/^(url|email)$/.test(r)?b.checkValidity&&b.checkValidity()===!1:b.value!=w)),S[t[a]]=!!i;return S}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var c,h,d="2.8.3",p={},f=!0,g=e.documentElement,m="modernizr",v=e.createElement(m),y=v.style,b=e.createElement("input"),w=":)",_=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),x="Webkit Moz O ms",k=x.split(" "),C=x.toLowerCase().split(" "),$={},S={},M={},T=[],E=T.slice,D=function(t,n,i,r){var o,a,s,l,u=e.createElement("div"),c=e.body,h=c||e.createElement("body");if(parseInt(i,10))for(;i--;)s=e.createElement("div"),s.id=r?r[i]:m+(i+1),u.appendChild(s);return o=["&#173;",'<style id="s',m,'">',t,"</style>"].join(""),u.id=m,(c?u:h).innerHTML+=o,h.appendChild(u),c||(h.style.background="",h.style.overflow="hidden",l=g.style.overflow,g.style.overflow="hidden",g.appendChild(h)),a=n(u,t),c?u.parentNode.removeChild(u):(h.parentNode.removeChild(h),g.style.overflow=l),!!a},N=function(){function t(t,o){o=o||e.createElement(i[t]||"div"),t="on"+t;var a=t in o;return a||(o.setAttribute||(o=e.createElement("div")),o.setAttribute&&o.removeAttribute&&(o.setAttribute(t,""),a=r(o[t],"function"),r(o[t],"undefined")||(o[t]=n),o.removeAttribute(t))),o=null,a}var i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t}(),F={}.hasOwnProperty;h=r(F,"undefined")||r(F.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return F.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=E.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=e.prototype;var o=new r,a=e.apply(o,n.concat(E.call(arguments)));return Object(a)===a?a:o}return e.apply(t,n.concat(E.call(arguments)))};return i}),$.flexbox=function(){return l("flexWrap")},$.flexboxlegacy=function(){return l("boxDirection")},$.postmessage=function(){return!!t.postMessage},$.websqldatabase=function(){return!!t.openDatabase},$.indexedDB=function(){return!!l("indexedDB",t)},$.hashchange=function(){return N("hashchange",t)&&(e.documentMode===n||e.documentMode>7)},$.history=function(){return!!t.history&&!!history.pushState},$.draganddrop=function(){var t=e.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t},$.websockets=function(){return"WebSocket"in t||"MozWebSocket"in t},$.hsla=function(){return i("background-color:hsla(120,40%,100%,.5)"),o(y.backgroundColor,"rgba")||o(y.backgroundColor,"hsla")},$.multiplebgs=function(){return i("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(y.background)},$.cssanimations=function(){return l("animationName")},$.csscolumns=function(){return l("columnCount")},$.cssgradients=function(){var t="background-image:",e="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return i((t+"-webkit- ".split(" ").join(e+t)+_.join(n+t)).slice(0,-t.length)),o(y.backgroundImage,"gradient")},$.cssreflections=function(){return l("boxReflect")},$.csstransforms=function(){return!!l("transform")},$.csstransforms3d=function(){var t=!!l("perspective");return t&&"webkitPerspective"in g.style&&D("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e){t=9===e.offsetLeft&&3===e.offsetHeight}),t},$.csstransitions=function(){return l("transition")},$.localstorage=function(){try{return localStorage.setItem(m,m),localStorage.removeItem(m),!0}catch(t){return!1}},$.sessionstorage=function(){try{return sessionStorage.setItem(m,m),sessionStorage.removeItem(m),!0}catch(t){return!1}},$.webworkers=function(){return!!t.Worker},$.applicationcache=function(){return!!t.applicationCache};for(var A in $)h($,A)&&(c=A.toLowerCase(),p[c]=$[A](),T.push((p[c]?"":"no-")+c));return p.input||u(),p.addTest=function(t,e){if("object"==typeof t)for(var i in t)h(t,i)&&p.addTest(i,t[i]);else{if(t=t.toLowerCase(),p[t]!==n)return p;e="function"==typeof e?e():e,"undefined"!=typeof f&&f&&(g.className+=" "+(e?"":"no-")+t),p[t]=e}return p},i(""),v=b=null,p._version=d,p._prefixes=_,p._domPrefixes=C,p._cssomPrefixes=k,p.hasEvent=N,p.testProp=function(t){return a([t])},p.testAllProps=l,p.testStyles=D,p.prefixed=function(t,e,n){return e?l(t,e,n):l(t,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+T.join(" "):""),p}(this,this.document),function(t,e,n){function i(t){return"[object Function]"==m.call(t)}function r(t){return"string"==typeof t}function o(){}function a(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function s(){var t=v.shift();y=1,t?t.t?f(function(){("c"==t.t?d.injectCss:d.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),s()):y=0}function l(t,n,i,r,o,l,u){function c(e){if(!p&&a(h.readyState)&&(b.r=p=1,!y&&s(),h.onload=h.onreadystatechange=null,e)){"img"!=t&&f(function(){_.removeChild(h)},50);for(var i in S[n])S[n].hasOwnProperty(i)&&S[n][i].onload()}}var u=u||d.errorTimeout,h=e.createElement(t),p=0,m=0,b={t:i,s:n,e:o,a:l,x:u};1===S[n]&&(m=1,S[n]=[]),"object"==t?h.data=n:(h.src=n,h.type=t),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){c.call(this,m)},v.splice(r,0,b),"img"!=t&&(m||2===S[n]?(_.insertBefore(h,w?null:g),f(c,u)):S[n].push(h))}function u(t,e,n,i,o){return y=0,e=e||"j",r(t)?l("c"==e?k:x,t,e,this.i++,n,i,o):(v.splice(this.i++,0,t),1==v.length&&s()),this}function c(){var t=d;return t.loader={load:u,i:0},t}var h,d,p=e.documentElement,f=t.setTimeout,g=e.getElementsByTagName("script")[0],m={}.toString,v=[],y=0,b="MozAppearance"in p.style,w=b&&!!e.createRange().compareNode,_=w?p:g.parentNode,p=t.opera&&"[object Opera]"==m.call(t.opera),p=!!e.attachEvent&&!p,x=b?"object":p?"script":"img",k=p?"script":x,C=Array.isArray||function(t){return"[object Array]"==m.call(t)},$=[],S={},M={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};d=function(t){function e(t){var e,n,i,t=t.split("!"),r=$.length,o=t.pop(),a=t.length,o={url:o,origUrl:o,prefixes:t};for(n=0;a>n;n++)i=t[n].split("="),(e=M[i.shift()])&&(o=e(o,i));for(n=0;r>n;n++)o=$[n](o);return o}function a(t,r,o,a,s){var l=e(t),u=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(r&&(r=i(r)?r:r[t]||r[a]||r[t.split("/").pop().split("?")[0]]),l.instead?l.instead(t,r,o,a,s):(S[l.url]?l.noexec=!0:S[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(i(r)||i(u))&&o.load(function(){c(),r&&r(l.origUrl,s,a),u&&u(l.origUrl,s,a),S[l.url]=2})))}function s(t,e){function n(t,n){if(t){if(r(t))n||(h=function(){var t=[].slice.call(arguments);d.apply(this,t),p()}),a(t,h,e,0,u);else if(Object(t)===t)for(l in s=function(){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}(),t)t.hasOwnProperty(l)&&(!n&&!--s&&(i(h)?h=function(){var t=[].slice.call(arguments);d.apply(this,t),p()}:h[l]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),p()}}(d[l])),a(t[l],h,e,l,u))}else!n&&p()}var s,l,u=!!t.test,c=t.load||t.both,h=t.callback||o,d=h,p=t.complete||o;n(u?t.yep:t.nope,!!c),c&&n(c)}var l,u,h=this.yepnope.loader;if(r(t))a(t,0,h,0);else if(C(t))for(l=0;l<t.length;l++)u=t[l],r(u)?a(u,0,h,0):C(u)?d(u):Object(u)===u&&s(u,h);else Object(t)===t&&s(t,h)},d.addPrefix=function(t,e){M[t]=e},d.addFilter=function(t){$.push(t)},d.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",h=function(){e.removeEventListener("DOMContentLoaded",h,0),e.readyState="complete"},0)),t.yepnope=c(),t.yepnope.executeStack=s,t.yepnope.injectJs=function(t,n,i,r,l,u){var c,h,p=e.createElement("script"),r=r||d.errorTimeout;p.src=t;for(h in i)p.setAttribute(h,i[h]);n=u?s:n||o,p.onreadystatechange=p.onload=function(){!c&&a(p.readyState)&&(c=1,n(),p.onload=p.onreadystatechange=null)},f(function(){c||(c=1,n(1))},r),l?p.onload():g.parentNode.insertBefore(p,g)},t.yepnope.injectCss=function(t,n,i,r,a,l){var u,r=e.createElement("link"),n=l?s:n||o;r.href=t,r.rel="stylesheet",r.type="text/css";for(u in i)r.setAttribute(u,i[u]);a||(g.parentNode.insertBefore(r,g),f(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("blobconstructor",function(){try{return!!new Blob}catch(t){return!1}}),function(){function t(){Modernizr.addTest("blobworkers",!1),e()}function e(){o&&l.revokeObjectURL(o),r&&r.terminate(),a&&clearTimeout(a)}try{var n,i,r,o,a,s=window.MozBlobBuilder||window.WebKitBlobBuilder||window.MSBlobBuilder||window.OBlobBuilder||window.BlobBuilder,l=window.MozURL||window.webkitURL||window.MSURL||window.OURL||window.URL,u="Modernizr",c="this.onmessage=function(e){postMessage(e.data)}";try{n=new Blob([c],{type:"text/javascript"})}catch(h){}n||(i=new s,i.append(c),n=i.getBlob()),o=l.createObjectURL(n),r=new Worker(o),r.onmessage=function(t){Modernizr.addTest("blobworkers",u===t.data),e()},r.onerror=t,a=setTimeout(t,200),r.postMessage(u)}catch(h){t()}}(),function(){try{var t="Modernizr",e=new Worker("data:text/javascript;base64,dGhpcy5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7cG9zdE1lc3NhZ2UoZS5kYXRhKX0=");e.onmessage=function(n){e.terminate(),Modernizr.addTest("dataworkers",t===n.data),e=null},e.onerror=function(){Modernizr.addTest("dataworkers",!1),e=null},setTimeout(function(){Modernizr.addTest("dataworkers",!1)},200),e.postMessage(t)}catch(n){Modernizr.addTest("dataworkers",!1)}}(),Modernizr.addTest("filereader",function(){return!!(window.File&&window.FileList&&window.FileReader)}),Modernizr.addTest("sharedworkers",function(){return!!window.SharedWorker}),function(){Nlvx.customFieldsHelper=function(){function t(){}var e,n,i,r,o,a,s;return i=null,e=[],a=[],s=[],r={date:{is:"eq","is not":"ne","is before":"lt","is after":"gt"},text:{is:"eq","is not":"ne","contains word":"contains"},number:{is:"eq","is greater than":"gt","is less than":"lt"},"opens.campaign_identifier":{Opened:"eq"},"clicks.campaign_identifier":{Clicked:"eq"}},o={date:{is:"eq","is not":"ne","is before":"lt","is after":"gt","is within":"is within"},text:{is:"eq","is not":"ne","contains word":"contains"},number:{is:"eq","is greater than":"gt","is less than":"lt"},"opens.campaign_identifier":{Opened:"eq","Not Opened":"ne"},"clicks.campaign_identifier":{Clicked:"eq","Not Clicked":"ne"}},n=function(){return o},t.getOperatorForQuery=function(t,e){return n()[t][e]},t.getHumanOperatorForQuery=function(t,e){var i,r;return i=n()[t],r=_.invert(i),r[e]},t.getQueries=function(){return n()},t.getQueriesByType=function(t){return n()[t]},t.getConditions=function(){return _.mapObject(n(),function(t){return _.keys(t)})},t.setQueryFields=function(t){return a=t},t.getQueryFields=function(){return a},t.setCustomFields=function(t){return e=t},t.getCustomFields=function(){return e},t.setSystemFields=function(t){return s=t},t.getSystemFields=function(){return s},t.systemFieldAliases={first_name:["First_Name","FName","First-Name","First Name","FirstName"],last_name:["Last_Name","LName","Last-Name","Last Name","LastName"]},t.findSystemFieldFromAlias=function(t){return _.findKey(this.systemFieldAliases,function(e){var n;return n=_.map(e,function(t){return t.toLowerCase()}),_.contains(n,t.toLowerCase())})},t}()}.call(this),function(){var t;t=function(){function t(){}var e,n;return n=null,e=0,t.get=function(){return e++,e},t}(),Nlvx.QueryCreateUpdateModal=function(){function e(e,n){var i;this.$trigger=e,this.options=null!=n?n:{},this.list=this.options.list,this.segment=this.options.segment,this.contactsOnly=this.options.contactsOnly,(this.hasList()||this.hasSegment())&&(this.object=this.list||this.segment),this.uniqueId=t.get(),i=$("#cu-segment-list").html(),this.template=Handlebars.compile(i),this.buildModal(),this.$html.find(".segment_list_id").select2({width:"100%"}),this.$submit=this.$html.find(".btn.submit"),this.listForm=new Nlvx.QueryCreateUpdateModal.CSVUploadForm(this.$html.find(".cu-segment-list--csv-upload__file-form"),this.$html.find(".cu-segment-list--csv-upload__list-form"),this.object),this.manualForm=new Nlvx.QueryCreateUpdateModal.ManualForm(this.$html.find(".cu-segment-list--manual__form")),this.segmentForm=new Nlvx.QueryCreateUpdateModal.SegmentationForm(this.$html.find(".cu-segment-list--segment__form"),this.object),this.manualForm.getAnalyticsArgs=function(){return["manual_add"]},this.segmentForm.getAnalyticsArgs=function(t){return function(){return["segment_created",{conditions_count:t.segmentForm.getQueries().length,field_types:_.sortBy(_.uniq(t.segmentForm.getQueryFieldTypes()),function(t){return t}),source:"contacts"}]}}(this),$(this.listForm).on("close",function(t){return function(){return t.$modal.modal("hide")}}(this)),this.children={},this.children["cu_new_upload_contact_"+this.uniqueId]=this.listForm,this.children["cu_new_manual_contact_"+this.uniqueId]=this.manualForm,this.children["cu_new_segmentation_"+this.uniqueId]=this.segmentForm,this.bindEvents()}return e.prototype.bindEvents=function(){return this.$trigger.on("click",_.bind(this.onTriggerClick,this)),this.$submit.on("click",_.bind(this.onSubmit,this)),this.$modal.find(".nav-tabs a[data-toggle='tab']").on("click",function(t){return function(e){var n;return n=$(e.currentTarget).attr("href").replace("#",""),t.$modal.attr("data-activetab",n)}}(this)),$(this.listForm).on("cancel",function(){}),$(this.listForm).on("error",function(){}),$(this.listForm).on("invalid",function(){})},e.prototype.buildModal=function(){return this.$html=$(this.template(this)),this.$modal=this.$html.modal({show:!1}).appendTo("body")},e.prototype.onTriggerClick=function(t){var e,n;return e=null!=(n=$(t.currentTarget).data("tab"))?n.replace("#",""):void 0,(!e&&"list"===$(t.currentTarget).data("type")||$(t.currentTarget).data("all-contacts"))&&(e="new_upload_contact"),e&&this.$html.find("a[href='#cu_"+e+"_"+this.uniqueId+"']").tab("show"),t.preventDefault(),this.$modal.attr("data-activetab","cu_"+e+"_"+this.uniqueId),this.$modal.modal("show")},e.prototype.hasList=function(){return null!=this.list},e.prototype.hasSegment=function(){return null!=this.segment},e.prototype.onSubmit=function(t){var e;return t.preventDefault(),e=this.activeObject(),e?(e.getAnalyticsArgs&&window.analytics.track.apply(void 0,e.getAnalyticsArgs()),e.submit()):void 0},e.prototype.activeObject=function(){var t,e;return t=this.$html.find("ul.nav-tabs li.active a").attr("href"),(null!=t?t.length:void 0)?(e=t.replace("#",""),this.children[e]):this.segment&&this.segment?this.segmentForm:void 0},e}()}.call(this),function(){var t,e;Nlvx.QueryCreateUpdateModal.CSVUploadForm=function(){function n(t,n,i){this.$uploadform=t,this.$listForm=n,this.object=i,this.createDropzone(),this.createFileUploader(),this.uploader.$element.on("cancel",function(t){return function(){return $(t).trigger("cancel")}}(this)),this.uploader.$element.on("error",function(t){return function(){return $(t).trigger("error")}}(this)),this.uploader.$element.on("invalid",function(t){return function(){return $(t).trigger("invalid")}}(this)),this.overlay=$(e),this.$progressBar=this.overlay.find(".csv-upload-overlay--progress"),this.bindEvents()
}return n.prototype.bindEvents=function(){return this.$uploadform.on("submit",_.bind(this.onChildSubmit,this)),this.$listForm.on("submit",_.bind(this.onChildSubmit,this)),$(this.uploader).on({"upload:start":_.bind(this.onUploadStart,this),"upload:fail":_.bind(this.onUploadFail,this)}),this.$listForm.find(".list-select-toggle").on("click",function(t){return function(e){var n,i,r,o;return e.preventDefault(),i=$(e.currentTarget),r=i.closest("[role='list-selection']"),o=i.data("connected"),n=t.$listForm.find("[role='"+o+"']"),r.toggleClass("active-new"),r.find("fieldset").attr("disabled","disabled"),n.removeAttr("disabled")}}(this)),$(this.uploader).on("upload:add",_.bind(this.onUploadAdd,this)),$("[data-role=cancel-csv-upload]").on("click",function(t){return function(){return $(t).trigger("close")}}(this))},n.prototype.onUploadAdd=function(t){return t.name.match(/.*\.csv$/i)?($("[data-role=dropzone-no-file-added-content]").hide(),this.customFieldsBuilder&&this.customFieldsBuilder.destroy(),this.customFieldsBuilder=new Nlvx.CustomFieldsBuilder(this.$listForm.parents(".modal"),t),$(this.customFieldsBuilder).on("submit",function(e){return function(n,i){return $(e.uploader).off("upload:add"),e.uploader.changeFile(t),e.submit(i.rebuiltHeaders,i.delimiter)}}(this))):(this.uploader.dropzone.removeFile(t),void Nlvx.FlashMessageHandler.add("danger","Only .csv files are accepted. Please change the format of your file and upload again."))},n.prototype.onChildSubmit=function(t){return t.preventDefault(),this.submit()},n.prototype.onUploadFail=function(){return this.overlay.remove()},n.prototype.onUploadStart=function(){return $(this).trigger("close"),$("main").append(this.overlay)},n.prototype.onUploadProgress=function(t,e){return this.$progressBar.find("span").css("width",""+e+"%")},n.prototype.createFileUploader=function(){return this.uploader=new Nlvx.DropzoneUploader(this.$uploadform,this.dropzone,{url:this.$uploadform.attr("action")})},n.prototype.createDropzone=function(){var e;if(null!=this.$uploadform.get(0))return this.dropzone=new Dropzone(this.$uploadform.get(0),{paramName:"file",autoProcessQueue:!1,clickable:!0,uploadMultiple:!1,maxFilesize:2e3,acceptedFiles:"text/csv, .csv",previewsContainer:".dropzone-previews",previewTemplate:t,addRemoveLinks:!0,dictRemoveFile:"Remove"}),e=function(t){return function(e){return t.uploader.validateFileSize(e.size)?t.onUploadAdd(e):t.dropzone.removeAllFiles()}}(this),this.dropzone.on("uploadprogress",_.bind(this.onUploadProgress,this)),this.dropzone.on("addedfile",_.bind(e,this)),this.dropzone.on("removedfile",function(){return $("[data-role=dropzone-no-file-added-content]").show(),$("#exceeding-free-limit-warning").addClass("hidden")})},n.prototype.submit=function(t,e){return this.hasFileAttached()?$.when(this.getOrCreateList()).then(function(n){return function(i){return $.post(n.$uploadform.data("policy-url"),function(r){return n.$uploadform.find("input[name=key]").val(r.key),n.$uploadform.find("input[name=policy]").val(r.policy),n.$uploadform.find("input[name=signature]").val(r.signature),n.uploader.submit(r.key,i.id,t,e,n.dropzone)})}}(this)).fail(function(t,e,n){var i;try{return i=JSON.parse(t.responseText),Nlvx.FlashMessageHandler.add("danger",i.message)}catch(r){if(n=r,null!=("undefined"!=typeof console&&null!==console?console.log:void 0))return console.log(n)}}):this.uploader.displayError("please select a file")},n.prototype.getOrCreateList=function(){var t,e,n;return t=null!=(e=_.find(this.$listForm.serializeArray(),function(t){return"list_id"===t.name}))?e.value:void 0,null!=this.object||null!=t?$.Deferred().resolve({id:(null!=(n=this.object)?n.id:void 0)||t}):$.Deferred(function(t){return function(e){return $.ajax({type:"POST",url:t.$listForm.attr("action"),data:t.$listForm.serialize(),success:e.resolve,error:e.reject})}}(this)).promise()},n.prototype.hasFileAttached=function(){return null!=this.uploader.file},n}(),e='<div class="overlay csv-upload-overlay">\n  <div class="overlay-content">\n    <i></i>\n    <h1>We are currently uploading your CSV</h1>\n    <p>Please do not close your browser</p>\n    <div class="csv-upload-overlay--progress">\n      <span></span>\n    </div>\n  </div>\n</div>',t='<div>\n  <div class="dz-filename"><span data-dz-name></span></div>\n</div>'}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.CustomFieldsBuilder=function(){function n(n,i){var r,o,a,s;this.$parentModal=n,this.file=i,this.isExceedingFreeLimit=e(this.isExceedingFreeLimit,this),this.fields=[],this.modalTemplate||(this.modalTemplate=Handlebars.compile(t)),this.parser=new Nlvx.CustomFieldsBuilder.csvFile(this.file),$(this.parser).on("preview:complete",_.bind(this.onPreviewFileParseComplete,this)),$(this.parser).on("error",_.bind(this.onPapaError,this)),this.parser.preview(),this.$parentModal.on("hidden.bs.modal",function(t){return function(){return t.$modal?t.$modal.remove():void 0}}(this)),$("[data-role=confirm-csv-upload]").off("click"),$("[data-role=confirm-csv-upload]").on("click",_.bind(this.open,this)),o=_.sortBy(Nlvx.customFieldsHelper.getCustomFields(),"name"),s=Nlvx.customFieldsHelper.getSystemFields(),r=_.map(o,function(t){return t.name.toLowerCase()}),a=_.map(s,function(t){return t.field_name.toLowerCase()}),this.allExistingFieldNames=r.concat(a)}return n.prototype.bindEvents=function(){return this.$modal.find(".back-arrow").on("click",function(t){return function(e){return e.preventDefault(),t.$modal.removeClass("in"),$(t).trigger("back")}}(this)),this.$modal.find(".submit").on("click",_.bind(this.submit,this))},n.prototype.submit=function(t){var e,n,i,r,o,a,s,l,u,c,h,d,p,f;if(t.preventDefault(),$(".csv-column-preview-group--header.error").removeClass("error"),this.allFieldsAreSelected()){if(this.allNewFieldsAreNew()){if(this.allFieldsAreUnique())return this.alert&&this.alert.remove(),$(".csv-column-preview-group--header.error").removeClass("error"),this.alert=null,n=_.filter(this.fields,function(t){return t.isCreatingField()&&t.shouldBeSaved}),$.when(this.saveCustomFields(n)).then(function(t){return function(){return t.hide(),$(t).trigger("submit",{rebuiltHeaders:t.rebuildHeaders(),delimiter:t.delimiter})}}(this)).fail(function(t){return function(e){var n,i,r,o,a;for(i=_.uniq(_.map(e,function(t){return t.errorMessage})),t.showError("We failed to create your custom fields for the following reasons: "+i.join(" ")),a=[],r=0,o=e.length;o>r;r++)n=e[r],a.push(n.parentField.highlight("error"));return a}}(this));for(this.showError("Each custom field can only be applied to a column once. Please check your columns and try again."),h=this.getDuplicateFields(),f=[],o=0,l=h.length;l>o;o++)e=h[o],f.push(e.highlight("error"));return f}for(this.showError("You already have a custom field with the same name."),c=this.getNewFieldsThatExist(),p=[],r=0,s=c.length;s>r;r++)e=c[r],p.push(e.highlight("error"));return p}for(this.showError('Please label each column header or check the option to "Skip Column".'),u=this.getFieldsWithoutValue(),d=[],i=0,a=u.length;a>i;i++)e=u[i],d.push(e.highlight("error"));return d},n.prototype.showError=function(t,e){return null==t&&(t=""),null==e&&(e="error"),this.alert&&this.alert.remove(),this.alert=new Nlvx.Alert(t,this.$modal.find(".modal-body"),e),this.alert.show()},n.prototype.getSavingFields=function(){return _.filter(this.fields,function(t){return t.shouldBeSaved})},n.prototype.allNewFieldsAreNew=function(){return this.getNewFieldsThatExist().length<1},n.prototype.getNewFieldsThatExist=function(){var t;return t=_.filter(this.getSavingFields(),function(t){return t.isCreatingField()}),_.filter(t,function(t){return function(e){return _.contains(t.allExistingFieldNames,e.getName().toLowerCase())}}(this))},n.prototype.allFieldsAreUnique=function(){return this.getDuplicateFields().length<1},n.prototype.getDuplicateFields=function(){var t,e;return e=_.groupBy(this.getSavingFields(),function(t){return t.getName().toLowerCase()}),t=_.filter(e,function(t){return t.length>1}),_.flatten(_.values(t))},n.prototype.allFieldsAreSelected=function(){var t;return t=this.getFieldsWithoutValue(),t.length<1},n.prototype.getFieldsWithoutValue=function(){return _.reject(this.getSavingFields(),function(t){return t.hasValue()})},n.prototype.rebuildHeaders=function(){return _.map(this.fields,function(t){return{name:t.getName(),should_be_saved:t.shouldBeSaved}})},n.prototype.saveCustomFields=function(t){var e,n,i,r;return r=t.length,e=0,n=0,i=[],$.Deferred(function(o){var a,s,l,u;if(t.length){for(u=[],s=0,l=t.length;l>s;s++)a=t[s],$(a.createField).on("ajax:success",function(){return e++,e>=r?o.resolve():void 0}),$(a.createField).on("ajax:fail",function(t,a){return n++,i.push(a.failedField),n+e>=r?o.reject(i):void 0}),u.push(a.create());return u}return o.resolve()}).promise()},n.prototype.open=function(){return this.$modal&&this.$modal.remove(),this.$modal=$(this.modalTemplate()),this.buildRows(),this.$parentModal.find(".modal-dialog").append(this.$modal),this.bindEvents(),window.setTimeout(function(t){return function(){return t.show()}}(this),500)},n.prototype.show=function(){return this.$modal.addClass("in")},n.prototype.hide=function(){return this.$modal.removeClass("in")},n.prototype.destroy=function(){return this.$modal?this.$modal.remove():void 0},n.prototype.autoMatchToSystemField=function(t){return Nlvx.customFieldsHelper.findSystemFieldFromAlias(t)},n.prototype.buildRows=function(){var t;return this.csvData?(this.headers=this.csvData[0],this.rows=this.csvData.slice(1),t=_.map(this.rows,function(t){return t.length}).concat(this.headers.length).sort().pop(),_(t).times(function(t){return function(e){var n,i,r;return i=t.headers[e]||"",r=t.autoMatchToSystemField(i),null!=r&&(i=r),n=new Nlvx.CustomFieldsBuilder.Field(i,_.map(t.rows,function(t){return t[e]})),$(n).on("message",function(e,n){return t.showError(n.message,n.type)}),n.build(),t.fields.push(n),t.$modal.find(".modal-body").append(n.getHTML())}}(this))):void 0},n.prototype.onPreviewFileParseComplete=function(t,e){var n,i,r,o;return n=e.csvData,this.csvErrors=n.errors,this.csvData=n.data,this.csvData[0]=_.map(this.csvData[0],function(t){return t.trim().replace(/\s/g,"_")}),i=_.map(this.csvData[0],function(t){return t.trim().toLowerCase().replace(/\s/g,"_")}),_.contains(i,"email")||(this.$parentModal.modal("hide"),Nlvx.FlashMessageHandler.add("danger",'We were unable to detect an email column in the CSV file headers. The email column must always have a header of "email".')),r=1===this.csvData[0].length,o=!_.isEmpty(_.findWhere(this.csvErrors,{code:"UndetectableDelimiter"})),!this.csvErrors.length||r||o?(this.delimiter=e.csvData.meta.delimiter,this.isExceedingFreeLimit(e.csvContactsCount)?$("#exceeding-free-limit-warning").removeClass("hidden"):this.open()):Nlvx.FlashMessageHandler.add("danger","We encountered an error attempting to process your CSV file. Please ensure the file is a valid CSV file before trying again.")},n.prototype.onPapaError=function(){return Nlvx.FlashMessageHandler.add("danger","We encountered an error attempting to process your CSV file. Please ensure the file is a valid CSV file before trying again.")},n.prototype.isExceedingFreeLimit=function(t){var e;return e=$("[data-saved-contacts-count]").data("saved-contacts-count"),e>2e3?!1:e+t>2e3},n}(),t='<div class="modal-content custom-fields-builder">\n  <div class="modal-header">\n    <h4 class="modal-title"><a class="back-arrow" href="#"></a> Assign Custom Fields</h4>\n    <div class="modal-actions">\n      <button type="button" data-dismiss="modal" class="btn btn-secondary">Cancel</button>\n      <button class="btn btn-primary submit">Save</button>\n    </div>\n    <div class="clearfix"></div>\n  </div>\n  <div class="modal-body">\n  </div>\n</div>'}.call(this),function(){Nlvx.CustomFieldsBuilder.csvFile=function(){function t(t){this.file=t}return t.prototype.preview=function(){return Papa.parse(this.file,{delimiter:"",preview:2002,fastMode:!1,complete:function(t){return function(e){var n;return n=e.data.length-1,e.data=e.data.slice(0,4),$(t).trigger("preview:complete",{csvData:e,csvContactsCount:n})}}(this),error:function(t){return function(){return $(t).trigger("error",arguments)}}(this)})},t}()}.call(this),function(){var t;Nlvx.CustomFieldsBuilder.Field=function(){function e(e,n){this.header=e,this.rows=n,this.fieldTemplate=Handlebars.compile(t),this.customFields=_.sortBy(Nlvx.customFieldsHelper.getCustomFields(),"name"),this.systemFields=Nlvx.customFieldsHelper.getSystemFields(),this.shouldBeSaved=!0}return e.prototype.build=function(){var t,e,n;return this.$html=$(this.fieldTemplate(this)),this.$html.find("select").select2(),this.bindEvents(),e=new RegExp(this.header,"i"),t=_.find(this.customFields.concat(this.systemFields),function(){return function(t){return e.test(t.field_name||t.name)}}(this)),(null!=(n=this.header)?n.length:void 0)?t?this.$html.find("select").val(t.field_name||t.name).trigger("change"):(this.$html.find("select").val("create:text").trigger("change"),this.$html.find(".js-new-custom-field-input").val(this.header),$(this).trigger("message",{message:"Please check the column headers below to confirm we've labeled them correctly. Each column header will become a custom field unless skipped.",type:"warning"}),this.highlight("warning")):void 0},e.prototype.bindEvents=function(){return this.$html.find("select").on("change",_.bind(this.onChange,this)),this.$html.on("change","select,input.js-new-custom-field-input",function(t){return function(){return t.$html.find(".csv-column-preview-group--header").removeClass(t.hasValue()?"error warning":"warning")}}(this)),this.$html.on("change","input.should-ignore-column",function(t){return function(e){var n;return n=$(e.currentTarget),t.shouldBeSaved=!n.is(":checked")}}(this))},e.prototype.onChange=function(t){var e,n,i,r,o;return n=$(t.currentTarget),o=n.val(),$.trim(this.$html.find(".js-new-custom-field-input").val()).length&&(i=$.trim(this.$html.find(".js-new-custom-field-input").val())),this.$html.find(".js-new-custom-field-input").remove(),/create\:/.test(o)?(r=o.replace("create:",""),this.createField=new Nlvx.CustomFieldsBuilder.FieldCreate(r,n,this),this.$html.find(".js-new-custom-field-input").val(i)):this.createField=null,e=this.$html.find("[data-role=checkbox-wrap]"),this.isSkippableField(o)?e.show():(e.hide(),e.find("input[type=checkbox]").prop("checked",!1).trigger("change"))},e.prototype.getHTML=function(){return this.$html},e.prototype.isSkippableField=function(t){return!this.findField(_.where(this.systemFields,{field_name:"email"}),t)},e.prototype.findField=function(t,e){var n;return n=new RegExp(e,"i"),_.find(t,function(){return function(t){return n.test(t.field_name||t.name)}}(this))},e.prototype.isCreatingField=function(){return null!=this.createField},e.prototype.hasValue=function(){return this.isCreatingField()?this.createField.isValid():this.getName().length>0},e.prototype.create=function(){return this.createField?this.createField.create():void 0},e.prototype.getName=function(){return this.isCreatingField()?this.createField.getName():this.$html.find("select").val()||""},e.prototype.highlight=function(t){var e;return e=["error","warning"],_.contains(e,t)?this.$html.find(".csv-column-preview-group--header").addClass(t):void 0},e}(),t='<div class="csv-column-preview-group">\n  <div class="csv-column-preview-group--header">\n    <div class="pull-right should-ignore-column input-checkbox-wrap" data-role="checkbox-wrap">\n      <input id="checkbox-csv-{{header}}" type="checkbox" class="should-ignore-column">\n      <label for="checkbox-csv-{{header}}" class="input-checkbox-label text-capitalize light">Skip Column</label>\n    </div>\n    <select>\n      <option value=""></option>\n      <optgroup class="js-create-custom-field" label="Create Fields">\n        <option value="create:text">New text field</option>\n        <option value="create:number">New number field</option>\n        <option value="create:date">New date field</option>\n      </optgroup>\n      <optgroup label="System Fields">\n      {{#systemFields}}\n      <option value="{{field_name}}">{{name}}</option>\n      {{/systemFields}}\n      </optgroup>\n      <optgroup label="Custom Fields">\n      {{#customFields}}\n      <option value="{{name}}">{{name}}</option>\n      {{/customFields}}\n      </optgroup>\n    </select>\n  </div>\n  {{#rows}}\n  <div class="csv-column-preview-group--row">\n    {{.}}\n  </div>\n  {{/rows}}\n  <div class="csv-column-preview-group--row">\n    &hellip;\n  </div>\n</div>'}.call(this),function(){Nlvx.CustomFieldsBuilder.FieldCreate=function(){function t(t,e,n){this.type=t,this.$select=e,this.parentField=n,this.$input=$("<input type='text' class='js-new-custom-field-input new-custom-field-input'>"),this.$select.after(this.$input),this.name=null,this.hasBeenCreated=!1}return t.prototype.isValid=function(){var t;return t=$.trim(this.$input.val()),t.length>0},t.prototype.getName=function(){return this.$input.val()},t.prototype.create=function(){var t,e;return this.errorMessage=null,this.name=this.$input.val(),t=0,(e=function(n){return function(){return n.hasBeenCreated?void $(n).trigger("ajax:success"):(t+=1,$.ajax({type:"POST",url:"/marketing_campaigns/custom_fields.json",data:{custom_field:{type:n.type,name:n.name}},success:function(){return window.analytics.track("custom_field_created",{source:"csv_upload",field_type:n.type}),$(n).trigger("ajax:success"),n.hasBeenCreated=!0},error:function(i){var r,o;try{if(o=JSON.parse(i.responseText),r=4===Math.floor(i.status/100),r&&o.message.match("name must be unique"))return 3>t?void setTimeout(e,300*t):($(n).trigger("ajax:success"),void(n.hasBeenCreated=!0));n.errorMessage=o.message}catch(a){n.errorMessage=null}return $(n).trigger("ajax:fail",{failedField:n})}}))}}(this))()},t}()}.call(this),function(){Nlvx.QueryCreateUpdateModal.ManualForm=function(){function t(t){this.$form=t,this.actionUrl=this.$form.attr("action"),this.$emailInput=this.$form.find("[name='profile[email]']"),this.bindEvents()}return t.prototype.bindEvents=function(){return this.$form.on("submit",function(t){return function(e){return e.preventDefault(),t.submit()}}(this)),this.$form.find(".list-select-toggle").on("click",function(t){return function(e){var n,i,r,o;return e.preventDefault(),i=$(e.currentTarget),r=i.closest("[role='list-selection']"),o=i.data("connected"),n=t.$form.find("[role='"+o+"']"),r.toggleClass("active-new"),r.find("fieldset").attr("disabled","disabled"),n.removeAttr("disabled")}}(this))},t.prototype.submit=function(){return this.hasValidEmail()?$.ajax({url:this.actionUrl,type:"POST",dataType:"json",data:this.$form.serialize(),success:this.onSubmitSuccess,error:this.onSubmitError}):Nlvx.FlashMessageHandler.add("danger","Please enter a valid email address.")},t.prototype.hasValidEmail=function(){return Nlvx.EmailValidator.is_valid(this.$emailInput.val())},t.prototype.onSubmitSuccess=function(t){return null!=(null!=t?t.redirect_to:void 0)?Nlvx.WindowHandler.redirect(t.redirect_to):Nlvx.WindowHandler.reload()},t.prototype.onSubmitError=function(t){var e,n,i;i=t.responseText;try{return n=JSON.parse(i),Nlvx.FlashMessageHandler.add("danger",n.message)}catch(r){if(e=r,null!=("undefined"!=typeof console&&null!==console?console.log:void 0))return console.log(e)}},t}()}.call(this),function(){Nlvx.SegmentBuilder=function(){function t(t,e){var n,i,r,o;if(this.$container=t,null==e&&(e=[]),this.queryObjects=[],this.segmentQueries=new Nlvx.SegmentBuilder.SegmentQueries,this.customFields=Nlvx.customFieldsHelper.getQueryFields(),e.length)for(r=0,o=e.length;o>r;r++)i=e[r],n=_.find(this.customFields,function(){return function(t){return t.field_name===i.field||t.name===i.field}}(this)),i.operator&&(i.operator=Nlvx.customFieldsHelper.getHumanOperatorForQuery(n.type,i.operator)),this.addQuery(i);else this.addQuery({})}return t.prototype.addQuery=function(t){var e,n;return null==t&&(t={}),e=this.segmentQueries.add(t),n=new Nlvx.SegmentBuilder.SegmentQuery(e,this.$container,this.segmentQueries),this.queryObjects.push(n),$(n).on("add",function(t){return function(){return t.addQuery()}}(this)),$(n).on("remove",function(t){return function(e,n){return t.removeQuery(n)}}(this))},t.prototype.removeQuery=function(t){var e,n,i,r,o,a;for(e=_.find(this.queryObjects,function(e){return e.id===t}),this.queryObjects=_.reject(this.queryObjects,function(e){return e.query.id===t}),this.segmentQueries.remove(t),o=this.queryObjects,a=[],i=0,r=o.length;r>i;i++)n=o[i],a.push(n.render());return a},t.prototype.getQueries=function(){var t;return t=_.compact(_.map(this.queryObjects,function(t){return t.toJson()})),(null!=t?t.length:void 0)&&(t[0].and_or=""),t},t}()}.call(this),function(){Nlvx.SegmentBuilder.SegmentQueries=function(){function t(){this.count=0,this.queries=[]}return t.prototype.add=function(t){return null==t&&(t={}),t.id||(t.id=this.count),t.and_or||(t.and_or="and"),this.count=this.count+1,this.queries.push(t),t},t.prototype.get=function(){return this.queries},t.prototype.remove=function(t){return null==t&&(t=null),null!=t?this.queries=_.reject(this.queries,function(e){return e.id===t}):void 0},t.prototype.update=function(t){return null==t&&(t={id:-1}),this.queries=_.reject(this.queries,function(e){return e.id===t.id}),this.queries.push(t)},t}()}.call(this),function(){Nlvx.SegmentBuilder.SegmentQuery=function(){function t(t,n,o){this.query=null!=t?t:{},this.$container=n,this.segmentQueries=o,this.selectTemplate=Handlebars.compile(r),this.queryTemplate=Handlebars.compile(i),this.inputTemplate=Handlebars.compile(e),this.$content=$(this.queryTemplate()),this.$container.append(this.$content),this.$field=this.$content.find(".js-new-segmentation__field"),this.$condition=this.$content.find(".js-new-segmentation__condition"),this.$value=this.$content.find(".js-new-segmentation__query-value"),this.customFields=Nlvx.customFieldsHelper.getQueryFields(),this.conditions=Nlvx.customFieldsHelper.getConditions(),this.$content.find(".join").on("click",_.bind(this.onJoinChange,this)),this.$content.find(".query-add").on("click",function(t){return function(e){var n;return n=$(e.currentTarget),n.hasClass("active")?(n.hide(),$(t).trigger("add")):void 0}}(this)),this.$content.find(".query-remove").on("click",function(t){return function(e){return e.preventDefault(),t.$content.remove(),$(t).trigger("remove",t.query.id)}}(this)),this.$content.on({mouseover:function(t){return function(){return!t.isFirstQuery()||t.formHasMultipleQueries()?t.$content.find(".query-remove .icon-remove").show():void 0}}(this),mouseout:function(t){return function(){return t.$content.find(".query-remove .icon-remove").hide()}}(this)}),this.render()}var e,n,i,r;return r='<select class="{{cssClass}}" name="{{name}}" id="{{name}}">\n  <option value="">Select {{type}}</option>\n  {{#each options}}\n    {{#if selected}}\n    <option value="{{value}}" selected="selected">{{name}}</option>\n    {{else}}\n    <option value="{{value}}">{{name}}</option>\n    {{/if}}\n  {{/each}}\n</select>',i='<fieldset style="border:none;">\n    <span class="join" data-join="and">AND</span>\n    <span class="join" data-join="or">OR</span>\n  <div class="condition-select js-new-segmentation__field"></div>\n  <div class="condition-select js-new-segmentation__condition"></div>\n  <div class="condition-select js-new-segmentation__query-value"></div>\n  <span class="icon-wrapper query-remove">\n    <i class="icon-remove" style="display:none"></i>\n  </span>\n  <span class="icon-wrapper query-add">\n    <i class="icon-add"></i>\n  </span>\n</fieldset>',e='<input type="text" placeholder="{{placeholder}}" name="query_value" value="{{value}}">',n={date:"MM/DD/YYYY"},t.prototype.getPlaceholder=function(t,e){return"date"===t&&"is within"===e?"Number of Days":n[t]},t.prototype.hideAllAddButtons=function(){return this.$container.find(".query-add").hide()},t.prototype.hideAddButton=function(){return this.$content.find(".query-add").hide()},t.prototype.showAddButton=function(){return this.$content.find(".query-add").show()},t.prototype.dimAddButton=function(){return this.$content.find(".query-add").removeClass("active")},t.prototype.brightenAddButton=function(){return this.$content.find(".query-add").addClass("active")},t.prototype.onJoinChange=function(t){var e;return e=$(t.currentTarget),this.query.and_or=e.data("join"),this.$content.find(".join").removeClass("active"),e.addClass("active")},t.prototype.render=function(){var t,e,n,i,r;return i=_.map(this.customFields,function(t){return function(e){return{value:e.field_name||e.name,name:e.name,selected:null!=t.query.field&&(t.query.field===e.field_name||t.query.field===e.name)}}}(this)),this.$fieldSelect=$(this.selectTemplate({options:i,cssClass:"",type:"Condition",name:"field"})),this.$field.html(this.$fieldSelect),this.$fieldSelect.on("change",_.bind(this.onFieldChange,this)),null!=this.query.field&&(n=_.find(this.customFields,function(t){return function(e){return e.field_name===t.query.field||e.name===t.query.field}}(this)),null!=this.fieldType&&this.fieldType!==n.type&&(this.query.operator=null,this.query.value=null),this.fieldType=n.type,e=_.map(this.conditions[this.fieldType],function(t){return function(e){return{value:e,name:e,selected:null!=t.query.operator&&t.query.operator===e}}}(this)),this.$conditionSelect=$(this.selectTemplate({options:e,cssClass:"",type:"Criteria",name:"operator"})),this.$condition.html(this.$conditionSelect),this.$conditionSelect.on("change",_.bind(this.onConditionChange,this))),null!=this.query.operator?"number"===this.fieldType||"text"===this.fieldType||"date"===this.fieldType?(this.$valueInput=$(this.inputTemplate({placeholder:this.getPlaceholder(this.fieldType,this.query.operator)||"",value:this.query.value||null})),this.$value.html(this.$valueInput),this.$valueInput.on("blur",_.bind(this.onValueBlur,this)),this.$valueInput.on("keyup",_.bind(this.onValueKeyup,this))):("opens.campaign_identifier"===this.fieldType||"clicks.campaign_identifier"===this.fieldType)&&(t=_.find(this.customFields,function(t){return function(e){return e.field_name===t.fieldType}}(this)),r=_.map(t.options,function(t){return function(e){return{value:e.id,name:e.label,selected:t.query.value===e.id}}}(this)),this.$valueSelect=$(this.selectTemplate({options:r,cssClass:"",type:"Campaign",name:"value"})),this.$value.html(this.$valueSelect),this.$valueSelect.on("change",_.bind(this.onValueChange,this))):this.$value.empty(),this.isLastQuery()?(this.hideAllAddButtons(),this.showAddButton(),this.query.value?this.brightenAddButton():this.dimAddButton()):this.hideAddButton(),null==this.query.and_or||this.isFirstQuery()?this.$content.find(".join").hide():(this.$content.find(".join").removeClass("active").show(),this.$content.find(".join[data-join='"+this.query.and_or+"']").addClass("active")),this.$content.find("select").select2({width:"160px"})},t.prototype.isLastQuery=function(){var t,e;return e=this.$container.find("fieldset").index(this.$content),t=this.$container.find("fieldset").length,e===t-1},t.prototype.isFirstQuery=function(){var t;return t=this.$container.find("fieldset").index(this.$content),0===t},t.prototype.formHasMultipleQueries=function(){return this.$container.find("fieldset").length>1},t.prototype.onFieldChange=function(){return this.query.field=this.$fieldSelect.val(),""===this.query.field&&(this.query.operator=null,this.query.field=null,this.query.value=null),this.segmentQueries.update(this.query),this.render()},t.prototype.onConditionChange=function(){return this.query.operator=this.$conditionSelect.val(),""===this.query.operator&&(this.query.operator=null,this.query.value=null),this.segmentQueries.update(this.query),this.render()},t.prototype.onValueBlur=function(){return this.query.value=this.$valueInput.val(),this.segmentQueries.update(this.query)},t.prototype.onValueKeyup=function(){return this.isLastQuery()?(this.showAddButton(),this.$valueInput.val().length?this.brightenAddButton():this.dimAddButton()):this.hideAddButton()},t.prototype.onValueChange=function(){return this.query.value=this.$valueSelect.val(),this.segmentQueries.update(this.query),this.render()},t.prototype.getFieldType=function(){var t;return t=this.$fieldSelect.val(),t?_.include(["opens.campaign_identifier","clicks.campaign_identifier"],t.toLowerCase())?"engagement":_.include(["first_name","last_name","email","created_at","updated_at","last_emailed","last_clicked","last_opened"],t.toLowerCase())?"reserved":"custom":void 0},t.prototype.toJson=function(){var t;return this.query.field&&this.query.operator&&this.query.value?(t=_.clone(this.query),this.isFirstQuery()&&(t.and_or=""),t.operator=Nlvx.customFieldsHelper.getOperatorForQuery(this.fieldType,t.operator),delete t.id,t):void 0},t}()}.call(this),function(){Nlvx.QueryCreateUpdateModal.SegmentationForm=function(){function t(t,e){var n;this.$form=t,this.listOrSegment=e,this.$conditions=this.$form.find(".conditions"),this.actionUrl=this.$form.attr("action"),this.conditions=null!=(n=this.listOrSegment)?n.conditions:void 0,this.segmentBuilder=new Nlvx.SegmentBuilder(this.$conditions,this.conditions),this.$form.on("submit",function(t){return function(e){return e.preventDefault(),t.submit()}}(this))}return t.prototype.submit=function(){var t,e;return t=this.getQueries(),this.$form.find("[name='conditions']").val(JSON.stringify(t)),$.ajax(this.conditions&&(null!=(e=this.listOrSegment)?e.id:void 0)?{url:""+this.actionUrl+"/"+this.listOrSegment.id,type:"PUT",dataType:"json",data:this.$form.serialize(),success:this.onSubmitSuccess,error:this.onSubmitError}:{url:this.actionUrl,type:"POST",dataType:"json",data:this.$form.serialize(),success:this.onSubmitSuccess,error:this.onSubmitError})},t.prototype.onSubmitSuccess=function(t){return null!=(null!=t?t.redirect_to:void 0)?Nlvx.WindowHandler.redirect(t.redirect_to):Nlvx.WindowHandler.reload()},t.prototype.onSubmitError=function(t){var e,n,i;i=t.responseText;try{return n=JSON.parse(i),Nlvx.FlashMessageHandler.add("danger",n.message)}catch(r){if(e=r,null!=("undefined"!=typeof console&&null!==console?console.log:void 0))return console.log(e)}},t.prototype.getQueries=function(){return _.compact(this.segmentBuilder.getQueries())},t.prototype.getQueryFieldTypes=function(){return _.map(this.segmentBuilder.queryObjects,function(t){return t.getFieldType()})},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.TitleUpdater=function(){function e(e,n){this.keyupHandler=t(this.keyupHandler,this),this.keydownHandler=t(this.keydownHandler,this),this.pasteHandler=t(this.pasteHandler,this),this.$target=$(e),this.$title=null,this.$editModalTitle=null,this.path=n}return e.prototype.bindEvents=function(){return this.$title=this.$target.find(".profiles-title h3"),this.$editModalTitle=this.$target.find(".edit-segment-modal-title"),this.$title.off("keydown"),this.$title.off("keyup"),this.$title.on("keyup",this.keyupHandler),this.$title.on("keydown",this.keydownHandler),this.$title.on("paste",this.pasteHandler)},e.prototype.pasteHandler=function(t){var e;return t.preventDefault(),e=(t.originalEvent||t).clipboardData.getData("text/plain"),this.pasteText(e)},e.prototype.keydownHandler=function(t){return 13===t.key||13===t.keyCode?!1:void 0},e.prototype.keyupHandler=function(t){var e;return(13===t.key||13===t.keyCode)&&(e=this.$title.text(),$.ajax(this.path,{method:"PUT",data:{name:e},success:function(n){return function(){return n.$editModalTitle.text(e),$(t.target).blur()}}(this),error:function(t){return Nlvx.FlashMessageHandler.add("danger",JSON.parse(t.responseText).message)}})),!1},e.prototype.pasteText=function(t){return document.execCommand("insertText",!1,t)},e}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.NotificationEmailsView=function(){function n(t,n,i){this.$table=t,this.$modal=n,this.$form=i,this.renumberRows=e(this.renumberRows,this),this.fadeTime=500,this.build()}var i;return i=10,n.prototype.build=function(){return this.enforceMaxRows(),this.afterBuild(),this.notificationEmailRowTemplate=Handlebars.compile(t)},n.prototype.afterBuild=function(){return this.bindEvents()},n.prototype.onFormSubmit=function(t){return t.preventDefault()},n.prototype.bindEvents=function(){return this.$form.on("submit",function(t){return function(e){return t.onFormSubmit(e)}}(this)),this.$modal.on("click",".submit",function(t){return function(){return t.$form.submit()}}(this)),this.$modal.on("click",".cancel",function(t){return function(){return t.$modal.modal("hide"),t.$form.trigger("reset")}}(this)),this.$table.on("click",".notification-email-recipient .delete",function(t){return function(e){var n,i;return n=$(e.currentTarget),i=n.parents(".notification-email-recipient"),t.deleteRow(i)
}}(this)),this.$table.on("change",function(t){return function(){return t.onChange()}}(this)),this.initializeFormValidator()},n.prototype.initializeFormValidator=function(){return $.validator.addMethod("unique",function(t,e,n){return!_.contains(n,t)},"Please ensure the value is unique."),this.$form.validate({rules:{contact_label:{maxlength:100},contact:{maxlength:100,unique:function(t){return function(){return t.getEmails()}}(this)()}},messages:{contact:{unique:"This e-mail address has already been added."}},errorElement:"span",errorClass:"control-label",errorPlacement:function(){return function(t,e){var n;return n=$(e).parents(".form-group"),n.append(t)}}(this),highlight:function(){return function(t){var e;return e=$(t).parents(".form-group"),e.removeClass("has-success").addClass("has-error")}}(this),success:function(){return function(t,e){var n;return $(e).val(Nlvx.Sanitizers.removeJavascript($(e).val())),n=$(e).parents(".form-group"),n.removeClass("has-error").addClass("has-success")}}(this),submitHandler:function(t){return function(){return t.submitForm()}}(this)})},n.prototype.submitForm=function(){var t,e;return e={},this.$form.serializeArray().map(function(t){return e[t.name]=Nlvx.Sanitizers.removeJavascript(t.value)}),e.index=this.getRowCount()+1,t=$(this.notificationEmailRowTemplate(e)),t.appendTo(this.$table).hide(),this.showRow(t),$.ajax({url:this.$form.attr("action"),type:this.$form.attr("method"),dataType:"json",data:encodeURI(Nlvx.Sanitizers.removeJavascript(unescape(this.$form.serialize()))),success:function(e){return function(n){return t.find(".delete").attr("data-target","/marketing_campaigns/notification_emails/"+n),e.$form.trigger("reset"),e.$modal.modal("hide"),Nlvx.FlashMessageHandler.add("success","Success! You've added a new notification recipient.")}}(this),error:function(e){return function(){return Nlvx.FlashMessageHandler.add("danger","Failed to add your notification recipient."),e.hideRow(t)}}(this)})},n.prototype.hideRow=function(t){return t.fadeOut(this.fadeTime).addClass("removed"),this.$table.trigger("change")},n.prototype.showRow=function(t){return t.fadeIn(this.fadeTime).removeClass("removed"),this.$table.trigger("change")},n.prototype.deleteRow=function(t){return this.hideRow(t),$.ajax({url:t.find(".delete").attr("data-target"),method:"DELETE",dataType:"json",success:function(){return function(){return Nlvx.FlashMessageHandler.add("success","Success! You've deleted this notification recipient.")}}(this),error:function(e){return function(){return e.showRow(t),Nlvx.FlashMessageHandler.add("danger","Failed to delete your notification recipient.")}}(this)})},n.prototype.onChange=function(){return this.enforceMaxRows(),this.renumberRows()},n.prototype.getEmails=function(){return _.map(this.getRows(),function(t){return $(t).find(".email").text()})},n.prototype.getRows=function(){return this.$table.find(".notification-email-recipient:not(.removed)")},n.prototype.enforceMaxRows=function(){var t;return t=$("[data-target=#"+this.$modal.attr("id")+"]"),this.getRowCount()>=i?t.addClass("btn-secondary").removeClass("btn-primary").attr("disabled",!0):t.removeClass("btn-secondary").addClass("btn-primary").attr("disabled",!1)},n.prototype.getRowCount=function(){return this.getRows().length},n.prototype.renumberRows=function(){return _.each(this.getRows(),function(t,e){return $(t).find(".index").text(e+1)})},n}(),t='<tr class="notification-email-recipient">\n  <td class="index">{{index}}</td>\n  <td class="name">{{contact_label}}</td>\n  <td class="email">{{contact}}</td>\n  <td class="action">\n    <div class="btn btn-small btn-dropdown btn-dropdown-gear dropdown manage-dropdown manage-recipient-dropdown pull-right" data-dropdown-toggle="true">\n      <i class="sg-icon sg-icon-gear"></i>\n      <ul aria-labelledby="dLabel" class="dropdown-menu dropdown-menu-right-aligned" role="menu" data-dropdown-menu="true">\n        <li>\n          <a class="delete dropdown-link dropdown-link-with-icon" data-target="">\n            <i class="sg-icon sg-icon-trash"></i>\n            <span>Delete</span>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </td>\n</tr>'}.call(this),function(){}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.AbWinnerSelectModal=function(){function e(e){this.submitSaveForm=t(this.submitSaveForm,this),this.$target=$(e)}var n;return e.prototype.bindEvents=function(){return $(".winner-select").on("click",n),this.$target.on("click","#selectwinner_modal .confirm",function(t){return function(){return t.submitSaveForm()}}(this))},n=function(){return $("#selectwinner_modal").modal({show:!0,backdrop:!1})},e.prototype.submitSaveForm=function(){return this.$target.find("form.edit_content").submit()},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.AbTest=function(){function e(e,n,i){this.updateTabs=t(this.updateTabs,this),this.setVersions=t(this.setVersions,this),this.getVersions=t(this.getVersions,this),this.submitSaveForm=t(this.submitSaveForm,this),this.updateDurationSelect=t(this.updateDurationSelect,this),this.outputUpdate=t(this.outputUpdate,this),this.showSubjectsMenu=t(this.showSubjectsMenu,this),this.hideSubjectsMenu=t(this.hideSubjectsMenu,this),this.showSubjects=t(this.showSubjects,this),this.activateAbTest=t(this.activateAbTest,this),this.hideContentTabs=t(this.hideContentTabs,this),this.changeImportTextForSubjectLine=t(this.changeImportTextForSubjectLine,this),this.changeImportTextForEmailContent=t(this.changeImportTextForEmailContent,this),this.enableSubjectInput=t(this.enableSubjectInput,this),this.disableSubjectInput=t(this.disableSubjectInput,this),this.hideTabsIfSubjectLineChecked=t(this.hideTabsIfSubjectLineChecked,this);var r;this.campaignId=n,this.$target=$(e),this.$version_select=this.$target.find("#versions_select"),this.$active_checkbox=this.$target.find('[name="campaign[campaign_ab_test][active]"]'),this.$ab_trigger_input=this.$target.find("#ab-trigger"),this.$percentageInput=this.$target.find("#percentage"),this.$durationSelect=this.$target.find("#duration_select"),this.$abTestId=this.$target.find('[name="campaign[campaign_ab_test][id]"]').val(),this.$showIfTypeSel=$(".show-if-type-selected"),r=$("#campaign-ab-testing .accordion-panel"),this.$collapsibleContainer=r.find(".collapsible"),this.versions=0,this.splits=0,this.subjectClasses=[".a-label",".b-label",".c-label",".d-label",".e-label",".f-label"],this.splitIds=["#split-a","#split-b","#split-c","#split-d","#split-e","#split-f"],this.percentageIds=["#a-percentage","#b-percentage","#c-percentage","#d-percentage","#e-percentage","#f-percentage"],this.versionTexts=["One","Two","Three","Four","Five","Six"],this.$subjectInput=$("#campaign-sending #campaign_campaign_content_subject"),this.$abTestBadge=$("#ab-test-badge"),this.$importFromHTMLButton=$("button#import_from_html"),this.$designModeBtn=$(".design-mode"),this.$codeModeBtn=$(".code-mode"),this.outputUpdate(),this.updateDurationSelect(),this.getVersions(),this.$emailSubject=this.$target.find("#email-subject"),this.$emailSubjectFields=this.$target.find(".ab-subject-fields"),this.$emailContentRadioButton=$(this.$target.find('#ab-variation-types label:contains("Email Content")').siblings()[0]),this.$subjectLineRadioButton=$(this.$target.find('#ab-variation-types label:contains("Subject Line")').siblings()[0]),$("[name='campaign[campaign_content][subject]']").on("keyup",function(){return $("[name='campaign[campaign_content][subject]']").not(":focus").val($(this).val())}),$("[name='campaign[campaign_content][subject]']").on("change",function(){return $("[name='campaign[campaign_content][subject]']").not(":focus").val($(this).val())}),this.$subjectLineRadioButton.prop("checked")===!1&&this.hideSubjectsMenu(),this.$emailContentRadioButton.prop("checked")===!1&&this.hideContentTabs(),this.$subjectLineRadioButton.prop("checked")?($("body").removeClass("has-content-ab-test"),this.disableSubjectInput(),this.changeImportTextForSubjectLine()):this.$emailContentRadioButton.prop("checked")&&($("body").addClass("has-content-ab-test"),this.changeImportTextForEmailContent()),this.router=i,this.activateAbTest()}var n;return e.prototype.bindEvents=function(){return this.$version_select.on("change",this.showSubjects),this.activateSwitch=new Nlvx.OnOffSwitch(this.$ab_trigger_input),$(this.activateSwitch).on({off:function(t){return function(){return t.activateAbTest()}}(this),on:function(t){return function(){return t.activateAbTest()}}(this)}),this.$percentageInput.on("input",this.outputUpdate),this.$emailContentRadioButton.on("change",function(t){return function(){return $("body").addClass("has-content-ab-test"),t.hideSubjectsMenu(),t.enableSubjectInput(),t.changeImportTextForEmailContent(),t.$showIfTypeSel.show()}}(this)),this.$subjectLineRadioButton.on("change",function(t){return function(){return $("body").removeClass("has-content-ab-test"),t.showSubjectsMenu(),t.hideContentTabs(),t.disableSubjectInput(),t.changeImportTextForSubjectLine(),t.$showIfTypeSel.show(),Nlvx.ContentEditor.contentCollection.removeContentsExceptA()}}(this)),this.$abTestBadge.on("click",function(){return $("a[href=#campaign-ab-testing]").click()}),this.$designModeBtn.on("click",this.hideTabsIfSubjectLineChecked),this.$codeModeBtn.on("click",this.hideTabsIfSubjectLineChecked),$(".winner-select").on("click",n),this.$target.on("click","#selectwinner_modal .confirm",function(t){return function(){return t.submitSaveForm()}}(this)),this.$emailContentRadioButton.prop("checked")===!0&&this.hideSubjectsMenu,this.$emailContentRadioButton.bind("click",this.updateTabs),this.$version_select.bind("change",this.updateTabs)},e.prototype.hideTabsIfSubjectLineChecked=function(){return this.$subjectLineRadioButton.prop("checked")===!0?Nlvx.ContentEditor.contentCollection.removeContentsExceptA():void 0},e.prototype.disableSubjectInput=function(){return this.$subjectInput.prop("disabled",!0),this.$abTestBadge.show()},e.prototype.enableSubjectInput=function(){return this.$subjectInput.prop("disabled",!1),this.$abTestBadge.hide()},e.prototype.changeImportTextForEmailContent=function(){return this.$importFromHTMLButton.text("Import for all versions")},e.prototype.changeImportTextForSubjectLine=function(){return this.$importFromHTMLButton.text("Import From HTML")},e.prototype.hideContentTabs=function(){return this.$contentTabs=$("ul.contentabtest--tabs"),this.$contentTabs.hide()},e.prototype.activateAbTest=function(){var t,e;return this.$active_checkbox.is(":checked")?(this.$collapsibleContainer.slideDown(300),t=this.$emailContentRadioButton.is(":checked"),e=this.$subjectLineRadioButton.is(":checked"),t===!1&&e===!1&&this.$showIfTypeSel.hide(),this.getVersions(),t&&$("body").addClass("has-content-ab-test"),e&&this.disableSubjectInput()):(this.$collapsibleContainer.slideUp(300),$("body").removeClass("has-content-ab-test"),this.$showIfTypeSel.show(),this.enableSubjectInput(),Nlvx.ContentEditor.contentCollection.removeContentsExceptA(),this.hideContentTabs(),this.$version_select.select2("val",1),this.router.switchToVersion(null)),t===!0?(this.hideSubjectsMenu(),this.updateTabs()):void 0},e.prototype.showSubjects=function(){var t,e,n,i,r;for(this.versions=parseInt(this.$version_select.select2("val")),$("#versions-text").text(this.versionTexts[this.versions-1]),t=e=0,i=this.versions;i>=0?i>=e:e>=i;t=i>=0?++e:--e)$(this.subjectClasses[t]).show(),$(this.splitIds[t]).show();for(t=n=r=this.versions;6>=r?6>=n:n>=6;t=6>=r?++n:--n)$(this.subjectClasses[t]).hide(),$(this.splitIds[t]).hide();return this.outputUpdate()},e.prototype.hideSubjectsMenu=function(){return this.$emailSubject.hide(),this.$emailSubjectFields.hide()},e.prototype.showSubjectsMenu=function(){return this.$emailSubject.show(),this.$emailSubjectFields.show()},e.prototype.outputUpdate=function(){var t,e,n,i,r,o;for(i=this.$percentageInput.val(),e=i/this.versions,n=e.toFixed(2),this.$target.find("#volume").text(i+"%"),t=r=0,o=this.versions;o>=0?o>=r:r>=o;t=o>=0?++r:--r)this.$target.find(this.percentageIds[t]).text(n+"%");this.$target.find("#winning_percentage").text(100-i+"%")},e.prototype.updateDurationSelect=function(){var t;this.$abTestId&&(t=this.$durationSelect.attr("value"),this.$durationSelect.select2("val",t),this.$active_checkbox.prop("checked",!0))},n=function(){return $("#selectwinner_modal").modal({show:!0,backdrop:!1})},e.prototype.submitSaveForm=function(){return this.$target.find("form.edit_content").submit()},e.prototype.getVersions=function(){return 0===this.splits&&(this.splits=_.size(Nlvx.ContentEditor.contentCollection.getContents())),this.setVersions()},e.prototype.setVersions=function(){return this.versions=this.splits,1===this.versions&&(this.versions=2),this.$version_select.select2("val",this.versions),this.showSubjects()},e.prototype.updateTabs=function(){return this.$emailContentRadioButton.is(":checked")?(Nlvx.ContentEditor.contentCollection.setVersionCount(parseInt(this.$version_select.select2("val"))),this.router.switchToVersion("a")):void 0},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.CampaignActionsDropdown=function(){function e(e,n,i){this.handleUnscheduleCampaign=t(this.handleUnscheduleCampaign,this),this.handleTemplatizeCampaign=t(this.handleTemplatizeCampaign,this),this.handleDuplicateCampaign=t(this.handleDuplicateCampaign,this),this.handleRenderPreviewModal=t(this.handleRenderPreviewModal,this),this.handleRenderDeleteModal=t(this.handleRenderDeleteModal,this),this.$target=$(e),this.$deleteModal=n,this.$previewModal=i}return e.prototype.duplicateCampaign=function(t){return $("form.duplicate_form[data-id="+t+"]").submit()},e.prototype.templatizeCampaign=function(t){var e;return e=function(){return $("form.templatize_form[data-id="+t+"]").submit()},window.analytics.track("template_created",{source:"from_campaign"},e)},e.prototype.unscheduleCampaign=function(t){return $("form.unschedule_form[data-id="+t+"]").submit()},e.prototype.renderDeleteModal=function(t){return this.$deleteModal.render(t)},e.prototype.renderPreviewModal=function(t){return this.$previewModal.render(t)},e.prototype.bindEvents=function(){return this.$target.find('[data-action="delete"]').click(this.handleRenderDeleteModal),this.$target.find('[data-action="preview"]').click(this.handleRenderPreviewModal),this.$target.find('[data-action="duplicate"]').click(this.handleDuplicateCampaign),this.$target.find('[data-action="templatize"]').click(this.handleTemplatizeCampaign),this.$target.find('[data-action="unschedule"]').click(this.handleUnscheduleCampaign)},e.prototype.handleRenderDeleteModal=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("id"),this.renderDeleteModal(e)},e.prototype.handleRenderPreviewModal=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("path"),this.renderPreviewModal(e)},e.prototype.handleDuplicateCampaign=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("id"),this.duplicateCampaign(e)},e.prototype.handleTemplatizeCampaign=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("id"),this.templatizeCampaign(e)},e.prototype.handleUnscheduleCampaign=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("id"),this.unscheduleCampaign(e)},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.CampaignCreate=function(){function e(e){this.selectTemplate=t(this.selectTemplate,this),this.clearForm=t(this.clearForm,this),this.setFocus=t(this.setFocus,this),this.handleSubmit=t(this.handleSubmit,this),this.$target=$(e),this.$form=this.$target.find("form#new_campaign"),this.$campaign_name=this.$target.find("input#campaign_name"),this.$template_id_input=this.$target.find('input[name="campaign[template_id]"]'),this.$content_created_via_input=this.$target.find('input[name="campaign[content_source]"]')}return e.prototype.bindEvents=function(){return this.$form.on("submit",this.handleSubmit),this.$target.on("click","img.template-image",this.selectTemplate),this.$target.on("shown.bs.modal",this.setFocus),this.$target.on("hidden.bs.modal",this.clearForm)},e.prototype.handleSubmit=function(t){return t.preventDefault(),""===this.$campaign_name.val()?(this.$campaign_name.addClass("error"),this.$campaign_name.focus()):this.templatesAreInvalid()||this.customHtmlIsInvalid()?Nlvx.FlashMessageHandler.add("danger","Please choose a template or enter custom html."):this.usingTemplateSelectForm()?this.submitForm():(this.updateContentSource("import"),this.submitForm())},e.prototype.setFocus=function(){return this.$campaign_name.focus()},e.prototype.clearForm=function(){return this.$campaign_name.val("").removeClass("error"),$("#campaign_content").val(""),$(".template-image").removeClass("selected-template"),this.$template_id_input.val(""),this.$form.validateForm("check")},e.prototype.submitForm=function(){return this.$form.unbind("submit"),this.$form.submit()},e.prototype.updateContentSource=function(t){return this.$content_created_via_input.val(t)},e.prototype.selectTemplate=function(t){var e;return e=$(t.currentTarget).data("template"),this.$template_id_input.val(e),$(".template-image").removeClass("selected-template"),$("#template_image_"+e).addClass("selected-template")},e.prototype.usingTemplateSelectForm=function(){return this.$target.find(".template-selection").hasClass("active")},e.prototype.templatesAreInvalid=function(){return this.usingTemplateSelectForm()&&""===this.$template_id_input.val()},e.prototype.customHtmlIsInvalid=function(){return!this.usingTemplateSelectForm()&&""===this.$target.find("textarea[name='campaign[content]']").val()},e}()}.call(this),function(){$(document).ready(function(){var t,e,n,i,r,o,a;return t=$("#send-now-container"),e=$("#send-now-trigger"),a=new Nlvx.OnOffSwitch(e),n=$('[name="campaign[scheduled_date]"]'),i=$('[name="campaign[scheduled_time]"]'),r=n.val(),o=i.val(),$(a).on({on:function(){return t.slideUp(300),r=n.val(),o=i.val(),t.find("input[type='text']").val("").trigger("blur")},off:function(){return t.slideDown(300),n.val(r),i.val(o),t.find("input[type='text']").trigger("blur")}}),e.is(":checked")?$(a).trigger("on"):(t.slideDown(0),t.find("input[type='text']").trigger("blur"))})}.call(this),function(){Nlvx.CampaignStatsToggle=function(){function t(t,e){this.$buttonGroup=t,this.$table=e,this.$rawButton=this.$buttonGroup.find("[data-toggle=raw-stats]"),this.$percentageButton=this.$buttonGroup.find("[data-toggle=percentage-stats]"),this.bindEvents(),this.initializeBarChart(),this.showBarChart()}return t.prototype.bindEvents=function(){return this.$buttonGroup.on("click",".btn",function(t){return function(e){var n;return t.$buttonGroup.find(".btn").removeClass("active"),n=$(e.currentTarget),n.addClass("active")}}(this)),this.$rawButton.on("click",function(t){return function(){return t.hideBarChart()}}(this)),this.$percentageButton.on("click",function(t){return function(){return t.showBarChart()}}(this))},t.prototype.initializeBarChart=function(){var t;return t=this.$table.find(".stat"),_.each(t,function(t){return function(e){return t.setStatBarWidth(e)}}(this))},t.prototype.setStatBarWidth=function(t,e){var n,i;return i=parseFloat(e?e:$(t).attr("data-value-percentage")),3>i&&(n="3%"),$(t).find(".stat-bar").css({width:n?n:i+"%"})},t.prototype.showBarChart=function(){return this.$table.removeClass("raw-stats").addClass("percentage-stats")},t.prototype.hideBarChart=function(){return this.$table.removeClass("percentage-stats").addClass("raw-stats")},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.CampaignStatusControls=function(){function e(e,n,i){this._togglePlayPause=t(this._togglePlayPause,this),this._handlePlayPauseClick=t(this._handlePlayPauseClick,this),this._handleCancelConfirmClick=t(this._handleCancelConfirmClick,this),this._handleCancelClick=t(this._handleCancelClick,this),this.$el=$(e),this.$campaignsPath=i,this.$cancelModal=n}return e.prototype.bindEvents=function(){return $("span.blue + span, span.red + span",this.$el).click(this._handlePlayPauseClick),$("span.cancel-button",this.$el).click(this._handleCancelClick),$(".cancel-modal .btn-primary",this.$el).click(this._handleCancelConfirmClick)},e.prototype._handleCancelClick=function(t){var e,n;return e=$(t.currentTarget),n=e.data("campaign-id"),this.$cancelModal.render(n)},e.prototype._handleCancelConfirmClick=function(t){var e,n;return e=$(t.currentTarget).parents(".cancel-modal"),n=e.data("id"),this._isCampaignCancelable(n,function(t){return function(){return t._cancelCampaign(n)}}(this))},e.prototype._cancelCampaign=function(t){return $.ajax({method:"PUT",url:this.$campaignsPath+"/"+t+"/cancel",success:this._updateUIForCancel(t)})},e.prototype._isCampaignCancelable=function(t,e){return $.ajax({method:"GET",url:this.$campaignsPath+"/"+t+"/cancel",success:function(t){return t.cancelable?e():Nlvx.FlashMessageHandler.add("danger","Unfortunately your campaign has already been sent and cannot be canceled.")}})},e.prototype._updateUIForCancel=function(t){return this.$cancelButton=this.$el.find(".cancel-button[data-campaign-id='"+t+"']"),this.$pauseButton=this.$el.find("[data-campaign-id='"+t+"'] div.pause"),this.$pickWinnerBadge=this.$el.find(".red-orange[data-campaign-id='"+t+"']"),this.$statusSpan=this.$cancelButton.siblings().first(),this.$statusSpan.removeClass("blue").addClass("red").text("CANCELED"),this.$statusSpan.css("margin-right","10px"),this.$pauseButton.remove(),this.$cancelButton.remove(),this.$pickWinnerBadge.remove()},e.prototype._handlePlayPauseClick=function(t){var e,n;return e=$(t.currentTarget),n=e.data("campaign-id"),this._togglePlayPause(e,n)},e.prototype._togglePlayPause=function(t,e){return this.$button=t.find("div"),this.$statusSpan=t.siblings().first(),this.$button.hasClass("pause")?this._pauseCampaign(e,function(t){return function(){return t.$button.removeClass("pause").addClass("play"),t.$statusSpan.removeClass("blue").addClass("red").text("PAUSED")}}(this)):this.$button.hasClass("play")?this._resumeCampaign(e,function(t){return function(){return t.$button.removeClass("play").addClass("pause"),t.$statusSpan.removeClass("red").addClass("blue").text("IN PROGRESS")}}(this)):void 0},e.prototype._pauseCampaign=function(t,e){return $.ajax({method:"PUT",url:this.$campaignsPath+"/"+t+"/pause",success:e})},e.prototype._resumeCampaign=function(t,e){return $.ajax({method:"PUT",url:this.$campaignsPath+"/"+t+"/resume",success:e})},e}()}.call(this),function(){Nlvx.CancelModal=function(){function t(t){e=$(t)}var e;return e=null,t.prototype.render=function(t){return $(".modal").modal("hide"),e.find(".cancel-modal[data-id='"+t+"']").modal({show:!0,backdrop:"static"}),$(".modal-backdrop").remove()},t}()}.call(this),function(){Nlvx.DeleteModal=function(){function t(t){e=$(t)}var e;return e=null,t.prototype.render=function(t){return $(".modal").modal("hide"),e.find(".delete-modal[data-id='"+t+"']").modal({show:!0,backdrop:"static"}),$(".modal-backdrop").remove()},t}()}.call(this),function(){var t;t=window.jQuery||window.Zepto||window.$,t.fn.fancySelect=function(e){var n,i;return null==e&&(e={}),i=t.extend({forceiOS:!1,includeBlank:!1},e),n=!!navigator.userAgent.match(/iP(hone|od|ad)/i),this.each(function(){var e,r,o,a,s,l,u;return a=t(this),a.hasClass("fancified")||"SELECT"!==a[0].tagName?void 0:(a.addClass("fancified"),a.css({width:1,height:1,display:"block",position:"absolute",top:0,left:0,opacity:0}),a.wrap('<div class="fancy-select">'),u=a.parent(),a.data("class")&&u.addClass(a.data("class")),u.append('<div class="trigger">'),(!n||i.forceiOS)&&u.append('<ul class="options">'),s=u.find(".trigger"),o=u.find(".options"),r=a.prop("disabled"),r&&u.addClass("disabled"),l=function(){return s.html("Select Sender"===a.find(":selected").text()?"<span>"+a.find(":selected").text()+"</span>":"<span class='select-pill'>"+a.find(":selected").text()+" <i class='icon-close-circle'></i></span>")},a.on("blur",function(){return s.hasClass("open")?setTimeout(function(){return s.trigger("close")},120):void 0}),s.on("close",function(){return s.removeClass("open"),o.removeClass("open")}),s.on("click",function(){var e,l;if(!r)if(s.toggleClass("open"),n&&!i.forceiOS){if(s.hasClass("open"))return a.focus()}else if(s.hasClass("open")&&(l=s.parent(),e=l.offsetParent(),l.offset().top+l.outerHeight()+o.outerHeight()+20>t(window).height()+t(window).scrollTop()?o.addClass("overflowing"):o.removeClass("overflowing")),o.toggleClass("open"),!n)return a.focus()}),a.on("enable",function(){return a.prop("disabled",!1),u.removeClass("disabled"),r=!1,e()}),a.on("disable",function(){return a.prop("disabled",!0),u.addClass("disabled"),r=!0}),a.on("change",function(t){return t.originalEvent&&t.originalEvent.isTrusted?t.stopPropagation():l()}),a.on("keydown",function(t){var e,n,i;if(i=t.which,e=o.find(".hover"),e.removeClass("hover"),o.hasClass("open")){if(38===i?(t.preventDefault(),e.length&&e.index()>0?e.prev().addClass("hover"):o.find("li:last-child").addClass("hover")):40===i?(t.preventDefault(),e.length&&e.index()<o.find("li").length-1?e.next().addClass("hover"):o.find("li:first-child").addClass("hover")):27===i?(t.preventDefault(),s.trigger("click")):13===i||32===i?(t.preventDefault(),e.trigger("click")):9===i&&s.hasClass("open")&&s.trigger("close"),n=o.find(".hover"),n.length)return o.scrollTop(0),o.scrollTop(n.position().top-12)}else if(13===i||32===i||38===i||40===i)return t.preventDefault(),s.trigger("click")}),o.on("click","li",function(e){return a.val(t(this).data("value")),n||a.trigger("blur").trigger("focus"),o.find(".selected").removeClass("selected"),t(e.currentTarget).addClass("selected"),a.val(t(this).data("value")).trigger("change").trigger("blur").trigger("focus")}),o.on("mouseenter","li",function(){var e,n;return n=t(this),e=o.find(".hover"),e.removeClass("hover"),n.addClass("hover")}),o.on("mouseleave","li",function(){return o.find(".hover").removeClass("hover")}),e=function(){var e;return l(),!n||i.forceiOS?(e=a.find("option"),a.find("option").each(function(e,n){return n=t(n),n.prop("disabled")||!n.val()&&!i.includeBlank?void 0:o.append(n.prop("selected")?'<li data-value="'+n.val()+'" class="selected">'+n.text()+" </li>":'<li data-value="'+n.val()+'">'+n.text()+" </li>")})):void 0},a.on("update",function(){return u.find(".options").empty(),e()}),e())})}}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Nlvx.HtmlModeToggleModal=function(t){function n(t,e,i,r,o,a){n.__super__.constructor.call(this,t,e,i,r,o,a)}return e(n,t),n.prototype.onTrigger=function(t){return t.preventDefault(),$(this.$trigger).not(".active").length?this.show():void 0},n}(Nlvx.BaseModal)}.call(this),function(){Nlvx.LinkStatsChart=function(){function t(t,e){this.$container=t,this.pageSize=e,this.template=Handlebars.compile(i),this.statDisplayType="raw"}var e,n,i;return t.prototype.setPage=function(t,e){return this.fadeOut(),this.pageNum=t,this.$container.html(this.getHTML(e)),this.fadeIn()},t.prototype.getHTML=function(t){return this.template({items:t.slice((this.pageNum-1)*this.pageSize,this.pageNum*this.pageSize),firstIndex:(this.pageNum-1)*this.pageSize+1,totalClicks:t.reduce(function(t,e){return t+e.clicks},0),statDisplayClass:this.statDisplayType+"-stat"})},t.prototype.setEmptyChart=function(){return this.fadeOut(),this.$container.html(e),this.fadeIn()},t.prototype.setLoadingChart=function(){return this.fadeOut(),this.$container.html(n),this.fadeIn()},t.prototype.showStatsAs=function(t){return this.statDisplayType=t,this.$container.find("table").removeClass("raw-stat percentage-stat").addClass(t+"-stat")},t.prototype.fadeOut=function(){return this.$container.find(".links-stat-data-item").removeClass("in")},t.prototype.fadeIn=function(){return window.getComputedStyle(this.$container[0]).opacity,this.$container.find(".links-stat-data-item").addClass("in")},Handlebars.registerHelper("increment",function(t,e){return parseInt(t)+e}),Handlebars.registerHelper("toInt",function(t){return parseInt(t)}),Handlebars.registerHelper("toPercentage",function(t,e){return""+(100*t/e).toFixed(2)+"%"}),i='<div>\n  <table class="table-wrap is-striped is-thin {{statDisplayClass}}">\n    <thead>\n      <tr>\n        <th class="shrink-to-fit">rank</th>\n        <th>link (url)</th>\n        <th>total clicks</th>\n      </tr>\n    </thead>\n    <tbody>\n      {{#each items}}\n        <tr>\n          <td class="label-names links-stat-badge links-stat-data-item">\n            <span class="percentage-display-table badges gray">{{increment @index ../firstIndex}}</span>\n          </td>\n          <td class="links-stat-url links-stat-data-item">\n            <a href="{{this.url}}">{{this.url}}</a>\n          </td>\n          <td class="stat links-stat-value links-stat-data-item"\n              data-value-raw="{{toInt this.clicks}}"\n              data-value-percentage="{{toPercentage this.clicks ../totalClicks}}">\n          </td>\n        </tr>\n      {{/each}}\n      <tr>\n        <td></td>\n        <td class="semibold">TOTAL</td>\n        <td class="stat links-stat-value">{{toInt totalClicks}}</td>\n      </tr>\n    </tbody>\n  </table>\n</div>',n='<div class="loading-icon" style="top: 0; position: relative;">\n  <div class="outer" />\n  <div class="inner" />\n</div>',e="<div>There are no stats for this tab currently.</div>",t}()}.call(this);